function WA(r,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const u=Object.getOwnPropertyDescriptor(s,o);u&&Object.defineProperty(r,o,u.get?u:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function YA(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var xm={exports:{}},lu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J_;function XA(){if(J_)return lu;J_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:h,ref:o!==void 0?o:null,props:u}}return lu.Fragment=e,lu.jsx=n,lu.jsxs=n,lu}var e0;function $A(){return e0||(e0=1,xm.exports=XA()),xm.exports}var v=$A(),Rm={exports:{}},Oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0;function ZA(){if(t0)return Oe;t0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),S=Symbol.iterator;function x(N){return N===null||typeof N!="object"?null:(N=S&&N[S]||N["@@iterator"],typeof N=="function"?N:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,Y={};function k(N,ie,de){this.props=N,this.context=ie,this.refs=Y,this.updater=de||U}k.prototype.isReactComponent={},k.prototype.setState=function(N,ie){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,ie,"setState")},k.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function Z(){}Z.prototype=k.prototype;function K(N,ie,de){this.props=N,this.context=ie,this.refs=Y,this.updater=de||U}var X=K.prototype=new Z;X.constructor=K,q(X,k.prototype),X.isPureReactComponent=!0;var oe=Array.isArray,se={H:null,A:null,T:null,S:null,V:null},ge=Object.prototype.hasOwnProperty;function R(N,ie,de,ce,ve,Me){return de=Me.ref,{$$typeof:r,type:N,key:ie,ref:de!==void 0?de:null,props:Me}}function w(N,ie){return R(N.type,ie,void 0,void 0,void 0,N.props)}function C(N){return typeof N=="object"&&N!==null&&N.$$typeof===r}function P(N){var ie={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(de){return ie[de]})}var M=/\/+/g;function O(N,ie){return typeof N=="object"&&N!==null&&N.key!=null?P(""+N.key):ie.toString(36)}function I(){}function ue(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(I,I):(N.status="pending",N.then(function(ie){N.status==="pending"&&(N.status="fulfilled",N.value=ie)},function(ie){N.status==="pending"&&(N.status="rejected",N.reason=ie)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function ye(N,ie,de,ce,ve){var Me=typeof N;(Me==="undefined"||Me==="boolean")&&(N=null);var Se=!1;if(N===null)Se=!0;else switch(Me){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(N.$$typeof){case r:case e:Se=!0;break;case b:return Se=N._init,ye(Se(N._payload),ie,de,ce,ve)}}if(Se)return ve=ve(N),Se=ce===""?"."+O(N,0):ce,oe(ve)?(de="",Se!=null&&(de=Se.replace(M,"$&/")+"/"),ye(ve,ie,de,"",function(Tn){return Tn})):ve!=null&&(C(ve)&&(ve=w(ve,de+(ve.key==null||N&&N.key===ve.key?"":(""+ve.key).replace(M,"$&/")+"/")+Se)),ie.push(ve)),1;Se=0;var Ut=ce===""?".":ce+":";if(oe(N))for(var Ge=0;Ge<N.length;Ge++)ce=N[Ge],Me=Ut+O(ce,Ge),Se+=ye(ce,ie,de,Me,ve);else if(Ge=x(N),typeof Ge=="function")for(N=Ge.call(N),Ge=0;!(ce=N.next()).done;)ce=ce.value,Me=Ut+O(ce,Ge++),Se+=ye(ce,ie,de,Me,ve);else if(Me==="object"){if(typeof N.then=="function")return ye(ue(N),ie,de,ce,ve);throw ie=String(N),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Se}function Q(N,ie,de){if(N==null)return N;var ce=[],ve=0;return ye(N,ce,"","",function(Me){return ie.call(de,Me,ve++)}),ce}function ae(N){if(N._status===-1){var ie=N._result;ie=ie(),ie.then(function(de){(N._status===0||N._status===-1)&&(N._status=1,N._result=de)},function(de){(N._status===0||N._status===-1)&&(N._status=2,N._result=de)}),N._status===-1&&(N._status=0,N._result=ie)}if(N._status===1)return N._result.default;throw N._result}var fe=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function Ne(){}return Oe.Children={map:Q,forEach:function(N,ie,de){Q(N,function(){ie.apply(this,arguments)},de)},count:function(N){var ie=0;return Q(N,function(){ie++}),ie},toArray:function(N){return Q(N,function(ie){return ie})||[]},only:function(N){if(!C(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Oe.Component=k,Oe.Fragment=n,Oe.Profiler=o,Oe.PureComponent=K,Oe.StrictMode=s,Oe.Suspense=p,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=se,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(N){return se.H.useMemoCache(N)}},Oe.cache=function(N){return function(){return N.apply(null,arguments)}},Oe.cloneElement=function(N,ie,de){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var ce=q({},N.props),ve=N.key,Me=void 0;if(ie!=null)for(Se in ie.ref!==void 0&&(Me=void 0),ie.key!==void 0&&(ve=""+ie.key),ie)!ge.call(ie,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&ie.ref===void 0||(ce[Se]=ie[Se]);var Se=arguments.length-2;if(Se===1)ce.children=de;else if(1<Se){for(var Ut=Array(Se),Ge=0;Ge<Se;Ge++)Ut[Ge]=arguments[Ge+2];ce.children=Ut}return R(N.type,ve,void 0,void 0,Me,ce)},Oe.createContext=function(N){return N={$$typeof:h,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:u,_context:N},N},Oe.createElement=function(N,ie,de){var ce,ve={},Me=null;if(ie!=null)for(ce in ie.key!==void 0&&(Me=""+ie.key),ie)ge.call(ie,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(ve[ce]=ie[ce]);var Se=arguments.length-2;if(Se===1)ve.children=de;else if(1<Se){for(var Ut=Array(Se),Ge=0;Ge<Se;Ge++)Ut[Ge]=arguments[Ge+2];ve.children=Ut}if(N&&N.defaultProps)for(ce in Se=N.defaultProps,Se)ve[ce]===void 0&&(ve[ce]=Se[ce]);return R(N,Me,void 0,void 0,null,ve)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(N){return{$$typeof:m,render:N}},Oe.isValidElement=C,Oe.lazy=function(N){return{$$typeof:b,_payload:{_status:-1,_result:N},_init:ae}},Oe.memo=function(N,ie){return{$$typeof:g,type:N,compare:ie===void 0?null:ie}},Oe.startTransition=function(N){var ie=se.T,de={};se.T=de;try{var ce=N(),ve=se.S;ve!==null&&ve(de,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(Ne,fe)}catch(Me){fe(Me)}finally{se.T=ie}},Oe.unstable_useCacheRefresh=function(){return se.H.useCacheRefresh()},Oe.use=function(N){return se.H.use(N)},Oe.useActionState=function(N,ie,de){return se.H.useActionState(N,ie,de)},Oe.useCallback=function(N,ie){return se.H.useCallback(N,ie)},Oe.useContext=function(N){return se.H.useContext(N)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(N,ie){return se.H.useDeferredValue(N,ie)},Oe.useEffect=function(N,ie,de){var ce=se.H;if(typeof de=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ce.useEffect(N,ie)},Oe.useId=function(){return se.H.useId()},Oe.useImperativeHandle=function(N,ie,de){return se.H.useImperativeHandle(N,ie,de)},Oe.useInsertionEffect=function(N,ie){return se.H.useInsertionEffect(N,ie)},Oe.useLayoutEffect=function(N,ie){return se.H.useLayoutEffect(N,ie)},Oe.useMemo=function(N,ie){return se.H.useMemo(N,ie)},Oe.useOptimistic=function(N,ie){return se.H.useOptimistic(N,ie)},Oe.useReducer=function(N,ie,de){return se.H.useReducer(N,ie,de)},Oe.useRef=function(N){return se.H.useRef(N)},Oe.useState=function(N){return se.H.useState(N)},Oe.useSyncExternalStore=function(N,ie,de){return se.H.useSyncExternalStore(N,ie,de)},Oe.useTransition=function(){return se.H.useTransition()},Oe.version="19.1.0",Oe}var n0;function Dp(){return n0||(n0=1,Rm.exports=ZA()),Rm.exports}var j=Dp();const _r=YA(j),JA=WA({__proto__:null,default:_r},[j]);var Cm={exports:{}},uu={},Im={exports:{}},Dm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r0;function ew(){return r0||(r0=1,function(r){function e(Q,ae){var fe=Q.length;Q.push(ae);e:for(;0<fe;){var Ne=fe-1>>>1,N=Q[Ne];if(0<o(N,ae))Q[Ne]=ae,Q[fe]=N,fe=Ne;else break e}}function n(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var ae=Q[0],fe=Q.pop();if(fe!==ae){Q[0]=fe;e:for(var Ne=0,N=Q.length,ie=N>>>1;Ne<ie;){var de=2*(Ne+1)-1,ce=Q[de],ve=de+1,Me=Q[ve];if(0>o(ce,fe))ve<N&&0>o(Me,ce)?(Q[Ne]=Me,Q[ve]=fe,Ne=ve):(Q[Ne]=ce,Q[de]=fe,Ne=de);else if(ve<N&&0>o(Me,fe))Q[Ne]=Me,Q[ve]=fe,Ne=ve;else break e}}return ae}function o(Q,ae){var fe=Q.sortIndex-ae.sortIndex;return fe!==0?fe:Q.id-ae.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var p=[],g=[],b=1,S=null,x=3,U=!1,q=!1,Y=!1,k=!1,Z=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function oe(Q){for(var ae=n(g);ae!==null;){if(ae.callback===null)s(g);else if(ae.startTime<=Q)s(g),ae.sortIndex=ae.expirationTime,e(p,ae);else break;ae=n(g)}}function se(Q){if(Y=!1,oe(Q),!q)if(n(p)!==null)q=!0,ge||(ge=!0,O());else{var ae=n(g);ae!==null&&ye(se,ae.startTime-Q)}}var ge=!1,R=-1,w=5,C=-1;function P(){return k?!0:!(r.unstable_now()-C<w)}function M(){if(k=!1,ge){var Q=r.unstable_now();C=Q;var ae=!0;try{e:{q=!1,Y&&(Y=!1,K(R),R=-1),U=!0;var fe=x;try{t:{for(oe(Q),S=n(p);S!==null&&!(S.expirationTime>Q&&P());){var Ne=S.callback;if(typeof Ne=="function"){S.callback=null,x=S.priorityLevel;var N=Ne(S.expirationTime<=Q);if(Q=r.unstable_now(),typeof N=="function"){S.callback=N,oe(Q),ae=!0;break t}S===n(p)&&s(p),oe(Q)}else s(p);S=n(p)}if(S!==null)ae=!0;else{var ie=n(g);ie!==null&&ye(se,ie.startTime-Q),ae=!1}}break e}finally{S=null,x=fe,U=!1}ae=void 0}}finally{ae?O():ge=!1}}}var O;if(typeof X=="function")O=function(){X(M)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,ue=I.port2;I.port1.onmessage=M,O=function(){ue.postMessage(null)}}else O=function(){Z(M,0)};function ye(Q,ae){R=Z(function(){Q(r.unstable_now())},ae)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Q){Q.callback=null},r.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<Q?Math.floor(1e3/Q):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_next=function(Q){switch(x){case 1:case 2:case 3:var ae=3;break;default:ae=x}var fe=x;x=ae;try{return Q()}finally{x=fe}},r.unstable_requestPaint=function(){k=!0},r.unstable_runWithPriority=function(Q,ae){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var fe=x;x=Q;try{return ae()}finally{x=fe}},r.unstable_scheduleCallback=function(Q,ae,fe){var Ne=r.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Ne+fe:Ne):fe=Ne,Q){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=fe+N,Q={id:b++,callback:ae,priorityLevel:Q,startTime:fe,expirationTime:N,sortIndex:-1},fe>Ne?(Q.sortIndex=fe,e(g,Q),n(p)===null&&Q===n(g)&&(Y?(K(R),R=-1):Y=!0,ye(se,fe-Ne))):(Q.sortIndex=N,e(p,Q),q||U||(q=!0,ge||(ge=!0,O()))),Q},r.unstable_shouldYield=P,r.unstable_wrapCallback=function(Q){var ae=x;return function(){var fe=x;x=ae;try{return Q.apply(this,arguments)}finally{x=fe}}}}(Dm)),Dm}var i0;function tw(){return i0||(i0=1,Im.exports=ew()),Im.exports}var Nm={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s0;function nw(){if(s0)return cn;s0=1;var r=Dp();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,b){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:p,containerInfo:g,implementation:b}}var h=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,cn.createPortal=function(p,g){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,b)},cn.flushSync=function(p){var g=h.T,b=s.p;try{if(h.T=null,s.p=2,p)return p()}finally{h.T=g,s.p=b,s.d.f()}},cn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},cn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},cn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var b=g.as,S=m(b,g.crossOrigin),x=typeof g.integrity=="string"?g.integrity:void 0,U=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;b==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:S,integrity:x,fetchPriority:U}):b==="script"&&s.d.X(p,{crossOrigin:S,integrity:x,fetchPriority:U,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},cn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var b=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},cn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var b=g.as,S=m(b,g.crossOrigin);s.d.L(p,b,{crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},cn.preloadModule=function(p,g){if(typeof p=="string")if(g){var b=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},cn.requestFormReset=function(p){s.d.r(p)},cn.unstable_batchedUpdates=function(p,g){return p(g)},cn.useFormState=function(p,g,b){return h.H.useFormState(p,g,b)},cn.useFormStatus=function(){return h.H.useHostTransitionStatus()},cn.version="19.1.0",cn}var a0;function db(){if(a0)return Nm.exports;a0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Nm.exports=nw(),Nm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o0;function rw(){if(o0)return uu;o0=1;var r=tw(),e=Dp(),n=db();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function h(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function p(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return m(d),t;if(f===l)return m(d),i;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=d,l=f;else{for(var E=!1,T=d.child;T;){if(T===a){E=!0,a=d,l=f;break}if(T===l){E=!0,l=d,a=f;break}T=T.sibling}if(!E){for(T=f.child;T;){if(T===a){E=!0,a=f,l=d;break}if(T===l){E=!0,l=f,a=d;break}T=T.sibling}if(!E)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function g(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=g(t),i!==null)return i;t=t.sibling}return null}var b=Object.assign,S=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),Z=Symbol.for("react.provider"),K=Symbol.for("react.consumer"),X=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function O(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function ue(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case q:return"Fragment";case k:return"Profiler";case Y:return"StrictMode";case se:return"Suspense";case ge:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case U:return"Portal";case X:return(t.displayName||"Context")+".Provider";case K:return(t._context.displayName||"Context")+".Consumer";case oe:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return i=t.displayName||null,i!==null?i:ue(t.type)||"Memo";case w:i=t._payload,t=t._init;try{return ue(t(i))}catch{}}return null}var ye=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},Ne=[],N=-1;function ie(t){return{current:t}}function de(t){0>N||(t.current=Ne[N],Ne[N]=null,N--)}function ce(t,i){N++,Ne[N]=t.current,t.current=i}var ve=ie(null),Me=ie(null),Se=ie(null),Ut=ie(null);function Ge(t,i){switch(ce(Se,i),ce(Me,t),ce(ve,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?R_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=R_(i),t=C_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}de(ve),ce(ve,t)}function Tn(){de(ve),de(Me),de(Se)}function Oi(t){t.memoizedState!==null&&ce(Ut,t);var i=ve.current,a=C_(i,t.type);i!==a&&(ce(Me,t),ce(ve,a))}function $r(t){Me.current===t&&(de(ve),de(Me)),Ut.current===t&&(de(Ut),ru._currentValue=fe)}var Zr=Object.prototype.hasOwnProperty,kn=r.unstable_scheduleCallback,lr=r.unstable_cancelCallback,Qa=r.unstable_shouldYield,ki=r.unstable_requestPaint,an=r.unstable_now,Mi=r.unstable_getCurrentPriorityLevel,vt=r.unstable_ImmediatePriority,At=r.unstable_UserBlockingPriority,Mn=r.unstable_NormalPriority,Wa=r.unstable_LowPriority,Vi=r.unstable_IdlePriority,Ar=r.log,Yn=r.unstable_setDisableYieldValue,ur=null,Ft=null;function gn(t){if(typeof Ar=="function"&&Yn(t),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(ur,t)}catch{}}var Nt=Math.clz32?Math.clz32:Hs,Fs=Math.log,Ya=Math.LN2;function Hs(t){return t>>>=0,t===0?32:31-(Fs(t)/Ya|0)|0}var Xt=256,Xn=4194304;function Vn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Sn(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var d=0,f=t.suspendedLanes,E=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~f,l!==0?d=Vn(l):(E&=T,E!==0?d=Vn(E):a||(a=T&~t,a!==0&&(d=Vn(a))))):(T=l&~f,T!==0?d=Vn(T):E!==0?d=Vn(E):a||(a=l&~t,a!==0&&(d=Vn(a)))),d===0?0:i!==0&&i!==d&&(i&f)===0&&(f=d&-d,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:d}function wr(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Jr(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gs(){var t=Xt;return Xt<<=1,(Xt&4194048)===0&&(Xt=256),t}function $(){var t=Xn;return Xn<<=1,(Xn&62914560)===0&&(Xn=4194304),t}function _e(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Je(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ye(t,i,a,l,d,f){var E=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,D=t.expirationTimes,F=t.hiddenUpdates;for(a=E&~a;0<a;){var J=31-Nt(a),ne=1<<J;T[J]=0,D[J]=-1;var H=F[J];if(H!==null)for(F[J]=null,J=0;J<H.length;J++){var G=H[J];G!==null&&(G.lane&=-536870913)}a&=~ne}l!==0&&xr(t,l,0),f!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=f&~(E&~i))}function xr(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Nt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Rr(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-Nt(a),d=1<<l;d&i|t[l]&i&&(t[l]|=i),a&=~d}}function Ks(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Be(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function $t(){var t=ae.p;return t!==0?t:(t=window.event,t===void 0?32:Q_(t.type))}function ol(t,i){var a=ae.p;try{return ae.p=t,i()}finally{ae.p=a}}var on=Math.random().toString(36).slice(2),wt="__reactFiber$"+on,Zt="__reactProps$"+on,ei="__reactContainer$"+on,Qs="__reactEvents$"+on,Ws="__reactListeners$"+on,Nd="__reactHandles$"+on,cr="__reactResources$"+on,Pi="__reactMarker$"+on;function Xa(t){delete t[wt],delete t[Zt],delete t[Qs],delete t[Ws],delete t[Nd]}function Cr(t){var i=t[wt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[ei]||a[wt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=O_(t);t!==null;){if(a=t[wt])return a;t=O_(t)}return i}t=a,a=t.parentNode}return null}function Ir(t){if(t=t[wt]||t[ei]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function ji(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function Ui(t){var i=t[cr];return i||(i=t[cr]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function xt(t){t[Pi]=!0}var ec=new Set,Ys={};function Dr(t,i){Nr(t,i),Nr(t+"Capture",i)}function Nr(t,i){for(Ys[t]=i,t=0;t<i.length;t++)ec.add(i[t])}var Xs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Or={},$a={};function Od(t){return Zr.call($a,t)?!0:Zr.call(Or,t)?!1:Xs.test(t)?$a[t]=!0:(Or[t]=!0,!1)}function $s(t,i,a){if(Od(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function Zs(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function $n(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}var Js,Za;function ti(t){if(Js===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Js=i&&i[1]||"",Za=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Js+t+Za}var Ja=!1;function eo(t,i){if(!t||Ja)return"";Ja=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(G){var H=G}Reflect.construct(t,[],ne)}else{try{ne.call()}catch(G){H=G}t.call(ne.prototype)}}else{try{throw Error()}catch(G){H=G}(ne=t())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(G){if(G&&H&&typeof G.stack=="string")return[G.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),E=f[0],T=f[1];if(E&&T){var D=E.split(`
`),F=T.split(`
`);for(d=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;d<F.length&&!F[d].includes("DetermineComponentFrameRoot");)d++;if(l===D.length||d===F.length)for(l=D.length-1,d=F.length-1;1<=l&&0<=d&&D[l]!==F[d];)d--;for(;1<=l&&0<=d;l--,d--)if(D[l]!==F[d]){if(l!==1||d!==1)do if(l--,d--,0>d||D[l]!==F[d]){var J=`
`+D[l].replace(" at new "," at ");return t.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",t.displayName)),J}while(1<=l&&0<=d);break}}}finally{Ja=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ti(a):""}function kd(t){switch(t.tag){case 26:case 27:case 5:return ti(t.type);case 16:return ti("Lazy");case 13:return ti("Suspense");case 19:return ti("SuspenseList");case 0:case 15:return eo(t.type,!1);case 11:return eo(t.type.render,!1);case 1:return eo(t.type,!0);case 31:return ti("Activity");default:return""}}function hr(t){try{var i="";do i+=kd(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function mt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Li(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ea(t){var i=Li(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,f=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return d.call(this)},set:function(E){l=""+E,f.call(this,E)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function zi(t){t._valueTracker||(t._valueTracker=ea(t))}function et(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Li(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function ni(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ta=/[\n"\\]/g;function Ht(t){return t.replace(ta,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ll(t,i,a,l,d,f,E,T){t.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.type=E:t.removeAttribute("type"),i!=null?E==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+mt(i)):t.value!==""+mt(i)&&(t.value=""+mt(i)):E!=="submit"&&E!=="reset"||t.removeAttribute("value"),i!=null?cl(t,E,mt(i)):a!=null?cl(t,E,mt(a)):l!=null&&t.removeAttribute("value"),d==null&&f!=null&&(t.defaultChecked=!!f),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+mt(T):t.removeAttribute("name")}function ul(t,i,a,l,d,f,E,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null))return;a=a!=null?""+mt(a):"",i=i!=null?""+mt(i):a,T||i===t.value||(t.value=i),t.defaultValue=i}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(t.name=E)}function cl(t,i,a){i==="number"&&ni(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Bi(t,i,a,l){if(t=t.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=i.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&l&&(t[a].defaultSelected=!0)}else{for(a=""+mt(a),i=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,l&&(t[d].defaultSelected=!0);return}i!==null||t[d].disabled||(i=t[d])}i!==null&&(i.selected=!0)}}function tc(t,i,a){if(i!=null&&(i=""+mt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+mt(a):""}function nc(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(ye(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=mt(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Zn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var ri=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hl(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||ri.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function dl(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var d in i)l=i[d],i.hasOwnProperty(d)&&a[d]!==l&&hl(t,d,l)}else for(var f in i)i.hasOwnProperty(f)&&hl(t,f,i[f])}function to(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ic=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function dr(t){return ic.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var fl=null;function ml(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qi=null,yn=null;function sc(t){var i=Ir(t);if(i&&(t=i.stateNode)){var a=t[Zt]||null;e:switch(t=i.stateNode,i.type){case"input":if(ll(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ht(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var d=l[Zt]||null;if(!d)throw Error(s(90));ll(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&et(l)}break e;case"textarea":tc(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Bi(t,!!a.multiple,i,!1)}}}var na=!1;function ra(t,i,a){if(na)return t(i,a);na=!0;try{var l=t(i);return l}finally{if(na=!1,(qi!==null||yn!==null)&&(Wc(),qi&&(i=qi,t=yn,yn=qi=null,sc(i),t)))for(i=0;i<t.length;i++)sc(t[i])}}function Fi(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Zt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ii=!1;if(vn)try{var Hi={};Object.defineProperty(Hi,"passive",{get:function(){ii=!0}}),window.addEventListener("test",Hi,Hi),window.removeEventListener("test",Hi,Hi)}catch{ii=!1}var Jn=null,st=null,no=null;function ac(){if(no)return no;var t,i=st,a=i.length,l,d="value"in Jn?Jn.value:Jn.textContent,f=d.length;for(t=0;t<a&&i[t]===d[t];t++);var E=a-t;for(l=1;l<=E&&i[a-l]===d[f-l];l++);return no=d.slice(t,1<l?1-l:void 0)}function ia(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function sa(){return!0}function pl(){return!1}function Lt(t){function i(a,l,d,f,E){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=E,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?sa:pl,this.isPropagationStopped=pl,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=sa)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=sa)},persist:function(){},isPersistent:sa}),i}var ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},aa=Lt(ln),oa=b({},ln,{view:0,detail:0}),la=Lt(oa),ro,ua,kr,ca=b({},oa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ao,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==kr&&(kr&&t.type==="mousemove"?(ro=t.screenX-kr.screenX,ua=t.screenY-kr.screenY):ua=ro=0,kr=t),ro)},movementY:function(t){return"movementY"in t?t.movementY:ua}}),ha=Lt(ca),Md=b({},ca,{dataTransfer:0}),oc=Lt(Md),da=b({},oa,{relatedTarget:0}),io=Lt(da),lc=b({},ln,{animationName:0,elapsedTime:0,pseudoElement:0}),gl=Lt(lc),yl=b({},ln,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),uc=Lt(yl),so=b({},ln,{data:0}),vl=Lt(so),cc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},si={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dc(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=hc[t])?!!i[t]:!1}function ao(){return dc}var fc=b({},oa,{key:function(t){if(t.key){var i=cc[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=ia(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?si[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ao,charCode:function(t){return t.type==="keypress"?ia(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ia(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),oo=Lt(fc),_n=b({},ca,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_l=Lt(_n),mc=b({},oa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ao}),Gi=Lt(mc),c=b({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0}),y=Lt(c),_=b({},ca,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),A=Lt(_),B=b({},ln,{newState:0,oldState:0}),W=Lt(B),le=[9,13,27,32],Ie=vn&&"CompositionEvent"in window,ht=null;vn&&"documentMode"in document&&(ht=document.documentMode);var Xe=vn&&"TextEvent"in window&&!ht,Rt=vn&&(!Ie||ht&&8<ht&&11>=ht),Pn=" ",Mr=!1;function fr(t,i){switch(t){case"keyup":return le.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mr(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pr=!1;function El(t,i){switch(t){case"compositionend":return mr(i);case"keypress":return i.which!==32?null:(Mr=!0,Pn);case"textInput":return t=i.data,t===Pn&&Mr?null:t;default:return null}}function b1(t,i){if(pr)return t==="compositionend"||!Ie&&fr(t,i)?(t=ac(),no=st=Jn=null,pr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Rt&&i.locale!=="ko"?null:i.data;default:return null}}var T1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bg(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!T1[t.type]:i==="textarea"}function qg(t,i,a,l){qi?yn?yn.push(l):yn=[l]:qi=l,i=eh(i,"onChange"),0<i.length&&(a=new aa("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var bl=null,Tl=null;function S1(t){T_(t,0)}function pc(t){var i=ji(t);if(et(i))return t}function Fg(t,i){if(t==="change")return i}var Hg=!1;if(vn){var Vd;if(vn){var Pd="oninput"in document;if(!Pd){var Gg=document.createElement("div");Gg.setAttribute("oninput","return;"),Pd=typeof Gg.oninput=="function"}Vd=Pd}else Vd=!1;Hg=Vd&&(!document.documentMode||9<document.documentMode)}function Kg(){bl&&(bl.detachEvent("onpropertychange",Qg),Tl=bl=null)}function Qg(t){if(t.propertyName==="value"&&pc(Tl)){var i=[];qg(i,Tl,t,ml(t)),ra(S1,i)}}function A1(t,i,a){t==="focusin"?(Kg(),bl=i,Tl=a,bl.attachEvent("onpropertychange",Qg)):t==="focusout"&&Kg()}function w1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pc(Tl)}function x1(t,i){if(t==="click")return pc(i)}function R1(t,i){if(t==="input"||t==="change")return pc(i)}function C1(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var jn=typeof Object.is=="function"?Object.is:C1;function Sl(t,i){if(jn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!Zr.call(i,d)||!jn(t[d],i[d]))return!1}return!0}function Wg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yg(t,i){var a=Wg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Wg(a)}}function Xg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Xg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function $g(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=ni(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=ni(t.document)}return i}function jd(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var I1=vn&&"documentMode"in document&&11>=document.documentMode,lo=null,Ud=null,Al=null,Ld=!1;function Zg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ld||lo==null||lo!==ni(l)||(l=lo,"selectionStart"in l&&jd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Al&&Sl(Al,l)||(Al=l,l=eh(Ud,"onSelect"),0<l.length&&(i=new aa("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=lo)))}function fa(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var uo={animationend:fa("Animation","AnimationEnd"),animationiteration:fa("Animation","AnimationIteration"),animationstart:fa("Animation","AnimationStart"),transitionrun:fa("Transition","TransitionRun"),transitionstart:fa("Transition","TransitionStart"),transitioncancel:fa("Transition","TransitionCancel"),transitionend:fa("Transition","TransitionEnd")},zd={},Jg={};vn&&(Jg=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function ma(t){if(zd[t])return zd[t];if(!uo[t])return t;var i=uo[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Jg)return zd[t]=i[a];return t}var ey=ma("animationend"),ty=ma("animationiteration"),ny=ma("animationstart"),D1=ma("transitionrun"),N1=ma("transitionstart"),O1=ma("transitioncancel"),ry=ma("transitionend"),iy=new Map,Bd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bd.push("scrollEnd");function gr(t,i){iy.set(t,i),Dr(i,[t])}var sy=new WeakMap;function er(t,i){if(typeof t=="object"&&t!==null){var a=sy.get(t);return a!==void 0?a:(i={value:t,source:i,stack:hr(i)},sy.set(t,i),i)}return{value:t,source:i,stack:hr(i)}}var tr=[],co=0,qd=0;function gc(){for(var t=co,i=qd=co=0;i<t;){var a=tr[i];tr[i++]=null;var l=tr[i];tr[i++]=null;var d=tr[i];tr[i++]=null;var f=tr[i];if(tr[i++]=null,l!==null&&d!==null){var E=l.pending;E===null?d.next=d:(d.next=E.next,E.next=d),l.pending=d}f!==0&&ay(a,d,f)}}function yc(t,i,a,l){tr[co++]=t,tr[co++]=i,tr[co++]=a,tr[co++]=l,qd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Fd(t,i,a,l){return yc(t,i,a,l),vc(t)}function ho(t,i){return yc(t,null,null,i),vc(t)}function ay(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var d=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(d=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,d&&i!==null&&(d=31-Nt(a),t=f.hiddenUpdates,l=t[d],l===null?t[d]=[i]:l.push(i),i.lane=a|536870912),f):null}function vc(t){if(50<Yl)throw Yl=0,Xf=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var fo={};function k1(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(t,i,a,l){return new k1(t,i,a,l)}function Hd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ai(t,i){var a=t.alternate;return a===null?(a=Un(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function oy(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function _c(t,i,a,l,d,f){var E=0;if(l=t,typeof t=="function")Hd(t)&&(E=1);else if(typeof t=="string")E=VA(t,a,ve.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=Un(31,a,i,d),t.elementType=C,t.lanes=f,t;case q:return pa(a.children,d,f,i);case Y:E=8,d|=24;break;case k:return t=Un(12,a,i,d|2),t.elementType=k,t.lanes=f,t;case se:return t=Un(13,a,i,d),t.elementType=se,t.lanes=f,t;case ge:return t=Un(19,a,i,d),t.elementType=ge,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Z:case X:E=10;break e;case K:E=9;break e;case oe:E=11;break e;case R:E=14;break e;case w:E=16,l=null;break e}E=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=Un(E,a,i,d),i.elementType=t,i.type=l,i.lanes=f,i}function pa(t,i,a,l){return t=Un(7,t,l,i),t.lanes=a,t}function Gd(t,i,a){return t=Un(6,t,null,i),t.lanes=a,t}function Kd(t,i,a){return i=Un(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var mo=[],po=0,Ec=null,bc=0,nr=[],rr=0,ga=null,oi=1,li="";function ya(t,i){mo[po++]=bc,mo[po++]=Ec,Ec=t,bc=i}function ly(t,i,a){nr[rr++]=oi,nr[rr++]=li,nr[rr++]=ga,ga=t;var l=oi;t=li;var d=32-Nt(l)-1;l&=~(1<<d),a+=1;var f=32-Nt(i)+d;if(30<f){var E=d-d%5;f=(l&(1<<E)-1).toString(32),l>>=E,d-=E,oi=1<<32-Nt(i)+d|a<<d|l,li=f+t}else oi=1<<f|a<<d|l,li=t}function Qd(t){t.return!==null&&(ya(t,1),ly(t,1,0))}function Wd(t){for(;t===Ec;)Ec=mo[--po],mo[po]=null,bc=mo[--po],mo[po]=null;for(;t===ga;)ga=nr[--rr],nr[rr]=null,li=nr[--rr],nr[rr]=null,oi=nr[--rr],nr[rr]=null}var En=null,_t=null,Ke=!1,va=null,Vr=!1,Yd=Error(s(519));function _a(t){var i=Error(s(418,""));throw Rl(er(i,t)),Yd}function uy(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[wt]=t,i[Zt]=l,a){case"dialog":je("cancel",i),je("close",i);break;case"iframe":case"object":case"embed":je("load",i);break;case"video":case"audio":for(a=0;a<$l.length;a++)je($l[a],i);break;case"source":je("error",i);break;case"img":case"image":case"link":je("error",i),je("load",i);break;case"details":je("toggle",i);break;case"input":je("invalid",i),ul(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),zi(i);break;case"select":je("invalid",i);break;case"textarea":je("invalid",i),nc(i,l.value,l.defaultValue,l.children),zi(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||x_(i.textContent,a)?(l.popover!=null&&(je("beforetoggle",i),je("toggle",i)),l.onScroll!=null&&je("scroll",i),l.onScrollEnd!=null&&je("scrollend",i),l.onClick!=null&&(i.onclick=th),i=!0):i=!1,i||_a(t)}function cy(t){for(En=t.return;En;)switch(En.tag){case 5:case 13:Vr=!1;return;case 27:case 3:Vr=!0;return;default:En=En.return}}function wl(t){if(t!==En)return!1;if(!Ke)return cy(t),Ke=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||dm(t.type,t.memoizedProps)),a=!a),a&&_t&&_a(t),cy(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){_t=vr(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}_t=null}}else i===27?(i=_t,os(t.type)?(t=gm,gm=null,_t=t):_t=i):_t=En?vr(t.stateNode.nextSibling):null;return!0}function xl(){_t=En=null,Ke=!1}function hy(){var t=va;return t!==null&&(xn===null?xn=t:xn.push.apply(xn,t),va=null),t}function Rl(t){va===null?va=[t]:va.push(t)}var Xd=ie(null),Ea=null,ui=null;function Ki(t,i,a){ce(Xd,i._currentValue),i._currentValue=a}function ci(t){t._currentValue=Xd.current,de(Xd)}function $d(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Zd(t,i,a,l){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var f=d.dependencies;if(f!==null){var E=d.child;f=f.firstContext;e:for(;f!==null;){var T=f;f=d;for(var D=0;D<i.length;D++)if(T.context===i[D]){f.lanes|=a,T=f.alternate,T!==null&&(T.lanes|=a),$d(f.return,a,t),l||(E=null);break e}f=T.next}}else if(d.tag===18){if(E=d.return,E===null)throw Error(s(341));E.lanes|=a,f=E.alternate,f!==null&&(f.lanes|=a),$d(E,a,t),E=null}else E=d.child;if(E!==null)E.return=d;else for(E=d;E!==null;){if(E===t){E=null;break}if(d=E.sibling,d!==null){d.return=E.return,E=d;break}E=E.return}d=E}}function Cl(t,i,a,l){t=null;for(var d=i,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var E=d.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var T=d.type;jn(d.pendingProps.value,E.value)||(t!==null?t.push(T):t=[T])}}else if(d===Ut.current){if(E=d.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(ru):t=[ru])}d=d.return}t!==null&&Zd(i,t,a,l),i.flags|=262144}function Tc(t){for(t=t.firstContext;t!==null;){if(!jn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ba(t){Ea=t,ui=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function un(t){return dy(Ea,t)}function Sc(t,i){return Ea===null&&ba(t),dy(t,i)}function dy(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},ui===null){if(t===null)throw Error(s(308));ui=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else ui=ui.next=i;return a}var M1=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},V1=r.unstable_scheduleCallback,P1=r.unstable_NormalPriority,zt={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jd(){return{controller:new M1,data:new Map,refCount:0}}function Il(t){t.refCount--,t.refCount===0&&V1(P1,function(){t.controller.abort()})}var Dl=null,ef=0,go=0,yo=null;function j1(t,i){if(Dl===null){var a=Dl=[];ef=0,go=rm(),yo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return ef++,i.then(fy,fy),i}function fy(){if(--ef===0&&Dl!==null){yo!==null&&(yo.status="fulfilled");var t=Dl;Dl=null,go=0,yo=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function U1(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var d=0;d<a.length;d++)(0,a[d])(i)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var my=Q.S;Q.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&j1(t,i),my!==null&&my(t,i)};var Ta=ie(null);function tf(){var t=Ta.current;return t!==null?t:at.pooledCache}function Ac(t,i){i===null?ce(Ta,Ta.current):ce(Ta,i.pool)}function py(){var t=tf();return t===null?null:{parent:zt._currentValue,pool:t}}var Nl=Error(s(460)),gy=Error(s(474)),wc=Error(s(542)),nf={then:function(){}};function yy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function xc(){}function vy(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(xc,xc),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Ey(t),t;default:if(typeof i.status=="string")i.then(xc,xc);else{if(t=at,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var d=i;d.status="fulfilled",d.value=l}},function(l){if(i.status==="pending"){var d=i;d.status="rejected",d.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Ey(t),t}throw Ol=i,Nl}}var Ol=null;function _y(){if(Ol===null)throw Error(s(459));var t=Ol;return Ol=null,t}function Ey(t){if(t===Nl||t===wc)throw Error(s(483))}var Qi=!1;function rf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Wi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Yi(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,($e&2)!==0){var d=l.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),l.pending=i,i=vc(t),ay(t,null,a),i}return yc(t,l,i,a),vc(t)}function kl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Rr(t,a)}}function af(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?d=f=E:f=f.next=E,a=a.next}while(a!==null);f===null?d=f=i:f=f.next=i}else d=f=i;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var of=!1;function Ml(){if(of){var t=yo;if(t!==null)throw t}}function Vl(t,i,a,l){of=!1;var d=t.updateQueue;Qi=!1;var f=d.firstBaseUpdate,E=d.lastBaseUpdate,T=d.shared.pending;if(T!==null){d.shared.pending=null;var D=T,F=D.next;D.next=null,E===null?f=F:E.next=F,E=D;var J=t.alternate;J!==null&&(J=J.updateQueue,T=J.lastBaseUpdate,T!==E&&(T===null?J.firstBaseUpdate=F:T.next=F,J.lastBaseUpdate=D))}if(f!==null){var ne=d.baseState;E=0,J=F=D=null,T=f;do{var H=T.lane&-536870913,G=H!==T.lane;if(G?(qe&H)===H:(l&H)===H){H!==0&&H===go&&(of=!0),J!==null&&(J=J.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Re=t,Te=T;H=i;var rt=a;switch(Te.tag){case 1:if(Re=Te.payload,typeof Re=="function"){ne=Re.call(rt,ne,H);break e}ne=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Te.payload,H=typeof Re=="function"?Re.call(rt,ne,H):Re,H==null)break e;ne=b({},ne,H);break e;case 2:Qi=!0}}H=T.callback,H!==null&&(t.flags|=64,G&&(t.flags|=8192),G=d.callbacks,G===null?d.callbacks=[H]:G.push(H))}else G={lane:H,tag:T.tag,payload:T.payload,callback:T.callback,next:null},J===null?(F=J=G,D=ne):J=J.next=G,E|=H;if(T=T.next,T===null){if(T=d.shared.pending,T===null)break;G=T,T=G.next,G.next=null,d.lastBaseUpdate=G,d.shared.pending=null}}while(!0);J===null&&(D=ne),d.baseState=D,d.firstBaseUpdate=F,d.lastBaseUpdate=J,f===null&&(d.shared.lanes=0),rs|=E,t.lanes=E,t.memoizedState=ne}}function by(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function Ty(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)by(a[t],i)}var vo=ie(null),Rc=ie(0);function Sy(t,i){t=yi,ce(Rc,t),ce(vo,i),yi=t|i.baseLanes}function lf(){ce(Rc,yi),ce(vo,vo.current)}function uf(){yi=Rc.current,de(vo),de(Rc)}var Xi=0,ke=null,tt=null,Ot=null,Cc=!1,_o=!1,Sa=!1,Ic=0,Pl=0,Eo=null,L1=0;function Ct(){throw Error(s(321))}function cf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!jn(t[a],i[a]))return!1;return!0}function hf(t,i,a,l,d,f){return Xi=f,ke=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Q.H=t===null||t.memoizedState===null?av:ov,Sa=!1,f=a(l,d),Sa=!1,_o&&(f=wy(i,a,l,d)),Ay(t),f}function Ay(t){Q.H=Vc;var i=tt!==null&&tt.next!==null;if(Xi=0,Ot=tt=ke=null,Cc=!1,Pl=0,Eo=null,i)throw Error(s(300));t===null||Gt||(t=t.dependencies,t!==null&&Tc(t)&&(Gt=!0))}function wy(t,i,a,l){ke=t;var d=0;do{if(_o&&(Eo=null),Pl=0,_o=!1,25<=d)throw Error(s(301));if(d+=1,Ot=tt=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Q.H=K1,f=i(a,l)}while(_o);return f}function z1(){var t=Q.H,i=t.useState()[0];return i=typeof i.then=="function"?jl(i):i,t=t.useState()[0],(tt!==null?tt.memoizedState:null)!==t&&(ke.flags|=1024),i}function df(){var t=Ic!==0;return Ic=0,t}function ff(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function mf(t){if(Cc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Cc=!1}Xi=0,Ot=tt=ke=null,_o=!1,Pl=Ic=0,Eo=null}function An(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?ke.memoizedState=Ot=t:Ot=Ot.next=t,Ot}function kt(){if(tt===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=tt.next;var i=Ot===null?ke.memoizedState:Ot.next;if(i!==null)Ot=i,tt=t;else{if(t===null)throw ke.alternate===null?Error(s(467)):Error(s(310));tt=t,t={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Ot===null?ke.memoizedState=Ot=t:Ot=Ot.next=t}return Ot}function pf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jl(t){var i=Pl;return Pl+=1,Eo===null&&(Eo=[]),t=vy(Eo,t,i),i=ke,(Ot===null?i.memoizedState:Ot.next)===null&&(i=i.alternate,Q.H=i===null||i.memoizedState===null?av:ov),t}function Dc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return jl(t);if(t.$$typeof===X)return un(t)}throw Error(s(438,String(t)))}function gf(t){var i=null,a=ke.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=ke.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(d){return d.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=pf(),ke.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=P;return i.index++,a}function hi(t,i){return typeof i=="function"?i(t):i}function Nc(t){var i=kt();return yf(i,tt,t)}function yf(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var d=t.baseQueue,f=l.pending;if(f!==null){if(d!==null){var E=d.next;d.next=f.next,f.next=E}i.baseQueue=d=f,l.pending=null}if(f=t.baseState,d===null)t.memoizedState=f;else{i=d.next;var T=E=null,D=null,F=i,J=!1;do{var ne=F.lane&-536870913;if(ne!==F.lane?(qe&ne)===ne:(Xi&ne)===ne){var H=F.revertLane;if(H===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ne===go&&(J=!0);else if((Xi&H)===H){F=F.next,H===go&&(J=!0);continue}else ne={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(T=D=ne,E=f):D=D.next=ne,ke.lanes|=H,rs|=H;ne=F.action,Sa&&a(f,ne),f=F.hasEagerState?F.eagerState:a(f,ne)}else H={lane:ne,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(T=D=H,E=f):D=D.next=H,ke.lanes|=ne,rs|=ne;F=F.next}while(F!==null&&F!==i);if(D===null?E=f:D.next=T,!jn(f,t.memoizedState)&&(Gt=!0,J&&(a=yo,a!==null)))throw a;t.memoizedState=f,t.baseState=E,t.baseQueue=D,l.lastRenderedState=f}return d===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function vf(t){var i=kt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,d=a.pending,f=i.memoizedState;if(d!==null){a.pending=null;var E=d=d.next;do f=t(f,E.action),E=E.next;while(E!==d);jn(f,i.memoizedState)||(Gt=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,l]}function xy(t,i,a){var l=ke,d=kt(),f=Ke;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var E=!jn((tt||d).memoizedState,a);E&&(d.memoizedState=a,Gt=!0),d=d.queue;var T=Iy.bind(null,l,d,t);if(Ul(2048,8,T,[t]),d.getSnapshot!==i||E||Ot!==null&&Ot.memoizedState.tag&1){if(l.flags|=2048,bo(9,Oc(),Cy.bind(null,l,d,a,i),null),at===null)throw Error(s(349));f||(Xi&124)!==0||Ry(l,i,a)}return a}function Ry(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=ke.updateQueue,i===null?(i=pf(),ke.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Cy(t,i,a,l){i.value=a,i.getSnapshot=l,Dy(i)&&Ny(t)}function Iy(t,i,a){return a(function(){Dy(i)&&Ny(t)})}function Dy(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!jn(t,a)}catch{return!0}}function Ny(t){var i=ho(t,2);i!==null&&Fn(i,t,2)}function _f(t){var i=An();if(typeof t=="function"){var a=t;if(t=a(),Sa){gn(!0);try{a()}finally{gn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:t},i}function Oy(t,i,a,l){return t.baseState=a,yf(t,tt,typeof l=="function"?l:hi)}function B1(t,i,a,l,d){if(Mc(t))throw Error(s(485));if(t=i.action,t!==null){var f={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){f.listeners.push(E)}};Q.T!==null?a(!0):f.isTransition=!1,l(f),a=i.pending,a===null?(f.next=i.pending=f,ky(i,f)):(f.next=a.next,i.pending=a.next=f)}}function ky(t,i){var a=i.action,l=i.payload,d=t.state;if(i.isTransition){var f=Q.T,E={};Q.T=E;try{var T=a(d,l),D=Q.S;D!==null&&D(E,T),My(t,i,T)}catch(F){Ef(t,i,F)}finally{Q.T=f}}else try{f=a(d,l),My(t,i,f)}catch(F){Ef(t,i,F)}}function My(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Vy(t,i,l)},function(l){return Ef(t,i,l)}):Vy(t,i,a)}function Vy(t,i,a){i.status="fulfilled",i.value=a,Py(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,ky(t,a)))}function Ef(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Py(i),i=i.next;while(i!==l)}t.action=null}function Py(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function jy(t,i){return i}function Uy(t,i){if(Ke){var a=at.formState;if(a!==null){e:{var l=ke;if(Ke){if(_t){t:{for(var d=_t,f=Vr;d.nodeType!==8;){if(!f){d=null;break t}if(d=vr(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){_t=vr(d.nextSibling),l=d.data==="F!";break e}}_a(l)}l=!1}l&&(i=a[0])}}return a=An(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jy,lastRenderedState:i},a.queue=l,a=rv.bind(null,ke,l),l.dispatch=a,l=_f(!1),f=wf.bind(null,ke,!1,l.queue),l=An(),d={state:i,dispatch:null,action:t,pending:null},l.queue=d,a=B1.bind(null,ke,d,f,a),d.dispatch=a,l.memoizedState=t,[i,a,!1]}function Ly(t){var i=kt();return zy(i,tt,t)}function zy(t,i,a){if(i=yf(t,i,jy)[0],t=Nc(hi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=jl(i)}catch(E){throw E===Nl?wc:E}else l=i;i=kt();var d=i.queue,f=d.dispatch;return a!==i.memoizedState&&(ke.flags|=2048,bo(9,Oc(),q1.bind(null,d,a),null)),[l,f,t]}function q1(t,i){t.action=i}function By(t){var i=kt(),a=tt;if(a!==null)return zy(i,a,t);kt(),i=i.memoizedState,a=kt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function bo(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=ke.updateQueue,i===null&&(i=pf(),ke.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function Oc(){return{destroy:void 0,resource:void 0}}function qy(){return kt().memoizedState}function kc(t,i,a,l){var d=An();l=l===void 0?null:l,ke.flags|=t,d.memoizedState=bo(1|i,Oc(),a,l)}function Ul(t,i,a,l){var d=kt();l=l===void 0?null:l;var f=d.memoizedState.inst;tt!==null&&l!==null&&cf(l,tt.memoizedState.deps)?d.memoizedState=bo(i,f,a,l):(ke.flags|=t,d.memoizedState=bo(1|i,f,a,l))}function Fy(t,i){kc(8390656,8,t,i)}function Hy(t,i){Ul(2048,8,t,i)}function Gy(t,i){return Ul(4,2,t,i)}function Ky(t,i){return Ul(4,4,t,i)}function Qy(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Wy(t,i,a){a=a!=null?a.concat([t]):null,Ul(4,4,Qy.bind(null,i,t),a)}function bf(){}function Yy(t,i){var a=kt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&cf(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function Xy(t,i){var a=kt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&cf(i,l[1]))return l[0];if(l=t(),Sa){gn(!0);try{t()}finally{gn(!1)}}return a.memoizedState=[l,i],l}function Tf(t,i,a){return a===void 0||(Xi&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=Jv(),ke.lanes|=t,rs|=t,a)}function $y(t,i,a,l){return jn(a,i)?a:vo.current!==null?(t=Tf(t,a,l),jn(t,i)||(Gt=!0),t):(Xi&42)===0?(Gt=!0,t.memoizedState=a):(t=Jv(),ke.lanes|=t,rs|=t,i)}function Zy(t,i,a,l,d){var f=ae.p;ae.p=f!==0&&8>f?f:8;var E=Q.T,T={};Q.T=T,wf(t,!1,i,a);try{var D=d(),F=Q.S;if(F!==null&&F(T,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var J=U1(D,l);Ll(t,i,J,qn(t))}else Ll(t,i,l,qn(t))}catch(ne){Ll(t,i,{then:function(){},status:"rejected",reason:ne},qn())}finally{ae.p=f,Q.T=E}}function F1(){}function Sf(t,i,a,l){if(t.tag!==5)throw Error(s(476));var d=Jy(t).queue;Zy(t,d,i,fe,a===null?F1:function(){return ev(t),a(l)})}function Jy(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:fe},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function ev(t){var i=Jy(t).next.queue;Ll(t,i,{},qn())}function Af(){return un(ru)}function tv(){return kt().memoizedState}function nv(){return kt().memoizedState}function H1(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=qn();t=Wi(a);var l=Yi(i,t,a);l!==null&&(Fn(l,i,a),kl(l,i,a)),i={cache:Jd()},t.payload=i;return}i=i.return}}function G1(t,i,a){var l=qn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Mc(t)?iv(i,a):(a=Fd(t,i,a,l),a!==null&&(Fn(a,t,l),sv(a,i,l)))}function rv(t,i,a){var l=qn();Ll(t,i,a,l)}function Ll(t,i,a,l){var d={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Mc(t))iv(i,d);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var E=i.lastRenderedState,T=f(E,a);if(d.hasEagerState=!0,d.eagerState=T,jn(T,E))return yc(t,i,d,0),at===null&&gc(),!1}catch{}finally{}if(a=Fd(t,i,d,l),a!==null)return Fn(a,t,l),sv(a,i,l),!0}return!1}function wf(t,i,a,l){if(l={lane:2,revertLane:rm(),action:l,hasEagerState:!1,eagerState:null,next:null},Mc(t)){if(i)throw Error(s(479))}else i=Fd(t,a,l,2),i!==null&&Fn(i,t,2)}function Mc(t){var i=t.alternate;return t===ke||i!==null&&i===ke}function iv(t,i){_o=Cc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function sv(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Rr(t,a)}}var Vc={readContext:un,use:Dc,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct},av={readContext:un,use:Dc,useCallback:function(t,i){return An().memoizedState=[t,i===void 0?null:i],t},useContext:un,useEffect:Fy,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,kc(4194308,4,Qy.bind(null,i,t),a)},useLayoutEffect:function(t,i){return kc(4194308,4,t,i)},useInsertionEffect:function(t,i){kc(4,2,t,i)},useMemo:function(t,i){var a=An();i=i===void 0?null:i;var l=t();if(Sa){gn(!0);try{t()}finally{gn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=An();if(a!==void 0){var d=a(i);if(Sa){gn(!0);try{a(i)}finally{gn(!1)}}}else d=i;return l.memoizedState=l.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},l.queue=t,t=t.dispatch=G1.bind(null,ke,t),[l.memoizedState,t]},useRef:function(t){var i=An();return t={current:t},i.memoizedState=t},useState:function(t){t=_f(t);var i=t.queue,a=rv.bind(null,ke,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:bf,useDeferredValue:function(t,i){var a=An();return Tf(a,t,i)},useTransition:function(){var t=_f(!1);return t=Zy.bind(null,ke,t.queue,!0,!1),An().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=ke,d=An();if(Ke){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),at===null)throw Error(s(349));(qe&124)!==0||Ry(l,i,a)}d.memoizedState=a;var f={value:a,getSnapshot:i};return d.queue=f,Fy(Iy.bind(null,l,f,t),[t]),l.flags|=2048,bo(9,Oc(),Cy.bind(null,l,f,a,i),null),a},useId:function(){var t=An(),i=at.identifierPrefix;if(Ke){var a=li,l=oi;a=(l&~(1<<32-Nt(l)-1)).toString(32)+a,i=""+i+"R"+a,a=Ic++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=L1++,i=""+i+"r"+a.toString(32)+"";return t.memoizedState=i},useHostTransitionStatus:Af,useFormState:Uy,useActionState:Uy,useOptimistic:function(t){var i=An();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=wf.bind(null,ke,!0,a),a.dispatch=i,[t,i]},useMemoCache:gf,useCacheRefresh:function(){return An().memoizedState=H1.bind(null,ke)}},ov={readContext:un,use:Dc,useCallback:Yy,useContext:un,useEffect:Hy,useImperativeHandle:Wy,useInsertionEffect:Gy,useLayoutEffect:Ky,useMemo:Xy,useReducer:Nc,useRef:qy,useState:function(){return Nc(hi)},useDebugValue:bf,useDeferredValue:function(t,i){var a=kt();return $y(a,tt.memoizedState,t,i)},useTransition:function(){var t=Nc(hi)[0],i=kt().memoizedState;return[typeof t=="boolean"?t:jl(t),i]},useSyncExternalStore:xy,useId:tv,useHostTransitionStatus:Af,useFormState:Ly,useActionState:Ly,useOptimistic:function(t,i){var a=kt();return Oy(a,tt,t,i)},useMemoCache:gf,useCacheRefresh:nv},K1={readContext:un,use:Dc,useCallback:Yy,useContext:un,useEffect:Hy,useImperativeHandle:Wy,useInsertionEffect:Gy,useLayoutEffect:Ky,useMemo:Xy,useReducer:vf,useRef:qy,useState:function(){return vf(hi)},useDebugValue:bf,useDeferredValue:function(t,i){var a=kt();return tt===null?Tf(a,t,i):$y(a,tt.memoizedState,t,i)},useTransition:function(){var t=vf(hi)[0],i=kt().memoizedState;return[typeof t=="boolean"?t:jl(t),i]},useSyncExternalStore:xy,useId:tv,useHostTransitionStatus:Af,useFormState:By,useActionState:By,useOptimistic:function(t,i){var a=kt();return tt!==null?Oy(a,tt,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:gf,useCacheRefresh:nv},To=null,zl=0;function Pc(t){var i=zl;return zl+=1,To===null&&(To=[]),vy(To,t,i)}function Bl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function jc(t,i){throw i.$$typeof===S?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function lv(t){var i=t._init;return i(t._payload)}function uv(t){function i(L,V){if(t){var z=L.deletions;z===null?(L.deletions=[V],L.flags|=16):z.push(V)}}function a(L,V){if(!t)return null;for(;V!==null;)i(L,V),V=V.sibling;return null}function l(L){for(var V=new Map;L!==null;)L.key!==null?V.set(L.key,L):V.set(L.index,L),L=L.sibling;return V}function d(L,V){return L=ai(L,V),L.index=0,L.sibling=null,L}function f(L,V,z){return L.index=z,t?(z=L.alternate,z!==null?(z=z.index,z<V?(L.flags|=67108866,V):z):(L.flags|=67108866,V)):(L.flags|=1048576,V)}function E(L){return t&&L.alternate===null&&(L.flags|=67108866),L}function T(L,V,z,te){return V===null||V.tag!==6?(V=Gd(z,L.mode,te),V.return=L,V):(V=d(V,z),V.return=L,V)}function D(L,V,z,te){var pe=z.type;return pe===q?J(L,V,z.props.children,te,z.key):V!==null&&(V.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===w&&lv(pe)===V.type)?(V=d(V,z.props),Bl(V,z),V.return=L,V):(V=_c(z.type,z.key,z.props,null,L.mode,te),Bl(V,z),V.return=L,V)}function F(L,V,z,te){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=Kd(z,L.mode,te),V.return=L,V):(V=d(V,z.children||[]),V.return=L,V)}function J(L,V,z,te,pe){return V===null||V.tag!==7?(V=pa(z,L.mode,te,pe),V.return=L,V):(V=d(V,z),V.return=L,V)}function ne(L,V,z){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Gd(""+V,L.mode,z),V.return=L,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case x:return z=_c(V.type,V.key,V.props,null,L.mode,z),Bl(z,V),z.return=L,z;case U:return V=Kd(V,L.mode,z),V.return=L,V;case w:var te=V._init;return V=te(V._payload),ne(L,V,z)}if(ye(V)||O(V))return V=pa(V,L.mode,z,null),V.return=L,V;if(typeof V.then=="function")return ne(L,Pc(V),z);if(V.$$typeof===X)return ne(L,Sc(L,V),z);jc(L,V)}return null}function H(L,V,z,te){var pe=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return pe!==null?null:T(L,V,""+z,te);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case x:return z.key===pe?D(L,V,z,te):null;case U:return z.key===pe?F(L,V,z,te):null;case w:return pe=z._init,z=pe(z._payload),H(L,V,z,te)}if(ye(z)||O(z))return pe!==null?null:J(L,V,z,te,null);if(typeof z.then=="function")return H(L,V,Pc(z),te);if(z.$$typeof===X)return H(L,V,Sc(L,z),te);jc(L,z)}return null}function G(L,V,z,te,pe){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return L=L.get(z)||null,T(V,L,""+te,pe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case x:return L=L.get(te.key===null?z:te.key)||null,D(V,L,te,pe);case U:return L=L.get(te.key===null?z:te.key)||null,F(V,L,te,pe);case w:var Ve=te._init;return te=Ve(te._payload),G(L,V,z,te,pe)}if(ye(te)||O(te))return L=L.get(z)||null,J(V,L,te,pe,null);if(typeof te.then=="function")return G(L,V,z,Pc(te),pe);if(te.$$typeof===X)return G(L,V,z,Sc(V,te),pe);jc(V,te)}return null}function Re(L,V,z,te){for(var pe=null,Ve=null,Ee=V,Ae=V=0,Qt=null;Ee!==null&&Ae<z.length;Ae++){Ee.index>Ae?(Qt=Ee,Ee=null):Qt=Ee.sibling;var He=H(L,Ee,z[Ae],te);if(He===null){Ee===null&&(Ee=Qt);break}t&&Ee&&He.alternate===null&&i(L,Ee),V=f(He,V,Ae),Ve===null?pe=He:Ve.sibling=He,Ve=He,Ee=Qt}if(Ae===z.length)return a(L,Ee),Ke&&ya(L,Ae),pe;if(Ee===null){for(;Ae<z.length;Ae++)Ee=ne(L,z[Ae],te),Ee!==null&&(V=f(Ee,V,Ae),Ve===null?pe=Ee:Ve.sibling=Ee,Ve=Ee);return Ke&&ya(L,Ae),pe}for(Ee=l(Ee);Ae<z.length;Ae++)Qt=G(Ee,L,Ae,z[Ae],te),Qt!==null&&(t&&Qt.alternate!==null&&Ee.delete(Qt.key===null?Ae:Qt.key),V=f(Qt,V,Ae),Ve===null?pe=Qt:Ve.sibling=Qt,Ve=Qt);return t&&Ee.forEach(function(ds){return i(L,ds)}),Ke&&ya(L,Ae),pe}function Te(L,V,z,te){if(z==null)throw Error(s(151));for(var pe=null,Ve=null,Ee=V,Ae=V=0,Qt=null,He=z.next();Ee!==null&&!He.done;Ae++,He=z.next()){Ee.index>Ae?(Qt=Ee,Ee=null):Qt=Ee.sibling;var ds=H(L,Ee,He.value,te);if(ds===null){Ee===null&&(Ee=Qt);break}t&&Ee&&ds.alternate===null&&i(L,Ee),V=f(ds,V,Ae),Ve===null?pe=ds:Ve.sibling=ds,Ve=ds,Ee=Qt}if(He.done)return a(L,Ee),Ke&&ya(L,Ae),pe;if(Ee===null){for(;!He.done;Ae++,He=z.next())He=ne(L,He.value,te),He!==null&&(V=f(He,V,Ae),Ve===null?pe=He:Ve.sibling=He,Ve=He);return Ke&&ya(L,Ae),pe}for(Ee=l(Ee);!He.done;Ae++,He=z.next())He=G(Ee,L,Ae,He.value,te),He!==null&&(t&&He.alternate!==null&&Ee.delete(He.key===null?Ae:He.key),V=f(He,V,Ae),Ve===null?pe=He:Ve.sibling=He,Ve=He);return t&&Ee.forEach(function(QA){return i(L,QA)}),Ke&&ya(L,Ae),pe}function rt(L,V,z,te){if(typeof z=="object"&&z!==null&&z.type===q&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case x:e:{for(var pe=z.key;V!==null;){if(V.key===pe){if(pe=z.type,pe===q){if(V.tag===7){a(L,V.sibling),te=d(V,z.props.children),te.return=L,L=te;break e}}else if(V.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===w&&lv(pe)===V.type){a(L,V.sibling),te=d(V,z.props),Bl(te,z),te.return=L,L=te;break e}a(L,V);break}else i(L,V);V=V.sibling}z.type===q?(te=pa(z.props.children,L.mode,te,z.key),te.return=L,L=te):(te=_c(z.type,z.key,z.props,null,L.mode,te),Bl(te,z),te.return=L,L=te)}return E(L);case U:e:{for(pe=z.key;V!==null;){if(V.key===pe)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){a(L,V.sibling),te=d(V,z.children||[]),te.return=L,L=te;break e}else{a(L,V);break}else i(L,V);V=V.sibling}te=Kd(z,L.mode,te),te.return=L,L=te}return E(L);case w:return pe=z._init,z=pe(z._payload),rt(L,V,z,te)}if(ye(z))return Re(L,V,z,te);if(O(z)){if(pe=O(z),typeof pe!="function")throw Error(s(150));return z=pe.call(z),Te(L,V,z,te)}if(typeof z.then=="function")return rt(L,V,Pc(z),te);if(z.$$typeof===X)return rt(L,V,Sc(L,z),te);jc(L,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,V!==null&&V.tag===6?(a(L,V.sibling),te=d(V,z),te.return=L,L=te):(a(L,V),te=Gd(z,L.mode,te),te.return=L,L=te),E(L)):a(L,V)}return function(L,V,z,te){try{zl=0;var pe=rt(L,V,z,te);return To=null,pe}catch(Ee){if(Ee===Nl||Ee===wc)throw Ee;var Ve=Un(29,Ee,null,L.mode);return Ve.lanes=te,Ve.return=L,Ve}finally{}}}var So=uv(!0),cv=uv(!1),ir=ie(null),Pr=null;function $i(t){var i=t.alternate;ce(Bt,Bt.current&1),ce(ir,t),Pr===null&&(i===null||vo.current!==null||i.memoizedState!==null)&&(Pr=t)}function hv(t){if(t.tag===22){if(ce(Bt,Bt.current),ce(ir,t),Pr===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(Pr=t)}}else Zi()}function Zi(){ce(Bt,Bt.current),ce(ir,ir.current)}function di(t){de(ir),Pr===t&&(Pr=null),de(Bt)}var Bt=ie(0);function Uc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||pm(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function xf(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:b({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Rf={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=qn(),d=Wi(l);d.payload=i,a!=null&&(d.callback=a),i=Yi(t,d,l),i!==null&&(Fn(i,t,l),kl(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=qn(),d=Wi(l);d.tag=1,d.payload=i,a!=null&&(d.callback=a),i=Yi(t,d,l),i!==null&&(Fn(i,t,l),kl(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=qn(),l=Wi(a);l.tag=2,i!=null&&(l.callback=i),i=Yi(t,l,a),i!==null&&(Fn(i,t,a),kl(i,t,a))}};function dv(t,i,a,l,d,f,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,E):i.prototype&&i.prototype.isPureReactComponent?!Sl(a,l)||!Sl(d,f):!0}function fv(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Rf.enqueueReplaceState(i,i.state,null)}function Aa(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=b({},a));for(var d in t)a[d]===void 0&&(a[d]=t[d])}return a}var Lc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function mv(t){Lc(t)}function pv(t){console.error(t)}function gv(t){Lc(t)}function zc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function yv(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Cf(t,i,a){return a=Wi(a),a.tag=3,a.payload={element:null},a.callback=function(){zc(t,i)},a}function vv(t){return t=Wi(t),t.tag=3,t}function _v(t,i,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var f=l.value;t.payload=function(){return d(f)},t.callback=function(){yv(i,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(t.callback=function(){yv(i,a,l),typeof d!="function"&&(is===null?is=new Set([this]):is.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function Q1(t,i,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Cl(i,a,d,!0),a=ir.current,a!==null){switch(a.tag){case 13:return Pr===null?Zf():a.alternate===null&&Et===0&&(Et=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===nf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),em(t,l,d)),!1;case 22:return a.flags|=65536,l===nf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),em(t,l,d)),!1}throw Error(s(435,a.tag))}return em(t,l,d),Zf(),!1}if(Ke)return i=ir.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=d,l!==Yd&&(t=Error(s(422),{cause:l}),Rl(er(t,a)))):(l!==Yd&&(i=Error(s(423),{cause:l}),Rl(er(i,a))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,l=er(l,a),d=Cf(t.stateNode,l,d),af(t,d),Et!==4&&(Et=2)),!1;var f=Error(s(520),{cause:l});if(f=er(f,a),Wl===null?Wl=[f]:Wl.push(f),Et!==4&&(Et=2),i===null)return!0;l=er(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=d&-d,a.lanes|=t,t=Cf(a.stateNode,l,t),af(a,t),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(is===null||!is.has(f))))return a.flags|=65536,d&=-d,a.lanes|=d,d=vv(d),_v(d,t,a,l),af(a,d),!1}a=a.return}while(a!==null);return!1}var Ev=Error(s(461)),Gt=!1;function Jt(t,i,a,l){i.child=t===null?cv(i,null,a,l):So(i,t.child,a,l)}function bv(t,i,a,l,d){a=a.render;var f=i.ref;if("ref"in l){var E={};for(var T in l)T!=="ref"&&(E[T]=l[T])}else E=l;return ba(i),l=hf(t,i,a,E,f,d),T=df(),t!==null&&!Gt?(ff(t,i,d),fi(t,i,d)):(Ke&&T&&Qd(i),i.flags|=1,Jt(t,i,l,d),i.child)}function Tv(t,i,a,l,d){if(t===null){var f=a.type;return typeof f=="function"&&!Hd(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,Sv(t,i,f,l,d)):(t=_c(a.type,null,l,i,i.mode,d),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,!Pf(t,d)){var E=f.memoizedProps;if(a=a.compare,a=a!==null?a:Sl,a(E,l)&&t.ref===i.ref)return fi(t,i,d)}return i.flags|=1,t=ai(f,l),t.ref=i.ref,t.return=i,i.child=t}function Sv(t,i,a,l,d){if(t!==null){var f=t.memoizedProps;if(Sl(f,l)&&t.ref===i.ref)if(Gt=!1,i.pendingProps=l=f,Pf(t,d))(t.flags&131072)!==0&&(Gt=!0);else return i.lanes=t.lanes,fi(t,i,d)}return If(t,i,a,l,d)}function Av(t,i,a){var l=i.pendingProps,d=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,t!==null){for(d=i.child=t.child,f=0;d!==null;)f=f|d.lanes|d.childLanes,d=d.sibling;i.childLanes=f&~l}else i.childLanes=0,i.child=null;return wv(t,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ac(i,f!==null?f.cachePool:null),f!==null?Sy(i,f):lf(),hv(i);else return i.lanes=i.childLanes=536870912,wv(t,i,f!==null?f.baseLanes|a:a,a)}else f!==null?(Ac(i,f.cachePool),Sy(i,f),Zi(),i.memoizedState=null):(t!==null&&Ac(i,null),lf(),Zi());return Jt(t,i,d,a),i.child}function wv(t,i,a,l){var d=tf();return d=d===null?null:{parent:zt._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&Ac(i,null),lf(),hv(i),t!==null&&Cl(t,i,l,!0),null}function Bc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function If(t,i,a,l,d){return ba(i),a=hf(t,i,a,l,void 0,d),l=df(),t!==null&&!Gt?(ff(t,i,d),fi(t,i,d)):(Ke&&l&&Qd(i),i.flags|=1,Jt(t,i,a,d),i.child)}function xv(t,i,a,l,d,f){return ba(i),i.updateQueue=null,a=wy(i,l,a,d),Ay(t),l=df(),t!==null&&!Gt?(ff(t,i,f),fi(t,i,f)):(Ke&&l&&Qd(i),i.flags|=1,Jt(t,i,a,f),i.child)}function Rv(t,i,a,l,d){if(ba(i),i.stateNode===null){var f=fo,E=a.contextType;typeof E=="object"&&E!==null&&(f=un(E)),f=new a(l,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Rf,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=l,f.state=i.memoizedState,f.refs={},rf(i),E=a.contextType,f.context=typeof E=="object"&&E!==null?un(E):fo,f.state=i.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(xf(i,a,E,l),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(E=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),E!==f.state&&Rf.enqueueReplaceState(f,f.state,null),Vl(i,l,f,d),Ml(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){f=i.stateNode;var T=i.memoizedProps,D=Aa(a,T);f.props=D;var F=f.context,J=a.contextType;E=fo,typeof J=="object"&&J!==null&&(E=un(J));var ne=a.getDerivedStateFromProps;J=typeof ne=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,J||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||F!==E)&&fv(i,f,l,E),Qi=!1;var H=i.memoizedState;f.state=H,Vl(i,l,f,d),Ml(),F=i.memoizedState,T||H!==F||Qi?(typeof ne=="function"&&(xf(i,a,ne,l),F=i.memoizedState),(D=Qi||dv(i,a,D,l,H,F,E))?(J||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=F),f.props=l,f.state=F,f.context=E,l=D):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{f=i.stateNode,sf(t,i),E=i.memoizedProps,J=Aa(a,E),f.props=J,ne=i.pendingProps,H=f.context,F=a.contextType,D=fo,typeof F=="object"&&F!==null&&(D=un(F)),T=a.getDerivedStateFromProps,(F=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E!==ne||H!==D)&&fv(i,f,l,D),Qi=!1,H=i.memoizedState,f.state=H,Vl(i,l,f,d),Ml();var G=i.memoizedState;E!==ne||H!==G||Qi||t!==null&&t.dependencies!==null&&Tc(t.dependencies)?(typeof T=="function"&&(xf(i,a,T,l),G=i.memoizedState),(J=Qi||dv(i,a,J,l,H,G,D)||t!==null&&t.dependencies!==null&&Tc(t.dependencies))?(F||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,G,D),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,G,D)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||E===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=G),f.props=l,f.state=G,f.context=D,l=J):(typeof f.componentDidUpdate!="function"||E===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),l=!1)}return f=l,Bc(t,i),l=(i.flags&128)!==0,f||l?(f=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,t!==null&&l?(i.child=So(i,t.child,null,d),i.child=So(i,null,a,d)):Jt(t,i,a,d),i.memoizedState=f.state,t=i.child):t=fi(t,i,d),t}function Cv(t,i,a,l){return xl(),i.flags|=256,Jt(t,i,a,l),i.child}var Df={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Nf(t){return{baseLanes:t,cachePool:py()}}function Of(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=sr),t}function Iv(t,i,a){var l=i.pendingProps,d=!1,f=(i.flags&128)!==0,E;if((E=f)||(E=t!==null&&t.memoizedState===null?!1:(Bt.current&2)!==0),E&&(d=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,t===null){if(Ke){if(d?$i(i):Zi(),Ke){var T=_t,D;if(D=T){e:{for(D=T,T=Vr;D.nodeType!==8;){if(!T){T=null;break e}if(D=vr(D.nextSibling),D===null){T=null;break e}}T=D}T!==null?(i.memoizedState={dehydrated:T,treeContext:ga!==null?{id:oi,overflow:li}:null,retryLane:536870912,hydrationErrors:null},D=Un(18,null,null,0),D.stateNode=T,D.return=i,i.child=D,En=i,_t=null,D=!0):D=!1}D||_a(i)}if(T=i.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return pm(T)?i.lanes=32:i.lanes=536870912,null;di(i)}return T=l.children,l=l.fallback,d?(Zi(),d=i.mode,T=qc({mode:"hidden",children:T},d),l=pa(l,d,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,d=i.child,d.memoizedState=Nf(a),d.childLanes=Of(t,E,a),i.memoizedState=Df,l):($i(i),kf(i,T))}if(D=t.memoizedState,D!==null&&(T=D.dehydrated,T!==null)){if(f)i.flags&256?($i(i),i.flags&=-257,i=Mf(t,i,a)):i.memoizedState!==null?(Zi(),i.child=t.child,i.flags|=128,i=null):(Zi(),d=l.fallback,T=i.mode,l=qc({mode:"visible",children:l.children},T),d=pa(d,T,a,null),d.flags|=2,l.return=i,d.return=i,l.sibling=d,i.child=l,So(i,t.child,null,a),l=i.child,l.memoizedState=Nf(a),l.childLanes=Of(t,E,a),i.memoizedState=Df,i=d);else if($i(i),pm(T)){if(E=T.nextSibling&&T.nextSibling.dataset,E)var F=E.dgst;E=F,l=Error(s(419)),l.stack="",l.digest=E,Rl({value:l,source:null,stack:null}),i=Mf(t,i,a)}else if(Gt||Cl(t,i,a,!1),E=(a&t.childLanes)!==0,Gt||E){if(E=at,E!==null&&(l=a&-a,l=(l&42)!==0?1:Ks(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==D.retryLane))throw D.retryLane=l,ho(t,l),Fn(E,t,l),Ev;T.data==="$?"||Zf(),i=Mf(t,i,a)}else T.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=D.treeContext,_t=vr(T.nextSibling),En=i,Ke=!0,va=null,Vr=!1,t!==null&&(nr[rr++]=oi,nr[rr++]=li,nr[rr++]=ga,oi=t.id,li=t.overflow,ga=i),i=kf(i,l.children),i.flags|=4096);return i}return d?(Zi(),d=l.fallback,T=i.mode,D=t.child,F=D.sibling,l=ai(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,F!==null?d=ai(F,d):(d=pa(d,T,a,null),d.flags|=2),d.return=i,l.return=i,l.sibling=d,i.child=l,l=d,d=i.child,T=t.child.memoizedState,T===null?T=Nf(a):(D=T.cachePool,D!==null?(F=zt._currentValue,D=D.parent!==F?{parent:F,pool:F}:D):D=py(),T={baseLanes:T.baseLanes|a,cachePool:D}),d.memoizedState=T,d.childLanes=Of(t,E,a),i.memoizedState=Df,l):($i(i),a=t.child,t=a.sibling,a=ai(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(E=i.deletions,E===null?(i.deletions=[t],i.flags|=16):E.push(t)),i.child=a,i.memoizedState=null,a)}function kf(t,i){return i=qc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function qc(t,i){return t=Un(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Mf(t,i,a){return So(i,t.child,null,a),t=kf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Dv(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),$d(t.return,i,a)}function Vf(t,i,a,l,d){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=d)}function Nv(t,i,a){var l=i.pendingProps,d=l.revealOrder,f=l.tail;if(Jt(t,i,l.children,a),l=Bt.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dv(t,a,i);else if(t.tag===19)Dv(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ce(Bt,l),d){case"forwards":for(a=i.child,d=null;a!==null;)t=a.alternate,t!==null&&Uc(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),Vf(i,!1,d,a,f);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(t=d.alternate,t!==null&&Uc(t)===null){i.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}Vf(i,!0,a,null,f);break;case"together":Vf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function fi(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),rs|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Cl(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=ai(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=ai(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Pf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Tc(t)))}function W1(t,i,a){switch(i.tag){case 3:Ge(i,i.stateNode.containerInfo),Ki(i,zt,t.memoizedState.cache),xl();break;case 27:case 5:Oi(i);break;case 4:Ge(i,i.stateNode.containerInfo);break;case 10:Ki(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?($i(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Iv(t,i,a):($i(i),t=fi(t,i,a),t!==null?t.sibling:null);$i(i);break;case 19:var d=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Cl(t,i,a,!1),l=(a&i.childLanes)!==0),d){if(l)return Nv(t,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ce(Bt,Bt.current),l)break;return null;case 22:case 23:return i.lanes=0,Av(t,i,a);case 24:Ki(i,zt,t.memoizedState.cache)}return fi(t,i,a)}function Ov(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Gt=!0;else{if(!Pf(t,a)&&(i.flags&128)===0)return Gt=!1,W1(t,i,a);Gt=(t.flags&131072)!==0}else Gt=!1,Ke&&(i.flags&1048576)!==0&&ly(i,bc,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,d=l._init;if(l=d(l._payload),i.type=l,typeof l=="function")Hd(l)?(t=Aa(l,t),i.tag=1,i=Rv(null,i,l,t,a)):(i.tag=0,i=If(null,i,l,t,a));else{if(l!=null){if(d=l.$$typeof,d===oe){i.tag=11,i=bv(null,i,l,t,a);break e}else if(d===R){i.tag=14,i=Tv(null,i,l,t,a);break e}}throw i=ue(l)||l,Error(s(306,i,""))}}return i;case 0:return If(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,d=Aa(l,i.pendingProps),Rv(t,i,l,d,a);case 3:e:{if(Ge(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var f=i.memoizedState;d=f.element,sf(t,i),Vl(i,l,null,a);var E=i.memoizedState;if(l=E.cache,Ki(i,zt,l),l!==f.cache&&Zd(i,[zt],a,!0),Ml(),l=E.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=Cv(t,i,l,a);break e}else if(l!==d){d=er(Error(s(424)),i),Rl(d),i=Cv(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(_t=vr(t.firstChild),En=i,Ke=!0,va=null,Vr=!0,a=cv(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(xl(),l===d){i=fi(t,i,a);break e}Jt(t,i,l,a)}i=i.child}return i;case 26:return Bc(t,i),t===null?(a=P_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ke||(a=i.type,t=i.pendingProps,l=nh(Se.current).createElement(a),l[wt]=i,l[Zt]=t,tn(l,a,t),xt(l),i.stateNode=l):i.memoizedState=P_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Oi(i),t===null&&Ke&&(l=i.stateNode=k_(i.type,i.pendingProps,Se.current),En=i,Vr=!0,d=_t,os(i.type)?(gm=d,_t=vr(l.firstChild)):_t=d),Jt(t,i,i.pendingProps.children,a),Bc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Ke&&((d=l=_t)&&(l=TA(l,i.type,i.pendingProps,Vr),l!==null?(i.stateNode=l,En=i,_t=vr(l.firstChild),Vr=!1,d=!0):d=!1),d||_a(i)),Oi(i),d=i.type,f=i.pendingProps,E=t!==null?t.memoizedProps:null,l=f.children,dm(d,f)?l=null:E!==null&&dm(d,E)&&(i.flags|=32),i.memoizedState!==null&&(d=hf(t,i,z1,null,null,a),ru._currentValue=d),Bc(t,i),Jt(t,i,l,a),i.child;case 6:return t===null&&Ke&&((t=a=_t)&&(a=SA(a,i.pendingProps,Vr),a!==null?(i.stateNode=a,En=i,_t=null,t=!0):t=!1),t||_a(i)),null;case 13:return Iv(t,i,a);case 4:return Ge(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=So(i,null,l,a):Jt(t,i,l,a),i.child;case 11:return bv(t,i,i.type,i.pendingProps,a);case 7:return Jt(t,i,i.pendingProps,a),i.child;case 8:return Jt(t,i,i.pendingProps.children,a),i.child;case 12:return Jt(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Ki(i,i.type,l.value),Jt(t,i,l.children,a),i.child;case 9:return d=i.type._context,l=i.pendingProps.children,ba(i),d=un(d),l=l(d),i.flags|=1,Jt(t,i,l,a),i.child;case 14:return Tv(t,i,i.type,i.pendingProps,a);case 15:return Sv(t,i,i.type,i.pendingProps,a);case 19:return Nv(t,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},t===null?(a=qc(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=ai(t.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Av(t,i,a);case 24:return ba(i),l=un(zt),t===null?(d=tf(),d===null&&(d=at,f=Jd(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=a),d=f),i.memoizedState={parent:l,cache:d},rf(i),Ki(i,zt,d)):((t.lanes&a)!==0&&(sf(t,i),Vl(i,null,null,a),Ml()),d=t.memoizedState,f=i.memoizedState,d.parent!==l?(d={parent:l,cache:l},i.memoizedState=d,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=d),Ki(i,zt,l)):(l=f.cache,Ki(i,zt,l),l!==d.cache&&Zd(i,[zt],a,!0))),Jt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function mi(t){t.flags|=4}function kv(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!B_(i)){if(i=ir.current,i!==null&&((qe&4194048)===qe?Pr!==null:(qe&62914560)!==qe&&(qe&536870912)===0||i!==Pr))throw Ol=nf,gy;t.flags|=8192}}function Fc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?$():536870912,t.lanes|=i,Ro|=i)}function ql(t,i){if(!Ke)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function pt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function Y1(t,i,a){var l=i.pendingProps;switch(Wd(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(i),null;case 1:return pt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ci(zt),Tn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(wl(i)?mi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,hy())),pt(i),null;case 26:return a=i.memoizedState,t===null?(mi(i),a!==null?(pt(i),kv(i,a)):(pt(i),i.flags&=-16777217)):a?a!==t.memoizedState?(mi(i),pt(i),kv(i,a)):(pt(i),i.flags&=-16777217):(t.memoizedProps!==l&&mi(i),pt(i),i.flags&=-16777217),null;case 27:$r(i),a=Se.current;var d=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&mi(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return pt(i),null}t=ve.current,wl(i)?uy(i):(t=k_(d,l,a),i.stateNode=t,mi(i))}return pt(i),null;case 5:if($r(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&mi(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return pt(i),null}if(t=ve.current,wl(i))uy(i);else{switch(d=nh(Se.current),t){case 1:t=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?d.createElement("select",{is:l.is}):d.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?d.createElement(a,{is:l.is}):d.createElement(a)}}t[wt]=i,t[Zt]=l;e:for(d=i.child;d!==null;){if(d.tag===5||d.tag===6)t.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===i)break e;for(;d.sibling===null;){if(d.return===null||d.return===i)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}i.stateNode=t;e:switch(tn(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&mi(i)}}return pt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&mi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=Se.current,wl(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,d=En,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}t[wt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||x_(t.nodeValue,a)),t||_a(i)}else t=nh(t).createTextNode(l),t[wt]=i,i.stateNode=t}return pt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=wl(i),l!==null&&l.dehydrated!==null){if(t===null){if(!d)throw Error(s(318));if(d=i.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[wt]=i}else xl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;pt(i),d=!1}else d=hy(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return i.flags&256?(di(i),i):(di(i),null)}if(di(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=i.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==d&&(l.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),Fc(i,i.updateQueue),pt(i),null;case 4:return Tn(),t===null&&om(i.stateNode.containerInfo),pt(i),null;case 10:return ci(i.type),pt(i),null;case 19:if(de(Bt),d=i.memoizedState,d===null)return pt(i),null;if(l=(i.flags&128)!==0,f=d.rendering,f===null)if(l)ql(d,!1);else{if(Et!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(f=Uc(t),f!==null){for(i.flags|=128,ql(d,!1),t=f.updateQueue,i.updateQueue=t,Fc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)oy(a,t),a=a.sibling;return ce(Bt,Bt.current&1|2),i.child}t=t.sibling}d.tail!==null&&an()>Kc&&(i.flags|=128,l=!0,ql(d,!1),i.lanes=4194304)}else{if(!l)if(t=Uc(f),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,Fc(i,t),ql(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!Ke)return pt(i),null}else 2*an()-d.renderingStartTime>Kc&&a!==536870912&&(i.flags|=128,l=!0,ql(d,!1),i.lanes=4194304);d.isBackwards?(f.sibling=i.child,i.child=f):(t=d.last,t!==null?t.sibling=f:i.child=f,d.last=f)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=an(),i.sibling=null,t=Bt.current,ce(Bt,l?t&1|2:t&1),i):(pt(i),null);case 22:case 23:return di(i),uf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(pt(i),i.subtreeFlags&6&&(i.flags|=8192)):pt(i),a=i.updateQueue,a!==null&&Fc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&de(Ta),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ci(zt),pt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function X1(t,i){switch(Wd(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return ci(zt),Tn(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return $r(i),null;case 13:if(di(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));xl()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return de(Bt),null;case 4:return Tn(),null;case 10:return ci(i.type),null;case 22:case 23:return di(i),uf(),t!==null&&de(Ta),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return ci(zt),null;case 25:return null;default:return null}}function Mv(t,i){switch(Wd(i),i.tag){case 3:ci(zt),Tn();break;case 26:case 27:case 5:$r(i);break;case 4:Tn();break;case 13:di(i);break;case 19:de(Bt);break;case 10:ci(i.type);break;case 22:case 23:di(i),uf(),t!==null&&de(Ta);break;case 24:ci(zt)}}function Fl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&t)===t){l=void 0;var f=a.create,E=a.inst;l=f(),E.destroy=l}a=a.next}while(a!==d)}}catch(T){it(i,i.return,T)}}function Ji(t,i,a){try{var l=i.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var f=d.next;l=f;do{if((l.tag&t)===t){var E=l.inst,T=E.destroy;if(T!==void 0){E.destroy=void 0,d=i;var D=a,F=T;try{F()}catch(J){it(d,D,J)}}}l=l.next}while(l!==f)}}catch(J){it(i,i.return,J)}}function Vv(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Ty(i,a)}catch(l){it(t,t.return,l)}}}function Pv(t,i,a){a.props=Aa(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){it(t,i,l)}}function Hl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(d){it(t,i,d)}}function jr(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){it(t,i,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){it(t,i,d)}else a.current=null}function jv(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){it(t,t.return,d)}}function jf(t,i,a){try{var l=t.stateNode;yA(l,t.type,a,i),l[Zt]=i}catch(d){it(t,t.return,d)}}function Uv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&os(t.type)||t.tag===4}function Uf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Uv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&os(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lf(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=th));else if(l!==4&&(l===27&&os(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Lf(t,i,a),t=t.sibling;t!==null;)Lf(t,i,a),t=t.sibling}function Hc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&os(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Hc(t,i,a),t=t.sibling;t!==null;)Hc(t,i,a),t=t.sibling}function Lv(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,d=i.attributes;d.length;)i.removeAttributeNode(d[0]);tn(i,l,a),i[wt]=t,i[Zt]=a}catch(f){it(t,t.return,f)}}var pi=!1,It=!1,zf=!1,zv=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function $1(t,i){if(t=t.containerInfo,cm=lh,t=$g(t),jd(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var E=0,T=-1,D=-1,F=0,J=0,ne=t,H=null;t:for(;;){for(var G;ne!==a||d!==0&&ne.nodeType!==3||(T=E+d),ne!==f||l!==0&&ne.nodeType!==3||(D=E+l),ne.nodeType===3&&(E+=ne.nodeValue.length),(G=ne.firstChild)!==null;)H=ne,ne=G;for(;;){if(ne===t)break t;if(H===a&&++F===d&&(T=E),H===f&&++J===l&&(D=E),(G=ne.nextSibling)!==null)break;ne=H,H=ne.parentNode}ne=G}a=T===-1||D===-1?null:{start:T,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(hm={focusedElem:t,selectionRange:a},lh=!1,Kt=i;Kt!==null;)if(i=Kt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,Kt=t;else for(;Kt!==null;){switch(i=Kt,f=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=i,d=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var Re=Aa(a.type,d,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Re,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(Te){it(a,a.return,Te)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)mm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":mm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Kt=t;break}Kt=i.return}}function Bv(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:es(t,a),l&4&&Fl(5,a);break;case 1:if(es(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(E){it(a,a.return,E)}else{var d=Aa(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(d,i,t.__reactInternalSnapshotBeforeUpdate)}catch(E){it(a,a.return,E)}}l&64&&Vv(a),l&512&&Hl(a,a.return);break;case 3:if(es(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Ty(t,i)}catch(E){it(a,a.return,E)}}break;case 27:i===null&&l&4&&Lv(a);case 26:case 5:es(t,a),i===null&&l&4&&jv(a),l&512&&Hl(a,a.return);break;case 12:es(t,a);break;case 13:es(t,a),l&4&&Hv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=aA.bind(null,a),AA(t,a))));break;case 22:if(l=a.memoizedState!==null||pi,!l){i=i!==null&&i.memoizedState!==null||It,d=pi;var f=It;pi=l,(It=i)&&!f?ts(t,a,(a.subtreeFlags&8772)!==0):es(t,a),pi=d,It=f}break;case 30:break;default:es(t,a)}}function qv(t){var i=t.alternate;i!==null&&(t.alternate=null,qv(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Xa(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ft=null,wn=!1;function gi(t,i,a){for(a=a.child;a!==null;)Fv(t,i,a),a=a.sibling}function Fv(t,i,a){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(ur,a)}catch{}switch(a.tag){case 26:It||jr(a,i),gi(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:It||jr(a,i);var l=ft,d=wn;os(a.type)&&(ft=a.stateNode,wn=!1),gi(t,i,a),Jl(a.stateNode),ft=l,wn=d;break;case 5:It||jr(a,i);case 6:if(l=ft,d=wn,ft=null,gi(t,i,a),ft=l,wn=d,ft!==null)if(wn)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(a.stateNode)}catch(f){it(a,i,f)}else try{ft.removeChild(a.stateNode)}catch(f){it(a,i,f)}break;case 18:ft!==null&&(wn?(t=ft,N_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),ou(t)):N_(ft,a.stateNode));break;case 4:l=ft,d=wn,ft=a.stateNode.containerInfo,wn=!0,gi(t,i,a),ft=l,wn=d;break;case 0:case 11:case 14:case 15:It||Ji(2,a,i),It||Ji(4,a,i),gi(t,i,a);break;case 1:It||(jr(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Pv(a,i,l)),gi(t,i,a);break;case 21:gi(t,i,a);break;case 22:It=(l=It)||a.memoizedState!==null,gi(t,i,a),It=l;break;default:gi(t,i,a)}}function Hv(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ou(t)}catch(a){it(i,i.return,a)}}function Z1(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new zv),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new zv),i;default:throw Error(s(435,t.tag))}}function Bf(t,i){var a=Z1(t);i.forEach(function(l){var d=oA.bind(null,t,l);a.has(l)||(a.add(l),l.then(d,d))})}function Ln(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],f=t,E=i,T=E;e:for(;T!==null;){switch(T.tag){case 27:if(os(T.type)){ft=T.stateNode,wn=!1;break e}break;case 5:ft=T.stateNode,wn=!1;break e;case 3:case 4:ft=T.stateNode.containerInfo,wn=!0;break e}T=T.return}if(ft===null)throw Error(s(160));Fv(f,E,d),ft=null,wn=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Gv(i,t),i=i.sibling}var yr=null;function Gv(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ln(i,t),zn(t),l&4&&(Ji(3,t,t.return),Fl(3,t),Ji(5,t,t.return));break;case 1:Ln(i,t),zn(t),l&512&&(It||a===null||jr(a,a.return)),l&64&&pi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=yr;if(Ln(i,t),zn(t),l&512&&(It||a===null||jr(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":f=d.getElementsByTagName("title")[0],(!f||f[Pi]||f[wt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(l),d.head.insertBefore(f,d.querySelector("head > title"))),tn(f,l,a),f[wt]=t,xt(f),l=f;break e;case"link":var E=L_("link","href",d).get(l+(a.href||""));if(E){for(var T=0;T<E.length;T++)if(f=E[T],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(T,1);break t}}f=d.createElement(l),tn(f,l,a),d.head.appendChild(f);break;case"meta":if(E=L_("meta","content",d).get(l+(a.content||""))){for(T=0;T<E.length;T++)if(f=E[T],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(T,1);break t}}f=d.createElement(l),tn(f,l,a),d.head.appendChild(f);break;default:throw Error(s(468,l))}f[wt]=t,xt(f),l=f}t.stateNode=l}else z_(d,t.type,t.stateNode);else t.stateNode=U_(d,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?z_(d,t.type,t.stateNode):U_(d,l,t.memoizedProps)):l===null&&t.stateNode!==null&&jf(t,t.memoizedProps,a.memoizedProps)}break;case 27:Ln(i,t),zn(t),l&512&&(It||a===null||jr(a,a.return)),a!==null&&l&4&&jf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Ln(i,t),zn(t),l&512&&(It||a===null||jr(a,a.return)),t.flags&32){d=t.stateNode;try{Zn(d,"")}catch(G){it(t,t.return,G)}}l&4&&t.stateNode!=null&&(d=t.memoizedProps,jf(t,d,a!==null?a.memoizedProps:d)),l&1024&&(zf=!0);break;case 6:if(Ln(i,t),zn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(G){it(t,t.return,G)}}break;case 3:if(sh=null,d=yr,yr=rh(i.containerInfo),Ln(i,t),yr=d,zn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{ou(i.containerInfo)}catch(G){it(t,t.return,G)}zf&&(zf=!1,Kv(t));break;case 4:l=yr,yr=rh(t.stateNode.containerInfo),Ln(i,t),zn(t),yr=l;break;case 12:Ln(i,t),zn(t);break;case 13:Ln(i,t),zn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Qf=an()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Bf(t,l)));break;case 22:d=t.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,F=pi,J=It;if(pi=F||d,It=J||D,Ln(i,t),It=J,pi=F,zn(t),l&8192)e:for(i=t.stateNode,i._visibility=d?i._visibility&-2:i._visibility|1,d&&(a===null||D||pi||It||wa(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){D=a=i;try{if(f=D.stateNode,d)E=f.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{T=D.stateNode;var ne=D.memoizedProps.style,H=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;T.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(G){it(D,D.return,G)}}}else if(i.tag===6){if(a===null){D=i;try{D.stateNode.nodeValue=d?"":D.memoizedProps}catch(G){it(D,D.return,G)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Bf(t,a))));break;case 19:Ln(i,t),zn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Bf(t,l)));break;case 30:break;case 21:break;default:Ln(i,t),zn(t)}}function zn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(Uv(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var d=a.stateNode,f=Uf(t);Hc(t,f,d);break;case 5:var E=a.stateNode;a.flags&32&&(Zn(E,""),a.flags&=-33);var T=Uf(t);Hc(t,T,E);break;case 3:case 4:var D=a.stateNode.containerInfo,F=Uf(t);Lf(t,F,D);break;default:throw Error(s(161))}}catch(J){it(t,t.return,J)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Kv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Kv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function es(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Bv(t,i.alternate,i),i=i.sibling}function wa(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Ji(4,i,i.return),wa(i);break;case 1:jr(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Pv(i,i.return,a),wa(i);break;case 27:Jl(i.stateNode);case 26:case 5:jr(i,i.return),wa(i);break;case 22:i.memoizedState===null&&wa(i);break;case 30:wa(i);break;default:wa(i)}t=t.sibling}}function ts(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,d=t,f=i,E=f.flags;switch(f.tag){case 0:case 11:case 15:ts(d,f,a),Fl(4,f);break;case 1:if(ts(d,f,a),l=f,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(F){it(l,l.return,F)}if(l=f,d=l.updateQueue,d!==null){var T=l.stateNode;try{var D=d.shared.hiddenCallbacks;if(D!==null)for(d.shared.hiddenCallbacks=null,d=0;d<D.length;d++)by(D[d],T)}catch(F){it(l,l.return,F)}}a&&E&64&&Vv(f),Hl(f,f.return);break;case 27:Lv(f);case 26:case 5:ts(d,f,a),a&&l===null&&E&4&&jv(f),Hl(f,f.return);break;case 12:ts(d,f,a);break;case 13:ts(d,f,a),a&&E&4&&Hv(d,f);break;case 22:f.memoizedState===null&&ts(d,f,a),Hl(f,f.return);break;case 30:break;default:ts(d,f,a)}i=i.sibling}}function qf(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Il(a))}function Ff(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Il(t))}function Ur(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Qv(t,i,a,l),i=i.sibling}function Qv(t,i,a,l){var d=i.flags;switch(i.tag){case 0:case 11:case 15:Ur(t,i,a,l),d&2048&&Fl(9,i);break;case 1:Ur(t,i,a,l);break;case 3:Ur(t,i,a,l),d&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Il(t)));break;case 12:if(d&2048){Ur(t,i,a,l),t=i.stateNode;try{var f=i.memoizedProps,E=f.id,T=f.onPostCommit;typeof T=="function"&&T(E,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){it(i,i.return,D)}}else Ur(t,i,a,l);break;case 13:Ur(t,i,a,l);break;case 23:break;case 22:f=i.stateNode,E=i.alternate,i.memoizedState!==null?f._visibility&2?Ur(t,i,a,l):Gl(t,i):f._visibility&2?Ur(t,i,a,l):(f._visibility|=2,Ao(t,i,a,l,(i.subtreeFlags&10256)!==0)),d&2048&&qf(E,i);break;case 24:Ur(t,i,a,l),d&2048&&Ff(i.alternate,i);break;default:Ur(t,i,a,l)}}function Ao(t,i,a,l,d){for(d=d&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var f=t,E=i,T=a,D=l,F=E.flags;switch(E.tag){case 0:case 11:case 15:Ao(f,E,T,D,d),Fl(8,E);break;case 23:break;case 22:var J=E.stateNode;E.memoizedState!==null?J._visibility&2?Ao(f,E,T,D,d):Gl(f,E):(J._visibility|=2,Ao(f,E,T,D,d)),d&&F&2048&&qf(E.alternate,E);break;case 24:Ao(f,E,T,D,d),d&&F&2048&&Ff(E.alternate,E);break;default:Ao(f,E,T,D,d)}i=i.sibling}}function Gl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,d=l.flags;switch(l.tag){case 22:Gl(a,l),d&2048&&qf(l.alternate,l);break;case 24:Gl(a,l),d&2048&&Ff(l.alternate,l);break;default:Gl(a,l)}i=i.sibling}}var Kl=8192;function wo(t){if(t.subtreeFlags&Kl)for(t=t.child;t!==null;)Wv(t),t=t.sibling}function Wv(t){switch(t.tag){case 26:wo(t),t.flags&Kl&&t.memoizedState!==null&&jA(yr,t.memoizedState,t.memoizedProps);break;case 5:wo(t);break;case 3:case 4:var i=yr;yr=rh(t.stateNode.containerInfo),wo(t),yr=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Kl,Kl=16777216,wo(t),Kl=i):wo(t));break;default:wo(t)}}function Yv(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Ql(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Kt=l,$v(l,t)}Yv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Xv(t),t=t.sibling}function Xv(t){switch(t.tag){case 0:case 11:case 15:Ql(t),t.flags&2048&&Ji(9,t,t.return);break;case 3:Ql(t);break;case 12:Ql(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Gc(t)):Ql(t);break;default:Ql(t)}}function Gc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Kt=l,$v(l,t)}Yv(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Ji(8,i,i.return),Gc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Gc(i));break;default:Gc(i)}t=t.sibling}}function $v(t,i){for(;Kt!==null;){var a=Kt;switch(a.tag){case 0:case 11:case 15:Ji(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Il(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Kt=l;else e:for(a=t;Kt!==null;){l=Kt;var d=l.sibling,f=l.return;if(qv(l),l===a){Kt=null;break e}if(d!==null){d.return=f,Kt=d;break e}Kt=f}}}var J1={getCacheForType:function(t){var i=un(zt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},eA=typeof WeakMap=="function"?WeakMap:Map,$e=0,at=null,Pe=null,qe=0,Ze=0,Bn=null,ns=!1,xo=!1,Hf=!1,yi=0,Et=0,rs=0,xa=0,Gf=0,sr=0,Ro=0,Wl=null,xn=null,Kf=!1,Qf=0,Kc=1/0,Qc=null,is=null,en=0,ss=null,Co=null,Io=0,Wf=0,Yf=null,Zv=null,Yl=0,Xf=null;function qn(){if(($e&2)!==0&&qe!==0)return qe&-qe;if(Q.T!==null){var t=go;return t!==0?t:rm()}return $t()}function Jv(){sr===0&&(sr=(qe&536870912)===0||Ke?Gs():536870912);var t=ir.current;return t!==null&&(t.flags|=32),sr}function Fn(t,i,a){(t===at&&(Ze===2||Ze===9)||t.cancelPendingCommit!==null)&&(Do(t,0),as(t,qe,sr,!1)),Je(t,a),(($e&2)===0||t!==at)&&(t===at&&(($e&2)===0&&(xa|=a),Et===4&&as(t,qe,sr,!1)),Lr(t))}function e_(t,i,a){if(($e&6)!==0)throw Error(s(327));var l=!a&&(i&124)===0&&(i&t.expiredLanes)===0||wr(t,i),d=l?rA(t,i):Jf(t,i,!0),f=l;do{if(d===0){xo&&!l&&as(t,i,0,!1);break}else{if(a=t.current.alternate,f&&!tA(a)){d=Jf(t,i,!1),f=!1;continue}if(d===2){if(f=i,t.errorRecoveryDisabledLanes&f)var E=0;else E=t.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var T=t;d=Wl;var D=T.current.memoizedState.isDehydrated;if(D&&(Do(T,E).flags|=256),E=Jf(T,E,!1),E!==2){if(Hf&&!D){T.errorRecoveryDisabledLanes|=f,xa|=f,d=4;break e}f=xn,xn=d,f!==null&&(xn===null?xn=f:xn.push.apply(xn,f))}d=E}if(f=!1,d!==2)continue}}if(d===1){Do(t,0),as(t,i,0,!0);break}e:{switch(l=t,f=d,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:as(l,i,sr,!ns);break e;case 2:xn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(d=Qf+300-an(),10<d)){if(as(l,i,sr,!ns),Sn(l,0,!0)!==0)break e;l.timeoutHandle=I_(t_.bind(null,l,a,xn,Qc,Kf,i,sr,xa,Ro,ns,f,2,-0,0),d);break e}t_(l,a,xn,Qc,Kf,i,sr,xa,Ro,ns,f,0,-0,0)}}break}while(!0);Lr(t)}function t_(t,i,a,l,d,f,E,T,D,F,J,ne,H,G){if(t.timeoutHandle=-1,ne=i.subtreeFlags,(ne&8192||(ne&16785408)===16785408)&&(nu={stylesheets:null,count:0,unsuspend:PA},Wv(i),ne=UA(),ne!==null)){t.cancelPendingCommit=ne(l_.bind(null,t,i,f,a,l,d,E,T,D,J,1,H,G)),as(t,f,E,!F);return}l_(t,i,f,a,l,d,E,T,D)}function tA(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],f=d.getSnapshot;d=d.value;try{if(!jn(f(),d))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function as(t,i,a,l){i&=~Gf,i&=~xa,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var d=i;0<d;){var f=31-Nt(d),E=1<<f;l[f]=-1,d&=~E}a!==0&&xr(t,a,i)}function Wc(){return($e&6)===0?(Xl(0),!1):!0}function $f(){if(Pe!==null){if(Ze===0)var t=Pe.return;else t=Pe,ui=Ea=null,mf(t),To=null,zl=0,t=Pe;for(;t!==null;)Mv(t.alternate,t),t=t.return;Pe=null}}function Do(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,_A(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),$f(),at=t,Pe=a=ai(t.current,null),qe=i,Ze=0,Bn=null,ns=!1,xo=wr(t,i),Hf=!1,Ro=sr=Gf=xa=rs=Et=0,xn=Wl=null,Kf=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var d=31-Nt(l),f=1<<d;i|=t[d],l&=~f}return yi=i,gc(),a}function n_(t,i){ke=null,Q.H=Vc,i===Nl||i===wc?(i=_y(),Ze=3):i===gy?(i=_y(),Ze=4):Ze=i===Ev?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Bn=i,Pe===null&&(Et=1,zc(t,er(i,t.current)))}function r_(){var t=Q.H;return Q.H=Vc,t===null?Vc:t}function i_(){var t=Q.A;return Q.A=J1,t}function Zf(){Et=4,ns||(qe&4194048)!==qe&&ir.current!==null||(xo=!0),(rs&134217727)===0&&(xa&134217727)===0||at===null||as(at,qe,sr,!1)}function Jf(t,i,a){var l=$e;$e|=2;var d=r_(),f=i_();(at!==t||qe!==i)&&(Qc=null,Do(t,i)),i=!1;var E=Et;e:do try{if(Ze!==0&&Pe!==null){var T=Pe,D=Bn;switch(Ze){case 8:$f(),E=6;break e;case 3:case 2:case 9:case 6:ir.current===null&&(i=!0);var F=Ze;if(Ze=0,Bn=null,No(t,T,D,F),a&&xo){E=0;break e}break;default:F=Ze,Ze=0,Bn=null,No(t,T,D,F)}}nA(),E=Et;break}catch(J){n_(t,J)}while(!0);return i&&t.shellSuspendCounter++,ui=Ea=null,$e=l,Q.H=d,Q.A=f,Pe===null&&(at=null,qe=0,gc()),E}function nA(){for(;Pe!==null;)s_(Pe)}function rA(t,i){var a=$e;$e|=2;var l=r_(),d=i_();at!==t||qe!==i?(Qc=null,Kc=an()+500,Do(t,i)):xo=wr(t,i);e:do try{if(Ze!==0&&Pe!==null){i=Pe;var f=Bn;t:switch(Ze){case 1:Ze=0,Bn=null,No(t,i,f,1);break;case 2:case 9:if(yy(f)){Ze=0,Bn=null,a_(i);break}i=function(){Ze!==2&&Ze!==9||at!==t||(Ze=7),Lr(t)},f.then(i,i);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:yy(f)?(Ze=0,Bn=null,a_(i)):(Ze=0,Bn=null,No(t,i,f,7));break;case 5:var E=null;switch(Pe.tag){case 26:E=Pe.memoizedState;case 5:case 27:var T=Pe;if(!E||B_(E)){Ze=0,Bn=null;var D=T.sibling;if(D!==null)Pe=D;else{var F=T.return;F!==null?(Pe=F,Yc(F)):Pe=null}break t}}Ze=0,Bn=null,No(t,i,f,5);break;case 6:Ze=0,Bn=null,No(t,i,f,6);break;case 8:$f(),Et=6;break e;default:throw Error(s(462))}}iA();break}catch(J){n_(t,J)}while(!0);return ui=Ea=null,Q.H=l,Q.A=d,$e=a,Pe!==null?0:(at=null,qe=0,gc(),Et)}function iA(){for(;Pe!==null&&!Qa();)s_(Pe)}function s_(t){var i=Ov(t.alternate,t,yi);t.memoizedProps=t.pendingProps,i===null?Yc(t):Pe=i}function a_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=xv(a,i,i.pendingProps,i.type,void 0,qe);break;case 11:i=xv(a,i,i.pendingProps,i.type.render,i.ref,qe);break;case 5:mf(i);default:Mv(a,i),i=Pe=oy(i,yi),i=Ov(a,i,yi)}t.memoizedProps=t.pendingProps,i===null?Yc(t):Pe=i}function No(t,i,a,l){ui=Ea=null,mf(i),To=null,zl=0;var d=i.return;try{if(Q1(t,d,i,a,qe)){Et=1,zc(t,er(a,t.current)),Pe=null;return}}catch(f){if(d!==null)throw Pe=d,f;Et=1,zc(t,er(a,t.current)),Pe=null;return}i.flags&32768?(Ke||l===1?t=!0:xo||(qe&536870912)!==0?t=!1:(ns=t=!0,(l===2||l===9||l===3||l===6)&&(l=ir.current,l!==null&&l.tag===13&&(l.flags|=16384))),o_(i,t)):Yc(i)}function Yc(t){var i=t;do{if((i.flags&32768)!==0){o_(i,ns);return}t=i.return;var a=Y1(i.alternate,i,yi);if(a!==null){Pe=a;return}if(i=i.sibling,i!==null){Pe=i;return}Pe=i=t}while(i!==null);Et===0&&(Et=5)}function o_(t,i){do{var a=X1(t.alternate,t);if(a!==null){a.flags&=32767,Pe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Pe=t;return}Pe=t=a}while(t!==null);Et=6,Pe=null}function l_(t,i,a,l,d,f,E,T,D){t.cancelPendingCommit=null;do Xc();while(en!==0);if(($e&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=qd,Ye(t,a,f,E,T,D),t===at&&(Pe=at=null,qe=0),Co=i,ss=t,Io=a,Wf=f,Yf=d,Zv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,lA(Mn,function(){return f_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null,d=ae.p,ae.p=2,E=$e,$e|=4;try{$1(t,i,a)}finally{$e=E,ae.p=d,Q.T=l}}en=1,u_(),c_(),h_()}}function u_(){if(en===1){en=0;var t=ss,i=Co,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var l=ae.p;ae.p=2;var d=$e;$e|=4;try{Gv(i,t);var f=hm,E=$g(t.containerInfo),T=f.focusedElem,D=f.selectionRange;if(E!==T&&T&&T.ownerDocument&&Xg(T.ownerDocument.documentElement,T)){if(D!==null&&jd(T)){var F=D.start,J=D.end;if(J===void 0&&(J=F),"selectionStart"in T)T.selectionStart=F,T.selectionEnd=Math.min(J,T.value.length);else{var ne=T.ownerDocument||document,H=ne&&ne.defaultView||window;if(H.getSelection){var G=H.getSelection(),Re=T.textContent.length,Te=Math.min(D.start,Re),rt=D.end===void 0?Te:Math.min(D.end,Re);!G.extend&&Te>rt&&(E=rt,rt=Te,Te=E);var L=Yg(T,Te),V=Yg(T,rt);if(L&&V&&(G.rangeCount!==1||G.anchorNode!==L.node||G.anchorOffset!==L.offset||G.focusNode!==V.node||G.focusOffset!==V.offset)){var z=ne.createRange();z.setStart(L.node,L.offset),G.removeAllRanges(),Te>rt?(G.addRange(z),G.extend(V.node,V.offset)):(z.setEnd(V.node,V.offset),G.addRange(z))}}}}for(ne=[],G=T;G=G.parentNode;)G.nodeType===1&&ne.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ne.length;T++){var te=ne[T];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}lh=!!cm,hm=cm=null}finally{$e=d,ae.p=l,Q.T=a}}t.current=i,en=2}}function c_(){if(en===2){en=0;var t=ss,i=Co,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var l=ae.p;ae.p=2;var d=$e;$e|=4;try{Bv(t,i.alternate,i)}finally{$e=d,ae.p=l,Q.T=a}}en=3}}function h_(){if(en===4||en===3){en=0,ki();var t=ss,i=Co,a=Io,l=Zv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?en=5:(en=0,Co=ss=null,d_(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(is=null),Be(a),i=i.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(ur,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=Q.T,d=ae.p,ae.p=2,Q.T=null;try{for(var f=t.onRecoverableError,E=0;E<l.length;E++){var T=l[E];f(T.value,{componentStack:T.stack})}}finally{Q.T=i,ae.p=d}}(Io&3)!==0&&Xc(),Lr(t),d=t.pendingLanes,(a&4194090)!==0&&(d&42)!==0?t===Xf?Yl++:(Yl=0,Xf=t):Yl=0,Xl(0)}}function d_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Il(i)))}function Xc(t){return u_(),c_(),h_(),f_()}function f_(){if(en!==5)return!1;var t=ss,i=Wf;Wf=0;var a=Be(Io),l=Q.T,d=ae.p;try{ae.p=32>a?32:a,Q.T=null,a=Yf,Yf=null;var f=ss,E=Io;if(en=0,Co=ss=null,Io=0,($e&6)!==0)throw Error(s(331));var T=$e;if($e|=4,Xv(f.current),Qv(f,f.current,E,a),$e=T,Xl(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(ur,f)}catch{}return!0}finally{ae.p=d,Q.T=l,d_(t,i)}}function m_(t,i,a){i=er(a,i),i=Cf(t.stateNode,i,2),t=Yi(t,i,2),t!==null&&(Je(t,2),Lr(t))}function it(t,i,a){if(t.tag===3)m_(t,t,a);else for(;i!==null;){if(i.tag===3){m_(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(is===null||!is.has(l))){t=er(a,t),a=vv(2),l=Yi(i,a,2),l!==null&&(_v(a,l,i,t),Je(l,2),Lr(l));break}}i=i.return}}function em(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new eA;var d=new Set;l.set(i,d)}else d=l.get(i),d===void 0&&(d=new Set,l.set(i,d));d.has(a)||(Hf=!0,d.add(a),t=sA.bind(null,t,i,a),i.then(t,t))}function sA(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,at===t&&(qe&a)===a&&(Et===4||Et===3&&(qe&62914560)===qe&&300>an()-Qf?($e&2)===0&&Do(t,0):Gf|=a,Ro===qe&&(Ro=0)),Lr(t)}function p_(t,i){i===0&&(i=$()),t=ho(t,i),t!==null&&(Je(t,i),Lr(t))}function aA(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),p_(t,a)}function oA(t,i){var a=0;switch(t.tag){case 13:var l=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),p_(t,a)}function lA(t,i){return kn(t,i)}var $c=null,Oo=null,tm=!1,Zc=!1,nm=!1,Ra=0;function Lr(t){t!==Oo&&t.next===null&&(Oo===null?$c=Oo=t:Oo=Oo.next=t),Zc=!0,tm||(tm=!0,cA())}function Xl(t,i){if(!nm&&Zc){nm=!0;do for(var a=!1,l=$c;l!==null;){if(t!==0){var d=l.pendingLanes;if(d===0)var f=0;else{var E=l.suspendedLanes,T=l.pingedLanes;f=(1<<31-Nt(42|t)+1)-1,f&=d&~(E&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,__(l,f))}else f=qe,f=Sn(l,l===at?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||wr(l,f)||(a=!0,__(l,f));l=l.next}while(a);nm=!1}}function uA(){g_()}function g_(){Zc=tm=!1;var t=0;Ra!==0&&(vA()&&(t=Ra),Ra=0);for(var i=an(),a=null,l=$c;l!==null;){var d=l.next,f=y_(l,i);f===0?(l.next=null,a===null?$c=d:a.next=d,d===null&&(Oo=a)):(a=l,(t!==0||(f&3)!==0)&&(Zc=!0)),l=d}Xl(t)}function y_(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,d=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var E=31-Nt(f),T=1<<E,D=d[E];D===-1?((T&a)===0||(T&l)!==0)&&(d[E]=Jr(T,i)):D<=i&&(t.expiredLanes|=T),f&=~T}if(i=at,a=qe,a=Sn(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(Ze===2||Ze===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&lr(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||wr(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&lr(l),Be(a)){case 2:case 8:a=At;break;case 32:a=Mn;break;case 268435456:a=Vi;break;default:a=Mn}return l=v_.bind(null,t),a=kn(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&lr(l),t.callbackPriority=2,t.callbackNode=null,2}function v_(t,i){if(en!==0&&en!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Xc()&&t.callbackNode!==a)return null;var l=qe;return l=Sn(t,t===at?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(e_(t,l,i),y_(t,an()),t.callbackNode!=null&&t.callbackNode===a?v_.bind(null,t):null)}function __(t,i){if(Xc())return null;e_(t,i,!0)}function cA(){EA(function(){($e&6)!==0?kn(vt,uA):g_()})}function rm(){return Ra===0&&(Ra=Gs()),Ra}function E_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:dr(""+t)}function b_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function hA(t,i,a,l,d){if(i==="submit"&&a&&a.stateNode===d){var f=E_((d[Zt]||null).action),E=l.submitter;E&&(i=(i=E[Zt]||null)?E_(i.formAction):E.getAttribute("formAction"),i!==null&&(f=i,E=null));var T=new aa("action","action",null,l,d);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ra!==0){var D=E?b_(d,E):new FormData(d);Sf(a,{pending:!0,data:D,method:d.method,action:f},null,D)}}else typeof f=="function"&&(T.preventDefault(),D=E?b_(d,E):new FormData(d),Sf(a,{pending:!0,data:D,method:d.method,action:f},f,D))},currentTarget:d}]})}}for(var im=0;im<Bd.length;im++){var sm=Bd[im],dA=sm.toLowerCase(),fA=sm[0].toUpperCase()+sm.slice(1);gr(dA,"on"+fA)}gr(ey,"onAnimationEnd"),gr(ty,"onAnimationIteration"),gr(ny,"onAnimationStart"),gr("dblclick","onDoubleClick"),gr("focusin","onFocus"),gr("focusout","onBlur"),gr(D1,"onTransitionRun"),gr(N1,"onTransitionStart"),gr(O1,"onTransitionCancel"),gr(ry,"onTransitionEnd"),Nr("onMouseEnter",["mouseout","mouseover"]),Nr("onMouseLeave",["mouseout","mouseover"]),Nr("onPointerEnter",["pointerout","pointerover"]),Nr("onPointerLeave",["pointerout","pointerover"]),Dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Dr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($l));function T_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],d=l.event;l=l.listeners;e:{var f=void 0;if(i)for(var E=l.length-1;0<=E;E--){var T=l[E],D=T.instance,F=T.currentTarget;if(T=T.listener,D!==f&&d.isPropagationStopped())break e;f=T,d.currentTarget=F;try{f(d)}catch(J){Lc(J)}d.currentTarget=null,f=D}else for(E=0;E<l.length;E++){if(T=l[E],D=T.instance,F=T.currentTarget,T=T.listener,D!==f&&d.isPropagationStopped())break e;f=T,d.currentTarget=F;try{f(d)}catch(J){Lc(J)}d.currentTarget=null,f=D}}}}function je(t,i){var a=i[Qs];a===void 0&&(a=i[Qs]=new Set);var l=t+"__bubble";a.has(l)||(S_(i,t,2,!1),a.add(l))}function am(t,i,a){var l=0;i&&(l|=4),S_(a,t,l,i)}var Jc="_reactListening"+Math.random().toString(36).slice(2);function om(t){if(!t[Jc]){t[Jc]=!0,ec.forEach(function(a){a!=="selectionchange"&&(mA.has(a)||am(a,!1,t),am(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Jc]||(i[Jc]=!0,am("selectionchange",!1,i))}}function S_(t,i,a,l){switch(Q_(i)){case 2:var d=BA;break;case 8:d=qA;break;default:d=bm}a=d.bind(null,i,a,t),d=void 0,!ii||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),l?d!==void 0?t.addEventListener(i,a,{capture:!0,passive:d}):t.addEventListener(i,a,!0):d!==void 0?t.addEventListener(i,a,{passive:d}):t.addEventListener(i,a,!1)}function lm(t,i,a,l,d){var f=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var T=l.stateNode.containerInfo;if(T===d)break;if(E===4)for(E=l.return;E!==null;){var D=E.tag;if((D===3||D===4)&&E.stateNode.containerInfo===d)return;E=E.return}for(;T!==null;){if(E=Cr(T),E===null)return;if(D=E.tag,D===5||D===6||D===26||D===27){l=f=E;continue e}T=T.parentNode}}l=l.return}ra(function(){var F=f,J=ml(a),ne=[];e:{var H=iy.get(t);if(H!==void 0){var G=aa,Re=t;switch(t){case"keypress":if(ia(a)===0)break e;case"keydown":case"keyup":G=oo;break;case"focusin":Re="focus",G=io;break;case"focusout":Re="blur",G=io;break;case"beforeblur":case"afterblur":G=io;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=ha;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=oc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=Gi;break;case ey:case ty:case ny:G=gl;break;case ry:G=y;break;case"scroll":case"scrollend":G=la;break;case"wheel":G=A;break;case"copy":case"cut":case"paste":G=uc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=_l;break;case"toggle":case"beforetoggle":G=W}var Te=(i&4)!==0,rt=!Te&&(t==="scroll"||t==="scrollend"),L=Te?H!==null?H+"Capture":null:H;Te=[];for(var V=F,z;V!==null;){var te=V;if(z=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||z===null||L===null||(te=Fi(V,L),te!=null&&Te.push(Zl(V,te,z))),rt)break;V=V.return}0<Te.length&&(H=new G(H,Re,null,a,J),ne.push({event:H,listeners:Te}))}}if((i&7)===0){e:{if(H=t==="mouseover"||t==="pointerover",G=t==="mouseout"||t==="pointerout",H&&a!==fl&&(Re=a.relatedTarget||a.fromElement)&&(Cr(Re)||Re[ei]))break e;if((G||H)&&(H=J.window===J?J:(H=J.ownerDocument)?H.defaultView||H.parentWindow:window,G?(Re=a.relatedTarget||a.toElement,G=F,Re=Re?Cr(Re):null,Re!==null&&(rt=u(Re),Te=Re.tag,Re!==rt||Te!==5&&Te!==27&&Te!==6)&&(Re=null)):(G=null,Re=F),G!==Re)){if(Te=ha,te="onMouseLeave",L="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(Te=_l,te="onPointerLeave",L="onPointerEnter",V="pointer"),rt=G==null?H:ji(G),z=Re==null?H:ji(Re),H=new Te(te,V+"leave",G,a,J),H.target=rt,H.relatedTarget=z,te=null,Cr(J)===F&&(Te=new Te(L,V+"enter",Re,a,J),Te.target=z,Te.relatedTarget=rt,te=Te),rt=te,G&&Re)t:{for(Te=G,L=Re,V=0,z=Te;z;z=ko(z))V++;for(z=0,te=L;te;te=ko(te))z++;for(;0<V-z;)Te=ko(Te),V--;for(;0<z-V;)L=ko(L),z--;for(;V--;){if(Te===L||L!==null&&Te===L.alternate)break t;Te=ko(Te),L=ko(L)}Te=null}else Te=null;G!==null&&A_(ne,H,G,Te,!1),Re!==null&&rt!==null&&A_(ne,rt,Re,Te,!0)}}e:{if(H=F?ji(F):window,G=H.nodeName&&H.nodeName.toLowerCase(),G==="select"||G==="input"&&H.type==="file")var pe=Fg;else if(Bg(H))if(Hg)pe=R1;else{pe=w1;var Ve=A1}else G=H.nodeName,!G||G.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?F&&to(F.elementType)&&(pe=Fg):pe=x1;if(pe&&(pe=pe(t,F))){qg(ne,pe,a,J);break e}Ve&&Ve(t,H,F),t==="focusout"&&F&&H.type==="number"&&F.memoizedProps.value!=null&&cl(H,"number",H.value)}switch(Ve=F?ji(F):window,t){case"focusin":(Bg(Ve)||Ve.contentEditable==="true")&&(lo=Ve,Ud=F,Al=null);break;case"focusout":Al=Ud=lo=null;break;case"mousedown":Ld=!0;break;case"contextmenu":case"mouseup":case"dragend":Ld=!1,Zg(ne,a,J);break;case"selectionchange":if(I1)break;case"keydown":case"keyup":Zg(ne,a,J)}var Ee;if(Ie)e:{switch(t){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else pr?fr(t,a)&&(Ae="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ae="onCompositionStart");Ae&&(Rt&&a.locale!=="ko"&&(pr||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&pr&&(Ee=ac()):(Jn=J,st="value"in Jn?Jn.value:Jn.textContent,pr=!0)),Ve=eh(F,Ae),0<Ve.length&&(Ae=new vl(Ae,t,null,a,J),ne.push({event:Ae,listeners:Ve}),Ee?Ae.data=Ee:(Ee=mr(a),Ee!==null&&(Ae.data=Ee)))),(Ee=Xe?El(t,a):b1(t,a))&&(Ae=eh(F,"onBeforeInput"),0<Ae.length&&(Ve=new vl("onBeforeInput","beforeinput",null,a,J),ne.push({event:Ve,listeners:Ae}),Ve.data=Ee)),hA(ne,t,F,a,J)}T_(ne,i)})}function Zl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function eh(t,i){for(var a=i+"Capture",l=[];t!==null;){var d=t,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=Fi(t,a),d!=null&&l.unshift(Zl(t,d,f)),d=Fi(t,i),d!=null&&l.push(Zl(t,d,f))),t.tag===3)return l;t=t.return}return[]}function ko(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function A_(t,i,a,l,d){for(var f=i._reactName,E=[];a!==null&&a!==l;){var T=a,D=T.alternate,F=T.stateNode;if(T=T.tag,D!==null&&D===l)break;T!==5&&T!==26&&T!==27||F===null||(D=F,d?(F=Fi(a,f),F!=null&&E.unshift(Zl(a,F,D))):d||(F=Fi(a,f),F!=null&&E.push(Zl(a,F,D)))),a=a.return}E.length!==0&&t.push({event:i,listeners:E})}var pA=/\r\n?/g,gA=/\u0000|\uFFFD/g;function w_(t){return(typeof t=="string"?t:""+t).replace(pA,`
`).replace(gA,"")}function x_(t,i){return i=w_(i),w_(t)===i}function th(){}function nt(t,i,a,l,d,f){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Zn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Zn(t,""+l);break;case"className":Zs(t,"class",l);break;case"tabIndex":Zs(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Zs(t,a,l);break;case"style":dl(t,l,f);break;case"data":if(i!=="object"){Zs(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=dr(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&nt(t,i,"name",d.name,d,null),nt(t,i,"formEncType",d.formEncType,d,null),nt(t,i,"formMethod",d.formMethod,d,null),nt(t,i,"formTarget",d.formTarget,d,null)):(nt(t,i,"encType",d.encType,d,null),nt(t,i,"method",d.method,d,null),nt(t,i,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=dr(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=th);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=dr(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":je("beforetoggle",t),je("toggle",t),$s(t,"popover",l);break;case"xlinkActuate":$n(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":$n(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":$n(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":$n(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":$n(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":$n(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":$n(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":$n(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":$n(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":$s(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=rc.get(a)||a,$s(t,a,l))}}function um(t,i,a,l,d,f){switch(a){case"style":dl(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Zn(t,l):(typeof l=="number"||typeof l=="bigint")&&Zn(t,""+l);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"onClick":l!=null&&(t.onclick=th);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ys.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),i=a.slice(2,d?a.length-7:void 0),f=t[Zt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(i,f,d),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,d);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):$s(t,a,l)}}}function tn(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",t),je("load",t);var l=!1,d=!1,f;for(f in a)if(a.hasOwnProperty(f)){var E=a[f];if(E!=null)switch(f){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:nt(t,i,f,E,a,null)}}d&&nt(t,i,"srcSet",a.srcSet,a,null),l&&nt(t,i,"src",a.src,a,null);return;case"input":je("invalid",t);var T=f=E=d=null,D=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var J=a[l];if(J!=null)switch(l){case"name":d=J;break;case"type":E=J;break;case"checked":D=J;break;case"defaultChecked":F=J;break;case"value":f=J;break;case"defaultValue":T=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,i));break;default:nt(t,i,l,J,a,null)}}ul(t,f,T,D,F,E,d,!1),zi(t);return;case"select":je("invalid",t),l=E=f=null;for(d in a)if(a.hasOwnProperty(d)&&(T=a[d],T!=null))switch(d){case"value":f=T;break;case"defaultValue":E=T;break;case"multiple":l=T;default:nt(t,i,d,T,a,null)}i=f,a=E,t.multiple=!!l,i!=null?Bi(t,!!l,i,!1):a!=null&&Bi(t,!!l,a,!0);return;case"textarea":je("invalid",t),f=d=l=null;for(E in a)if(a.hasOwnProperty(E)&&(T=a[E],T!=null))switch(E){case"value":l=T;break;case"defaultValue":d=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:nt(t,i,E,T,a,null)}nc(t,l,d,f),zi(t);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:nt(t,i,D,l,a,null)}return;case"dialog":je("beforetoggle",t),je("toggle",t),je("cancel",t),je("close",t);break;case"iframe":case"object":je("load",t);break;case"video":case"audio":for(l=0;l<$l.length;l++)je($l[l],t);break;case"image":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"embed":case"source":case"link":je("error",t),je("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:nt(t,i,F,l,a,null)}return;default:if(to(i)){for(J in a)a.hasOwnProperty(J)&&(l=a[J],l!==void 0&&um(t,i,J,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&nt(t,i,T,l,a,null))}function yA(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,E=null,T=null,D=null,F=null,J=null;for(G in a){var ne=a[G];if(a.hasOwnProperty(G)&&ne!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":D=ne;default:l.hasOwnProperty(G)||nt(t,i,G,null,l,ne)}}for(var H in l){var G=l[H];if(ne=a[H],l.hasOwnProperty(H)&&(G!=null||ne!=null))switch(H){case"type":f=G;break;case"name":d=G;break;case"checked":F=G;break;case"defaultChecked":J=G;break;case"value":E=G;break;case"defaultValue":T=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:G!==ne&&nt(t,i,H,G,l,ne)}}ll(t,E,T,D,F,J,f,d);return;case"select":G=E=T=H=null;for(f in a)if(D=a[f],a.hasOwnProperty(f)&&D!=null)switch(f){case"value":break;case"multiple":G=D;default:l.hasOwnProperty(f)||nt(t,i,f,null,l,D)}for(d in l)if(f=l[d],D=a[d],l.hasOwnProperty(d)&&(f!=null||D!=null))switch(d){case"value":H=f;break;case"defaultValue":T=f;break;case"multiple":E=f;default:f!==D&&nt(t,i,d,f,l,D)}i=T,a=E,l=G,H!=null?Bi(t,!!a,H,!1):!!l!=!!a&&(i!=null?Bi(t,!!a,i,!0):Bi(t,!!a,a?[]:"",!1));return;case"textarea":G=H=null;for(T in a)if(d=a[T],a.hasOwnProperty(T)&&d!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:nt(t,i,T,null,l,d)}for(E in l)if(d=l[E],f=a[E],l.hasOwnProperty(E)&&(d!=null||f!=null))switch(E){case"value":H=d;break;case"defaultValue":G=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==f&&nt(t,i,E,d,l,f)}tc(t,H,G);return;case"option":for(var Re in a)if(H=a[Re],a.hasOwnProperty(Re)&&H!=null&&!l.hasOwnProperty(Re))switch(Re){case"selected":t.selected=!1;break;default:nt(t,i,Re,null,l,H)}for(D in l)if(H=l[D],G=a[D],l.hasOwnProperty(D)&&H!==G&&(H!=null||G!=null))switch(D){case"selected":t.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:nt(t,i,D,H,l,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)H=a[Te],a.hasOwnProperty(Te)&&H!=null&&!l.hasOwnProperty(Te)&&nt(t,i,Te,null,l,H);for(F in l)if(H=l[F],G=a[F],l.hasOwnProperty(F)&&H!==G&&(H!=null||G!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:nt(t,i,F,H,l,G)}return;default:if(to(i)){for(var rt in a)H=a[rt],a.hasOwnProperty(rt)&&H!==void 0&&!l.hasOwnProperty(rt)&&um(t,i,rt,void 0,l,H);for(J in l)H=l[J],G=a[J],!l.hasOwnProperty(J)||H===G||H===void 0&&G===void 0||um(t,i,J,H,l,G);return}}for(var L in a)H=a[L],a.hasOwnProperty(L)&&H!=null&&!l.hasOwnProperty(L)&&nt(t,i,L,null,l,H);for(ne in l)H=l[ne],G=a[ne],!l.hasOwnProperty(ne)||H===G||H==null&&G==null||nt(t,i,ne,H,l,G)}var cm=null,hm=null;function nh(t){return t.nodeType===9?t:t.ownerDocument}function R_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function C_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function dm(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var fm=null;function vA(){var t=window.event;return t&&t.type==="popstate"?t===fm?!1:(fm=t,!0):(fm=null,!1)}var I_=typeof setTimeout=="function"?setTimeout:void 0,_A=typeof clearTimeout=="function"?clearTimeout:void 0,D_=typeof Promise=="function"?Promise:void 0,EA=typeof queueMicrotask=="function"?queueMicrotask:typeof D_<"u"?function(t){return D_.resolve(null).then(t).catch(bA)}:I_;function bA(t){setTimeout(function(){throw t})}function os(t){return t==="head"}function N_(t,i){var a=i,l=0,d=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var E=t.ownerDocument;if(a&1&&Jl(E.documentElement),a&2&&Jl(E.body),a&4)for(a=E.head,Jl(a),E=a.firstChild;E;){var T=E.nextSibling,D=E.nodeName;E[Pi]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=T}}if(d===0){t.removeChild(f),ou(i);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);ou(i)}function mm(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":mm(a),Xa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function TA(t,i,a,l){for(;t.nodeType===1;){var d=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Pi])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=vr(t.nextSibling),t===null)break}return null}function SA(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=vr(t.nextSibling),t===null))return null;return t}function pm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function AA(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function vr(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var gm=null;function O_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function k_(t,i,a){switch(i=nh(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Jl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Xa(t)}var ar=new Map,M_=new Set;function rh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var vi=ae.d;ae.d={f:wA,r:xA,D:RA,C:CA,L:IA,m:DA,X:OA,S:NA,M:kA};function wA(){var t=vi.f(),i=Wc();return t||i}function xA(t){var i=Ir(t);i!==null&&i.tag===5&&i.type==="form"?ev(i):vi.r(t)}var Mo=typeof document>"u"?null:document;function V_(t,i,a){var l=Mo;if(l&&typeof i=="string"&&i){var d=Ht(i);d='link[rel="'+t+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),M_.has(d)||(M_.add(d),t={rel:t,crossOrigin:a,href:i},l.querySelector(d)===null&&(i=l.createElement("link"),tn(i,"link",t),xt(i),l.head.appendChild(i)))}}function RA(t){vi.D(t),V_("dns-prefetch",t,null)}function CA(t,i){vi.C(t,i),V_("preconnect",t,i)}function IA(t,i,a){vi.L(t,i,a);var l=Mo;if(l&&t&&i){var d='link[rel="preload"][as="'+Ht(i)+'"]';i==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+Ht(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+Ht(a.imageSizes)+'"]')):d+='[href="'+Ht(t)+'"]';var f=d;switch(i){case"style":f=Vo(t);break;case"script":f=Po(t)}ar.has(f)||(t=b({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),ar.set(f,t),l.querySelector(d)!==null||i==="style"&&l.querySelector(eu(f))||i==="script"&&l.querySelector(tu(f))||(i=l.createElement("link"),tn(i,"link",t),xt(i),l.head.appendChild(i)))}}function DA(t,i){vi.m(t,i);var a=Mo;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",d='link[rel="modulepreload"][as="'+Ht(l)+'"][href="'+Ht(t)+'"]',f=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Po(t)}if(!ar.has(f)&&(t=b({rel:"modulepreload",href:t},i),ar.set(f,t),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(tu(f)))return}l=a.createElement("link"),tn(l,"link",t),xt(l),a.head.appendChild(l)}}}function NA(t,i,a){vi.S(t,i,a);var l=Mo;if(l&&t){var d=Ui(l).hoistableStyles,f=Vo(t);i=i||"default";var E=d.get(f);if(!E){var T={loading:0,preload:null};if(E=l.querySelector(eu(f)))T.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":i},a),(a=ar.get(f))&&ym(t,a);var D=E=l.createElement("link");xt(D),tn(D,"link",t),D._p=new Promise(function(F,J){D.onload=F,D.onerror=J}),D.addEventListener("load",function(){T.loading|=1}),D.addEventListener("error",function(){T.loading|=2}),T.loading|=4,ih(E,i,l)}E={type:"stylesheet",instance:E,count:1,state:T},d.set(f,E)}}}function OA(t,i){vi.X(t,i);var a=Mo;if(a&&t){var l=Ui(a).hoistableScripts,d=Po(t),f=l.get(d);f||(f=a.querySelector(tu(d)),f||(t=b({src:t,async:!0},i),(i=ar.get(d))&&vm(t,i),f=a.createElement("script"),xt(f),tn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function kA(t,i){vi.M(t,i);var a=Mo;if(a&&t){var l=Ui(a).hoistableScripts,d=Po(t),f=l.get(d);f||(f=a.querySelector(tu(d)),f||(t=b({src:t,async:!0,type:"module"},i),(i=ar.get(d))&&vm(t,i),f=a.createElement("script"),xt(f),tn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function P_(t,i,a,l){var d=(d=Se.current)?rh(d):null;if(!d)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Vo(a.href),a=Ui(d).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Vo(a.href);var f=Ui(d).hoistableStyles,E=f.get(t);if(E||(d=d.ownerDocument||d,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,E),(f=d.querySelector(eu(t)))&&!f._p&&(E.instance=f,E.state.loading=5),ar.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ar.set(t,a),f||MA(d,t,a,E.state))),i&&l===null)throw Error(s(528,""));return E}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Po(a),a=Ui(d).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Vo(t){return'href="'+Ht(t)+'"'}function eu(t){return'link[rel="stylesheet"]['+t+"]"}function j_(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function MA(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),tn(i,"link",a),xt(i),t.head.appendChild(i))}function Po(t){return'[src="'+Ht(t)+'"]'}function tu(t){return"script[async]"+t}function U_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+Ht(a.href)+'"]');if(l)return i.instance=l,xt(l),l;var d=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),xt(l),tn(l,"style",d),ih(l,a.precedence,t),i.instance=l;case"stylesheet":d=Vo(a.href);var f=t.querySelector(eu(d));if(f)return i.state.loading|=4,i.instance=f,xt(f),f;l=j_(a),(d=ar.get(d))&&ym(l,d),f=(t.ownerDocument||t).createElement("link"),xt(f);var E=f;return E._p=new Promise(function(T,D){E.onload=T,E.onerror=D}),tn(f,"link",l),i.state.loading|=4,ih(f,a.precedence,t),i.instance=f;case"script":return f=Po(a.src),(d=t.querySelector(tu(f)))?(i.instance=d,xt(d),d):(l=a,(d=ar.get(f))&&(l=b({},a),vm(l,d)),t=t.ownerDocument||t,d=t.createElement("script"),xt(d),tn(d,"link",l),t.head.appendChild(d),i.instance=d);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,ih(l,a.precedence,t));return i.instance}function ih(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,f=d,E=0;E<l.length;E++){var T=l[E];if(T.dataset.precedence===i)f=T;else if(f!==d)break}f?f.parentNode.insertBefore(t,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function ym(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function vm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var sh=null;function L_(t,i,a){if(sh===null){var l=new Map,d=sh=new Map;d.set(a,l)}else d=sh,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),d=0;d<a.length;d++){var f=a[d];if(!(f[Pi]||f[wt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var E=f.getAttribute(i)||"";E=t+E;var T=l.get(E);T?T.push(f):l.set(E,[f])}}return l}function z_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function VA(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function B_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var nu=null;function PA(){}function jA(t,i,a){if(nu===null)throw Error(s(475));var l=nu;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var d=Vo(a.href),f=t.querySelector(eu(d));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=ah.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=f,xt(f);return}f=t.ownerDocument||t,a=j_(a),(d=ar.get(d))&&ym(a,d),f=f.createElement("link"),xt(f);var E=f;E._p=new Promise(function(T,D){E.onload=T,E.onerror=D}),tn(f,"link",a),i.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=ah.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function UA(){if(nu===null)throw Error(s(475));var t=nu;return t.stylesheets&&t.count===0&&_m(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&_m(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function ah(){if(this.count--,this.count===0){if(this.stylesheets)_m(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var oh=null;function _m(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,oh=new Map,i.forEach(LA,t),oh=null,ah.call(t))}function LA(t,i){if(!(i.state.loading&4)){var a=oh.get(t);if(a)var l=a.get(null);else{a=new Map,oh.set(t,a);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var E=d[f];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}d=i.instance,E=d.getAttribute("data-precedence"),f=a.get(E)||l,f===l&&a.set(null,d),a.set(E,d),this.count++,l=ah.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),f?f.parentNode.insertBefore(d,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),i.state.loading|=4}}var ru={$$typeof:X,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function zA(t,i,a,l,d,f,E,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_e(0),this.hiddenUpdates=_e(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function q_(t,i,a,l,d,f,E,T,D,F,J,ne){return t=new zA(t,i,a,E,T,D,F,ne),i=1,f===!0&&(i|=24),f=Un(3,null,null,i),t.current=f,f.stateNode=t,i=Jd(),i.refCount++,t.pooledCache=i,i.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:i},rf(f),t}function F_(t){return t?(t=fo,t):fo}function H_(t,i,a,l,d,f){d=F_(d),l.context===null?l.context=d:l.pendingContext=d,l=Wi(i),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Yi(t,l,i),a!==null&&(Fn(a,t,i),kl(a,t,i))}function G_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Em(t,i){G_(t,i),(t=t.alternate)&&G_(t,i)}function K_(t){if(t.tag===13){var i=ho(t,67108864);i!==null&&Fn(i,t,67108864),Em(t,67108864)}}var lh=!0;function BA(t,i,a,l){var d=Q.T;Q.T=null;var f=ae.p;try{ae.p=2,bm(t,i,a,l)}finally{ae.p=f,Q.T=d}}function qA(t,i,a,l){var d=Q.T;Q.T=null;var f=ae.p;try{ae.p=8,bm(t,i,a,l)}finally{ae.p=f,Q.T=d}}function bm(t,i,a,l){if(lh){var d=Tm(l);if(d===null)lm(t,i,l,uh,a),W_(t,l);else if(HA(d,t,i,a,l))l.stopPropagation();else if(W_(t,l),i&4&&-1<FA.indexOf(t)){for(;d!==null;){var f=Ir(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var E=Vn(f.pendingLanes);if(E!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;E;){var D=1<<31-Nt(E);T.entanglements[1]|=D,E&=~D}Lr(f),($e&6)===0&&(Kc=an()+500,Xl(0))}}break;case 13:T=ho(f,2),T!==null&&Fn(T,f,2),Wc(),Em(f,2)}if(f=Tm(l),f===null&&lm(t,i,l,uh,a),f===d)break;d=f}d!==null&&l.stopPropagation()}else lm(t,i,l,null,a)}}function Tm(t){return t=ml(t),Sm(t)}var uh=null;function Sm(t){if(uh=null,t=Cr(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=h(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return uh=t,null}function Q_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Mi()){case vt:return 2;case At:return 8;case Mn:case Wa:return 32;case Vi:return 268435456;default:return 32}default:return 32}}var Am=!1,ls=null,us=null,cs=null,iu=new Map,su=new Map,hs=[],FA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function W_(t,i){switch(t){case"focusin":case"focusout":ls=null;break;case"dragenter":case"dragleave":us=null;break;case"mouseover":case"mouseout":cs=null;break;case"pointerover":case"pointerout":iu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":su.delete(i.pointerId)}}function au(t,i,a,l,d,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},i!==null&&(i=Ir(i),i!==null&&K_(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),t)}function HA(t,i,a,l,d){switch(i){case"focusin":return ls=au(ls,t,i,a,l,d),!0;case"dragenter":return us=au(us,t,i,a,l,d),!0;case"mouseover":return cs=au(cs,t,i,a,l,d),!0;case"pointerover":var f=d.pointerId;return iu.set(f,au(iu.get(f)||null,t,i,a,l,d)),!0;case"gotpointercapture":return f=d.pointerId,su.set(f,au(su.get(f)||null,t,i,a,l,d)),!0}return!1}function Y_(t){var i=Cr(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=h(a),i!==null){t.blockedOn=i,ol(t.priority,function(){if(a.tag===13){var l=qn();l=Ks(l);var d=ho(a,l);d!==null&&Fn(d,a,l),Em(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ch(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Tm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);fl=l,a.target.dispatchEvent(l),fl=null}else return i=Ir(a),i!==null&&K_(i),t.blockedOn=a,!1;i.shift()}return!0}function X_(t,i,a){ch(t)&&a.delete(i)}function GA(){Am=!1,ls!==null&&ch(ls)&&(ls=null),us!==null&&ch(us)&&(us=null),cs!==null&&ch(cs)&&(cs=null),iu.forEach(X_),su.forEach(X_)}function hh(t,i){t.blockedOn===i&&(t.blockedOn=null,Am||(Am=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,GA)))}var dh=null;function $_(t){dh!==t&&(dh=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){dh===t&&(dh=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],d=t[i+2];if(typeof l!="function"){if(Sm(l||a)===null)continue;break}var f=Ir(a);f!==null&&(t.splice(i,3),i-=3,Sf(f,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function ou(t){function i(D){return hh(D,t)}ls!==null&&hh(ls,t),us!==null&&hh(us,t),cs!==null&&hh(cs,t),iu.forEach(i),su.forEach(i);for(var a=0;a<hs.length;a++){var l=hs[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<hs.length&&(a=hs[0],a.blockedOn===null);)Y_(a),a.blockedOn===null&&hs.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],f=a[l+1],E=d[Zt]||null;if(typeof f=="function")E||$_(a);else if(E){var T=null;if(f&&f.hasAttribute("formAction")){if(d=f,E=f[Zt]||null)T=E.formAction;else if(Sm(d)!==null)continue}else T=E.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),$_(a)}}}function wm(t){this._internalRoot=t}fh.prototype.render=wm.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=qn();H_(a,l,t,i,null,null)},fh.prototype.unmount=wm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;H_(t.current,2,null,t,null,null),Wc(),i[ei]=null}};function fh(t){this._internalRoot=t}fh.prototype.unstable_scheduleHydration=function(t){if(t){var i=$t();t={blockedOn:null,target:t,priority:i};for(var a=0;a<hs.length&&i!==0&&i<hs[a].priority;a++);hs.splice(a,0,t),a===0&&Y_(t)}};var Z_=e.version;if(Z_!=="19.1.0")throw Error(s(527,Z_,"19.1.0"));ae.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(i),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var KA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mh.isDisabled&&mh.supportsFiber)try{ur=mh.inject(KA),Ft=mh}catch{}}return uu.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",d=mv,f=pv,E=gv,T=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(T=i.unstable_transitionCallbacks)),i=q_(t,1,!1,null,null,a,l,d,f,E,T,null),t[ei]=i.current,om(t),new wm(i)},uu.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,d="",f=mv,E=pv,T=gv,D=null,F=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(D=a.unstable_transitionCallbacks),a.formState!==void 0&&(F=a.formState)),i=q_(t,1,!0,i,a??null,l,d,f,E,T,D,F),i.context=F_(null),a=i.current,l=qn(),l=Ks(l),d=Wi(l),d.callback=null,Yi(a,d,l),a=l,i.current.lanes=a,Je(i,a),Lr(i),t[ei]=i.current,om(t),new fh(i)},uu.version="19.1.0",uu}var l0;function iw(){if(l0)return Cm.exports;l0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Cm.exports=rw(),Cm.exports}var sw=iw();db();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ru(){return Ru=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Ru.apply(this,arguments)}var bs;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(bs||(bs={}));const u0="popstate";function aw(r){r===void 0&&(r={});function e(o,u){let{pathname:h="/",search:m="",hash:p=""}=za(o.location.hash.substr(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Ym("",{pathname:h,search:m,hash:p},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(o,u){let h=o.document.querySelector("base"),m="";if(h&&h.getAttribute("href")){let p=o.location.href,g=p.indexOf("#");m=g===-1?p:p.slice(0,g)}return m+"#"+(typeof u=="string"?u:Mh(u))}function s(o,u){Np(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(u)+")")}return lw(e,n,s,r)}function gt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Np(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ow(){return Math.random().toString(36).substr(2,8)}function c0(r,e){return{usr:r.state,key:r.key,idx:e}}function Ym(r,e,n,s){return n===void 0&&(n=null),Ru({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?za(e):e,{state:n,key:e&&e.key||s||ow()})}function Mh(r){let{pathname:e="/",search:n="",hash:s=""}=r;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function za(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substr(n),r=r.substr(0,n));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function lw(r,e,n,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:u=!1}=s,h=o.history,m=bs.Pop,p=null,g=b();g==null&&(g=0,h.replaceState(Ru({},h.state,{idx:g}),""));function b(){return(h.state||{idx:null}).idx}function S(){m=bs.Pop;let k=b(),Z=k==null?null:k-g;g=k,p&&p({action:m,location:Y.location,delta:Z})}function x(k,Z){m=bs.Push;let K=Ym(Y.location,k,Z);n&&n(K,k),g=b()+1;let X=c0(K,g),oe=Y.createHref(K);try{h.pushState(X,"",oe)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;o.location.assign(oe)}u&&p&&p({action:m,location:Y.location,delta:1})}function U(k,Z){m=bs.Replace;let K=Ym(Y.location,k,Z);n&&n(K,k),g=b();let X=c0(K,g),oe=Y.createHref(K);h.replaceState(X,"",oe),u&&p&&p({action:m,location:Y.location,delta:0})}function q(k){let Z=o.location.origin!=="null"?o.location.origin:o.location.href,K=typeof k=="string"?k:Mh(k);return K=K.replace(/ $/,"%20"),gt(Z,"No window.location.(origin|href) available to create URL for href: "+K),new URL(K,Z)}let Y={get action(){return m},get location(){return r(o,h)},listen(k){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(u0,S),p=k,()=>{o.removeEventListener(u0,S),p=null}},createHref(k){return e(o,k)},createURL:q,encodeLocation(k){let Z=q(k);return{pathname:Z.pathname,search:Z.search,hash:Z.hash}},push:x,replace:U,go(k){return h.go(k)}};return Y}var h0;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(h0||(h0={}));function uw(r,e,n){return n===void 0&&(n="/"),cw(r,e,n)}function cw(r,e,n,s){let o=typeof e=="string"?za(e):e,u=Ko(o.pathname||"/",n);if(u==null)return null;let h=fb(r);hw(h);let m=null;for(let p=0;m==null&&p<h.length;++p){let g=Tw(u);m=Ew(h[p],g)}return m}function fb(r,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let o=(u,h,m)=>{let p={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};p.relativePath.startsWith("/")&&(gt(p.relativePath.startsWith(s),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(s.length));let g=Ss([s,p.relativePath]),b=n.concat(p);u.children&&u.children.length>0&&(gt(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),fb(u.children,e,b,g)),!(u.path==null&&!u.index)&&e.push({path:g,score:vw(g,u.index),routesMeta:b})};return r.forEach((u,h)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))o(u,h);else for(let p of mb(u.path))o(u,h,p)}),e}function mb(r){let e=r.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let h=mb(s.join("/")),m=[];return m.push(...h.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...h),m.map(p=>r.startsWith("/")&&p===""?"/":p)}function hw(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:_w(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const dw=/^:[\w-]+$/,fw=3,mw=2,pw=1,gw=10,yw=-2,d0=r=>r==="*";function vw(r,e){let n=r.split("/"),s=n.length;return n.some(d0)&&(s+=yw),e&&(s+=mw),n.filter(o=>!d0(o)).reduce((o,u)=>o+(dw.test(u)?fw:u===""?pw:gw),s)}function _w(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function Ew(r,e,n){let{routesMeta:s}=r,o={},u="/",h=[];for(let m=0;m<s.length;++m){let p=s[m],g=m===s.length-1,b=u==="/"?e:e.slice(u.length)||"/",S=Xm({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},b),x=p.route;if(!S)return null;Object.assign(o,S.params),h.push({params:o,pathname:Ss([u,S.pathname]),pathnameBase:xw(Ss([u,S.pathnameBase])),route:x}),S.pathnameBase!=="/"&&(u=Ss([u,S.pathnameBase]))}return h}function Xm(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,s]=bw(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((g,b,S)=>{let{paramName:x,isOptional:U}=b;if(x==="*"){let Y=m[S]||"";h=u.slice(0,u.length-Y.length).replace(/(.)\/+$/,"$1")}const q=m[S];return U&&!q?g[x]=void 0:g[x]=(q||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:h,pattern:r}}function bw(r,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Np(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function Tw(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Np(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Ko(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}function Sw(r,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:o=""}=typeof r=="string"?za(r):r;return{pathname:n?n.startsWith("/")?n:Aw(n,e):e,search:Rw(s),hash:Cw(o)}}function Aw(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Om(r,e,n,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ww(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Op(r,e){let n=ww(r);return e?n.map((s,o)=>o===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function kp(r,e,n,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=za(r):(o=Ru({},r),gt(!o.pathname||!o.pathname.includes("?"),Om("?","pathname","search",o)),gt(!o.pathname||!o.pathname.includes("#"),Om("#","pathname","hash",o)),gt(!o.search||!o.search.includes("#"),Om("#","search","hash",o)));let u=r===""||o.pathname==="",h=u?"/":o.pathname,m;if(h==null)m=n;else{let S=e.length-1;if(!s&&h.startsWith("..")){let x=h.split("/");for(;x[0]==="..";)x.shift(),S-=1;o.pathname=x.join("/")}m=S>=0?e[S]:"/"}let p=Sw(o,m),g=h&&h!=="/"&&h.endsWith("/"),b=(u||h===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||b)&&(p.pathname+="/"),p}const Ss=r=>r.join("/").replace(/\/\/+/g,"/"),xw=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Rw=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Cw=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Iw(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const pb=["post","put","patch","delete"];new Set(pb);const Dw=["get",...pb];new Set(Dw);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cu(){return Cu=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Cu.apply(this,arguments)}const td=j.createContext(null),gb=j.createContext(null),Ii=j.createContext(null),nd=j.createContext(null),Di=j.createContext({outlet:null,matches:[],isDataRoute:!1}),yb=j.createContext(null);function Nw(r,e){let{relative:n}=e===void 0?{}:e;el()||gt(!1);let{basename:s,navigator:o}=j.useContext(Ii),{hash:u,pathname:h,search:m}=rd(r,{relative:n}),p=h;return s!=="/"&&(p=h==="/"?s:Ss([s,h])),o.createHref({pathname:p,search:m,hash:u})}function el(){return j.useContext(nd)!=null}function Ba(){return el()||gt(!1),j.useContext(nd).location}function vb(r){j.useContext(Ii).static||j.useLayoutEffect(r)}function qa(){let{isDataRoute:r}=j.useContext(Di);return r?Gw():Ow()}function Ow(){el()||gt(!1);let r=j.useContext(td),{basename:e,future:n,navigator:s}=j.useContext(Ii),{matches:o}=j.useContext(Di),{pathname:u}=Ba(),h=JSON.stringify(Op(o,n.v7_relativeSplatPath)),m=j.useRef(!1);return vb(()=>{m.current=!0}),j.useCallback(function(g,b){if(b===void 0&&(b={}),!m.current)return;if(typeof g=="number"){s.go(g);return}let S=kp(g,JSON.parse(h),u,b.relative==="path");r==null&&e!=="/"&&(S.pathname=S.pathname==="/"?e:Ss([e,S.pathname])),(b.replace?s.replace:s.push)(S,b.state,b)},[e,s,h,u,r])}function kw(){let{matches:r}=j.useContext(Di),e=r[r.length-1];return e?e.params:{}}function rd(r,e){let{relative:n}=e===void 0?{}:e,{future:s}=j.useContext(Ii),{matches:o}=j.useContext(Di),{pathname:u}=Ba(),h=JSON.stringify(Op(o,s.v7_relativeSplatPath));return j.useMemo(()=>kp(r,JSON.parse(h),u,n==="path"),[r,h,u,n])}function Mw(r,e){return Vw(r,e)}function Vw(r,e,n,s){el()||gt(!1);let{navigator:o}=j.useContext(Ii),{matches:u}=j.useContext(Di),h=u[u.length-1],m=h?h.params:{};h&&h.pathname;let p=h?h.pathnameBase:"/";h&&h.route;let g=Ba(),b;if(e){var S;let k=typeof e=="string"?za(e):e;p==="/"||(S=k.pathname)!=null&&S.startsWith(p)||gt(!1),b=k}else b=g;let x=b.pathname||"/",U=x;if(p!=="/"){let k=p.replace(/^\//,"").split("/");U="/"+x.replace(/^\//,"").split("/").slice(k.length).join("/")}let q=uw(r,{pathname:U}),Y=zw(q&&q.map(k=>Object.assign({},k,{params:Object.assign({},m,k.params),pathname:Ss([p,o.encodeLocation?o.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?p:Ss([p,o.encodeLocation?o.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),u,n,s);return e&&Y?j.createElement(nd.Provider,{value:{location:Cu({pathname:"/",search:"",hash:"",state:null,key:"default"},b),navigationType:bs.Pop}},Y):Y}function Pw(){let r=Hw(),e=Iw(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:o},n):null,null)}const jw=j.createElement(Pw,null);class Uw extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(Di.Provider,{value:this.props.routeContext},j.createElement(yb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Lw(r){let{routeContext:e,match:n,children:s}=r,o=j.useContext(td);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(Di.Provider,{value:e},s)}function zw(r,e,n,s){var o;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),r==null){var u;if(!n)return null;if(n.errors)r=n.matches;else if((u=s)!=null&&u.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let h=r,m=(o=n)==null?void 0:o.errors;if(m!=null){let b=h.findIndex(S=>S.route.id&&m?.[S.route.id]!==void 0);b>=0||gt(!1),h=h.slice(0,Math.min(h.length,b+1))}let p=!1,g=-1;if(n&&s&&s.v7_partialHydration)for(let b=0;b<h.length;b++){let S=h[b];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(g=b),S.route.id){let{loaderData:x,errors:U}=n,q=S.route.loader&&x[S.route.id]===void 0&&(!U||U[S.route.id]===void 0);if(S.route.lazy||q){p=!0,g>=0?h=h.slice(0,g+1):h=[h[0]];break}}}return h.reduceRight((b,S,x)=>{let U,q=!1,Y=null,k=null;n&&(U=m&&S.route.id?m[S.route.id]:void 0,Y=S.route.errorElement||jw,p&&(g<0&&x===0?(Kw("route-fallback"),q=!0,k=null):g===x&&(q=!0,k=S.route.hydrateFallbackElement||null)));let Z=e.concat(h.slice(0,x+1)),K=()=>{let X;return U?X=Y:q?X=k:S.route.Component?X=j.createElement(S.route.Component,null):S.route.element?X=S.route.element:X=b,j.createElement(Lw,{match:S,routeContext:{outlet:b,matches:Z,isDataRoute:n!=null},children:X})};return n&&(S.route.ErrorBoundary||S.route.errorElement||x===0)?j.createElement(Uw,{location:n.location,revalidation:n.revalidation,component:Y,error:U,children:K(),routeContext:{outlet:null,matches:Z,isDataRoute:!0}}):K()},null)}var _b=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(_b||{}),Eb=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(Eb||{});function Bw(r){let e=j.useContext(td);return e||gt(!1),e}function qw(r){let e=j.useContext(gb);return e||gt(!1),e}function Fw(r){let e=j.useContext(Di);return e||gt(!1),e}function bb(r){let e=Fw(),n=e.matches[e.matches.length-1];return n.route.id||gt(!1),n.route.id}function Hw(){var r;let e=j.useContext(yb),n=qw(),s=bb();return e!==void 0?e:(r=n.errors)==null?void 0:r[s]}function Gw(){let{router:r}=Bw(_b.UseNavigateStable),e=bb(Eb.UseNavigateStable),n=j.useRef(!1);return vb(()=>{n.current=!0}),j.useCallback(function(o,u){u===void 0&&(u={}),n.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,Cu({fromRouteId:e},u)))},[r,e])}const f0={};function Kw(r,e,n){f0[r]||(f0[r]=!0)}function Qw(r,e){r?.v7_startTransition,r?.v7_relativeSplatPath}function Ww(r){let{to:e,replace:n,state:s,relative:o}=r;el()||gt(!1);let{future:u,static:h}=j.useContext(Ii),{matches:m}=j.useContext(Di),{pathname:p}=Ba(),g=qa(),b=kp(e,Op(m,u.v7_relativeSplatPath),p,o==="path"),S=JSON.stringify(b);return j.useEffect(()=>g(JSON.parse(S),{replace:n,state:s,relative:o}),[g,S,o,n,s]),null}function ps(r){gt(!1)}function Yw(r){let{basename:e="/",children:n=null,location:s,navigationType:o=bs.Pop,navigator:u,static:h=!1,future:m}=r;el()&&gt(!1);let p=e.replace(/^\/*/,"/"),g=j.useMemo(()=>({basename:p,navigator:u,static:h,future:Cu({v7_relativeSplatPath:!1},m)}),[p,m,u,h]);typeof s=="string"&&(s=za(s));let{pathname:b="/",search:S="",hash:x="",state:U=null,key:q="default"}=s,Y=j.useMemo(()=>{let k=Ko(b,p);return k==null?null:{location:{pathname:k,search:S,hash:x,state:U,key:q},navigationType:o}},[p,b,S,x,U,q,o]);return Y==null?null:j.createElement(Ii.Provider,{value:g},j.createElement(nd.Provider,{children:n,value:Y}))}function Xw(r){let{children:e,location:n}=r;return Mw($m(e),n)}new Promise(()=>{});function $m(r,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(r,(s,o)=>{if(!j.isValidElement(s))return;let u=[...e,o];if(s.type===j.Fragment){n.push.apply(n,$m(s.props.children,u));return}s.type!==ps&&gt(!1),!s.props.index||!s.props.children||gt(!1);let h={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=$m(s.props.children,u)),n.push(h)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vh(){return Vh=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Vh.apply(this,arguments)}function Tb(r,e){if(r==null)return{};var n={},s=Object.keys(r),o,u;for(u=0;u<s.length;u++)o=s[u],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}function $w(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Zw(r,e){return r.button===0&&(!e||e==="_self")&&!$w(r)}const Jw=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ex=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],tx="6";try{window.__reactRouterVersion=tx}catch{}const nx=j.createContext({isTransitioning:!1}),rx="startTransition",m0=JA[rx];function ix(r){let{basename:e,children:n,future:s,window:o}=r,u=j.useRef();u.current==null&&(u.current=aw({window:o,v5Compat:!0}));let h=u.current,[m,p]=j.useState({action:h.action,location:h.location}),{v7_startTransition:g}=s||{},b=j.useCallback(S=>{g&&m0?m0(()=>p(S)):p(S)},[p,g]);return j.useLayoutEffect(()=>h.listen(b),[h,b]),j.useEffect(()=>Qw(s),[s]),j.createElement(Yw,{basename:e,children:n,location:m.location,navigationType:m.action,navigator:h,future:s})}const sx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ax=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sr=j.forwardRef(function(e,n){let{onClick:s,relative:o,reloadDocument:u,replace:h,state:m,target:p,to:g,preventScrollReset:b,viewTransition:S}=e,x=Tb(e,Jw),{basename:U}=j.useContext(Ii),q,Y=!1;if(typeof g=="string"&&ax.test(g)&&(q=g,sx))try{let X=new URL(window.location.href),oe=g.startsWith("//")?new URL(X.protocol+g):new URL(g),se=Ko(oe.pathname,U);oe.origin===X.origin&&se!=null?g=se+oe.search+oe.hash:Y=!0}catch{}let k=Nw(g,{relative:o}),Z=lx(g,{replace:h,state:m,target:p,preventScrollReset:b,relative:o,viewTransition:S});function K(X){s&&s(X),X.defaultPrevented||Z(X)}return j.createElement("a",Vh({},x,{href:q||k,onClick:Y||u?s:K,ref:n,target:p}))}),cu=j.forwardRef(function(e,n){let{"aria-current":s="page",caseSensitive:o=!1,className:u="",end:h=!1,style:m,to:p,viewTransition:g,children:b}=e,S=Tb(e,ex),x=rd(p,{relative:S.relative}),U=Ba(),q=j.useContext(gb),{navigator:Y,basename:k}=j.useContext(Ii),Z=q!=null&&ux(x)&&g===!0,K=Y.encodeLocation?Y.encodeLocation(x).pathname:x.pathname,X=U.pathname,oe=q&&q.navigation&&q.navigation.location?q.navigation.location.pathname:null;o||(X=X.toLowerCase(),oe=oe?oe.toLowerCase():null,K=K.toLowerCase()),oe&&k&&(oe=Ko(oe,k)||oe);const se=K!=="/"&&K.endsWith("/")?K.length-1:K.length;let ge=X===K||!h&&X.startsWith(K)&&X.charAt(se)==="/",R=oe!=null&&(oe===K||!h&&oe.startsWith(K)&&oe.charAt(K.length)==="/"),w={isActive:ge,isPending:R,isTransitioning:Z},C=ge?s:void 0,P;typeof u=="function"?P=u(w):P=[u,ge?"active":null,R?"pending":null,Z?"transitioning":null].filter(Boolean).join(" ");let M=typeof m=="function"?m(w):m;return j.createElement(Sr,Vh({},S,{"aria-current":C,className:P,ref:n,style:M,to:p,viewTransition:g}),typeof b=="function"?b(w):b)});var Zm;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Zm||(Zm={}));var p0;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(p0||(p0={}));function ox(r){let e=j.useContext(td);return e||gt(!1),e}function lx(r,e){let{target:n,replace:s,state:o,preventScrollReset:u,relative:h,viewTransition:m}=e===void 0?{}:e,p=qa(),g=Ba(),b=rd(r,{relative:h});return j.useCallback(S=>{if(Zw(S,n)){S.preventDefault();let x=s!==void 0?s:Mh(g)===Mh(b);p(r,{replace:x,state:o,preventScrollReset:u,relative:h,viewTransition:m})}},[g,p,b,s,o,n,r,u,h,m])}function ux(r,e){e===void 0&&(e={});let n=j.useContext(nx);n==null&&gt(!1);let{basename:s}=ox(Zm.useViewTransitionState),o=rd(r,{relative:e.relative});if(!n.isTransitioning)return!1;let u=Ko(n.currentLocation.pathname,s)||n.currentLocation.pathname,h=Ko(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Xm(o.pathname,h)!=null||Xm(o.pathname,u)!=null}const cx=()=>{};var g0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},hx=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],h=r[n++],m=r[n++],p=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=r[n++],h=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},Ab={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],h=o+1<r.length,m=h?r[o+1]:0,p=o+2<r.length,g=p?r[o+2]:0,b=u>>2,S=(u&3)<<4|m>>4;let x=(m&15)<<2|g>>6,U=g&63;p||(U=64,h||(x=64)),s.push(n[b],n[S],n[x],n[U])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Sb(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):hx(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const g=o<r.length?n[r.charAt(o)]:64;++o;const S=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||g==null||S==null)throw new dx;const x=u<<2|m>>4;if(s.push(x),g!==64){const U=m<<4&240|g>>2;if(s.push(U),S!==64){const q=g<<6&192|S;s.push(q)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class dx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fx=function(r){const e=Sb(r);return Ab.encodeByteArray(e,!0)},Ph=function(r){return fx(r).replace(/\./g,"")},wb=function(r){try{return Ab.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=()=>mx().__FIREBASE_DEFAULTS__,gx=()=>{if(typeof process>"u"||typeof g0>"u")return;const r=g0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},yx=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&wb(r[1]);return e&&JSON.parse(e)},id=()=>{try{return cx()||px()||gx()||yx()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},xb=r=>id()?.emulatorHosts?.[r],Rb=r=>{const e=xb(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Cb=()=>id()?.config,Ib=r=>id()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Mp(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Ph(JSON.stringify(n)),Ph(JSON.stringify(h)),""].join(".")}const vu={};function _x(){const r={prod:[],emulator:[]};for(const e of Object.keys(vu))vu[e]?r.emulator.push(e):r.prod.push(e);return r}function Ex(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let y0=!1;function Vp(r,e){if(typeof window>"u"||typeof document>"u"||!Us(window.location.host)||vu[r]===e||vu[r]||y0)return;vu[r]=e;function n(x){return`__firebase__banner__${x}`}const s="__firebase__banner",u=_x().prod.length>0;function h(){const x=document.getElementById(s);x&&x.remove()}function m(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function p(x,U){x.setAttribute("width","24"),x.setAttribute("id",U),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function g(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{y0=!0,h()},x}function b(x,U){x.setAttribute("id",U),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function S(){const x=Ex(s),U=n("text"),q=document.getElementById(U)||document.createElement("span"),Y=n("learnmore"),k=document.getElementById(Y)||document.createElement("a"),Z=n("preprendIcon"),K=document.getElementById(Z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const X=x.element;m(X),b(k,Y);const oe=g();p(K,Z),X.append(K,q,k,oe),document.body.appendChild(X)}u?(q.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",U)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function Tx(){const r=id()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Sx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ax(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function wx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xx(){const r=mn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Rx(){return!Tx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Cx(){try{return typeof indexedDB=="object"}catch{return!1}}function Ix(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="FirebaseError";class Xr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Dx,Object.setPrototypeOf(this,Xr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lu.prototype.create)}}class Lu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?Nx(u,s):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Xr(o,m,s)}}function Nx(r,e){return r.replace(Ox,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const Ox=/\{\$([^}]+)}/g;function kx(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ka(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],h=e[o];if(v0(u)&&v0(h)){if(!ka(u,h))return!1}else if(u!==h)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function v0(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function du(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function fu(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function Mx(r,e){const n=new Vx(r,e);return n.subscribe.bind(n)}class Vx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Px(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=km),o.error===void 0&&(o.error=km),o.complete===void 0&&(o.complete=km);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Px(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function km(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(r){return r&&r._delegate?r._delegate:r}class Is{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new vx;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Lx(e))try{this.getOrInitializeService({instanceIdentifier:Ca})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Ca){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ca){return this.instances.has(e)}getOptions(e=Ca){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&h.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Ux(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ca){return this.component?this.component.multipleInstances?e:Ca:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ux(r){return r===Ca?void 0:r}function Lx(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new jx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ue||(Ue={}));const Bx={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},qx=Ue.INFO,Fx={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},Hx=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=Fx[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pp{constructor(e){this.name=e,this._logLevel=qx,this._logHandler=Hx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Bx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const Gx=(r,e)=>e.some(n=>r instanceof n);let _0,E0;function Kx(){return _0||(_0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qx(){return E0||(E0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nb=new WeakMap,Jm=new WeakMap,Ob=new WeakMap,Mm=new WeakMap,jp=new WeakMap;function Wx(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",h)},u=()=>{n(As(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&Nb.set(n,r)}).catch(()=>{}),jp.set(e,r),e}function Yx(r){if(Jm.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",h),r.removeEventListener("abort",h)},u=()=>{n(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",h),r.addEventListener("abort",h)});Jm.set(r,e)}let ep={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Jm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Ob.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return As(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Xx(r){ep=r(ep)}function $x(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Vm(this),e,...n);return Ob.set(s,e.sort?e.sort():[e]),As(s)}:Qx().includes(r)?function(...e){return r.apply(Vm(this),e),As(Nb.get(this))}:function(...e){return As(r.apply(Vm(this),e))}}function Zx(r){return typeof r=="function"?$x(r):(r instanceof IDBTransaction&&Yx(r),Gx(r,Kx())?new Proxy(r,ep):r)}function As(r){if(r instanceof IDBRequest)return Wx(r);if(Mm.has(r))return Mm.get(r);const e=Zx(r);return e!==r&&(Mm.set(r,e),jp.set(e,r)),e}const Vm=r=>jp.get(r);function Jx(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const h=indexedDB.open(r,e),m=As(h);return s&&h.addEventListener("upgradeneeded",p=>{s(As(h.result),p.oldVersion,p.newVersion,As(h.transaction),p)}),n&&h.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const eR=["get","getKey","getAll","getAllKeys","count"],tR=["put","add","delete","clear"],Pm=new Map;function b0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Pm.get(e))return Pm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=tR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||eR.includes(n)))return;const u=async function(h,...m){const p=this.transaction(h,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return Pm.set(e,u),u}Xx(r=>({...r,get:(e,n,s)=>b0(e,n)||r.get(e,n,s),has:(e,n)=>!!b0(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function rR(r){return r.getComponent()?.type==="VERSION"}const tp="@firebase/app",T0="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=new Pp("@firebase/app"),iR="@firebase/app-compat",sR="@firebase/analytics-compat",aR="@firebase/analytics",oR="@firebase/app-check-compat",lR="@firebase/app-check",uR="@firebase/auth",cR="@firebase/auth-compat",hR="@firebase/database",dR="@firebase/data-connect",fR="@firebase/database-compat",mR="@firebase/functions",pR="@firebase/functions-compat",gR="@firebase/installations",yR="@firebase/installations-compat",vR="@firebase/messaging",_R="@firebase/messaging-compat",ER="@firebase/performance",bR="@firebase/performance-compat",TR="@firebase/remote-config",SR="@firebase/remote-config-compat",AR="@firebase/storage",wR="@firebase/storage-compat",xR="@firebase/firestore",RR="@firebase/ai",CR="@firebase/firestore-compat",IR="firebase",DR="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="[DEFAULT]",NR={[tp]:"fire-core",[iR]:"fire-core-compat",[aR]:"fire-analytics",[sR]:"fire-analytics-compat",[lR]:"fire-app-check",[oR]:"fire-app-check-compat",[uR]:"fire-auth",[cR]:"fire-auth-compat",[hR]:"fire-rtdb",[dR]:"fire-data-connect",[fR]:"fire-rtdb-compat",[mR]:"fire-fn",[pR]:"fire-fn-compat",[gR]:"fire-iid",[yR]:"fire-iid-compat",[vR]:"fire-fcm",[_R]:"fire-fcm-compat",[ER]:"fire-perf",[bR]:"fire-perf-compat",[TR]:"fire-rc",[SR]:"fire-rc-compat",[AR]:"fire-gcs",[wR]:"fire-gcs-compat",[xR]:"fire-fst",[CR]:"fire-fst-compat",[RR]:"fire-vertex","fire-js":"fire-js",[IR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh=new Map,OR=new Map,rp=new Map;function S0(r,e){try{r.container.addComponent(e)}catch(n){Si.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function Ma(r){const e=r.name;if(rp.has(e))return Si.debug(`There were multiple attempts to register component ${e}.`),!1;rp.set(e,r);for(const n of jh.values())S0(n,r);for(const n of OR.values())S0(n,r);return!0}function sd(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Hn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ws=new Lu("app","Firebase",kR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Is("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ws.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa=DR;function kb(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:np,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw ws.create("bad-app-name",{appName:String(o)});if(n||(n=Cb()),!n)throw ws.create("no-options");const u=jh.get(o);if(u){if(ka(n,u.options)&&ka(s,u.config))return u;throw ws.create("duplicate-app",{appName:o})}const h=new zx(o);for(const p of rp.values())h.addComponent(p);const m=new MR(n,s,h);return jh.set(o,m),m}function Up(r=np){const e=jh.get(r);if(!e&&r===np&&Cb())return kb();if(!e)throw ws.create("no-app",{appName:r});return e}function qr(r,e,n){let s=NR[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Si.warn(h.join(" "));return}Ma(new Is(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR="firebase-heartbeat-database",PR=1,Iu="firebase-heartbeat-store";let jm=null;function Mb(){return jm||(jm=Jx(VR,PR,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Iu)}catch(n){console.warn(n)}}}}).catch(r=>{throw ws.create("idb-open",{originalErrorMessage:r.message})})),jm}async function jR(r){try{const n=(await Mb()).transaction(Iu),s=await n.objectStore(Iu).get(Vb(r));return await n.done,s}catch(e){if(e instanceof Xr)Si.warn(e.message);else{const n=ws.create("idb-get",{originalErrorMessage:e?.message});Si.warn(n.message)}}}async function A0(r,e){try{const s=(await Mb()).transaction(Iu,"readwrite");await s.objectStore(Iu).put(e,Vb(r)),await s.done}catch(n){if(n instanceof Xr)Si.warn(n.message);else{const s=ws.create("idb-set",{originalErrorMessage:n?.message});Si.warn(s.message)}}}function Vb(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=1024,LR=30;class zR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=w0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>LR){const o=FR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Si.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=w0(),{heartbeatsToSend:n,unsentEntries:s}=BR(this._heartbeatsCache.heartbeats),o=Ph(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Si.warn(e),""}}}function w0(){return new Date().toISOString().substring(0,10)}function BR(r,e=UR){const n=[];let s=r.slice();for(const o of r){const u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),x0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),x0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class qR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Cx()?Ix().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await jR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return A0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return A0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function x0(r){return Ph(JSON.stringify({version:2,heartbeats:r})).length}function FR(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(r){Ma(new Is("platform-logger",e=>new nR(e),"PRIVATE")),Ma(new Is("heartbeat",e=>new zR(e),"PRIVATE")),qr(tp,T0,r),qr(tp,T0,"esm2020"),qr("fire-js","")}HR("");var R0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xs,Pb;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,w){function C(){}C.prototype=w.prototype,R.F=w.prototype,R.prototype=new C,R.prototype.constructor=R,R.D=function(P,M,O){for(var I=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)I[ue-2]=arguments[ue];return w.prototype[M].apply(P,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,w,C){C||(C=0);const P=Array(16);if(typeof w=="string")for(var M=0;M<16;++M)P[M]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(M=0;M<16;++M)P[M]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=R.g[0],C=R.g[1],M=R.g[2];let O=R.g[3],I;I=w+(O^C&(M^O))+P[0]+3614090360&4294967295,w=C+(I<<7&4294967295|I>>>25),I=O+(M^w&(C^M))+P[1]+3905402710&4294967295,O=w+(I<<12&4294967295|I>>>20),I=M+(C^O&(w^C))+P[2]+606105819&4294967295,M=O+(I<<17&4294967295|I>>>15),I=C+(w^M&(O^w))+P[3]+3250441966&4294967295,C=M+(I<<22&4294967295|I>>>10),I=w+(O^C&(M^O))+P[4]+4118548399&4294967295,w=C+(I<<7&4294967295|I>>>25),I=O+(M^w&(C^M))+P[5]+1200080426&4294967295,O=w+(I<<12&4294967295|I>>>20),I=M+(C^O&(w^C))+P[6]+2821735955&4294967295,M=O+(I<<17&4294967295|I>>>15),I=C+(w^M&(O^w))+P[7]+4249261313&4294967295,C=M+(I<<22&4294967295|I>>>10),I=w+(O^C&(M^O))+P[8]+1770035416&4294967295,w=C+(I<<7&4294967295|I>>>25),I=O+(M^w&(C^M))+P[9]+2336552879&4294967295,O=w+(I<<12&4294967295|I>>>20),I=M+(C^O&(w^C))+P[10]+4294925233&4294967295,M=O+(I<<17&4294967295|I>>>15),I=C+(w^M&(O^w))+P[11]+2304563134&4294967295,C=M+(I<<22&4294967295|I>>>10),I=w+(O^C&(M^O))+P[12]+1804603682&4294967295,w=C+(I<<7&4294967295|I>>>25),I=O+(M^w&(C^M))+P[13]+4254626195&4294967295,O=w+(I<<12&4294967295|I>>>20),I=M+(C^O&(w^C))+P[14]+2792965006&4294967295,M=O+(I<<17&4294967295|I>>>15),I=C+(w^M&(O^w))+P[15]+1236535329&4294967295,C=M+(I<<22&4294967295|I>>>10),I=w+(M^O&(C^M))+P[1]+4129170786&4294967295,w=C+(I<<5&4294967295|I>>>27),I=O+(C^M&(w^C))+P[6]+3225465664&4294967295,O=w+(I<<9&4294967295|I>>>23),I=M+(w^C&(O^w))+P[11]+643717713&4294967295,M=O+(I<<14&4294967295|I>>>18),I=C+(O^w&(M^O))+P[0]+3921069994&4294967295,C=M+(I<<20&4294967295|I>>>12),I=w+(M^O&(C^M))+P[5]+3593408605&4294967295,w=C+(I<<5&4294967295|I>>>27),I=O+(C^M&(w^C))+P[10]+38016083&4294967295,O=w+(I<<9&4294967295|I>>>23),I=M+(w^C&(O^w))+P[15]+3634488961&4294967295,M=O+(I<<14&4294967295|I>>>18),I=C+(O^w&(M^O))+P[4]+3889429448&4294967295,C=M+(I<<20&4294967295|I>>>12),I=w+(M^O&(C^M))+P[9]+568446438&4294967295,w=C+(I<<5&4294967295|I>>>27),I=O+(C^M&(w^C))+P[14]+3275163606&4294967295,O=w+(I<<9&4294967295|I>>>23),I=M+(w^C&(O^w))+P[3]+4107603335&4294967295,M=O+(I<<14&4294967295|I>>>18),I=C+(O^w&(M^O))+P[8]+1163531501&4294967295,C=M+(I<<20&4294967295|I>>>12),I=w+(M^O&(C^M))+P[13]+2850285829&4294967295,w=C+(I<<5&4294967295|I>>>27),I=O+(C^M&(w^C))+P[2]+4243563512&4294967295,O=w+(I<<9&4294967295|I>>>23),I=M+(w^C&(O^w))+P[7]+1735328473&4294967295,M=O+(I<<14&4294967295|I>>>18),I=C+(O^w&(M^O))+P[12]+2368359562&4294967295,C=M+(I<<20&4294967295|I>>>12),I=w+(C^M^O)+P[5]+4294588738&4294967295,w=C+(I<<4&4294967295|I>>>28),I=O+(w^C^M)+P[8]+2272392833&4294967295,O=w+(I<<11&4294967295|I>>>21),I=M+(O^w^C)+P[11]+1839030562&4294967295,M=O+(I<<16&4294967295|I>>>16),I=C+(M^O^w)+P[14]+4259657740&4294967295,C=M+(I<<23&4294967295|I>>>9),I=w+(C^M^O)+P[1]+2763975236&4294967295,w=C+(I<<4&4294967295|I>>>28),I=O+(w^C^M)+P[4]+1272893353&4294967295,O=w+(I<<11&4294967295|I>>>21),I=M+(O^w^C)+P[7]+4139469664&4294967295,M=O+(I<<16&4294967295|I>>>16),I=C+(M^O^w)+P[10]+3200236656&4294967295,C=M+(I<<23&4294967295|I>>>9),I=w+(C^M^O)+P[13]+681279174&4294967295,w=C+(I<<4&4294967295|I>>>28),I=O+(w^C^M)+P[0]+3936430074&4294967295,O=w+(I<<11&4294967295|I>>>21),I=M+(O^w^C)+P[3]+3572445317&4294967295,M=O+(I<<16&4294967295|I>>>16),I=C+(M^O^w)+P[6]+76029189&4294967295,C=M+(I<<23&4294967295|I>>>9),I=w+(C^M^O)+P[9]+3654602809&4294967295,w=C+(I<<4&4294967295|I>>>28),I=O+(w^C^M)+P[12]+3873151461&4294967295,O=w+(I<<11&4294967295|I>>>21),I=M+(O^w^C)+P[15]+530742520&4294967295,M=O+(I<<16&4294967295|I>>>16),I=C+(M^O^w)+P[2]+3299628645&4294967295,C=M+(I<<23&4294967295|I>>>9),I=w+(M^(C|~O))+P[0]+4096336452&4294967295,w=C+(I<<6&4294967295|I>>>26),I=O+(C^(w|~M))+P[7]+1126891415&4294967295,O=w+(I<<10&4294967295|I>>>22),I=M+(w^(O|~C))+P[14]+2878612391&4294967295,M=O+(I<<15&4294967295|I>>>17),I=C+(O^(M|~w))+P[5]+4237533241&4294967295,C=M+(I<<21&4294967295|I>>>11),I=w+(M^(C|~O))+P[12]+1700485571&4294967295,w=C+(I<<6&4294967295|I>>>26),I=O+(C^(w|~M))+P[3]+2399980690&4294967295,O=w+(I<<10&4294967295|I>>>22),I=M+(w^(O|~C))+P[10]+4293915773&4294967295,M=O+(I<<15&4294967295|I>>>17),I=C+(O^(M|~w))+P[1]+2240044497&4294967295,C=M+(I<<21&4294967295|I>>>11),I=w+(M^(C|~O))+P[8]+1873313359&4294967295,w=C+(I<<6&4294967295|I>>>26),I=O+(C^(w|~M))+P[15]+4264355552&4294967295,O=w+(I<<10&4294967295|I>>>22),I=M+(w^(O|~C))+P[6]+2734768916&4294967295,M=O+(I<<15&4294967295|I>>>17),I=C+(O^(M|~w))+P[13]+1309151649&4294967295,C=M+(I<<21&4294967295|I>>>11),I=w+(M^(C|~O))+P[4]+4149444226&4294967295,w=C+(I<<6&4294967295|I>>>26),I=O+(C^(w|~M))+P[11]+3174756917&4294967295,O=w+(I<<10&4294967295|I>>>22),I=M+(w^(O|~C))+P[2]+718787259&4294967295,M=O+(I<<15&4294967295|I>>>17),I=C+(O^(M|~w))+P[9]+3951481745&4294967295,R.g[0]=R.g[0]+w&4294967295,R.g[1]=R.g[1]+(M+(I<<21&4294967295|I>>>11))&4294967295,R.g[2]=R.g[2]+M&4294967295,R.g[3]=R.g[3]+O&4294967295}s.prototype.v=function(R,w){w===void 0&&(w=R.length);const C=w-this.blockSize,P=this.C;let M=this.h,O=0;for(;O<w;){if(M==0)for(;O<=C;)o(this,R,O),O+=this.blockSize;if(typeof R=="string"){for(;O<w;)if(P[M++]=R.charCodeAt(O++),M==this.blockSize){o(this,P),M=0;break}}else for(;O<w;)if(P[M++]=R[O++],M==this.blockSize){o(this,P),M=0;break}}this.h=M,this.o+=w},s.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var w=1;w<R.length-8;++w)R[w]=0;w=this.o*8;for(var C=R.length-8;C<R.length;++C)R[C]=w&255,w/=256;for(this.v(R),R=Array(16),w=0,C=0;C<4;++C)for(let P=0;P<32;P+=8)R[w++]=this.g[C]>>>P&255;return R};function u(R,w){var C=m;return Object.prototype.hasOwnProperty.call(C,R)?C[R]:C[R]=w(R)}function h(R,w){this.h=w;const C=[];let P=!0;for(let M=R.length-1;M>=0;M--){const O=R[M]|0;P&&O==w||(C[M]=O,P=!1)}this.g=C}var m={};function p(R){return-128<=R&&R<128?u(R,function(w){return new h([w|0],w<0?-1:0)}):new h([R|0],R<0?-1:0)}function g(R){if(isNaN(R)||!isFinite(R))return S;if(R<0)return k(g(-R));const w=[];let C=1;for(let P=0;R>=C;P++)w[P]=R/C|0,C*=4294967296;return new h(w,0)}function b(R,w){if(R.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(R.charAt(0)=="-")return k(b(R.substring(1),w));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=g(Math.pow(w,8));let P=S;for(let O=0;O<R.length;O+=8){var M=Math.min(8,R.length-O);const I=parseInt(R.substring(O,O+M),w);M<8?(M=g(Math.pow(w,M)),P=P.j(M).add(g(I))):(P=P.j(C),P=P.add(g(I)))}return P}var S=p(0),x=p(1),U=p(16777216);r=h.prototype,r.m=function(){if(Y(this))return-k(this).m();let R=0,w=1;for(let C=0;C<this.g.length;C++){const P=this.i(C);R+=(P>=0?P:4294967296+P)*w,w*=4294967296}return R},r.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(q(this))return"0";if(Y(this))return"-"+k(this).toString(R);const w=g(Math.pow(R,6));var C=this;let P="";for(;;){const M=oe(C,w).g;C=Z(C,M.j(w));let O=((C.g.length>0?C.g[0]:C.h)>>>0).toString(R);if(C=M,q(C))return O+P;for(;O.length<6;)O="0"+O;P=O+P}},r.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function q(R){if(R.h!=0)return!1;for(let w=0;w<R.g.length;w++)if(R.g[w]!=0)return!1;return!0}function Y(R){return R.h==-1}r.l=function(R){return R=Z(this,R),Y(R)?-1:q(R)?0:1};function k(R){const w=R.g.length,C=[];for(let P=0;P<w;P++)C[P]=~R.g[P];return new h(C,~R.h).add(x)}r.abs=function(){return Y(this)?k(this):this},r.add=function(R){const w=Math.max(this.g.length,R.g.length),C=[];let P=0;for(let M=0;M<=w;M++){let O=P+(this.i(M)&65535)+(R.i(M)&65535),I=(O>>>16)+(this.i(M)>>>16)+(R.i(M)>>>16);P=I>>>16,O&=65535,I&=65535,C[M]=I<<16|O}return new h(C,C[C.length-1]&-2147483648?-1:0)};function Z(R,w){return R.add(k(w))}r.j=function(R){if(q(this)||q(R))return S;if(Y(this))return Y(R)?k(this).j(k(R)):k(k(this).j(R));if(Y(R))return k(this.j(k(R)));if(this.l(U)<0&&R.l(U)<0)return g(this.m()*R.m());const w=this.g.length+R.g.length,C=[];for(var P=0;P<2*w;P++)C[P]=0;for(P=0;P<this.g.length;P++)for(let M=0;M<R.g.length;M++){const O=this.i(P)>>>16,I=this.i(P)&65535,ue=R.i(M)>>>16,ye=R.i(M)&65535;C[2*P+2*M]+=I*ye,K(C,2*P+2*M),C[2*P+2*M+1]+=O*ye,K(C,2*P+2*M+1),C[2*P+2*M+1]+=I*ue,K(C,2*P+2*M+1),C[2*P+2*M+2]+=O*ue,K(C,2*P+2*M+2)}for(R=0;R<w;R++)C[R]=C[2*R+1]<<16|C[2*R];for(R=w;R<2*w;R++)C[R]=0;return new h(C,0)};function K(R,w){for(;(R[w]&65535)!=R[w];)R[w+1]+=R[w]>>>16,R[w]&=65535,w++}function X(R,w){this.g=R,this.h=w}function oe(R,w){if(q(w))throw Error("division by zero");if(q(R))return new X(S,S);if(Y(R))return w=oe(k(R),w),new X(k(w.g),k(w.h));if(Y(w))return w=oe(R,k(w)),new X(k(w.g),w.h);if(R.g.length>30){if(Y(R)||Y(w))throw Error("slowDivide_ only works with positive integers.");for(var C=x,P=w;P.l(R)<=0;)C=se(C),P=se(P);var M=ge(C,1),O=ge(P,1);for(P=ge(P,2),C=ge(C,2);!q(P);){var I=O.add(P);I.l(R)<=0&&(M=M.add(C),O=I),P=ge(P,1),C=ge(C,1)}return w=Z(R,M.j(w)),new X(M,w)}for(M=S;R.l(w)>=0;){for(C=Math.max(1,Math.floor(R.m()/w.m())),P=Math.ceil(Math.log(C)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),O=g(C),I=O.j(w);Y(I)||I.l(R)>0;)C-=P,O=g(C),I=O.j(w);q(O)&&(O=x),M=M.add(O),R=Z(R,I)}return new X(M,R)}r.B=function(R){return oe(this,R).h},r.and=function(R){const w=Math.max(this.g.length,R.g.length),C=[];for(let P=0;P<w;P++)C[P]=this.i(P)&R.i(P);return new h(C,this.h&R.h)},r.or=function(R){const w=Math.max(this.g.length,R.g.length),C=[];for(let P=0;P<w;P++)C[P]=this.i(P)|R.i(P);return new h(C,this.h|R.h)},r.xor=function(R){const w=Math.max(this.g.length,R.g.length),C=[];for(let P=0;P<w;P++)C[P]=this.i(P)^R.i(P);return new h(C,this.h^R.h)};function se(R){const w=R.g.length+1,C=[];for(let P=0;P<w;P++)C[P]=R.i(P)<<1|R.i(P-1)>>>31;return new h(C,R.h)}function ge(R,w){const C=w>>5;w%=32;const P=R.g.length-C,M=[];for(let O=0;O<P;O++)M[O]=w>0?R.i(O+C)>>>w|R.i(O+C+1)<<32-w:R.i(O+C);return new h(M,R.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Pb=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=g,h.fromString=b,xs=h}).apply(typeof R0<"u"?R0:typeof self<"u"?self:typeof window<"u"?window:{});var ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jb,mu,Ub,Ah,ip,Lb,zb,Bb;(function(){var r,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ph=="object"&&ph];for(var y=0;y<c.length;++y){var _=c[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var _=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var B=c[A];if(!(B in _))break e;_=_[B]}c=c[c.length-1],A=_[c],y=y(A),y!=A&&y!=null&&e(_,c,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(y){var _=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&_.push([A,y[A]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function m(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function p(c,y,_){return c.call.apply(c.bind,arguments)}function g(c,y,_){return g=p,g.apply(null,arguments)}function b(c,y){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function S(c,y){function _(){}_.prototype=y.prototype,c.Z=y.prototype,c.prototype=new _,c.prototype.constructor=c,c.Ob=function(A,B,W){for(var le=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)le[Ie-2]=arguments[Ie];return y.prototype[B].apply(A,le)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function U(c){const y=c.length;if(y>0){const _=Array(y);for(let A=0;A<y;A++)_[A]=c[A];return _}return[]}function q(c,y){for(let A=1;A<arguments.length;A++){const B=arguments[A];var _=typeof B;if(_=_!="object"?_:B?Array.isArray(B)?"array":_:"null",_=="array"||_=="object"&&typeof B.length=="number"){_=c.length||0;const W=B.length||0;c.length=_+W;for(let le=0;le<W;le++)c[_+le]=B[le]}else c.push(B)}}class Y{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function k(c){h.setTimeout(()=>{throw c},0)}function Z(){var c=R;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class K{constructor(){this.h=this.g=null}add(y,_){const A=X.get();A.set(y,_),this.h?this.h.next=A:this.g=A,this.h=A}}var X=new Y(()=>new oe,c=>c.reset());class oe{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let se,ge=!1,R=new K,w=()=>{const c=Promise.resolve(void 0);se=()=>{c.then(C)}};function C(){for(var c;c=Z();){try{c.h.call(c.g)}catch(_){k(_)}var y=X;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}ge=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};h.addEventListener("test",_,y),h.removeEventListener("test",_,y)}catch{}return c}();function I(c){return/^[\s\xa0]*$/.test(c)}function ue(c,y){M.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}S(ue,M),ue.prototype.init=function(c,y){const _=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(_=="mouseover"?y=c.fromElement:_=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&ue.Z.h.call(this)},ue.prototype.h=function(){ue.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ye="closure_listenable_"+(Math.random()*1e6|0),Q=0;function ae(c,y,_,A,B){this.listener=c,this.proxy=null,this.src=y,this.type=_,this.capture=!!A,this.ha=B,this.key=++Q,this.da=this.fa=!1}function fe(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ne(c,y,_){for(const A in c)y.call(_,c[A],A,c)}function N(c,y){for(const _ in c)y.call(void 0,c[_],_,c)}function ie(c){const y={};for(const _ in c)y[_]=c[_];return y}const de="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(c,y){let _,A;for(let B=1;B<arguments.length;B++){A=arguments[B];for(_ in A)c[_]=A[_];for(let W=0;W<de.length;W++)_=de[W],Object.prototype.hasOwnProperty.call(A,_)&&(c[_]=A[_])}}function ve(c){this.src=c,this.g={},this.h=0}ve.prototype.add=function(c,y,_,A,B){const W=c.toString();c=this.g[W],c||(c=this.g[W]=[],this.h++);const le=Se(c,y,A,B);return le>-1?(y=c[le],_||(y.fa=!1)):(y=new ae(y,this.src,W,!!A,B),y.fa=_,c.push(y)),y};function Me(c,y){const _=y.type;if(_ in c.g){var A=c.g[_],B=Array.prototype.indexOf.call(A,y,void 0),W;(W=B>=0)&&Array.prototype.splice.call(A,B,1),W&&(fe(y),c.g[_].length==0&&(delete c.g[_],c.h--))}}function Se(c,y,_,A){for(let B=0;B<c.length;++B){const W=c[B];if(!W.da&&W.listener==y&&W.capture==!!_&&W.ha==A)return B}return-1}var Ut="closure_lm_"+(Math.random()*1e6|0),Ge={};function Tn(c,y,_,A,B){if(Array.isArray(y)){for(let W=0;W<y.length;W++)Tn(c,y[W],_,A,B);return null}return _=Mi(_),c&&c[ye]?c.J(y,_,m(A)?!!A.capture:!1,B):Oi(c,y,_,!1,A,B)}function Oi(c,y,_,A,B,W){if(!y)throw Error("Invalid event type");const le=m(B)?!!B.capture:!!B;let Ie=ki(c);if(Ie||(c[Ut]=Ie=new ve(c)),_=Ie.add(y,_,A,le,W),_.proxy)return _;if(A=$r(),_.proxy=A,A.src=c,A.listener=_,c.addEventListener)O||(B=le),B===void 0&&(B=!1),c.addEventListener(y.toString(),A,B);else if(c.attachEvent)c.attachEvent(lr(y.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function $r(){function c(_){return y.call(c.src,c.listener,_)}const y=Qa;return c}function Zr(c,y,_,A,B){if(Array.isArray(y))for(var W=0;W<y.length;W++)Zr(c,y[W],_,A,B);else A=m(A)?!!A.capture:!!A,_=Mi(_),c&&c[ye]?(c=c.i,W=String(y).toString(),W in c.g&&(y=c.g[W],_=Se(y,_,A,B),_>-1&&(fe(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete c.g[W],c.h--)))):c&&(c=ki(c))&&(y=c.g[y.toString()],c=-1,y&&(c=Se(y,_,A,B)),(_=c>-1?y[c]:null)&&kn(_))}function kn(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[ye])Me(y.i,c);else{var _=c.type,A=c.proxy;y.removeEventListener?y.removeEventListener(_,A,c.capture):y.detachEvent?y.detachEvent(lr(_),A):y.addListener&&y.removeListener&&y.removeListener(A),(_=ki(y))?(Me(_,c),_.h==0&&(_.src=null,y[Ut]=null)):fe(c)}}}function lr(c){return c in Ge?Ge[c]:Ge[c]="on"+c}function Qa(c,y){if(c.da)c=!0;else{y=new ue(y,this);const _=c.listener,A=c.ha||c.src;c.fa&&kn(c),c=_.call(A,y)}return c}function ki(c){return c=c[Ut],c instanceof ve?c:null}var an="__closure_events_fn_"+(Math.random()*1e9>>>0);function Mi(c){return typeof c=="function"?c:(c[an]||(c[an]=function(y){return c.handleEvent(y)}),c[an])}function vt(){P.call(this),this.i=new ve(this),this.M=this,this.G=null}S(vt,P),vt.prototype[ye]=!0,vt.prototype.removeEventListener=function(c,y,_,A){Zr(this,c,y,_,A)};function At(c,y){var _,A=c.G;if(A)for(_=[];A;A=A.G)_.push(A);if(c=c.M,A=y.type||y,typeof y=="string")y=new M(y,c);else if(y instanceof M)y.target=y.target||c;else{var B=y;y=new M(A,c),ce(y,B)}B=!0;let W,le;if(_)for(le=_.length-1;le>=0;le--)W=y.g=_[le],B=Mn(W,A,!0,y)&&B;if(W=y.g=c,B=Mn(W,A,!0,y)&&B,B=Mn(W,A,!1,y)&&B,_)for(le=0;le<_.length;le++)W=y.g=_[le],B=Mn(W,A,!1,y)&&B}vt.prototype.N=function(){if(vt.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const _=c.g[y];for(let A=0;A<_.length;A++)fe(_[A]);delete c.g[y],c.h--}}this.G=null},vt.prototype.J=function(c,y,_,A){return this.i.add(String(c),y,!1,_,A)},vt.prototype.K=function(c,y,_,A){return this.i.add(String(c),y,!0,_,A)};function Mn(c,y,_,A){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let B=!0;for(let W=0;W<y.length;++W){const le=y[W];if(le&&!le.da&&le.capture==_){const Ie=le.listener,ht=le.ha||le.src;le.fa&&Me(c.i,le),B=Ie.call(ht,A)!==!1&&B}}return B&&!A.defaultPrevented}function Wa(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:h.setTimeout(c,y||0)}function Vi(c){c.g=Wa(()=>{c.g=null,c.i&&(c.i=!1,Vi(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Ar extends P{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Vi(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yn(c){P.call(this),this.h=c,this.g={}}S(Yn,P);var ur=[];function Ft(c){Ne(c.g,function(y,_){this.g.hasOwnProperty(_)&&kn(y)},c),c.g={}}Yn.prototype.N=function(){Yn.Z.N.call(this),Ft(this)},Yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gn=h.JSON.stringify,Nt=h.JSON.parse,Fs=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function Ya(){}function Hs(){}var Xt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Xn(){M.call(this,"d")}S(Xn,M);function Vn(){M.call(this,"c")}S(Vn,M);var Sn={},wr=null;function Jr(){return wr=wr||new vt}Sn.Ia="serverreachability";function Gs(c){M.call(this,Sn.Ia,c)}S(Gs,M);function $(c){const y=Jr();At(y,new Gs(y))}Sn.STAT_EVENT="statevent";function _e(c,y){M.call(this,Sn.STAT_EVENT,c),this.stat=y}S(_e,M);function Je(c){const y=Jr();At(y,new _e(y,c))}Sn.Ja="timingevent";function Ye(c,y){M.call(this,Sn.Ja,c),this.size=y}S(Ye,M);function xr(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},y)}function Rr(){this.g=!0}Rr.prototype.ua=function(){this.g=!1};function Ks(c,y,_,A,B,W){c.info(function(){if(c.g)if(W){var le="",Ie=W.split("&");for(let Xe=0;Xe<Ie.length;Xe++){var ht=Ie[Xe].split("=");if(ht.length>1){const Rt=ht[0];ht=ht[1];const Pn=Rt.split("_");le=Pn.length>=2&&Pn[1]=="type"?le+(Rt+"="+ht+"&"):le+(Rt+"=redacted&")}}}else le=null;else le=W;return"XMLHTTP REQ ("+A+") [attempt "+B+"]: "+y+`
`+_+`
`+le})}function Be(c,y,_,A,B,W,le){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+B+"]: "+y+`
`+_+`
`+W+" "+le})}function $t(c,y,_,A){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+on(c,_)+(A?" "+A:"")})}function ol(c,y){c.info(function(){return"TIMEOUT: "+y})}Rr.prototype.info=function(){};function on(c,y){if(!c.g)return y;if(!y)return null;try{const W=JSON.parse(y);if(W){for(c=0;c<W.length;c++)if(Array.isArray(W[c])){var _=W[c];if(!(_.length<2)){var A=_[1];if(Array.isArray(A)&&!(A.length<1)){var B=A[0];if(B!="noop"&&B!="stop"&&B!="close")for(let le=1;le<A.length;le++)A[le]=""}}}}return gn(W)}catch{return y}}var wt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Zt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ei;function Qs(){}S(Qs,Ya),Qs.prototype.g=function(){return new XMLHttpRequest},ei=new Qs;function Ws(c){return encodeURIComponent(String(c))}function Nd(c){var y=1;c=c.split(":");const _=[];for(;y>0&&c.length;)_.push(c.shift()),y--;return c.length&&_.push(c.join(":")),_}function cr(c,y,_,A){this.j=c,this.i=y,this.l=_,this.S=A||1,this.V=new Yn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Pi}function Pi(){this.i=null,this.g="",this.h=!1}var Xa={},Cr={};function Ir(c,y,_){c.M=1,c.A=ni(mt(y)),c.u=_,c.R=!0,ji(c,null)}function ji(c,y){c.F=Date.now(),Ys(c),c.B=mt(c.A);var _=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),rc(_.i,"t",A),c.C=0,_=c.j.L,c.h=new Pi,c.g=ao(c.j,_?y:null,!c.u),c.P>0&&(c.O=new Ar(g(c.Y,c,c.g),c.P)),y=c.V,_=c.g,A=c.ba;var B="readystatechange";Array.isArray(B)||(B&&(ur[0]=B.toString()),B=ur);for(let W=0;W<B.length;W++){const le=Tn(_,B[W],A||y.handleEvent,!1,y.h||y);if(!le)break;y.g[le.key]=le}y=c.J?ie(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),$(),Ks(c.i,c.v,c.B,c.l,c.S,c.u)}cr.prototype.ba=function(c){c=c.target;const y=this.O;y&&ln(c)==3?y.j():this.Y(c)},cr.prototype.Y=function(c){try{if(c==this.g)e:{const Ie=ln(this.g),ht=this.g.ya(),Xe=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||aa(this.g)))){this.K||Ie!=4||ht==7||(ht==8||Xe<=0?$(3):$(2)),Nr(this);var y=this.g.ca();this.X=y;var _=Ui(this);if(this.o=y==200,Be(this.i,this.v,this.B,this.l,this.S,Ie,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,B=this.g;if((A=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(A)){var W=A;break t}}W=null}if(c=W)$t(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,$a(this,c);else{this.o=!1,this.m=3,Je(12),Or(this),Xs(this);break e}}if(this.R){c=!0;let Rt;for(;!this.K&&this.C<_.length;)if(Rt=ec(this,_),Rt==Cr){Ie==4&&(this.m=4,Je(14),c=!1),$t(this.i,this.l,null,"[Incomplete Response]");break}else if(Rt==Xa){this.m=4,Je(15),$t(this.i,this.l,_,"[Invalid Chunk]"),c=!1;break}else $t(this.i,this.l,Rt,null),$a(this,Rt);if(xt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||_.length!=0||this.h.h||(this.m=1,Je(16),c=!1),this.o=this.o&&c,!c)$t(this.i,this.l,_,"[Invalid Chunked Response]"),Or(this),Xs(this);else if(_.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),yl(le),le.P=!0,Je(11))}}else $t(this.i,this.l,_,null),$a(this,_);Ie==4&&Or(this),this.o&&!this.K&&(Ie==4?vl(this.j,this):(this.o=!1,Ys(this)))}else oa(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,Je(12)):(this.m=0,Je(13)),Or(this),Xs(this)}}}catch{}finally{}};function Ui(c){if(!xt(c))return c.g.la();const y=aa(c.g);if(y==="")return"";let _="";const A=y.length,B=ln(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Or(c),Xs(c),"";c.h.i=new h.TextDecoder}for(let W=0;W<A;W++)c.h.h=!0,_+=c.h.i.decode(y[W],{stream:!(B&&W==A-1)});return y.length=0,c.h.g+=_,c.C=0,c.h.g}function xt(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function ec(c,y){var _=c.C,A=y.indexOf(`
`,_);return A==-1?Cr:(_=Number(y.substring(_,A)),isNaN(_)?Xa:(A+=1,A+_>y.length?Cr:(y=y.slice(A,A+_),c.C=A+_,y)))}cr.prototype.cancel=function(){this.K=!0,Or(this)};function Ys(c){c.T=Date.now()+c.H,Dr(c,c.H)}function Dr(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=xr(g(c.aa,c),y)}function Nr(c){c.D&&(h.clearTimeout(c.D),c.D=null)}cr.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(ol(this.i,this.B),this.M!=2&&($(),Je(17)),Or(this),this.m=2,Xs(this)):Dr(this,this.T-c)};function Xs(c){c.j.I==0||c.K||vl(c.j,c)}function Or(c){Nr(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,Ft(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function $a(c,y){try{var _=c.j;if(_.I!=0&&(_.g==c||Js(_.h,c))){if(!c.L&&Js(_.h,c)&&_.I==3){try{var A=_.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var B=A;if(B[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<c.F)so(_),kr(_);else break e;gl(_),Je(18)}}else _.xa=B[1],0<_.xa-_.K&&B[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=xr(g(_.Va,_),6e3));$n(_.h)<=1&&_.ta&&(_.ta=void 0)}else si(_,11)}else if((c.L||_.g==c)&&so(_),!I(y))for(B=_.Ba.g.parse(y),y=0;y<B.length;y++){let Xe=B[y];const Rt=Xe[0];if(!(Rt<=_.K))if(_.K=Rt,Xe=Xe[1],_.I==2)if(Xe[0]=="c"){_.M=Xe[1],_.ba=Xe[2];const Pn=Xe[3];Pn!=null&&(_.ka=Pn,_.j.info("VER="+_.ka));const Mr=Xe[4];Mr!=null&&(_.za=Mr,_.j.info("SVER="+_.za));const fr=Xe[5];fr!=null&&typeof fr=="number"&&fr>0&&(A=1.5*fr,_.O=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const mr=c.g;if(mr){const pr=mr.g?mr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pr){var W=A.h;W.g||pr.indexOf("spdy")==-1&&pr.indexOf("quic")==-1&&pr.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Za(W,W.h),W.h=null))}if(A.G){const El=mr.g?mr.g.getResponseHeader("X-HTTP-Session-Id"):null;El&&(A.wa=El,et(A.J,A.G,El))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-c.F,_.j.info("Handshake RTT: "+_.T+"ms")),A=_;var le=c;if(A.na=dc(A,A.L?A.ba:null,A.W),le.L){ti(A.h,le);var Ie=le,ht=A.O;ht&&(Ie.H=ht),Ie.D&&(Nr(Ie),Ys(Ie)),A.g=le}else lc(A);_.i.length>0&&ha(_)}else Xe[0]!="stop"&&Xe[0]!="close"||si(_,7);else _.I==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?si(_,7):ua(_):Xe[0]!="noop"&&_.l&&_.l.qa(Xe),_.A=0)}}$(4)}catch{}}var Od=class{constructor(c,y){this.g=c,this.map=y}};function $s(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Zs(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function $n(c){return c.h?1:c.g?c.g.size:0}function Js(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Za(c,y){c.g?c.g.add(y):c.h=y}function ti(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}$s.prototype.cancel=function(){if(this.i=Ja(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Ja(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const _ of c.g.values())y=y.concat(_.G);return y}return U(c.i)}var eo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kd(c,y){if(c){c=c.split("&");for(let _=0;_<c.length;_++){const A=c[_].indexOf("=");let B,W=null;A>=0?(B=c[_].substring(0,A),W=c[_].substring(A+1)):B=c[_],y(B,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function hr(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof hr?(this.l=c.l,Li(this,c.j),this.o=c.o,this.g=c.g,ea(this,c.u),this.h=c.h,zi(this,ic(c.i)),this.m=c.m):c&&(y=String(c).match(eo))?(this.l=!1,Li(this,y[1]||"",!0),this.o=ta(y[2]||""),this.g=ta(y[3]||"",!0),ea(this,y[4]),this.h=ta(y[5]||"",!0),zi(this,y[6]||"",!0),this.m=ta(y[7]||"")):(this.l=!1,this.i=new Zn(null,this.l))}hr.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(Ht(y,ul,!0),":");var _=this.g;return(_||y=="file")&&(c.push("//"),(y=this.o)&&c.push(Ht(y,ul,!0),"@"),c.push(Ws(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&c.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(Ht(_,_.charAt(0)=="/"?Bi:cl,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",Ht(_,nc)),c.join("")},hr.prototype.resolve=function(c){const y=mt(this);let _=!!c.j;_?Li(y,c.j):_=!!c.o,_?y.o=c.o:_=!!c.g,_?y.g=c.g:_=c.u!=null;var A=c.h;if(_)ea(y,c.u);else if(_=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var B=y.h.lastIndexOf("/");B!=-1&&(A=y.h.slice(0,B+1)+A)}if(B=A,B==".."||B==".")A="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){A=B.lastIndexOf("/",0)==0,B=B.split("/");const W=[];for(let le=0;le<B.length;){const Ie=B[le++];Ie=="."?A&&le==B.length&&W.push(""):Ie==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),A&&le==B.length&&W.push("")):(W.push(Ie),A=!0)}A=W.join("/")}else A=B}return _?y.h=A:_=c.i.toString()!=="",_?zi(y,ic(c.i)):_=!!c.m,_&&(y.m=c.m),y};function mt(c){return new hr(c)}function Li(c,y,_){c.j=_?ta(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function ea(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function zi(c,y,_){y instanceof Zn?(c.i=y,fl(c.i,c.l)):(_||(y=Ht(y,tc)),c.i=new Zn(y,c.l))}function et(c,y,_){c.i.set(y,_)}function ni(c){return et(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function ta(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ht(c,y,_){return typeof c=="string"?(c=encodeURI(c).replace(y,ll),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ll(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ul=/[#\/\?@]/g,cl=/[#\?:]/g,Bi=/[#\?]/g,tc=/[#\?@]/g,nc=/#/g;function Zn(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function ri(c){c.g||(c.g=new Map,c.h=0,c.i&&kd(c.i,function(y,_){c.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}r=Zn.prototype,r.add=function(c,y){ri(this),this.i=null,c=dr(this,c);let _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(y),this.h+=1,this};function hl(c,y){ri(c),y=dr(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function dl(c,y){return ri(c),y=dr(c,y),c.g.has(y)}r.forEach=function(c,y){ri(this),this.g.forEach(function(_,A){_.forEach(function(B){c.call(y,B,A,this)},this)},this)};function to(c,y){ri(c);let _=[];if(typeof y=="string")dl(c,y)&&(_=_.concat(c.g.get(dr(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)_=_.concat(c[y]);return _}r.set=function(c,y){return ri(this),this.i=null,c=dr(this,c),dl(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},r.get=function(c,y){return c?(c=to(this,c),c.length>0?String(c[0]):y):y};function rc(c,y,_){hl(c,y),_.length>0&&(c.i=null,c.g.set(dr(c,y),U(_)),c.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var _=y[A];const B=Ws(_);_=to(this,_);for(let W=0;W<_.length;W++){let le=B;_[W]!==""&&(le+="="+Ws(_[W])),c.push(le)}}return this.i=c.join("&")};function ic(c){const y=new Zn;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function dr(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function fl(c,y){y&&!c.j&&(ri(c),c.i=null,c.g.forEach(function(_,A){const B=A.toLowerCase();A!=B&&(hl(this,A),rc(this,B,_))},c)),c.j=y}function ml(c,y){const _=new Rr;if(h.Image){const A=new Image;A.onload=b(yn,_,"TestLoadImage: loaded",!0,y,A),A.onerror=b(yn,_,"TestLoadImage: error",!1,y,A),A.onabort=b(yn,_,"TestLoadImage: abort",!1,y,A),A.ontimeout=b(yn,_,"TestLoadImage: timeout",!1,y,A),h.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else y(!1)}function qi(c,y){const _=new Rr,A=new AbortController,B=setTimeout(()=>{A.abort(),yn(_,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:A.signal}).then(W=>{clearTimeout(B),W.ok?yn(_,"TestPingServer: ok",!0,y):yn(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),yn(_,"TestPingServer: error",!1,y)})}function yn(c,y,_,A,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),A(_)}catch{}}function sc(){this.g=new Fs}function na(c){this.i=c.Sb||null,this.h=c.ab||!1}S(na,Ya),na.prototype.g=function(){return new ra(this.i,this.h)};function ra(c,y){vt.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(ra,vt),r=ra.prototype,r.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,ii(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||h).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vn(this)),this.readyState=0},r.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ii(this)),this.g&&(this.readyState=3,ii(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Fi(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Fi(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}r.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?vn(this):ii(this),this.readyState==3&&Fi(this)}},r.Oa=function(c){this.g&&(this.response=this.responseText=c,vn(this))},r.Na=function(c){this.g&&(this.response=c,vn(this))},r.ga=function(){this.g&&vn(this)};function vn(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ii(c)}r.setRequestHeader=function(c,y){this.A.append(c,y)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=y.next();return c.join(`\r
`)};function ii(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ra.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Hi(c){let y="";return Ne(c,function(_,A){y+=A,y+=":",y+=_,y+=`\r
`}),y}function Jn(c,y,_){e:{for(A in _){var A=!1;break e}A=!0}A||(_=Hi(_),typeof c=="string"?_!=null&&Ws(_):et(c,y,_))}function st(c){vt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(st,vt);var no=/^https?$/i,ac=["POST","PUT"];r=st.prototype,r.Fa=function(c){this.H=c},r.ea=function(c,y,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ei.g(),this.g.onreadystatechange=x(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(W){ia(this,W);return}if(c=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var B in A)_.set(B,A[B]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const W of A.keys())_.set(W,A.get(W));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(W=>W.toLowerCase()=="content-type"),B=h.FormData&&c instanceof h.FormData,!(Array.prototype.indexOf.call(ac,y,void 0)>=0)||A||B||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,le]of _)this.g.setRequestHeader(W,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(W){ia(this,W)}};function ia(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,sa(c),Lt(c)}function sa(c){c.A||(c.A=!0,At(c,"complete"),At(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,At(this,"complete"),At(this,"abort"),Lt(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Lt(this,!0)),st.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?pl(this):this.Xa())},r.Xa=function(){pl(this)};function pl(c){if(c.h&&typeof u<"u"){if(c.v&&ln(c)==4)setTimeout(c.Ca.bind(c),0);else if(At(c,"readystatechange"),ln(c)==4){c.h=!1;try{const W=c.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var A;if(A=W===0){let le=String(c.D).match(eo)[1]||null;!le&&h.self&&h.self.location&&(le=h.self.location.protocol.slice(0,-1)),A=!no.test(le?le.toLowerCase():"")}_=A}if(_)At(c,"complete"),At(c,"success");else{c.o=6;try{var B=ln(c)>2?c.g.statusText:""}catch{B=""}c.l=B+" ["+c.ca()+"]",sa(c)}}finally{Lt(c)}}}}function Lt(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const _=c.g;c.g=null,y||At(c,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ln(c){return c.g?c.g.readyState:0}r.ca=function(){try{return ln(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Nt(y)}};function aa(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function oa(c){const y={};c=(c.g&&ln(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(I(c[A]))continue;var _=Nd(c[A]);const B=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const W=y[B]||[];y[B]=W,W.push(_)}N(y,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function la(c,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||y}function ro(c){this.za=0,this.i=[],this.j=new Rr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=la("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=la("baseRetryDelayMs",5e3,c),this.Za=la("retryDelaySeedMs",1e4,c),this.Ta=la("forwardChannelMaxRetries",2,c),this.va=la("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new $s(c&&c.concurrentRequestLimit),this.Ba=new sc,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=ro.prototype,r.ka=8,r.I=1,r.connect=function(c,y,_,A){Je(0),this.W=c,this.H=y||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.J=dc(this,null,this.W),ha(this)};function ua(c){if(ca(c),c.I==3){var y=c.V++,_=mt(c.J);if(et(_,"SID",c.M),et(_,"RID",y),et(_,"TYPE","terminate"),da(c,_),y=new cr(c,c.j,y),y.M=2,y.A=ni(mt(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=y.A,_=!0),_||(y.g=ao(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ys(y)}hc(c)}function kr(c){c.g&&(yl(c),c.g.cancel(),c.g=null)}function ca(c){kr(c),c.v&&(h.clearTimeout(c.v),c.v=null),so(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&h.clearTimeout(c.m),c.m=null)}function ha(c){if(!Zs(c.h)&&!c.m){c.m=!0;var y=c.Ea;se||w(),ge||(se(),ge=!0),R.add(y,c),c.D=0}}function Md(c,y){return $n(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=xr(g(c.Ea,c,y),cc(c,c.D)),c.D++,!0)}r.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const B=new cr(this,this.j,c);let W=this.o;if(this.U&&(W?(W=ie(W),ce(W,this.U)):W=this.U),this.u!==null||this.R||(B.J=W,W=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=io(this,B,y),_=mt(this.J),et(_,"RID",c),et(_,"CVER",22),this.G&&et(_,"X-HTTP-Session-Id",this.G),da(this,_),W&&(this.R?y="headers="+Ws(Hi(W))+"&"+y:this.u&&Jn(_,this.u,W)),Za(this.h,B),this.Ra&&et(_,"TYPE","init"),this.S?(et(_,"$req",y),et(_,"SID","null"),B.U=!0,Ir(B,_,null)):Ir(B,_,y),this.I=2}}else this.I==3&&(c?oc(this,c):this.i.length==0||Zs(this.h)||oc(this))};function oc(c,y){var _;y?_=y.l:_=c.V++;const A=mt(c.J);et(A,"SID",c.M),et(A,"RID",_),et(A,"AID",c.K),da(c,A),c.u&&c.o&&Jn(A,c.u,c.o),_=new cr(c,c.j,_,c.D+1),c.u===null&&(_.J=c.o),y&&(c.i=y.G.concat(c.i)),y=io(c,_,1e3),_.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Za(c.h,_),Ir(_,A,y)}function da(c,y){c.H&&Ne(c.H,function(_,A){et(y,A,_)}),c.l&&Ne({},function(_,A){et(y,A,_)})}function io(c,y,_){_=Math.min(c.i.length,_);const A=c.l?g(c.l.Ka,c.l,c):null;e:{var B=c.i;let Ie=-1;for(;;){const ht=["count="+_];Ie==-1?_>0?(Ie=B[0].g,ht.push("ofs="+Ie)):Ie=0:ht.push("ofs="+Ie);let Xe=!0;for(let Rt=0;Rt<_;Rt++){var W=B[Rt].g;const Pn=B[Rt].map;if(W-=Ie,W<0)Ie=Math.max(0,B[Rt].g-100),Xe=!1;else try{W="req"+W+"_"||"";try{var le=Pn instanceof Map?Pn:Object.entries(Pn);for(const[Mr,fr]of le){let mr=fr;m(fr)&&(mr=gn(fr)),ht.push(W+Mr+"="+encodeURIComponent(mr))}}catch(Mr){throw ht.push(W+"type="+encodeURIComponent("_badmap")),Mr}}catch{A&&A(Pn)}}if(Xe){le=ht.join("&");break e}}le=void 0}return c=c.i.splice(0,_),y.G=c,le}function lc(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;se||w(),ge||(se(),ge=!0),R.add(y,c),c.A=0}}function gl(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=xr(g(c.Da,c),cc(c,c.A)),c.A++,!0)}r.Da=function(){if(this.v=null,uc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=xr(g(this.Wa,this),c)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Je(10),kr(this),uc(this))};function yl(c){c.B!=null&&(h.clearTimeout(c.B),c.B=null)}function uc(c){c.g=new cr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=mt(c.na);et(y,"RID","rpc"),et(y,"SID",c.M),et(y,"AID",c.K),et(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&et(y,"TO",c.ia),et(y,"TYPE","xmlhttp"),da(c,y),c.u&&c.o&&Jn(y,c.u,c.o),c.O&&(c.g.H=c.O);var _=c.g;c=c.ba,_.M=1,_.A=ni(mt(y)),_.u=null,_.R=!0,ji(_,c)}r.Va=function(){this.C!=null&&(this.C=null,kr(this),gl(this),Je(19))};function so(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function vl(c,y){var _=null;if(c.g==y){so(c),yl(c),c.g=null;var A=2}else if(Js(c.h,y))_=y.G,ti(c.h,y),A=1;else return;if(c.I!=0){if(y.o)if(A==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var B=c.D;A=Jr(),At(A,new Ye(A,_)),ha(c)}else lc(c);else if(B=y.m,B==3||B==0&&y.X>0||!(A==1&&Md(c,y)||A==2&&gl(c)))switch(_&&_.length>0&&(y=c.h,y.i=y.i.concat(_)),B){case 1:si(c,5);break;case 4:si(c,10);break;case 3:si(c,6);break;default:si(c,2)}}}function cc(c,y){let _=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(_*=2),_*y}function si(c,y){if(c.j.info("Error code "+y),y==2){var _=g(c.bb,c),A=c.Ua;const B=!A;A=new hr(A||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Li(A,"https"),ni(A),B?ml(A.toString(),_):qi(A.toString(),_)}else Je(2);c.I=0,c.l&&c.l.pa(y),hc(c),ca(c)}r.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Je(2)):(this.j.info("Failed to ping google.com"),Je(1))};function hc(c){if(c.I=0,c.ja=[],c.l){const y=Ja(c.h);(y.length!=0||c.i.length!=0)&&(q(c.ja,y),q(c.ja,c.i),c.h.i.length=0,U(c.i),c.i.length=0),c.l.oa()}}function dc(c,y,_){var A=_ instanceof hr?mt(_):new hr(_);if(A.g!="")y&&(A.g=y+"."+A.g),ea(A,A.u);else{var B=h.location;A=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;const W=new hr(null);A&&Li(W,A),y&&(W.g=y),B&&ea(W,B),_&&(W.h=_),A=W}return _=c.G,y=c.wa,_&&y&&et(A,_,y),et(A,"VER",c.ka),da(c,A),A}function ao(c,y,_){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new st(new na({ab:_})):new st(c.ma),y.Fa(c.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function fc(){}r=fc.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function oo(){}oo.prototype.g=function(c,y){return new _n(c,y)};function _n(c,y){vt.call(this),this.g=new ro(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!I(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Gi(this)}S(_n,vt),_n.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){ua(this.g)},_n.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.v&&(_={},_.__data__=gn(c),c=_);y.i.push(new Od(y.Ya++,c)),y.I==3&&ha(y)},_n.prototype.N=function(){this.g.l=null,delete this.j,ua(this.g),delete this.g,_n.Z.N.call(this)};function _l(c){Xn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const _ in y){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}S(_l,Xn);function mc(){Vn.call(this),this.status=1}S(mc,Vn);function Gi(c){this.g=c}S(Gi,fc),Gi.prototype.ra=function(){At(this.g,"a")},Gi.prototype.qa=function(c){At(this.g,new _l(c))},Gi.prototype.pa=function(c){At(this.g,new mc)},Gi.prototype.oa=function(){At(this.g,"b")},oo.prototype.createWebChannel=oo.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,Bb=function(){return new oo},zb=function(){return Jr()},Lb=Sn,ip={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},wt.NO_ERROR=0,wt.TIMEOUT=8,wt.HTTP_ERROR=6,Ah=wt,Zt.COMPLETE="complete",Ub=Zt,Hs.EventType=Xt,Xt.OPEN="a",Xt.CLOSE="b",Xt.ERROR="c",Xt.MESSAGE="d",vt.prototype.listen=vt.prototype.J,mu=Hs,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,jb=st}).apply(typeof ph<"u"?ph:typeof self<"u"?self:typeof window<"u"?window:{});const C0="@firebase/firestore",I0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va=new Pp("@firebase/firestore");function jo(){return Va.logLevel}function me(r,...e){if(Va.logLevel<=Ue.DEBUG){const n=e.map(Lp);Va.debug(`Firestore (${tl}): ${r}`,...n)}}function Ai(r,...e){if(Va.logLevel<=Ue.ERROR){const n=e.map(Lp);Va.error(`Firestore (${tl}): ${r}`,...n)}}function Qo(r,...e){if(Va.logLevel<=Ue.WARN){const n=e.map(Lp);Va.warn(`Firestore (${tl}): ${r}`,...n)}}function Lp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,qb(r,s,n)}function qb(r,e,n){let s=`FIRESTORE (${tl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ai(s),new Error(s)}function We(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||qb(e,o,s)}function De(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Xr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dn.UNAUTHENTICATED))}shutdown(){}}class KR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class QR{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){We(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new bi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new bi,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},m=p=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new bi)}},0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(We(typeof s.accessToken=="string",31837,{l:s}),new Fb(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new dn(e)}}class WR{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class YR{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new WR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class D0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){We(this.o===void 0,3512);const s=u=>{u.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,me("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new D0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(We(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new D0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=$R(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Le(r,e){return r<e?-1:r>e?1:0}function sp(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const o=r.charAt(s),u=e.charAt(s);if(o!==u)return Um(o)===Um(u)?Le(o,u):Um(o)?1:-1}return Le(r.length,e.length)}const ZR=55296,JR=57343;function Um(r){const e=r.charCodeAt(0);return e>=ZR&&e<=JR}function Wo(r,e,n){return r.length===e.length&&r.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0="__name__";class zr{constructor(e,n,s){n===void 0?n=0:n>e.length&&xe(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&xe(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return zr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof zr?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=zr.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Le(e.length,n.length)}static compareSegments(e,n){const s=zr.isNumericId(e),o=zr.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?zr.extractNumericId(e).compare(zr.extractNumericId(n)):sp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xs.fromString(e.substring(4,e.length-2))}}class ut extends zr{construct(e,n,s){return new ut(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new he(ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new ut(n)}static emptyPath(){return new ut([])}}const eC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends zr{construct(e,n,s){return new rn(e,n,s)}static isValidIdentifier(e){return eC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===N0}static keyField(){return new rn([N0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new he(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new he(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new he(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(s+=m,o++):(u(),o++)}if(u(),h)throw new he(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(n)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(ut.fromString(e))}static fromName(e){return new be(ut.fromString(e).popFirst(5))}static empty(){return new be(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ut.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(r,e,n){if(!n)throw new he(ee.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function tC(r,e,n,s){if(e===!0&&s===!0)throw new he(ee.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function O0(r){if(!be.isDocumentKey(r))throw new he(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function k0(r){if(be.isDocumentKey(r))throw new he(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Gb(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function ad(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":xe(12329,{type:typeof r})}function Nn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new he(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ad(r);throw new he(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(r,e){const n={typeString:r};return e&&(n.value=e),n}function Bu(r,e){if(!Gb(r))throw new he(ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new he(ee.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0=-62135596800,V0=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*V0);return new dt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<M0)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/V0}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Bu(e,dt._jsonSchema))return new dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-M0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:jt("string",dt._jsonSchemaVersion),seconds:jt("number"),nanoseconds:jt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new dt(0,0))}static max(){return new Ce(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du=-1;function nC(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ce.fromTimestamp(s===1e9?new dt(n+1,0):new dt(n,s));return new Ds(o,be.empty(),e)}function rC(r){return new Ds(r.readTime,r.key,Du)}class Ds{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Ds(Ce.min(),be.empty(),Du)}static max(){return new Ds(Ce.max(),be.empty(),Du)}}function iC(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(r.documentKey,e.documentKey),n!==0?n:Le(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nl(r){if(r.code!==ee.FAILED_PRECONDITION||r.message!==sC)throw r;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):re.reject(n)}static resolve(e){return new re((n,s)=>{n(e)})}static reject(e){return new re((n,s)=>{s(e)})}static waitFor(e){return new re((n,s)=>{let o=0,u=0,h=!1;e.forEach(m=>{++o,m.next(()=>{++u,h&&u===o&&n()},p=>s(p))}),h=!0,u===o&&n()})}static or(e){let n=re.resolve(!1);for(const s of e)n=n.next(o=>o?re.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(e,n){return new re((s,o)=>{const u=e.length,h=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next(b=>{h[g]=b,++m,m===u&&s(h)},b=>o(b))}})}static doWhile(e,n){return new re((s,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):s()};u()})}}function oC(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function rl(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}od.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp=-1;function ld(r){return r==null}function Uh(r){return r===0&&1/r==-1/0}function lC(r){return typeof r=="number"&&Number.isInteger(r)&&!Uh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="";function uC(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=P0(e)),e=cC(r.get(n),e);return P0(e)}function cC(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case Kb:n+="";break;default:n+=u}}return n}function P0(r){return r+Kb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function Ls(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function Qb(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n){this.comparator=e,this.root=n||nn.EMPTY}insert(e,n){return new yt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gh(this.root,e,this.comparator,!1)}getReverseIterator(){return new gh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gh(this.root,e,this.comparator,!0)}}class gh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nn{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??nn.RED,this.left=o??nn.EMPTY,this.right=u??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new nn(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return nn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new nn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new U0(this.data.getIterator())}getIteratorFrom(e){return new U0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new qt(this.comparator);return n.data=e,n}}class U0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new Gn([])}unionWith(e){let n=new qt(rn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Gn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wo(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Wb("Invalid base64 string: "+u):u}}(e);return new sn(n)}static fromUint8Array(e){const n=function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u}(e);return new sn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const hC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ns(r){if(We(!!r,39018),typeof r=="string"){let e=0;const n=hC.exec(r);if(We(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Dt(r.seconds),nanos:Dt(r.nanos)}}function Dt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Os(r){return typeof r=="string"?sn.fromBase64String(r):sn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="server_timestamp",Xb="__type__",$b="__previous_value__",Zb="__local_write_time__";function qp(r){return(r?.mapValue?.fields||{})[Xb]?.stringValue===Yb}function ud(r){const e=r.mapValue.fields[$b];return qp(e)?ud(e):e}function Nu(r){const e=Ns(r.mapValue.fields[Zb].timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,n,s,o,u,h,m,p,g,b){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=b}}const Lh="(default)";class Ou{constructor(e,n){this.projectId=e,this.database=n||Lh}static empty(){return new Ou("","")}get isDefaultDatabase(){return this.database===Lh}isEqual(e){return e instanceof Ou&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="__type__",fC="__max__",yh={mapValue:{}},eT="__vector__",zh="value";function ks(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?qp(r)?4:pC(r)?9007199254740991:mC(r)?10:11:xe(28295,{value:r})}function Yr(r,e){if(r===e)return!0;const n=ks(r);if(n!==ks(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Nu(r).isEqual(Nu(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=Ns(o.timestampValue),m=Ns(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,u){return Os(o.bytesValue).isEqual(Os(u.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,u){return Dt(o.geoPointValue.latitude)===Dt(u.geoPointValue.latitude)&&Dt(o.geoPointValue.longitude)===Dt(u.geoPointValue.longitude)}(r,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Dt(o.integerValue)===Dt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=Dt(o.doubleValue),m=Dt(u.doubleValue);return h===m?Uh(h)===Uh(m):isNaN(h)&&isNaN(m)}return!1}(r,e);case 9:return Wo(r.arrayValue.values||[],e.arrayValue.values||[],Yr);case 10:case 11:return function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(j0(h)!==j0(m))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(m[p]===void 0||!Yr(h[p],m[p])))return!1;return!0}(r,e);default:return xe(52216,{left:r})}}function ku(r,e){return(r.values||[]).find(n=>Yr(n,e))!==void 0}function Yo(r,e){if(r===e)return 0;const n=ks(r),s=ks(e);if(n!==s)return Le(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(r.booleanValue,e.booleanValue);case 2:return function(u,h){const m=Dt(u.integerValue||u.doubleValue),p=Dt(h.integerValue||h.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(r,e);case 3:return L0(r.timestampValue,e.timestampValue);case 4:return L0(Nu(r),Nu(e));case 5:return sp(r.stringValue,e.stringValue);case 6:return function(u,h){const m=Os(u),p=Os(h);return m.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(u,h){const m=u.split("/"),p=h.split("/");for(let g=0;g<m.length&&g<p.length;g++){const b=Le(m[g],p[g]);if(b!==0)return b}return Le(m.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(u,h){const m=Le(Dt(u.latitude),Dt(h.latitude));return m!==0?m:Le(Dt(u.longitude),Dt(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return z0(r.arrayValue,e.arrayValue);case 10:return function(u,h){const m=u.fields||{},p=h.fields||{},g=m[zh]?.arrayValue,b=p[zh]?.arrayValue,S=Le(g?.values?.length||0,b?.values?.length||0);return S!==0?S:z0(g,b)}(r.mapValue,e.mapValue);case 11:return function(u,h){if(u===yh.mapValue&&h===yh.mapValue)return 0;if(u===yh.mapValue)return 1;if(h===yh.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=h.fields||{},b=Object.keys(g);p.sort(),b.sort();for(let S=0;S<p.length&&S<b.length;++S){const x=sp(p[S],b[S]);if(x!==0)return x;const U=Yo(m[p[S]],g[b[S]]);if(U!==0)return U}return Le(p.length,b.length)}(r.mapValue,e.mapValue);default:throw xe(23264,{he:n})}}function L0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Le(r,e);const n=Ns(r),s=Ns(e),o=Le(n.seconds,s.seconds);return o!==0?o:Le(n.nanos,s.nanos)}function z0(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Yo(n[o],s[o]);if(u)return u}return Le(n.length,s.length)}function Xo(r){return ap(r)}function ap(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=Ns(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return Os(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return be.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=ap(u);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const h of s)u?u=!1:o+=",",o+=`${h}:${ap(n.fields[h])}`;return o+"}"}(r.mapValue):xe(61005,{value:r})}function wh(r){switch(ks(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ud(r);return e?16+wh(e):16;case 5:return 2*r.stringValue.length;case 6:return Os(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+wh(u),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return Ls(s.fields,(u,h)=>{o+=u.length+wh(h)}),o}(r.mapValue);default:throw xe(13486,{value:r})}}function B0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function op(r){return!!r&&"integerValue"in r}function Fp(r){return!!r&&"arrayValue"in r}function q0(r){return!!r&&"nullValue"in r}function F0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function xh(r){return!!r&&"mapValue"in r}function mC(r){return(r?.mapValue?.fields||{})[Jb]?.stringValue===eT}function _u(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ls(r.mapValue.fields,(n,s)=>e.mapValue.fields[n]=_u(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_u(r.arrayValue.values[n]);return e}return{...r}}function pC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===fC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.value=e}static empty(){return new In({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!xh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_u(n)}setAll(e){let n=rn.emptyPath(),s={},o=[];e.forEach((h,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}h?s[m.lastSegment()]=_u(h):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());xh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Yr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];xh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Ls(n,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new In(_u(this.value))}}function tT(r){const e=[];return Ls(r.fields,(n,s)=>{const o=new rn([n]);if(xh(s)){const u=tT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)}),new Gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,n,s,o,u,h,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(e){return new fn(e,0,Ce.min(),Ce.min(),Ce.min(),In.empty(),0)}static newFoundDocument(e,n,s,o){return new fn(e,1,n,Ce.min(),s,o,0)}static newNoDocument(e,n){return new fn(e,2,n,Ce.min(),Ce.min(),In.empty(),0)}static newUnknownDocument(e,n){return new fn(e,3,n,Ce.min(),Ce.min(),In.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=In.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=In.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n){this.position=e,this.inclusive=n}}function H0(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],h=r.position[o];if(u.field.isKeyField()?s=be.comparator(be.fromName(h.referenceValue),n.key):s=Yo(h,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function G0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Yr(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n="asc"){this.field=e,this.dir=n}}function gC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{}class Pt extends nT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new vC(e,n,s):n==="array-contains"?new bC(e,s):n==="in"?new TC(e,s):n==="not-in"?new SC(e,s):n==="array-contains-any"?new AC(e,s):new Pt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new _C(e,s):new EC(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Yo(n,this.value)):n!==null&&ks(this.value)===ks(n)&&this.matchesComparison(Yo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class br extends nT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new br(e,n)}matches(e){return rT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function rT(r){return r.op==="and"}function iT(r){return yC(r)&&rT(r)}function yC(r){for(const e of r.filters)if(e instanceof br)return!1;return!0}function lp(r){if(r instanceof Pt)return r.field.canonicalString()+r.op.toString()+Xo(r.value);if(iT(r))return r.filters.map(e=>lp(e)).join(",");{const e=r.filters.map(n=>lp(n)).join(",");return`${r.op}(${e})`}}function sT(r,e){return r instanceof Pt?function(s,o){return o instanceof Pt&&s.op===o.op&&s.field.isEqual(o.field)&&Yr(s.value,o.value)}(r,e):r instanceof br?function(s,o){return o instanceof br&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,h,m)=>u&&sT(h,o.filters[m]),!0):!1}(r,e):void xe(19439)}function aT(r){return r instanceof Pt?function(n){return`${n.field.canonicalString()} ${n.op} ${Xo(n.value)}`}(r):r instanceof br?function(n){return n.op.toString()+" {"+n.getFilters().map(aT).join(" ,")+"}"}(r):"Filter"}class vC extends Pt{constructor(e,n,s){super(e,n,s),this.key=be.fromName(s.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class _C extends Pt{constructor(e,n){super(e,"in",n),this.keys=oT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class EC extends Pt{constructor(e,n){super(e,"not-in",n),this.keys=oT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function oT(r,e){return(e.arrayValue?.values||[]).map(n=>be.fromName(n.referenceValue))}class bC extends Pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fp(n)&&ku(n.arrayValue,this.value)}}class TC extends Pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ku(this.value.arrayValue,n)}}class SC extends Pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ku(this.value.arrayValue,n)}}class AC extends Pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>ku(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,n=null,s=[],o=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.Te=null}}function K0(r,e=null,n=[],s=[],o=null,u=null,h=null){return new wC(r,e,n,s,o,u,h)}function Hp(r){const e=De(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>lp(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),ld(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Xo(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Xo(s)).join(",")),e.Te=n}return e.Te}function Gp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!gC(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!sT(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!G0(r.startAt,e.startAt)&&G0(r.endAt,e.endAt)}function up(r){return be.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n=null,s=[],o=[],u=null,h="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function xC(r,e,n,s,o,u,h,m){return new il(r,e,n,s,o,u,h,m)}function cd(r){return new il(r)}function Q0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function lT(r){return r.collectionGroup!==null}function Eu(r){const e=De(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new qt(rn.comparator);return h.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Mu(u,s))}),n.has(rn.keyField().canonicalString())||e.Ie.push(new Mu(rn.keyField(),s))}return e.Ie}function Fr(r){const e=De(r);return e.Ee||(e.Ee=RC(e,Eu(r))),e.Ee}function RC(r,e){if(r.limitType==="F")return K0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Mu(o.field,u)});const n=r.endAt?new Bh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Bh(r.startAt.position,r.startAt.inclusive):null;return K0(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function cp(r,e){const n=r.filters.concat([e]);return new il(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function hp(r,e,n){return new il(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function hd(r,e){return Gp(Fr(r),Fr(e))&&r.limitType===e.limitType}function uT(r){return`${Hp(Fr(r))}|lt:${r.limitType}`}function Uo(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>aT(o)).join(", ")}]`),ld(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>Xo(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>Xo(o)).join(",")),`Target(${s})`}(Fr(r))}; limitType=${r.limitType})`}function dd(r,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):be.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(r,e)&&function(s,o){for(const u of Eu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(h,m,p){const g=H0(h,m,p);return h.inclusive?g<=0:g<0}(s.startAt,Eu(s),o)||s.endAt&&!function(h,m,p){const g=H0(h,m,p);return h.inclusive?g>=0:g>0}(s.endAt,Eu(s),o))}(r,e)}function CC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function cT(r){return(e,n)=>{let s=!1;for(const o of Eu(r)){const u=IC(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function IC(r,e,n){const s=r.field.isKeyField()?be.comparator(e.key,n.key):function(u,h,m){const p=h.data.field(u),g=m.data.field(u);return p!==null&&g!==null?Yo(p,g):xe(42886)}(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return xe(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ls(this.inner,(n,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return Qb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=new yt(be.comparator);function wi(){return DC}const hT=new yt(be.comparator);function pu(...r){let e=hT;for(const n of r)e=e.insert(n.key,n);return e}function dT(r){let e=hT;return r.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Ia(){return bu()}function fT(){return bu()}function bu(){return new Ha(r=>r.toString(),(r,e)=>r.isEqual(e))}const NC=new yt(be.comparator),OC=new qt(be.comparator);function ze(...r){let e=OC;for(const n of r)e=e.add(n);return e}const kC=new qt(Le);function MC(){return kC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uh(e)?"-0":e}}function mT(r){return{integerValue:""+r}}function VC(r,e){return lC(e)?mT(e):Kp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(){this._=void 0}}function PC(r,e,n){return r instanceof Vu?function(o,u){const h={fields:{[Xb]:{stringValue:Yb},[Zb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&qp(u)&&(u=ud(u)),u&&(h.fields[$b]=u),{mapValue:h}}(n,e):r instanceof Pu?gT(r,e):r instanceof ju?yT(r,e):function(o,u){const h=pT(o,u),m=W0(h)+W0(o.Ae);return op(h)&&op(o.Ae)?mT(m):Kp(o.serializer,m)}(r,e)}function jC(r,e,n){return r instanceof Pu?gT(r,e):r instanceof ju?yT(r,e):n}function pT(r,e){return r instanceof qh?function(s){return op(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class Vu extends fd{}class Pu extends fd{constructor(e){super(),this.elements=e}}function gT(r,e){const n=vT(e);for(const s of r.elements)n.some(o=>Yr(o,s))||n.push(s);return{arrayValue:{values:n}}}class ju extends fd{constructor(e){super(),this.elements=e}}function yT(r,e){let n=vT(e);for(const s of r.elements)n=n.filter(o=>!Yr(o,s));return{arrayValue:{values:n}}}class qh extends fd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function W0(r){return Dt(r.integerValue||r.doubleValue)}function vT(r){return Fp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,n){this.field=e,this.transform=n}}function LC(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof Pu&&o instanceof Pu||s instanceof ju&&o instanceof ju?Wo(s.elements,o.elements,Yr):s instanceof qh&&o instanceof qh?Yr(s.Ae,o.Ae):s instanceof Vu&&o instanceof Vu}(r.transform,e.transform)}class zC{constructor(e,n){this.version=e,this.transformResults=n}}class On{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new On}static exists(e){return new On(void 0,e)}static updateTime(e){return new On(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class md{}function _T(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Qp(r.key,On.none()):new qu(r.key,r.data,On.none());{const n=r.data,s=In.empty();let o=new qt(rn.comparator);for(let u of e.fields)if(!o.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?s.delete(u):s.set(u,h),o=o.add(u)}return new zs(r.key,s,new Gn(o.toArray()),On.none())}}function BC(r,e,n){r instanceof qu?function(o,u,h){const m=o.value.clone(),p=X0(o.fieldTransforms,u,h.transformResults);m.setAll(p),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(r,e,n):r instanceof zs?function(o,u,h){if(!Rh(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=X0(o.fieldTransforms,u,h.transformResults),p=u.data;p.setAll(ET(o)),p.setAll(m),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(r,e,n):function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,n)}function Tu(r,e,n,s){return r instanceof qu?function(u,h,m,p){if(!Rh(u.precondition,h))return m;const g=u.value.clone(),b=$0(u.fieldTransforms,p,h);return g.setAll(b),h.convertToFoundDocument(h.version,g).setHasLocalMutations(),null}(r,e,n,s):r instanceof zs?function(u,h,m,p){if(!Rh(u.precondition,h))return m;const g=$0(u.fieldTransforms,p,h),b=h.data;return b.setAll(ET(u)),b.setAll(g),h.convertToFoundDocument(h.version,b).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(S=>S.field))}(r,e,n,s):function(u,h,m){return Rh(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m}(r,e,n)}function qC(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=pT(s.transform,o||null);u!=null&&(n===null&&(n=In.empty()),n.set(s.field,u))}return n||null}function Y0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Wo(s,o,(u,h)=>LC(u,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class qu extends md{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class zs extends md{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function ET(r){const e=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}}),e}function X0(r,e,n){const s=new Map;We(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const u=r[o],h=u.transform,m=e.data.field(u.field);s.set(u.field,jC(h,m,n[o]))}return s}function $0(r,e,n){const s=new Map;for(const o of r){const u=o.transform,h=n.data.field(o.field);s.set(o.field,PC(u,h,e))}return s}class Qp extends md{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class FC extends md{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&BC(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Tu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Tu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=fT();return this.mutations.forEach(o=>{const u=e.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=n.has(o.key)?null:m;const p=_T(h,m);p!==null&&s.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(Ce.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ze())}isEqual(e){return this.batchId===e.batchId&&Wo(this.mutations,e.mutations,(n,s)=>Y0(n,s))&&Wo(this.baseMutations,e.baseMutations,(n,s)=>Y0(n,s))}}class Wp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){We(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=function(){return NC}();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,s[h].version);return new Wp(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,Fe;function QC(r){switch(r){case ee.OK:return xe(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return xe(15467,{code:r})}}function bT(r){if(r===void 0)return Ai("GRPC error has no .code"),ee.UNKNOWN;switch(r){case Mt.OK:return ee.OK;case Mt.CANCELLED:return ee.CANCELLED;case Mt.UNKNOWN:return ee.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return ee.INTERNAL;case Mt.UNAVAILABLE:return ee.UNAVAILABLE;case Mt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Mt.NOT_FOUND:return ee.NOT_FOUND;case Mt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Mt.ABORTED:return ee.ABORTED;case Mt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Mt.DATA_LOSS:return ee.DATA_LOSS;default:return xe(39323,{code:r})}}(Fe=Mt||(Mt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=new xs([4294967295,4294967295],0);function Z0(r){const e=WC().encode(r),n=new Pb;return n.update(e),new Uint8Array(n.digest())}function J0(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new xs([n,s],0),new xs([o,u],0)]}class Yp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new gu(`Invalid padding: ${n}`);if(s<0)throw new gu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new gu(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new gu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=xs.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(xs.fromNumber(s)));return o.compare(YC)===1&&(o=new xs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Z0(e),[s,o]=J0(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);if(!this.we(h))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new Yp(u,o,n);return s.forEach(m=>h.insert(m)),h}insert(e){if(this.ge===0)return;const n=Z0(e),[s,o]=J0(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);this.Se(h)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class gu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Fu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new pd(Ce.min(),o,new yt(Le),wi(),ze())}}class Fu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Fu(s,n,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class TT{constructor(e,n){this.targetId=e,this.Ce=n}}class ST{constructor(e,n,s=sn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class eE{constructor(){this.ve=0,this.Fe=tE(),this.Me=sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),n=ze(),s=ze();return this.Fe.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:xe(38017,{changeType:u})}}),new Fu(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=tE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class XC{constructor(e){this.Ge=e,this.ze=new Map,this.je=wi(),this.Je=vh(),this.He=vh(),this.Ye=new yt(Le)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,o)=>{this.rt(o)&&n(o)})}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(up(u))if(s===0){const h=new be(u.path);this.et(n,h,fn.newNoDocument(h,Ce.min()))}else We(s===1,20013,{expectedCount:s});else{const h=this._t(n);if(h!==s){const m=this.ut(e),p=m?this.ct(m,e,h):1;if(p!==0){this.it(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,g)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let h,m;try{h=Os(s).toUint8Array()}catch(p){if(p instanceof Wb)return Qo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Yp(h,o,u)}catch(p){return Qo(p instanceof gu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)}),o}Tt(e){const n=new Map;this.ze.forEach((u,h)=>{const m=this.ot(h);if(m){if(u.current&&up(m.target)){const p=new be(m.target.path);this.It(p).has(h)||this.Et(h,p)||this.et(h,p,fn.newNoDocument(p,e))}u.Be&&(n.set(h,u.ke()),u.qe())}});let s=ze();this.He.forEach((u,h)=>{let m=!0;h.forEachWhile(p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.je.forEach((u,h)=>h.setReadTime(e));const o=new pd(e,n,this.Ye,this.je,s);return this.je=wi(),this.Je=vh(),this.He=vh(),this.Ye=new yt(Le),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new eE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new qt(Le),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new qt(Le),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new eE),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function vh(){return new yt(be.comparator)}function tE(){return new yt(be.comparator)}const $C={asc:"ASCENDING",desc:"DESCENDING"},ZC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JC={and:"AND",or:"OR"};class eI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function dp(r,e){return r.useProto3Json||ld(e)?e:{value:e}}function Fh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AT(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function tI(r,e){return Fh(r,e.toTimestamp())}function Hr(r){return We(!!r,49232),Ce.fromTimestamp(function(n){const s=Ns(n);return new dt(s.seconds,s.nanos)}(r))}function Xp(r,e){return fp(r,e).canonicalString()}function fp(r,e){const n=function(o){return new ut(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?n:n.child(e)}function wT(r){const e=ut.fromString(r);return We(DT(e),10190,{key:e.toString()}),e}function mp(r,e){return Xp(r.databaseId,e.path)}function Lm(r,e){const n=wT(e);if(n.get(1)!==r.databaseId.projectId)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new be(RT(n))}function xT(r,e){return Xp(r.databaseId,e)}function nI(r){const e=wT(r);return e.length===4?ut.emptyPath():RT(e)}function pp(r){return new ut(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function RT(r){return We(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function nE(r,e,n){return{name:mp(r,e),fields:n.value.mapValue.fields}}function rI(r,e){let n;if("targetChange"in e){e.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:xe(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(g,b){return g.useProto3Json?(We(b===void 0||typeof b=="string",58123),sn.fromBase64String(b||"")):(We(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),sn.fromUint8Array(b||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(g){const b=g.code===void 0?ee.UNKNOWN:bT(g.code);return new he(b,g.message||"")}(h);n=new ST(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Lm(r,s.document.name),u=Hr(s.document.updateTime),h=s.document.createTime?Hr(s.document.createTime):Ce.min(),m=new In({mapValue:{fields:s.document.fields}}),p=fn.newFoundDocument(o,u,h,m),g=s.targetIds||[],b=s.removedTargetIds||[];n=new Ch(g,b,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Lm(r,s.document),u=s.readTime?Hr(s.readTime):Ce.min(),h=fn.newNoDocument(o,u),m=s.removedTargetIds||[];n=new Ch([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Lm(r,s.document),u=s.removedTargetIds||[];n=new Ch([],u,o,null)}else{if(!("filter"in e))return xe(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,h=new KC(o,u),m=s.targetId;n=new TT(m,h)}}return n}function iI(r,e){let n;if(e instanceof qu)n={update:nE(r,e.key,e.value)};else if(e instanceof Qp)n={delete:mp(r,e.key)};else if(e instanceof zs)n={update:nE(r,e.key,e.data),updateMask:fI(e.fieldMask)};else{if(!(e instanceof FC))return xe(16599,{Vt:e.type});n={verify:mp(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,h){const m=h.transform;if(m instanceof Vu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Pu)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof ju)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof qh)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw xe(20930,{transform:h.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:tI(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:xe(27497)}(r,e.precondition)),n}function sI(r,e){return r&&r.length>0?(We(e!==void 0,14353),r.map(n=>function(o,u){let h=o.updateTime?Hr(o.updateTime):Hr(u);return h.isEqual(Ce.min())&&(h=Hr(u)),new zC(h,o.transformResults||[])}(n,e))):[]}function aI(r,e){return{documents:[xT(r,e.path)]}}function oI(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=xT(r,o);const u=function(g){if(g.length!==0)return IT(br.create(g,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const h=function(g){if(g.length!==0)return g.map(b=>function(x){return{field:Lo(x.field),direction:cI(x.dir)}}(b))}(e.orderBy);h&&(n.structuredQuery.orderBy=h);const m=dp(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ft:n,parent:o}}function lI(r){let e=nI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){We(s===1,65062);const b=n.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let u=[];n.where&&(u=function(S){const x=CT(S);return x instanceof br&&iT(x)?x.getFilters():[x]}(n.where));let h=[];n.orderBy&&(h=function(S){return S.map(x=>function(q){return new Mu(zo(q.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(q.direction))}(x))}(n.orderBy));let m=null;n.limit&&(m=function(S){let x;return x=typeof S=="object"?S.value:S,ld(x)?null:x}(n.limit));let p=null;n.startAt&&(p=function(S){const x=!!S.before,U=S.values||[];return new Bh(U,x)}(n.startAt));let g=null;return n.endAt&&(g=function(S){const x=!S.before,U=S.values||[];return new Bh(U,x)}(n.endAt)),xC(e,o,h,u,m,"F",p,g)}function uI(r,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function CT(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=zo(n.unaryFilter.field);return Pt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=zo(n.unaryFilter.field);return Pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=zo(n.unaryFilter.field);return Pt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=zo(n.unaryFilter.field);return Pt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}}(r):r.fieldFilter!==void 0?function(n){return Pt.create(zo(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return br.create(n.compositeFilter.filters.map(s=>CT(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return xe(1026)}}(n.compositeFilter.op))}(r):xe(30097,{filter:r})}function cI(r){return $C[r]}function hI(r){return ZC[r]}function dI(r){return JC[r]}function Lo(r){return{fieldPath:r.canonicalString()}}function zo(r){return rn.fromServerFormat(r.fieldPath)}function IT(r){return r instanceof Pt?function(n){if(n.op==="=="){if(F0(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NAN"}};if(q0(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(F0(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NOT_NAN"}};if(q0(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lo(n.field),op:hI(n.op),value:n.value}}}(r):r instanceof br?function(n){const s=n.getFilters().map(o=>IT(o));return s.length===1?s[0]:{compositeFilter:{op:dI(n.op),filters:s}}}(r):xe(54877,{filter:r})}function fI(r){const e=[];return r.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function DT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n,s,o,u=Ce.min(),h=Ce.min(),m=sn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new Ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e){this.yt=e}}function pI(r){const e=lI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?hp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(){this.Cn=new yI}addToCollectionParentIndex(e,n){return this.Cn.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve(Ds.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve(Ds.min())}updateCollectionGroup(e,n,s){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class yI{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new qt(ut.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new qt(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},NT=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(NT,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new $o(0)}static cr(){return new $o(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="LruGarbageCollector",vI=1048576;function sE([r,e],[n,s]){const o=Le(r,n);return o===0?Le(e,s):o}class _I{constructor(e){this.Ir=e,this.buffer=new qt(sE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();sE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class EI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(iE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){rl(n)?me(iE,"Ignoring IndexedDB error during garbage collection: ",n):await nl(n)}await this.Vr(3e5)})}}class bI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return re.resolve(od.ce);const s=new _I(n);return this.mr.forEachTarget(e,o=>s.Ar(o.sequenceNumber)).next(()=>this.mr.pr(e,o=>s.Ar(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(rE)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rE):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,h,m,p,g;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,h=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(s=S,m=Date.now(),this.removeTargets(e,s,n))).next(S=>(u=S,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(S=>(g=Date.now(),jo()<=Ue.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-b}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${S} documents in `+(g-p)+`ms
Total Duration: ${g-b}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S})))}}function TI(r,e){return new bI(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(){this.changes=new Ha(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?re.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&Tu(s.mutation,o,Gn.empty(),dt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,ze()).next(()=>s))}getLocalViewOfDocuments(e,n,s=ze()){const o=Ia();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(u=>{let h=pu();return u.forEach((m,p)=>{h=h.insert(m,p.overlayedDocument)}),h}))}getOverlayedDocuments(e,n){const s=Ia();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,ze()))}populateOverlays(e,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((h,m)=>{n.set(h,m)})})}computeViews(e,n,s,o){let u=wi();const h=bu(),m=function(){return bu()}();return n.forEach((p,g)=>{const b=s.get(g.key);o.has(g.key)&&(b===void 0||b.mutation instanceof zs)?u=u.insert(g.key,g):b!==void 0?(h.set(g.key,b.mutation.getFieldMask()),Tu(b.mutation,g,b.mutation.getFieldMask(),dt.now())):h.set(g.key,Gn.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((g,b)=>h.set(g,b)),n.forEach((g,b)=>m.set(g,new AI(b,h.get(g)??null))),m))}recalculateAndSaveOverlays(e,n){const s=bu();let o=new yt((h,m)=>h-m),u=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(h=>{for(const m of h)m.keys().forEach(p=>{const g=n.get(p);if(g===null)return;let b=s.get(p)||Gn.empty();b=m.applyToLocalView(g,b),s.set(p,b);const S=(o.get(m.batchId)||ze()).add(p);o=o.insert(m.batchId,S)})}).next(()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,b=p.value,S=fT();b.forEach(x=>{if(!u.has(x)){const U=_T(n.get(x),s.get(x));U!==null&&S.set(x,U),u=u.add(x)}}),h.push(this.documentOverlayCache.saveOverlays(e,g,S))}return re.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(h){return be.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):lT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):re.resolve(Ia());let m=Du,p=u;return h.next(g=>re.forEach(g,(b,S)=>(m<S.largestBatchId&&(m=S.largestBatchId),u.get(b)?re.resolve():this.remoteDocumentCache.getEntry(e,b).next(x=>{p=p.insert(b,x)}))).next(()=>this.populateOverlays(e,g,u)).next(()=>this.computeViews(e,p,g,ze())).next(b=>({batchId:m,changes:dT(b)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next(s=>{let o=pu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let h=pu();return this.indexManager.getCollectionParents(e,u).next(m=>re.forEach(m,p=>{const g=function(S,x){return new il(x,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)}(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next(b=>{b.forEach((S,x)=>{h=h.insert(S,x)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o))).next(h=>{u.forEach((p,g)=>{const b=g.getKey();h.get(b)===null&&(h=h.insert(b,fn.newInvalidDocument(b)))});let m=pu();return h.forEach((p,g)=>{const b=u.get(p);b!==void 0&&Tu(b.mutation,g,Gn.empty(),dt.now()),dd(n,g)&&(m=m.insert(p,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return re.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Hr(o.createTime)}}(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(o){return{name:o.name,query:pI(o.bundledQuery),readTime:Hr(o.readTime)}}(n)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(){this.overlays=new yt(be.comparator),this.qr=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ia();return re.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,u)=>{this.St(e,n,u)}),re.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.qr.delete(s)),re.resolve()}getOverlaysForCollection(e,n,s){const o=Ia(),u=n.length+1,h=new be(n.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return re.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new yt((g,b)=>g-b);const h=this.overlays.getIterator();for(;h.hasNext();){const g=h.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let b=u.get(g.largestBatchId);b===null&&(b=Ia(),u=u.insert(g.largestBatchId,b)),b.set(g.getKey(),g)}}const m=Ia(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,b)=>m.set(g,b)),!(m.size()>=o)););return re.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new GC(n,s));let u=this.qr.get(n);u===void 0&&(u=ze(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(){this.Qr=new qt(Wt.$r),this.Ur=new qt(Wt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Wt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new Wt(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new be(new ut([])),s=new Wt(n,e),o=new Wt(n,e+1),u=[];return this.Ur.forEachInRange([s,o],h=>{this.Gr(h),u.push(h.key)}),u}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new be(new ut([])),s=new Wt(n,e),o=new Wt(n,e+1);let u=ze();return this.Ur.forEachInRange([s,o],h=>{u=u.add(h.key)}),u}containsKey(e){const n=new Wt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Wt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return be.comparator(e.key,n.key)||Le(e.Yr,n.Yr)}static Kr(e,n){return Le(e.Yr,n.Yr)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new qt(Wt.$r)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new HC(u,n,s,o);this.mutationQueue.push(h);for(const m of o)this.Zr=this.Zr.add(new Wt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return re.resolve(h)}lookupMutationBatch(e,n){return re.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return re.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Bp:this.tr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Wt(n,0),o=new Wt(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],h=>{const m=this.Xr(h.Yr);u.push(m)}),re.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new qt(Le);return n.forEach(o=>{const u=new Wt(o,0),h=new Wt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,h],m=>{s=s.add(m.Yr)})}),re.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;be.isDocumentKey(u)||(u=u.child(""));const h=new Wt(new be(u),0);let m=new qt(Le);return this.Zr.forEachWhile(p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Yr)),!0)},h),re.resolve(this.ti(m))}ti(e){const n=[];return e.forEach(s=>{const o=this.Xr(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){We(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return re.forEach(n.mutations,o=>{const u=new Wt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new Wt(n,0),o=this.Zr.firstAfterOrEqual(s);return re.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.ri=e,this.docs=function(){return new yt(be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,h=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return re.resolve(s?s.document.mutableCopy():fn.newInvalidDocument(n))}getEntries(e,n){let s=wi();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():fn.newInvalidDocument(o))}),re.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=wi();const h=n.path,m=new be(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:b}}=p.getNext();if(!h.isPrefixOf(g.path))break;g.path.length>h.length+1||iC(rC(b),s)<=0||(o.has(b.key)||dd(n,b))&&(u=u.insert(b.key,b.mutableCopy()))}return re.resolve(u)}getAllFromCollectionGroup(e,n,s,o){xe(9500)}ii(e,n){return re.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new NI(this)}getSize(e){return re.resolve(this.size)}}class NI extends SI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)}),re.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.persistence=e,this.si=new Ha(n=>Hp(n),Gp),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new $p,this.targetCount=0,this.ai=$o.ur()}forEachTarget(e,n){return this.si.forEach((s,o)=>n(o)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),re.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new $o(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.Pr(n),re.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach((h,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),re.waitFor(u).next(()=>o)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return re.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),re.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(h=>{u.push(o.markPotentiallyOrphaned(e,h))}),re.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),re.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return re.resolve(s)}containsKey(e,n){return re.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,n){this.ui={},this.overlays={},this.ci=new od(0),this.li=!1,this.li=!0,this.hi=new CI,this.referenceDelegate=e(this),this.Pi=new OI(this),this.indexManager=new gI,this.remoteDocumentCache=function(o){return new DI(o)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new mI(n),this.Ii=new xI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new II(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){me("MemoryPersistence","Starting transaction:",e);const o=new kI(this.ci.next());return this.referenceDelegate.Ei(),s(o).next(u=>this.referenceDelegate.di(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ai(e,n){return re.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class kI extends aC{constructor(e){super(),this.currentSequenceNumber=e}}class Zp{constructor(e){this.persistence=e,this.Ri=new $p,this.Vi=null}static mi(e){return new Zp(e)}get fi(){if(this.Vi)return this.Vi;throw xe(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),re.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),re.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(o=>this.fi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.fi.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.fi,s=>{const o=be.fromPath(s);return this.gi(e,o).next(u=>{u||n.removeEntry(o,Ce.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return re.or([()=>re.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Hh{constructor(e,n){this.persistence=e,this.pi=new Ha(s=>uC(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=TI(this,n)}static mi(e,n){return new Hh(e,n)}Ei(){}di(e){return re.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return re.forEach(this.pi,(s,o)=>this.br(e,s,o).next(u=>u?re.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,h=>this.br(e,h,n).next(m=>{m||(s++,u.removeEntry(h,Ce.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=wh(e.data.value)),n}br(e,n,s){return re.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return re.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=ze(),o=ze();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Jp(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Rx()?8:oC(mn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next(h=>{u.result=h}).next(()=>{if(!u.result)return this.ws(e,n,o,s).next(h=>{u.result=h})}).next(()=>{if(u.result)return;const h=new MI;return this.Ss(e,n,h).next(m=>{if(u.result=m,this.Vs)return this.bs(e,n,h,m.size)})}).next(()=>u.result)}bs(e,n,s,o){return s.documentReadCount<this.fs?(jo()<=Ue.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Uo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),re.resolve()):(jo()<=Ue.DEBUG&&me("QueryEngine","Query:",Uo(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(jo()<=Ue.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Uo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fr(n))):re.resolve())}ys(e,n){if(Q0(n))return re.resolve(null);let s=Fr(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=hp(n,null,"F"),s=Fr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const h=ze(...u);return this.ps.getDocuments(e,h).next(m=>this.indexManager.getMinOffset(e,s).next(p=>{const g=this.Ds(n,m);return this.Cs(n,g,h,p.readTime)?this.ys(e,hp(n,null,"F")):this.vs(e,g,n,p)}))})))}ws(e,n,s,o){return Q0(n)||o.isEqual(Ce.min())?re.resolve(null):this.ps.getDocuments(e,s).next(u=>{const h=this.Ds(n,u);return this.Cs(n,h,s,o)?re.resolve(null):(jo()<=Ue.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Uo(n)),this.vs(e,h,n,nC(o,Du)).next(m=>m))})}Ds(e,n){let s=new qt(cT(e));return n.forEach((o,u)=>{dd(e,u)&&(s=s.add(u))}),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return jo()<=Ue.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Uo(n)),this.ps.getDocumentsMatchingQuery(e,n,Ds.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next(u=>(n.forEach(h=>{u=u.insert(h.key,h)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg="LocalStore",PI=3e8;class jI{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new yt(Le),this.xs=new Ha(u=>Hp(u),Gp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function UI(r,e,n,s){return new jI(r,e,n,s)}async function kT(r,e){const n=De(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const h=[],m=[];let p=ze();for(const g of o){h.push(g.batchId);for(const b of g.mutations)p=p.add(b.key)}for(const g of u){m.push(g.batchId);for(const b of g.mutations)p=p.add(b.key)}return n.localDocuments.getDocuments(s,p).next(g=>({Ls:g,removedBatchIds:h,addedBatchIds:m}))})})}function LI(r,e){const n=De(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return function(m,p,g,b){const S=g.batch,x=S.keys();let U=re.resolve();return x.forEach(q=>{U=U.next(()=>b.getEntry(p,q)).next(Y=>{const k=g.docVersions.get(q);We(k!==null,48541),Y.version.compareTo(k)<0&&(S.applyToRemoteDocument(Y,g),Y.isValidDocument()&&(Y.setReadTime(g.commitVersion),b.addEntry(Y)))})}),U.next(()=>m.mutationQueue.removeMutationBatch(p,S))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let p=ze();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function MT(r){const e=De(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function zI(r,e){const n=De(r),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach((b,S)=>{const x=o.get(S);if(!x)return;m.push(n.Pi.removeMatchingKeys(u,b.removedDocuments,S).next(()=>n.Pi.addMatchingKeys(u,b.addedDocuments,S)));let U=x.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(S)!==null?U=U.withResumeToken(sn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):b.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(b.resumeToken,s)),o=o.insert(S,U),function(Y,k,Z){return Y.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=PI?!0:Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0}(x,U,b)&&m.push(n.Pi.updateTargetData(u,U))});let p=wi(),g=ze();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,b))}),m.push(BI(u,h,e.documentUpdates).next(b=>{p=b.ks,g=b.qs})),!s.isEqual(Ce.min())){const b=n.Pi.getLastRemoteSnapshotVersion(u).next(S=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(b)}return re.waitFor(m).next(()=>h.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,p,g)).next(()=>p)}).then(u=>(n.Ms=o,u))}function BI(r,e,n){let s=ze(),o=ze();return n.forEach(u=>s=s.add(u)),e.getEntries(r,s).next(u=>{let h=wi();return n.forEach((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Ce.min())?(e.removeEntry(m,p.readTime),h=h.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),h=h.insert(m,p)):me(eg,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)}),{ks:h,qs:o}})}function qI(r,e){const n=De(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Bp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function FI(r,e){const n=De(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Pi.getTargetData(s,e).next(u=>u?(o=u,re.resolve(o)):n.Pi.allocateTargetId(s).next(h=>(o=new Ts(e,h,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function gp(r,e,n){const s=De(r),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,h=>s.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!rl(h))throw h;me(eg,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function aE(r,e,n){const s=De(r);let o=Ce.min(),u=ze();return s.persistence.runTransaction("Execute query","readwrite",h=>function(p,g,b){const S=De(p),x=S.xs.get(b);return x!==void 0?re.resolve(S.Ms.get(x)):S.Pi.getTargetData(g,b)}(s,h,Fr(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,m.targetId).next(p=>{u=p})}).next(()=>s.Fs.getDocumentsMatchingQuery(h,e,n?o:Ce.min(),n?u:ze())).next(m=>(HI(s,CC(e),m),{documents:m,Qs:u})))}function HI(r,e,n){let s=r.Os.get(e)||Ce.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),r.Os.set(e,s)}class oE{constructor(){this.activeTargetIds=MC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GI{constructor(){this.Mo=new oE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new oE,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="ConnectivityMonitor";class uE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(lE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(lE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _h=null;function yp(){return _h===null?_h=function(){return 268435456+Math.round(2147483648*Math.random())}():_h++,"0x"+_h.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="RestConnection",QI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class WI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Lh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const h=yp(),m=this.zo(e,n.toUriEncodedString());me(zm,`Sending RPC '${e}' ${h}:`,m,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:g}=new URL(m),b=Us(g);return this.Jo(e,m,p,s,b).then(S=>(me(zm,`Received RPC '${e}' ${h}: `,S),S),S=>{throw Qo(zm,`RPC '${e}' ${h} failed with error: `,S,"url: ",m,"request:",s),S})}Ho(e,n,s,o,u,h){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+tl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}zo(e,n){const s=QI[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn="WebChannelConnection";class XI extends WI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const h=yp();return new Promise((m,p)=>{const g=new jb;g.setWithCredentials(!0),g.listenOnce(Ub.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Ah.NO_ERROR:const S=g.getResponseJson();me(hn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(S)),m(S);break;case Ah.TIMEOUT:me(hn,`RPC '${e}' ${h} timed out`),p(new he(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Ah.HTTP_ERROR:const x=g.getStatus();if(me(hn,`RPC '${e}' ${h} failed with status:`,x,"response text:",g.getResponseText()),x>0){let U=g.getResponseJson();Array.isArray(U)&&(U=U[0]);const q=U?.error;if(q&&q.status&&q.message){const Y=function(Z){const K=Z.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(K)>=0?K:ee.UNKNOWN}(q.status);p(new he(Y,q.message))}else p(new he(ee.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new he(ee.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:h,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{me(hn,`RPC '${e}' ${h} completed.`)}});const b=JSON.stringify(o);me(hn,`RPC '${e}' ${h} sending request:`,o),g.send(n,"POST",b,s,15)})}T_(e,n,s){const o=yp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Bb(),m=zb(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const b=u.join("");me(hn,`Creating RPC '${e}' stream ${o}: ${b}`,p);const S=h.createWebChannel(b,p);this.I_(S);let x=!1,U=!1;const q=new YI({Yo:k=>{U?me(hn,`Not sending because RPC '${e}' stream ${o} is closed:`,k):(x||(me(hn,`Opening RPC '${e}' stream ${o} transport.`),S.open(),x=!0),me(hn,`RPC '${e}' stream ${o} sending:`,k),S.send(k))},Zo:()=>S.close()}),Y=(k,Z,K)=>{k.listen(Z,X=>{try{K(X)}catch(oe){setTimeout(()=>{throw oe},0)}})};return Y(S,mu.EventType.OPEN,()=>{U||(me(hn,`RPC '${e}' stream ${o} transport opened.`),q.o_())}),Y(S,mu.EventType.CLOSE,()=>{U||(U=!0,me(hn,`RPC '${e}' stream ${o} transport closed`),q.a_(),this.E_(S))}),Y(S,mu.EventType.ERROR,k=>{U||(U=!0,Qo(hn,`RPC '${e}' stream ${o} transport errored. Name:`,k.name,"Message:",k.message),q.a_(new he(ee.UNAVAILABLE,"The operation could not be completed")))}),Y(S,mu.EventType.MESSAGE,k=>{if(!U){const Z=k.data[0];We(!!Z,16349);const K=Z,X=K?.error||K[0]?.error;if(X){me(hn,`RPC '${e}' stream ${o} received error:`,X);const oe=X.status;let se=function(w){const C=Mt[w];if(C!==void 0)return bT(C)}(oe),ge=X.message;se===void 0&&(se=ee.INTERNAL,ge="Unknown error status: "+oe+" with message "+X.message),U=!0,q.a_(new he(se,ge)),S.close()}else me(hn,`RPC '${e}' stream ${o} received:`,Z),q.u_(Z)}}),Y(m,Lb.STAT_EVENT,k=>{k.stat===ip.PROXY?me(hn,`RPC '${e}' stream ${o} detected buffering proxy`):k.stat===ip.NOPROXY&&me(hn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{q.__()},0),q}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Bm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(r){return new eI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="PersistentStream";class PT{constructor(e,n,s,o,u,h,m,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new VT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?(Ai(n.toString()),Ai("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.D_===n&&this.G_(s,o)},s=>{e(()=>{const o=new he(ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(o=>{s(()=>this.z_(o))}),this.stream.onMessage(o=>{s(()=>++this.F_==1?this.J_(o):this.onNext(o))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return me(cE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(me(cE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $I extends PT{constructor(e,n,s,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=rI(this.serializer,e),s=function(u){if(!("targetChange"in u))return Ce.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Ce.min():h.readTime?Hr(h.readTime):Ce.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=pp(this.serializer),n.addTarget=function(u,h){let m;const p=h.target;if(m=up(p)?{documents:aI(u,p)}:{query:oI(u,p).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=AT(u,h.resumeToken);const g=dp(u,h.expectedCount);g!==null&&(m.expectedCount=g)}else if(h.snapshotVersion.compareTo(Ce.min())>0){m.readTime=Fh(u,h.snapshotVersion.toTimestamp());const g=dp(u,h.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,e);const s=uI(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=pp(this.serializer),n.removeTarget=e,this.q_(n)}}class ZI extends PT{constructor(e,n,s,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=sI(e.writeResults,e.commitTime),s=Hr(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=pp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>iI(this.serializer,s))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{}class e2 extends JI{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Go(e,fp(n,s),o,u,h)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(ee.UNKNOWN,u.toString())})}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.connection.Ho(e,fp(n,s),o,h,m,u)).catch(h=>{throw h.name==="FirebaseError"?(h.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new he(ee.UNKNOWN,h.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class t2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ai(n),this.aa=!1):me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa="RemoteStore";class n2{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo(h=>{s.enqueueAndForget(async()=>{Ga(this)&&(me(Pa,"Restarting streams for network reachability change."),await async function(p){const g=De(p);g.Ea.add(4),await Hu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await yd(g)}(this))})}),this.Ra=new t2(s,o)}}async function yd(r){if(Ga(r))for(const e of r.da)await e(!0)}async function Hu(r){for(const e of r.da)await e(!1)}function jT(r,e){const n=De(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ig(n)?rg(n):sl(n).O_()&&ng(n,e))}function tg(r,e){const n=De(r),s=sl(n);n.Ia.delete(e),s.O_()&&UT(n,e),n.Ia.size===0&&(s.O_()?s.L_():Ga(n)&&n.Ra.set("Unknown"))}function ng(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}sl(r).Y_(e)}function UT(r,e){r.Va.Ue(e),sl(r).Z_(e)}function rg(r){r.Va=new XC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),sl(r).start(),r.Ra.ua()}function ig(r){return Ga(r)&&!sl(r).x_()&&r.Ia.size>0}function Ga(r){return De(r).Ea.size===0}function LT(r){r.Va=void 0}async function r2(r){r.Ra.set("Online")}async function i2(r){r.Ia.forEach((e,n)=>{ng(r,e)})}async function s2(r,e){LT(r),ig(r)?(r.Ra.ha(e),rg(r)):r.Ra.set("Unknown")}async function a2(r,e,n){if(r.Ra.set("Online"),e instanceof ST&&e.state===2&&e.cause)try{await async function(o,u){const h=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.Va.removeTarget(m))}(r,e)}catch(s){me(Pa,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Gh(r,s)}else if(e instanceof Ch?r.Va.Ze(e):e instanceof TT?r.Va.st(e):r.Va.tt(e),!n.isEqual(Ce.min()))try{const s=await MT(r.localStore);n.compareTo(s)>=0&&await function(u,h){const m=u.Va.Tt(h);return m.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const b=u.Ia.get(g);b&&u.Ia.set(g,b.withResumeToken(p.resumeToken,h))}}),m.targetMismatches.forEach((p,g)=>{const b=u.Ia.get(p);if(!b)return;u.Ia.set(p,b.withResumeToken(sn.EMPTY_BYTE_STRING,b.snapshotVersion)),UT(u,p);const S=new Ts(b.target,p,g,b.sequenceNumber);ng(u,S)}),u.remoteSyncer.applyRemoteEvent(m)}(r,n)}catch(s){me(Pa,"Failed to raise snapshot:",s),await Gh(r,s)}}async function Gh(r,e,n){if(!rl(e))throw e;r.Ea.add(1),await Hu(r),r.Ra.set("Offline"),n||(n=()=>MT(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{me(Pa,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await yd(r)})}function zT(r,e){return e().catch(n=>Gh(r,n,e))}async function vd(r){const e=De(r),n=Ms(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Bp;for(;o2(e);)try{const o=await qI(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,l2(e,o)}catch(o){await Gh(e,o)}BT(e)&&qT(e)}function o2(r){return Ga(r)&&r.Ta.length<10}function l2(r,e){r.Ta.push(e);const n=Ms(r);n.O_()&&n.X_&&n.ea(e.mutations)}function BT(r){return Ga(r)&&!Ms(r).x_()&&r.Ta.length>0}function qT(r){Ms(r).start()}async function u2(r){Ms(r).ra()}async function c2(r){const e=Ms(r);for(const n of r.Ta)e.ea(n.mutations)}async function h2(r,e,n){const s=r.Ta.shift(),o=Wp.from(s,e,n);await zT(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await vd(r)}async function d2(r,e){e&&Ms(r).X_&&await async function(s,o){if(function(h){return QC(h)&&h!==ee.ABORTED}(o.code)){const u=s.Ta.shift();Ms(s).B_(),await zT(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await vd(s)}}(r,e),BT(r)&&qT(r)}async function hE(r,e){const n=De(r);n.asyncQueue.verifyOperationInProgress(),me(Pa,"RemoteStore received new credentials");const s=Ga(n);n.Ea.add(3),await Hu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await yd(n)}async function f2(r,e){const n=De(r);e?(n.Ea.delete(2),await yd(n)):e||(n.Ea.add(2),await Hu(n),n.Ra.set("Unknown"))}function sl(r){return r.ma||(r.ma=function(n,s,o){const u=De(n);return u.sa(),new $I(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{Xo:r2.bind(null,r),t_:i2.bind(null,r),r_:s2.bind(null,r),H_:a2.bind(null,r)}),r.da.push(async e=>{e?(r.ma.B_(),ig(r)?rg(r):r.Ra.set("Unknown")):(await r.ma.stop(),LT(r))})),r.ma}function Ms(r){return r.fa||(r.fa=function(n,s,o){const u=De(n);return u.sa(),new ZI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:u2.bind(null,r),r_:d2.bind(null,r),ta:c2.bind(null,r),na:h2.bind(null,r)}),r.da.push(async e=>{e?(r.fa.B_(),await vd(r)):(await r.fa.stop(),r.Ta.length>0&&(me(Pa,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))})),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const h=Date.now()+s,m=new sg(e,n,h,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ag(r,e){if(Ai("AsyncQueue",`${e}: ${r}`),rl(r))return new he(ee.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{static emptySet(e){return new qo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||be.comparator(n.key,s.key):(n,s)=>be.comparator(n.key,s.key),this.keyedMap=pu(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new qo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(){this.ga=new yt(be.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):xe(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class Zo{constructor(e,n,s,o,u,h,m,p,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,u){const h=[];return n.forEach(m=>{h.push({type:0,doc:m})}),new Zo(e,n,qo.emptySet(n),h,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class p2{constructor(){this.queries=fE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=De(n),u=o.queries;o.queries=fE(),u.forEach((h,m)=>{for(const p of m.Sa)p.onError(s)})})(this,new he(ee.ABORTED,"Firestore shutting down"))}}function fE(){return new Ha(r=>uT(r),hd)}async function og(r,e){const n=De(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new m2,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const m=ag(h,`Initialization of query '${Uo(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&ug(n)}async function lg(r,e){const n=De(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const h=u.Sa.indexOf(e);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function g2(r,e){const n=De(r);let s=!1;for(const o of e){const u=o.query,h=n.queries.get(u);if(h){for(const m of h.Sa)m.Fa(o)&&(s=!0);h.wa=o}}s&&ug(n)}function y2(r,e,n){const s=De(r),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function ug(r){r.Ca.forEach(e=>{e.next()})}var vp,mE;(mE=vp||(vp={})).Ma="default",mE.Cache="cache";class cg{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Zo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e){this.key=e}}class HT{constructor(e){this.key=e}}class v2{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=cT(e),this.tu=new qo(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new dE,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((b,S)=>{const x=o.get(b),U=dd(this.query,S)?S:null,q=!!x&&this.mutatedKeys.has(x.key),Y=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let k=!1;x&&U?x.data.isEqual(U.data)?q!==Y&&(s.track({type:3,doc:U}),k=!0):this.su(x,U)||(s.track({type:2,doc:U}),k=!0,(p&&this.eu(U,p)>0||g&&this.eu(U,g)<0)&&(m=!0)):!x&&U?(s.track({type:0,doc:U}),k=!0):x&&!U&&(s.track({type:1,doc:x}),k=!0,(p||g)&&(m=!0)),k&&(U?(h=h.add(U),u=Y?u.add(b):u.delete(b)):(h=h.delete(b),u=u.delete(b)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const b=this.query.limitType==="F"?h.last():h.first();h=h.delete(b.key),u=u.delete(b.key),s.track({type:1,doc:b})}return{tu:h,iu:s,Cs:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort((b,S)=>function(U,q){const Y=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Rt:k})}};return Y(U)-Y(q)}(b.type,S.type)||this.eu(b.doc,S.doc)),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,g=p!==this.Za;return this.Za=p,h.length!==0||g?{snapshot:new Zo(this.query,e.tu,u,h,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new dE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new HT(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new FT(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=ze();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Zo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const hg="SyncEngine";class _2{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class E2{constructor(e){this.key=e,this.hu=!1}}class b2{constructor(e,n,s,o,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Ha(m=>uT(m),hd),this.Iu=new Map,this.Eu=new Set,this.du=new yt(be.comparator),this.Au=new Map,this.Ru=new $p,this.Vu={},this.mu=new Map,this.fu=$o.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function T2(r,e,n=!0){const s=XT(r);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await GT(s,e,n,!0),o}async function S2(r,e){const n=XT(r);await GT(n,e,!0,!1)}async function GT(r,e,n,s){const o=await FI(r.localStore,Fr(e)),u=o.targetId,h=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await A2(r,e,u,h==="current",o.resumeToken)),r.isPrimaryClient&&n&&jT(r.remoteStore,o),m}async function A2(r,e,n,s,o){r.pu=(S,x,U)=>async function(Y,k,Z,K){let X=k.view.ru(Z);X.Cs&&(X=await aE(Y.localStore,k.query,!1).then(({documents:R})=>k.view.ru(R,X)));const oe=K&&K.targetChanges.get(k.targetId),se=K&&K.targetMismatches.get(k.targetId)!=null,ge=k.view.applyChanges(X,Y.isPrimaryClient,oe,se);return gE(Y,k.targetId,ge.au),ge.snapshot}(r,S,x,U);const u=await aE(r.localStore,e,!0),h=new v2(e,u.Qs),m=h.ru(u.documents),p=Fu.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),g=h.applyChanges(m,r.isPrimaryClient,p);gE(r,n,g.au);const b=new _2(e,n,h);return r.Tu.set(e,b),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),g.snapshot}async function w2(r,e,n){const s=De(r),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter(h=>!hd(h,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await gp(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&tg(s.remoteStore,o.targetId),_p(s,o.targetId)}).catch(nl)):(_p(s,o.targetId),await gp(s.localStore,o.targetId,!0))}async function x2(r,e){const n=De(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),tg(n.remoteStore,s.targetId))}async function R2(r,e,n){const s=M2(r);try{const o=await function(h,m){const p=De(h),g=dt.now(),b=m.reduce((U,q)=>U.add(q.key),ze());let S,x;return p.persistence.runTransaction("Locally write mutations","readwrite",U=>{let q=wi(),Y=ze();return p.Ns.getEntries(U,b).next(k=>{q=k,q.forEach((Z,K)=>{K.isValidDocument()||(Y=Y.add(Z))})}).next(()=>p.localDocuments.getOverlayedDocuments(U,q)).next(k=>{S=k;const Z=[];for(const K of m){const X=qC(K,S.get(K.key).overlayedDocument);X!=null&&Z.push(new zs(K.key,X,tT(X.value.mapValue),On.exists(!0)))}return p.mutationQueue.addMutationBatch(U,g,Z,m)}).next(k=>{x=k;const Z=k.applyToLocalDocumentSet(S,Y);return p.documentOverlayCache.saveOverlays(U,k.batchId,Z)})}).then(()=>({batchId:x.batchId,changes:dT(S)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(h,m,p){let g=h.Vu[h.currentUser.toKey()];g||(g=new yt(Le)),g=g.insert(m,p),h.Vu[h.currentUser.toKey()]=g}(s,o.batchId,n),await Gu(s,o.changes),await vd(s.remoteStore)}catch(o){const u=ag(o,"Failed to persist write");n.reject(u)}}async function KT(r,e){const n=De(r);try{const s=await zI(n.localStore,e);e.targetChanges.forEach((o,u)=>{const h=n.Au.get(u);h&&(We(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?We(h.hu,14607):o.removedDocuments.size>0&&(We(h.hu,42227),h.hu=!1))}),await Gu(n,s,e)}catch(s){await nl(s)}}function pE(r,e,n){const s=De(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach((u,h)=>{const m=h.view.va(e);m.snapshot&&o.push(m.snapshot)}),function(h,m){const p=De(h);p.onlineState=m;let g=!1;p.queries.forEach((b,S)=>{for(const x of S.Sa)x.va(m)&&(g=!0)}),g&&ug(p)}(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function C2(r,e,n){const s=De(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let h=new yt(be.comparator);h=h.insert(u,fn.newNoDocument(u,Ce.min()));const m=ze().add(u),p=new pd(Ce.min(),new Map,new yt(Le),h,m);await KT(s,p),s.du=s.du.remove(u),s.Au.delete(e),dg(s)}else await gp(s.localStore,e,!1).then(()=>_p(s,e,n)).catch(nl)}async function I2(r,e){const n=De(r),s=e.batch.batchId;try{const o=await LI(n.localStore,e);WT(n,s,null),QT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Gu(n,o)}catch(o){await nl(o)}}async function D2(r,e,n){const s=De(r);try{const o=await function(h,m){const p=De(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let b;return p.mutationQueue.lookupMutationBatch(g,m).next(S=>(We(S!==null,37113),b=S.keys(),p.mutationQueue.removeMutationBatch(g,S))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,b,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,b)).next(()=>p.localDocuments.getDocuments(g,b))})}(s.localStore,e);WT(s,e,n),QT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Gu(s,o)}catch(o){await nl(o)}}function QT(r,e){(r.mu.get(e)||[]).forEach(n=>{n.resolve()}),r.mu.delete(e)}function WT(r,e,n){const s=De(r);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function _p(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach(s=>{r.Ru.containsKey(s)||YT(r,s)})}function YT(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(tg(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),dg(r))}function gE(r,e,n){for(const s of n)s instanceof FT?(r.Ru.addReference(s.key,e),N2(r,s)):s instanceof HT?(me(hg,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||YT(r,s.key)):xe(19791,{wu:s})}function N2(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(me(hg,"New document in limbo: "+n),r.Eu.add(s),dg(r))}function dg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new be(ut.fromString(e)),s=r.fu.next();r.Au.set(s,new E2(n)),r.du=r.du.insert(n,s),jT(r.remoteStore,new Ts(Fr(cd(n.path)),s,"TargetPurposeLimboResolution",od.ce))}}async function Gu(r,e,n){const s=De(r),o=[],u=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach((m,p)=>{h.push(s.pu(p,e,n).then(g=>{if((g||n)&&s.isPrimaryClient){const b=g?!g.fromCache:n?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,b?"current":"not-current")}if(g){o.push(g);const b=Jp.As(p.targetId,g);u.push(b)}}))}),await Promise.all(h),s.Pu.H_(o),await async function(p,g){const b=De(p);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>re.forEach(g,x=>re.forEach(x.Es,U=>b.persistence.referenceDelegate.addReference(S,x.targetId,U)).next(()=>re.forEach(x.ds,U=>b.persistence.referenceDelegate.removeReference(S,x.targetId,U)))))}catch(S){if(!rl(S))throw S;me(eg,"Failed to update sequence numbers: "+S)}for(const S of g){const x=S.targetId;if(!S.fromCache){const U=b.Ms.get(x),q=U.snapshotVersion,Y=U.withLastLimboFreeSnapshotVersion(q);b.Ms=b.Ms.insert(x,Y)}}}(s.localStore,u))}async function O2(r,e){const n=De(r);if(!n.currentUser.isEqual(e)){me(hg,"User change. New user:",e.toKey());const s=await kT(n.localStore,e);n.currentUser=e,function(u,h){u.mu.forEach(m=>{m.forEach(p=>{p.reject(new he(ee.CANCELLED,h))})}),u.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Gu(n,s.Ls)}}function k2(r,e){const n=De(r),s=n.Au.get(e);if(s&&s.hu)return ze().add(s.key);{let o=ze();const u=n.Iu.get(e);if(!u)return o;for(const h of u){const m=n.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function XT(r){const e=De(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=KT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=k2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=C2.bind(null,e),e.Pu.H_=g2.bind(null,e.eventManager),e.Pu.yu=y2.bind(null,e.eventManager),e}function M2(r){const e=De(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=I2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=D2.bind(null,e),e}class Kh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return UI(this.persistence,new VI,e.initialUser,this.serializer)}Cu(e){return new OT(Zp.mi,this.serializer)}Du(e){return new GI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kh.provider={build:()=>new Kh};class V2 extends Kh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){We(this.persistence.referenceDelegate instanceof Hh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new EI(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new OT(s=>Hh.mi(s,n),this.serializer)}}class Ep{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>pE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=O2.bind(null,this.syncEngine),await f2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new p2}()}createDatastore(e){const n=gd(e.databaseInfo.databaseId),s=function(u){return new XI(u)}(e.databaseInfo);return function(u,h,m,p){return new e2(u,h,m,p)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,u,h,m){return new n2(s,o,u,h,m)}(this.localStore,this.datastore,e.asyncQueue,n=>pE(this.syncEngine,n,0),function(){return uE.v()?new uE:new KI}())}createSyncEngine(e,n){return function(o,u,h,m,p,g,b){const S=new b2(o,u,h,m,p,g);return b&&(S.gu=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const s=De(n);me(Pa,"RemoteStore shutting down."),s.Ea.add(5),await Hu(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ep.provider={build:()=>new Ep};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ai("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="FirestoreClient";class P2{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=dn.UNAUTHENTICATED,this.clientId=zp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async h=>{me(Vs,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(me(Vs,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=ag(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function qm(r,e){r.asyncQueue.verifyOperationInProgress(),me(Vs,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await kT(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function yE(r,e){r.asyncQueue.verifyOperationInProgress();const n=await j2(r);me(Vs,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener(s=>hE(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>hE(e.remoteStore,o)),r._onlineComponents=e}async function j2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){me(Vs,"Using user provided OfflineComponentProvider");try{await qm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;Qo("Error using user provided cache. Falling back to memory cache: "+n),await qm(r,new Kh)}}else me(Vs,"Using default OfflineComponentProvider"),await qm(r,new V2(void 0));return r._offlineComponents}async function $T(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(me(Vs,"Using user provided OnlineComponentProvider"),await yE(r,r._uninitializedComponentsProvider._online)):(me(Vs,"Using default OnlineComponentProvider"),await yE(r,new Ep))),r._onlineComponents}function U2(r){return $T(r).then(e=>e.syncEngine)}async function Qh(r){const e=await $T(r),n=e.eventManager;return n.onListen=T2.bind(null,e.syncEngine),n.onUnlisten=w2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=S2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=x2.bind(null,e.syncEngine),n}function L2(r,e,n={}){const s=new bi;return r.asyncQueue.enqueueAndForget(async()=>function(u,h,m,p,g){const b=new fg({next:x=>{b.Nu(),h.enqueueAndForget(()=>lg(u,S));const U=x.docs.has(m);!U&&x.fromCache?g.reject(new he(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&x.fromCache&&p&&p.source==="server"?g.reject(new he(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(x)},error:x=>g.reject(x)}),S=new cg(cd(m.path),b,{includeMetadataChanges:!0,qa:!0});return og(u,S)}(await Qh(r),r.asyncQueue,e,n,s)),s.promise}function z2(r,e,n={}){const s=new bi;return r.asyncQueue.enqueueAndForget(async()=>function(u,h,m,p,g){const b=new fg({next:x=>{b.Nu(),h.enqueueAndForget(()=>lg(u,S)),x.fromCache&&p.source==="server"?g.reject(new he(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(x)},error:x=>g.reject(x)}),S=new cg(m,b,{includeMetadataChanges:!0,qa:!0});return og(u,S)}(await Qh(r),r.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="firestore.googleapis.com",_E=!0;class EE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=JT,this.ssl=_E}else this.host=e.host,this.ssl=e.ssl??_E;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=NT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vI)throw new he(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZT(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _d{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new EE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new EE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new GR;switch(s.type){case"firstParty":return new YR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new he(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=vE.get(n);s&&(me("ComponentProvider","Removing Datastore"),vE.delete(n),s.terminate())}(this),Promise.resolve()}}function B2(r,e,n,s={}){r=Nn(r,_d);const o=Us(e),u=r._getSettings(),h={...u,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${n}`;o&&(Mp(`https://${m}`),Vp("Firestore",!0)),u.host!==JT&&u.host!==m&&Qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:m,ssl:o,emulatorOptions:s};if(!ka(p,h)&&(r._setSettings(p),s.mockUserToken)){let g,b;if(typeof s.mockUserToken=="string")g=s.mockUserToken,b=dn.MOCK_USER;else{g=Db(s.mockUserToken,r._app?.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new he(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new dn(S)}r._authCredentials=new KR(new Fb(g,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Bs(this.firestore,e,this._query)}}class bt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bt(this.firestore,e,this._key)}toJSON(){return{type:bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Bu(n,bt._jsonSchema))return new bt(e,s||null,new be(ut.fromString(n.referencePath)))}}bt._jsonSchemaVersion="firestore/documentReference/1.0",bt._jsonSchema={type:jt("string",bt._jsonSchemaVersion),referencePath:jt("string")};class Rs extends Bs{constructor(e,n,s){super(e,n,cd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new be(e))}withConverter(e){return new Rs(this.firestore,e,this._path)}}function Wn(r,e,...n){if(r=ct(r),Hb("collection","path",e),r instanceof _d){const s=ut.fromString(e,...n);return k0(s),new Rs(r,null,s)}{if(!(r instanceof bt||r instanceof Rs))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ut.fromString(e,...n));return k0(s),new Rs(r.firestore,null,s)}}function pn(r,e,...n){if(r=ct(r),arguments.length===1&&(e=zp.newId()),Hb("doc","path",e),r instanceof _d){const s=ut.fromString(e,...n);return O0(s),new bt(r,null,new be(s))}{if(!(r instanceof bt||r instanceof Rs))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ut.fromString(e,...n));return O0(s),new bt(r.firestore,r instanceof Rs?r.converter:null,new be(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="AsyncQueue";class TE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new VT(this,"async_queue_retry"),this._c=()=>{const s=Bm();s&&me(bE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Bm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Bm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new bi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!rl(e))throw e;me(bE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,Ai("INTERNAL UNHANDLED ERROR: ",SE(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=sg.createAndSchedule(this,e,n,s,u=>this.hc(u));return this.tc.push(o),o}uc(){this.nc&&xe(47125,{Pc:SE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function SE(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(r){return function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1}(r,["next","error","complete"])}class xi extends _d{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new TE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new TE(e),this._firestoreClient=void 0,await e}}}function q2(r,e){const n=typeof r=="object"?r:Up(),s=typeof r=="string"?r:Lh,o=sd(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=Rb("firestore");u&&B2(o,...u)}return o}function Ku(r){if(r._terminated)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||F2(r),r._firestoreClient}function F2(r){const e=r._freezeSettings(),n=function(o,u,h,m){return new dC(o,u,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,ZT(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new P2(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this._byteString=e}static fromBase64String(e){try{return new or(sn.fromBase64String(e))}catch(n){throw new he(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new or(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:or._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Bu(e,or._jsonSchema))return or.fromBase64String(e.bytes)}}or._jsonSchemaVersion="firestore/bytes/1.0",or._jsonSchema={type:jt("string",or._jsonSchemaVersion),bytes:jt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gr._jsonSchemaVersion}}static fromJSON(e){if(Bu(e,Gr._jsonSchema))return new Gr(e.latitude,e.longitude)}}Gr._jsonSchemaVersion="firestore/geoPoint/1.0",Gr._jsonSchema={type:jt("string",Gr._jsonSchemaVersion),latitude:jt("number"),longitude:jt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Kr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Bu(e,Kr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Kr(e.vectorValues);throw new he(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Kr._jsonSchemaVersion="firestore/vectorValue/1.0",Kr._jsonSchema={type:jt("string",Kr._jsonSchemaVersion),vectorValues:jt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=/^__.*__$/;class G2{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new zs(e,this.data,this.fieldMask,n,this.fieldTransforms):new qu(e,this.data,n,this.fieldTransforms)}}class eS{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new zs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function tS(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{Ac:r})}}class mg{constructor(e,n,s,o,u,h){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new mg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Wh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(tS(this.Ac)&&H2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class K2{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||gd(e)}Cc(e,n,s,o=!1){return new mg({Ac:e,methodName:n,Dc:s,path:rn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wu(r){const e=r._freezeSettings(),n=gd(r._databaseId);return new K2(r._databaseId,!!e.ignoreUndefinedProperties,n)}function pg(r,e,n,s,o,u={}){const h=r.Cc(u.merge||u.mergeFields?2:0,e,n,o);yg("Data must be an object, but it was:",h,s);const m=iS(s,h);let p,g;if(u.merge)p=new Gn(h.fieldMask),g=h.fieldTransforms;else if(u.mergeFields){const b=[];for(const S of u.mergeFields){const x=bp(e,S,n);if(!h.contains(x))throw new he(ee.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);aS(b,x)||b.push(x)}p=new Gn(b),g=h.fieldTransforms.filter(S=>p.covers(S.field))}else p=null,g=h.fieldTransforms;return new G2(new In(m),p,g)}class bd extends Ed{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bd}}class gg extends Ed{_toFieldTransform(e){return new UC(e.path,new Vu)}isEqual(e){return e instanceof gg}}function nS(r,e,n,s){const o=r.Cc(1,e,n);yg("Data must be an object, but it was:",o,s);const u=[],h=In.empty();Ls(s,(p,g)=>{const b=vg(e,p,n);g=ct(g);const S=o.yc(b);if(g instanceof bd)u.push(b);else{const x=Yu(g,S);x!=null&&(u.push(b),h.set(b,x))}});const m=new Gn(u);return new eS(h,m,o.fieldTransforms)}function rS(r,e,n,s,o,u){const h=r.Cc(1,e,n),m=[bp(e,s,n)],p=[o];if(u.length%2!=0)throw new he(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<u.length;x+=2)m.push(bp(e,u[x])),p.push(u[x+1]);const g=[],b=In.empty();for(let x=m.length-1;x>=0;--x)if(!aS(g,m[x])){const U=m[x];let q=p[x];q=ct(q);const Y=h.yc(U);if(q instanceof bd)g.push(U);else{const k=Yu(q,Y);k!=null&&(g.push(U),b.set(U,k))}}const S=new Gn(g);return new eS(b,S,h.fieldTransforms)}function Q2(r,e,n,s=!1){return Yu(n,r.Cc(s?4:3,e))}function Yu(r,e){if(sS(r=ct(r)))return yg("Unsupported field value:",e,r),iS(r,e);if(r instanceof Ed)return function(s,o){if(!tS(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,o){const u=[];let h=0;for(const m of s){let p=Yu(m,o.wc(h));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),h++}return{arrayValue:{values:u}}}(r,e)}return function(s,o){if((s=ct(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return VC(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=dt.fromDate(s);return{timestampValue:Fh(o.serializer,u)}}if(s instanceof dt){const u=new dt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Fh(o.serializer,u)}}if(s instanceof Gr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof or)return{bytesValue:AT(o.serializer,s._byteString)};if(s instanceof bt){const u=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Xp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Kr)return function(h,m){return{mapValue:{fields:{[Jb]:{stringValue:eT},[zh]:{arrayValue:{values:h.toArray().map(g=>{if(typeof g!="number")throw m.Sc("VectorValues must only contain numeric values.");return Kp(m.serializer,g)})}}}}}}(s,o);throw o.Sc(`Unsupported field value: ${ad(s)}`)}(r,e)}function iS(r,e){const n={};return Qb(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ls(r,(s,o)=>{const u=Yu(o,e.mc(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function sS(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof dt||r instanceof Gr||r instanceof or||r instanceof bt||r instanceof Ed||r instanceof Kr)}function yg(r,e,n){if(!sS(n)||!Gb(n)){const s=ad(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function bp(r,e,n){if((e=ct(e))instanceof Qu)return e._internalPath;if(typeof e=="string")return vg(r,e);throw Wh("Field path arguments must be of type string or ",r,!1,void 0,n)}const W2=new RegExp("[~\\*/\\[\\]]");function vg(r,e,n){if(e.search(W2)>=0)throw Wh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Qu(...e.split("."))._internalPath}catch{throw Wh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Wh(r,e,n,s,o){const u=s&&!s.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||h)&&(p+=" (found",u&&(p+=` in field ${s}`),h&&(p+=` in document ${o}`),p+=")"),new he(ee.INVALID_ARGUMENT,m+r+p)}function aS(r,e){return r.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Y2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Td("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Y2 extends oS{data(){return super.data()}}function Td(r,e){return typeof e=="string"?vg(r,e):e instanceof Qu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new he(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _g{}class uS extends _g{}function Ps(r,e,...n){let s=[];e instanceof _g&&s.push(e),s=s.concat(n),function(u){const h=u.filter(p=>p instanceof Eg).length,m=u.filter(p=>p instanceof Sd).length;if(h>1||h>0&&m>0)throw new he(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class Sd extends uS{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Sd(e,n,s)}_apply(e){const n=this._parse(e);return cS(e._query,n),new Bs(e.firestore,e.converter,cp(e._query,n))}_parse(e){const n=Wu(e.firestore);return function(u,h,m,p,g,b,S){let x;if(g.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new he(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){RE(S,b);const q=[];for(const Y of S)q.push(xE(p,u,Y));x={arrayValue:{values:q}}}else x=xE(p,u,S)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||RE(S,b),x=Q2(m,h,S,b==="in"||b==="not-in");return Pt.create(g,b,x)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Dn(r,e,n){const s=e,o=Td("where",r);return Sd._create(o,s,n)}class Eg extends _g{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Eg(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:br.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let h=o;const m=u.getFlattenedFilters();for(const p of m)cS(h,p),h=cp(h,p)}(e._query,n),new Bs(e.firestore,e.converter,cp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class bg extends uS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new bg(e,n)}_apply(e){const n=function(o,u,h){if(o.startAt!==null)throw new he(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mu(u,h)}(e._query,this._field,this._direction);return new Bs(e.firestore,e.converter,function(o,u){const h=o.explicitOrderBy.concat([u]);return new il(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,n))}}function wE(r,e="asc"){const n=e,s=Td("orderBy",r);return bg._create(s,n)}function xE(r,e,n){if(typeof(n=ct(n))=="string"){if(n==="")throw new he(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lT(e)&&n.indexOf("/")!==-1)throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(ut.fromString(n));if(!be.isDocumentKey(s))throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return B0(r,new be(s))}if(n instanceof bt)return B0(r,n._key);throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ad(n)}.`)}function RE(r,e){if(!Array.isArray(r)||r.length===0)throw new he(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cS(r,e){const n=function(o,u){for(const h of o)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new he(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class X2{convertValue(e,n="none"){switch(ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ls(e,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(e){const n=e.fields?.[zh].arrayValue?.values?.map(s=>Dt(s.doubleValue));return new Kr(n)}convertGeoPoint(e){return new Gr(Dt(e.latitude),Dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=ud(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Nu(e));default:return null}}convertTimestamp(e){const n=Ns(e);return new dt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ut.fromString(e);We(DT(s),9688,{name:e});const o=new Ou(s.get(1),s.get(3)),u=new be(s.popFirst(5));return o.isEqual(n)||Ai(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}class yu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Da extends oS{constructor(e,n,s,o,u,h){super(e,n,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ih(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Td("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Da._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Da._jsonSchemaVersion="firestore/documentSnapshot/1.0",Da._jsonSchema={type:jt("string",Da._jsonSchemaVersion),bundleSource:jt("string","DocumentSnapshot"),bundleName:jt("string"),bundle:jt("string")};class Ih extends Da{data(e={}){return super.data(e)}}class Na{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new yu(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Ih(this._firestore,this._userDataWriter,s.key,s,new yu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(m=>{const p=new Ih(o._firestore,o._userDataWriter,m.doc.key,m.doc,new yu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const p=new Ih(o._firestore,o._userDataWriter,m.doc.key,m.doc,new yu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,b=-1;return m.type!==0&&(g=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),b=h.indexOf(m.doc.key)),{type:$2(m.type),doc:p,oldIndex:g,newIndex:b}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Na._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach(u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $2(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(r){r=Nn(r,bt);const e=Nn(r.firestore,xi);return L2(Ku(e),r._key).then(n=>fS(e,r,n))}Na._jsonSchemaVersion="firestore/querySnapshot/1.0",Na._jsonSchema={type:jt("string",Na._jsonSchemaVersion),bundleSource:jt("string","QuerySnapshot"),bundleName:jt("string"),bundle:jt("string")};class Sg extends X2{constructor(e){super(),this.firestore=e}convertBytes(e){return new or(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}}function js(r){r=Nn(r,Bs);const e=Nn(r.firestore,xi),n=Ku(e),s=new Sg(e);return lS(r._query),z2(n,r._query).then(o=>new Na(e,s,r,o))}function Z2(r,e,n){r=Nn(r,bt);const s=Nn(r.firestore,xi),o=Tg(r.converter,e,n);return Ad(s,[pg(Wu(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,On.none())])}function Ri(r,e,n,...s){r=Nn(r,bt);const o=Nn(r.firestore,xi),u=Wu(o);let h;return h=typeof(e=ct(e))=="string"||e instanceof Qu?rS(u,"updateDoc",r._key,e,n,s):nS(u,"updateDoc",r._key,e),Ad(o,[h.toMutation(r._key,On.exists(!0))])}function Tp(r,e){const n=Nn(r.firestore,xi),s=pn(r),o=Tg(r.converter,e);return Ad(n,[pg(Wu(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,On.exists(!1))]).then(()=>s)}function dS(r,...e){r=ct(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||AE(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(AE(e[s])){const p=e[s];e[s]=p.next?.bind(p),e[s+1]=p.error?.bind(p),e[s+2]=p.complete?.bind(p)}let u,h,m;if(r instanceof bt)h=Nn(r.firestore,xi),m=cd(r._key.path),u={next:p=>{e[s]&&e[s](fS(h,r,p))},error:e[s+1],complete:e[s+2]};else{const p=Nn(r,Bs);h=Nn(p.firestore,xi),m=p._query;const g=new Sg(h);u={next:b=>{e[s]&&e[s](new Na(h,g,p,b))},error:e[s+1],complete:e[s+2]},lS(r._query)}return function(g,b,S,x){const U=new fg(x),q=new cg(b,U,S);return g.asyncQueue.enqueueAndForget(async()=>og(await Qh(g),q)),()=>{U.Nu(),g.asyncQueue.enqueueAndForget(async()=>lg(await Qh(g),q))}}(Ku(h),m,o,u)}function Ad(r,e){return function(s,o){const u=new bi;return s.asyncQueue.enqueueAndForget(async()=>R2(await U2(s),o,u)),u.promise}(Ku(r),e)}function fS(r,e,n){const s=n.docs.get(e._key),o=new Sg(r);return new Da(r,o,e._key,s,new yu(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Wu(e)}set(e,n,s){this._verifyNotCommitted();const o=Fm(e,this._firestore),u=Tg(o.converter,n,s),h=pg(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,s);return this._mutations.push(h.toMutation(o._key,On.none())),this}update(e,n,s,...o){this._verifyNotCommitted();const u=Fm(e,this._firestore);let h;return h=typeof(n=ct(n))=="string"||n instanceof Qu?rS(this._dataReader,"WriteBatch.update",u._key,n,s,o):nS(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(h.toMutation(u._key,On.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Fm(e,this._firestore);return this._mutations=this._mutations.concat(new Qp(n._key,On.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new he(ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Fm(r,e){if((r=ct(r)).firestore!==e)throw new he(ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function Cs(){return new gg("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(r){return Ku(r=Nn(r,xi)),new J2(r,e=>Ad(r,e))}(function(e,n=!0){(function(o){tl=o})(Fa),Ma(new Is("firestore",(s,{instanceIdentifier:o,options:u})=>{const h=s.getProvider("app").getImmediate(),m=new xi(new QR(s.getProvider("auth-internal")),new XR(h,s.getProvider("app-check-internal")),function(g,b){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new he(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ou(g.options.projectId,b)}(h,o),h);return u={useFetchStreams:n,...u},m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),qr(C0,I0,e),qr(C0,I0,"esm2020")})();var eD="firebase",tD="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qr(eD,tD,"app");function mS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nD=mS,pS=new Lu("auth","Firebase",mS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh=new Pp("@firebase/auth");function rD(r,...e){Yh.logLevel<=Ue.WARN&&Yh.warn(`Auth (${Fa}): ${r}`,...e)}function Dh(r,...e){Yh.logLevel<=Ue.ERROR&&Yh.error(`Auth (${Fa}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(r,...e){throw wg(r,...e)}function Qr(r,...e){return wg(r,...e)}function gS(r,e,n){const s={...nD(),[e]:n};return new Lu("auth","Firebase",s).create(e,{appName:r.name})}function Ti(r){return gS(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wg(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return pS.create(r,...e)}function we(r,e,...n){if(!r)throw wg(e,...n)}function _i(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Dh(e),new Error(e)}function Ci(r,e){r||_i(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(){return typeof self<"u"&&self.location?.href||""}function iD(){return CE()==="http:"||CE()==="https:"}function CE(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iD()||Ax()||"connection"in navigator)?navigator.onLine:!0}function aD(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ci(n>e,"Short delay should be less than long delay!"),this.isMobile=bx()||wx()}get(){return sD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(r,e){Ci(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],uD=new Xu(3e4,6e4);function qs(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Ni(r,e,n,s,o={}){return vS(r,o,async()=>{let u={},h={};s&&(e==="GET"?h=s:u={body:JSON.stringify(s)});const m=zu({key:r.config.apiKey,...h}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g={method:e,headers:p,...u};return Sx()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&Us(r.emulatorConfig.host)&&(g.credentials="include"),yS.fetch()(await _S(r,r.config.apiHost,n,m),g)})}async function vS(r,e,n){r._canInitEmulator=!1;const s={...oD,...e};try{const o=new hD(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw Eh(r,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const m=u.ok?h.errorMessage:h.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eh(r,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw Eh(r,"email-already-in-use",h);if(p==="USER_DISABLED")throw Eh(r,"user-disabled",h);const b=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw gS(r,b,g);Tr(r,b)}}catch(o){if(o instanceof Xr)throw o;Tr(r,"network-request-failed",{message:String(o)})}}async function $u(r,e,n,s,o={}){const u=await Ni(r,e,n,s,o);return"mfaPendingCredential"in u&&Tr(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function _S(r,e,n,s){const o=`${e}${n}?${s}`,u=r,h=u.config.emulator?xg(r.config,o):`${r.config.apiScheme}://${o}`;return lD.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function cD(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Qr(this.auth,"network-request-failed")),uD.get())})}}function Eh(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Qr(r,e,s);return o.customData._tokenResponse=n,o}function IE(r){return r!==void 0&&r.enterprise!==void 0}class dD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return cD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function fD(r,e){return Ni(r,"GET","/v2/recaptchaConfig",qs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mD(r,e){return Ni(r,"POST","/v1/accounts:delete",e)}async function Xh(r,e){return Ni(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pD(r,e=!1){const n=ct(r),s=await n.getIdToken(e),o=Rg(s);we(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u?.sign_in_provider;return{claims:o,token:s,authTime:Su(Hm(o.auth_time)),issuedAtTime:Su(Hm(o.iat)),expirationTime:Su(Hm(o.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Hm(r){return Number(r)*1e3}function Rg(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Dh("JWT malformed, contained fewer than 3 sections"),null;try{const o=wb(n);return o?JSON.parse(o):(Dh("Failed to decode base64 JWT payload"),null)}catch(o){return Dh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function DE(r){const e=Rg(r);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Xr&&gD(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function gD({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Su(this.lastLoginAt),this.creationTime=Su(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $h(r){const e=r.auth,n=await r.getIdToken(),s=await Jo(r,Xh(e,{idToken:n}));we(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const u=o.providerUserInfo?.length?ES(o.providerUserInfo):[],h=_D(r.providerData,u),m=r.isAnonymous,p=!(r.email&&o.passwordHash)&&!h?.length,g=m?p:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Ap(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(r,b)}async function vD(r){const e=ct(r);await $h(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _D(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function ES(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ED(r,e){const n=await vS(r,{},async()=>{const s=zu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,h=await _S(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return r.emulatorConfig&&Us(r.emulatorConfig.host)&&(p.credentials="include"),yS.fetch()(h,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function bD(r,e){return Ni(r,"POST","/v2/accounts:revokeToken",qs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):DE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){we(e.length!==0,"internal-error");const n=DE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await ED(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,h=new Fo;return s&&(we(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(we(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(we(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fo,this.toJSON())}_performRefresh(){return _i("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(r,e){we(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Er{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new yD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ap(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Jo(this,this.stsTokenManager.getToken(this.auth,e));return we(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return pD(this,e)}reload(){return vD(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Er({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await $h(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hn(this.auth.app))return Promise.reject(Ti(this.auth));const e=await this.getIdToken();return await Jo(this,mD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,h=n.photoURL??void 0,m=n.tenantId??void 0,p=n._redirectEventId??void 0,g=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:S,emailVerified:x,isAnonymous:U,providerData:q,stsTokenManager:Y}=n;we(S&&Y,e,"internal-error");const k=Fo.fromJSON(this.name,Y);we(typeof S=="string",e,"internal-error"),fs(s,e.name),fs(o,e.name),we(typeof x=="boolean",e,"internal-error"),we(typeof U=="boolean",e,"internal-error"),fs(u,e.name),fs(h,e.name),fs(m,e.name),fs(p,e.name),fs(g,e.name),fs(b,e.name);const Z=new Er({uid:S,auth:e,email:o,emailVerified:x,displayName:s,isAnonymous:U,photoURL:h,phoneNumber:u,tenantId:m,stsTokenManager:k,createdAt:g,lastLoginAt:b});return q&&Array.isArray(q)&&(Z.providerData=q.map(K=>({...K}))),p&&(Z._redirectEventId=p),Z}static async _fromIdTokenResponse(e,n,s=!1){const o=new Fo;o.updateFromServerResponse(n);const u=new Er({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await $h(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];we(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?ES(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!u?.length,m=new Fo;m.updateFromIdToken(s);const p=new Er({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Ap(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=new Map;function Ei(r){Ci(r instanceof Function,"Expected a class definition");let e=NE.get(r);return e?(Ci(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,NE.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bS.type="NONE";const OE=bS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(r,e,n){return`firebase:${r}:${e}:${n}`}class Ho{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Nh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Nh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Xh(this.auth,{idToken:e}).catch(()=>{});return n?Er._fromGetAccountInfoResponse(this.auth,n,e):null}return Er._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ho(Ei(OE),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||Ei(OE);const h=Nh(s,e.config.apiKey,e.name);let m=null;for(const g of n)try{const b=await g._get(h);if(b){let S;if(typeof b=="string"){const x=await Xh(e,{idToken:b}).catch(()=>{});if(!x)break;S=await Er._fromGetAccountInfoResponse(e,x,b)}else S=Er._fromJSON(e,b);g!==u&&(m=S),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Ho(u,e,s):(u=p[0],m&&await u._set(h,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(h)}catch{}})),new Ho(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RS(e))return"Blackberry";if(CS(e))return"Webos";if(SS(e))return"Safari";if((e.includes("chrome/")||AS(e))&&!e.includes("edge/"))return"Chrome";if(xS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function TS(r=mn()){return/firefox\//i.test(r)}function SS(r=mn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AS(r=mn()){return/crios\//i.test(r)}function wS(r=mn()){return/iemobile/i.test(r)}function xS(r=mn()){return/android/i.test(r)}function RS(r=mn()){return/blackberry/i.test(r)}function CS(r=mn()){return/webos/i.test(r)}function Cg(r=mn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function TD(r=mn()){return Cg(r)&&!!window.navigator?.standalone}function SD(){return xx()&&document.documentMode===10}function IS(r=mn()){return Cg(r)||xS(r)||CS(r)||RS(r)||/windows phone/i.test(r)||wS(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(r,e=[]){let n;switch(r){case"Browser":n=kE(mn());break;case"Worker":n=`${kE(mn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fa}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((h,m)=>{try{const p=e(u);h(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wD(r,e={}){return Ni(r,"GET","/v2/passwordPolicy",qs(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=6;class RD{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??xD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ME(this),this.idTokenSubscription=new ME(this),this.beforeStateQueue=new AD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ei(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ho.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Xh(this,{idToken:e}),s=await Er._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Hn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===h)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await $h(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=aD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hn(this.app))return Promise.reject(Ti(this));const n=e?ct(e):null;return n&&we(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hn(this.app)?Promise.reject(Ti(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hn(this.app)?Promise.reject(Ti(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ei(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wD(this),n=new RD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Lu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await bD(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ei(e)||this._popupRedirectResolver;we(n,this,"argument-error"),this.redirectPersistenceManager=await Ho.create(this,[Ei(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(m,this,"internal-error"),m.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{h=!0,p()}}else{const p=e.addObserver(n);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&rD(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ka(r){return ct(r)}class ME{constructor(e){this.auth=e,this.observer=null,this.addObserver=Mx(n=>this.observer=n)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ID(r){wd=r}function NS(r){return wd.loadJS(r)}function DD(){return wd.recaptchaEnterpriseScript}function ND(){return wd.gapiScript}function OD(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class kD{constructor(){this.enterprise=new MD}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class MD{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const VD="recaptcha-enterprise",OS="NO_RECAPTCHA";class PD{constructor(e){this.type=VD,this.auth=Ka(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,m)=>{fD(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new dD(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,h(g.siteKey)}}).catch(p=>{m(p)})})}function o(u,h,m){const p=window.grecaptcha;IE(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(g=>{h(g)}).catch(()=>{h(OS)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new kD().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{s(this.auth).then(m=>{if(!n&&IE(window.grecaptcha))o(m,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=DD();p.length!==0&&(p+=m),NS(p).then(()=>{o(m,u,h)}).catch(g=>{h(g)})}}).catch(m=>{h(m)})})}}async function VE(r,e,n,s=!1,o=!1){const u=new PD(r);let h;if(o)h=OS;else try{h=await u.verify(n)}catch{h=await u.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:h}):Object.assign(m,{captchaResponse:h}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function wp(r,e,n,s,o){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await VE(r,e,n,n==="getOobCode");return s(r,u)}else return s(r,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await VE(r,e,n,n==="getOobCode");return s(r,h)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(r,e){const n=sd(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ka(u,e??{}))return o;Tr(o,"already-initialized")}return n.initialize({options:e})}function UD(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Ei);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function LD(r,e,n){const s=Ka(r);we(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=kS(e),{host:h,port:m}=zD(e),p=m===null?"":`:${m}`,g={url:`${u}//${h}${p}/`},b=Object.freeze({host:h,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){we(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),we(ka(g,s.config.emulator)&&ka(b,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=b,s.settings.appVerificationDisabledForTesting=!0,Us(h)?(Mp(`${u}//${h}${p}`),Vp("Auth",!0)):BD()}function kS(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function zD(r){const e=kS(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:PE(s.substr(u.length+1))}}else{const[u,h]=s.split(":");return{host:u,port:PE(h)}}}function PE(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function BD(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return _i("not implemented")}_getIdTokenResponse(e){return _i("not implemented")}_linkToIdToken(e,n){return _i("not implemented")}_getReauthenticationResolver(e){return _i("not implemented")}}async function qD(r,e){return Ni(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FD(r,e){return $u(r,"POST","/v1/accounts:signInWithPassword",qs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HD(r,e){return $u(r,"POST","/v1/accounts:signInWithEmailLink",qs(r,e))}async function GD(r,e){return $u(r,"POST","/v1/accounts:signInWithEmailLink",qs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu extends Ig{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Uu(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Uu(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wp(e,n,"signInWithPassword",FD);case"emailLink":return HD(e,{email:this._email,oobCode:this._password});default:Tr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wp(e,s,"signUpPassword",qD);case"emailLink":return GD(e,{idToken:n,email:this._email,oobCode:this._password});default:Tr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Go(r,e){return $u(r,"POST","/v1/accounts:signInWithIdp",qs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD="http://localhost";class ja extends Ig{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ja(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Tr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const h=new ja(s,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return Go(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Go(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Go(e,n)}buildRequest(){const e={requestUri:KD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=zu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WD(r){const e=du(fu(r)).link,n=e?du(fu(e)).deep_link_id:null,s=du(fu(r)).deep_link_id;return(s?du(fu(s)).link:null)||s||n||e||r}class Dg{constructor(e){const n=du(fu(e)),s=n.apiKey??null,o=n.oobCode??null,u=QD(n.mode??null);we(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=WD(e);try{return new Dg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(){this.providerId=al.PROVIDER_ID}static credential(e,n){return Uu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Dg.parseLink(n);return we(s,"argument-error"),Uu._fromEmailAndCode(e,s.code,s.tenantId)}}al.PROVIDER_ID="password";al.EMAIL_PASSWORD_SIGN_IN_METHOD="password";al.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu extends MS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends Zu{constructor(){super("facebook.com")}static credential(e){return ja._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gs.credential(e.oauthAccessToken)}catch{return null}}}gs.FACEBOOK_SIGN_IN_METHOD="facebook.com";gs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends Zu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ja._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return ys.credential(n,s)}catch{return null}}}ys.GOOGLE_SIGN_IN_METHOD="google.com";ys.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends Zu{constructor(){super("github.com")}static credential(e){return ja._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vs.credential(e.oauthAccessToken)}catch{return null}}}vs.GITHUB_SIGN_IN_METHOD="github.com";vs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends Zu{constructor(){super("twitter.com")}static credential(e,n){return ja._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return _s.credential(n,s)}catch{return null}}}_s.TWITTER_SIGN_IN_METHOD="twitter.com";_s.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YD(r,e){return $u(r,"POST","/v1/accounts:signUp",qs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await Er._fromIdTokenResponse(e,s,o),h=jE(s);return new Ua({user:u,providerId:h,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=jE(s);return new Ua({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function jE(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh extends Xr{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Zh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Zh(e,n,s,o)}}function VS(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Zh._fromErrorAndOperation(r,u,e,s):u})}async function XD(r,e,n=!1){const s=await Jo(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Ua._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $D(r,e,n=!1){const{auth:s}=r;if(Hn(s.app))return Promise.reject(Ti(s));const o="reauthenticate";try{const u=await Jo(r,VS(s,o,e,r),n);we(u.idToken,s,"internal-error");const h=Rg(u.idToken);we(h,s,"internal-error");const{sub:m}=h;return we(r.uid===m,s,"user-mismatch"),Ua._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Tr(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PS(r,e,n=!1){if(Hn(r.app))return Promise.reject(Ti(r));const s="signIn",o=await VS(r,s,e),u=await Ua._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}async function ZD(r,e){return PS(Ka(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jS(r){const e=Ka(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function JD(r,e,n){if(Hn(r.app))return Promise.reject(Ti(r));const s=Ka(r),h=await wp(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YD).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&jS(r),p}),m=await Ua._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(m.user),m}function eN(r,e,n){return Hn(r.app)?Promise.reject(Ti(r)):ZD(ct(r),al.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&jS(r),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(r,e){return Ni(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nN(r,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=ct(r),u={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},h=await Jo(s,tN(s.auth,u));s.displayName=h.displayName||null,s.photoURL=h.photoUrl||null;const m=s.providerData.find(({providerId:p})=>p==="password");m&&(m.displayName=s.displayName,m.photoURL=s.photoURL),await s._updateTokensIfNecessary(h)}function rN(r,e,n,s){return ct(r).onIdTokenChanged(e,n,s)}function iN(r,e,n){return ct(r).beforeAuthStateChanged(e,n)}function sN(r,e,n,s){return ct(r).onAuthStateChanged(e,n,s)}function UE(r){return ct(r).signOut()}const Jh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Jh,"1"),this.storage.removeItem(Jh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=1e3,oN=10;class LS extends US{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,m,p)=>{this.notifyListeners(h,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!n&&this.localCache[s]===h||this.notifyListeners(s,h)},u=this.storage.getItem(s);SD()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,oN):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},aN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}LS.type="LOCAL";const lN=LS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS extends US{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}zS.type="SESSION";const BS=zS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new xd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,h=this.handlersMap[o];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(h).map(async g=>g(n.origin,u)),p=await uN(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((m,p)=>{const g=Ng("",20);o.port1.start();const b=setTimeout(()=>{p(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(S){const x=S;if(x.data.eventId===g)switch(x.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(x.data.response);break;default:clearTimeout(b),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(){return window}function hN(r){Wr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(){return typeof Wr().WorkerGlobalScope<"u"&&typeof Wr().importScripts=="function"}async function dN(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fN(){return navigator?.serviceWorker?.controller||null}function mN(){return qS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="firebaseLocalStorageDb",pN=1,ed="firebaseLocalStorage",HS="fbase_key";class Ju{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Rd(r,e){return r.transaction([ed],e?"readwrite":"readonly").objectStore(ed)}function gN(){const r=indexedDB.deleteDatabase(FS);return new Ju(r).toPromise()}function xp(){const r=indexedDB.open(FS,pN);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(ed,{keyPath:HS})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(ed)?e(s):(s.close(),await gN(),e(await xp()))})})}async function LE(r,e,n){const s=Rd(r,!0).put({[HS]:e,value:n});return new Ju(s).toPromise()}async function yN(r,e){const n=Rd(r,!1).get(e),s=await new Ju(n).toPromise();return s===void 0?null:s.value}function zE(r,e){const n=Rd(r,!0).delete(e);return new Ju(n).toPromise()}const vN=800,_N=3;class GS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>_N)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xd._getInstance(mN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await dN(),!this.activeServiceWorker)return;this.sender=new cN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xp();return await LE(e,Jh,"1"),await zE(e,Jh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>LE(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>yN(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>zE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Rd(o,!1).getAll();return new Ju(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GS.type="LOCAL";const EN=GS;new Xu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(r,e){return e?Ei(e):(we(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og extends Ig{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Go(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Go(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Go(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function TN(r){return PS(r.auth,new Og(r),r.bypassAuthState)}function SN(r){const{auth:e,user:n}=r;return we(n,e,"internal-error"),$D(n,new Og(r),r.bypassAuthState)}async function AN(r){const{auth:e,user:n}=r;return we(n,e,"internal-error"),XD(n,new Og(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:h,type:m}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return TN;case"linkViaPopup":case"linkViaRedirect":return AN;case"reauthViaPopup":case"reauthViaRedirect":return SN;default:Tr(this.auth,"internal-error")}}resolve(e){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN=new Xu(2e3,1e4);class Bo extends KS{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Bo.currentPopupAction&&Bo.currentPopupAction.cancel(),Bo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){Ci(this.filter.length===1,"Popup operations only handle one event");const e=Ng();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Qr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Qr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wN.get())};e()}}Bo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN="pendingRedirect",Oh=new Map;class RN extends KS{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Oh.get(this.auth._key());if(!e){try{const s=await CN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Oh.set(this.auth._key(),e)}return this.bypassAuthState||Oh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function CN(r,e){const n=NN(e),s=DN(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function IN(r,e){Oh.set(r._key(),e)}function DN(r){return Ei(r._redirectPersistence)}function NN(r){return Nh(xN,r.config.apiKey,r.name)}async function ON(r,e,n=!1){if(Hn(r.app))return Promise.reject(Ti(r));const s=Ka(r),o=bN(s,e),h=await new RN(s,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=10*60*1e3;class MN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!QS(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Qr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kN&&this.cachedEventUids.clear(),this.cachedEventUids.has(BE(e))}saveEventToCache(e){this.cachedEventUids.add(BE(e)),this.lastProcessedEventTime=Date.now()}}function BE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function QS({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function VN(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QS(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PN(r,e={}){return Ni(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UN=/^https?/;async function LN(r){if(r.config.emulator)return;const{authorizedDomains:e}=await PN(r);for(const n of e)try{if(zN(n))return}catch{}Tr(r,"unauthorized-domain")}function zN(r){const e=Sp(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===s}if(!UN.test(n))return!1;if(jN.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=new Xu(3e4,6e4);function qE(){const r=Wr().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function qN(r){return new Promise((e,n)=>{function s(){qE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qE(),n(Qr(r,"network-request-failed"))},timeout:BN.get()})}if(Wr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Wr().gapi?.load)s();else{const o=OD("iframefcb");return Wr()[o]=()=>{gapi.load?s():n(Qr(r,"network-request-failed"))},NS(`${ND()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw kh=null,e})}let kh=null;function FN(r){return kh=kh||qN(r),kh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=new Xu(5e3,15e3),GN="__/auth/iframe",KN="emulator/auth/iframe",QN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YN(r){const e=r.config;we(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?xg(e,KN):`https://${r.config.authDomain}/${GN}`,s={apiKey:e.apiKey,appName:r.name,v:Fa},o=WN.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${zu(s).slice(1)}`}async function XN(r){const e=await FN(r),n=Wr().gapi;return we(n,r,"internal-error"),e.open({where:document.body,url:YN(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QN,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const h=Qr(r,"network-request-failed"),m=Wr().setTimeout(()=>{u(h)},HN.get());function p(){Wr().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZN=500,JN=600,eO="_blank",tO="http://localhost";class FE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nO(r,e,n,s=ZN,o=JN){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p={...$N,width:s.toString(),height:o.toString(),top:u,left:h},g=mn().toLowerCase();n&&(m=AS(g)?eO:n),TS(g)&&(e=e||tO,p.scrollbars="yes");const b=Object.entries(p).reduce((x,[U,q])=>`${x}${U}=${q},`,"");if(TD(g)&&m!=="_self")return rO(e||"",m),new FE(null);const S=window.open(e||"",m,b);we(S,r,"popup-blocked");try{S.focus()}catch{}return new FE(S)}function rO(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO="__/auth/handler",sO="emulator/auth/handler",aO=encodeURIComponent("fac");async function HE(r,e,n,s,o,u){we(r.config.authDomain,r,"auth-domain-config-required"),we(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:Fa,eventId:o};if(e instanceof MS){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",kx(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,S]of Object.entries({}))h[b]=S}if(e instanceof Zu){const b=e.getScopes().filter(S=>S!=="");b.length>0&&(h.scopes=b.join(","))}r.tenantId&&(h.tid=r.tenantId);const m=h;for(const b of Object.keys(m))m[b]===void 0&&delete m[b];const p=await r._getAppCheckToken(),g=p?`#${aO}=${encodeURIComponent(p)}`:"";return`${oO(r)}?${zu(m).slice(1)}${g}`}function oO({config:r}){return r.emulator?xg(r,sO):`https://${r.authDomain}/${iO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="webStorageSupport";class lO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BS,this._completeRedirectFn=ON,this._overrideRedirectResult=IN}async _openPopup(e,n,s,o){Ci(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await HE(e,n,s,Sp(),o);return nO(e,u,Ng())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await HE(e,n,s,Sp(),o);return hN(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Ci(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await XN(e),s=new MN(e);return n.register("authEvent",o=>(we(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gm,{type:Gm},o=>{const u=o?.[0]?.[Gm];u!==void 0&&n(!!u),Tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=LN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return IS()||SS()||Cg()}}const uO=lO;var GE="@firebase/auth",KE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dO(r){Ma(new Is("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=s.options;we(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:h,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DS(r)},g=new CD(s,o,u,p);return UD(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ma(new Is("auth-internal",e=>{const n=Ka(e.getProvider("auth").getImmediate());return(s=>new cO(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qr(GE,KE,hO(r)),qr(GE,KE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=5*60,mO=Ib("authIdTokenMaxAge")||fO;let QE=null;const pO=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>mO)return;const o=n?.token;QE!==o&&(QE=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function gO(r=Up()){const e=sd(r,"auth");if(e.isInitialized())return e.getImmediate();const n=jD(r,{popupRedirectResolver:uO,persistence:[EN,lN,BS]}),s=Ib("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const h=pO(u.toString());iN(n,h,()=>h(n.currentUser)),rN(n,m=>h(m))}}const o=xb("auth");return o&&LD(n,`http://${o}`),n}function yO(){return document.getElementsByTagName("head")?.[0]??document}ID({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=Qr("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",yO().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dO("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="firebasestorage.googleapis.com",YS="storageBucket",vO=2*60*1e3,_O=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St extends Xr{constructor(e,n,s=0){super(Km(e),`Firebase Storage: ${n} (${Km(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,St.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Km(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Tt;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Tt||(Tt={}));function Km(r){return"storage/"+r}function kg(){const r="An unknown error occurred, please check the error payload for server response.";return new St(Tt.UNKNOWN,r)}function EO(r){return new St(Tt.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function bO(r){return new St(Tt.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function TO(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new St(Tt.UNAUTHENTICATED,r)}function SO(){return new St(Tt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function AO(r){return new St(Tt.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function wO(){return new St(Tt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function xO(){return new St(Tt.CANCELED,"User canceled the upload/download.")}function RO(r){return new St(Tt.INVALID_URL,"Invalid URL '"+r+"'.")}function CO(r){return new St(Tt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function IO(){return new St(Tt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+YS+"' property when initializing the app?")}function DO(){return new St(Tt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function NO(){return new St(Tt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function OO(r){return new St(Tt.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Rp(r){return new St(Tt.INVALID_ARGUMENT,r)}function XS(){return new St(Tt.APP_DELETED,"The Firebase app was deleted.")}function kO(r){return new St(Tt.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Au(r,e){return new St(Tt.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function hu(r){throw new St(Tt.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Kn.makeFromUrl(e,n)}catch{return new Kn(e,"")}if(s.path==="")return s;throw CO(e)}static makeFromUrl(e,n){let s=null;const o="([A-Za-z0-9.\\-_]+)";function u(oe){oe.path.charAt(oe.path.length-1)==="/"&&(oe.path_=oe.path_.slice(0,-1))}const h="(/(.*))?$",m=new RegExp("^gs://"+o+h,"i"),p={bucket:1,path:3};function g(oe){oe.path_=decodeURIComponent(oe.path)}const b="v[A-Za-z0-9_]+",S=n.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",U=new RegExp(`^https?://${S}/${b}/b/${o}/o${x}`,"i"),q={bucket:1,path:3},Y=n===WS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",Z=new RegExp(`^https?://${Y}/${o}/${k}`,"i"),X=[{regex:m,indices:p,postModify:u},{regex:U,indices:q,postModify:g},{regex:Z,indices:{bucket:1,path:2},postModify:g}];for(let oe=0;oe<X.length;oe++){const se=X[oe],ge=se.regex.exec(e);if(ge){const R=ge[se.indices.bucket];let w=ge[se.indices.path];w||(w=""),s=new Kn(R,w),se.postModify(s);break}}if(s==null)throw RO(e);return s}}class MO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(r,e,n){let s=1,o=null,u=null,h=!1,m=0;function p(){return m===2}let g=!1;function b(...k){g||(g=!0,e.apply(null,k))}function S(k){o=setTimeout(()=>{o=null,r(U,p())},k)}function x(){u&&clearTimeout(u)}function U(k,...Z){if(g){x();return}if(k){x(),b.call(null,k,...Z);return}if(p()||h){x(),b.call(null,k,...Z);return}s<64&&(s*=2);let X;m===1?(m=2,X=0):X=(s+Math.random())*1e3,S(X)}let q=!1;function Y(k){q||(q=!0,x(),!g&&(o!==null?(k||(m=2),clearTimeout(o),S(0)):k||(m=1)))}return S(0),u=setTimeout(()=>{h=!0,Y(!0)},n),Y}function PO(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(r){return r!==void 0}function UO(r){return typeof r=="object"&&!Array.isArray(r)}function Mg(r){return typeof r=="string"||r instanceof String}function WE(r){return Vg()&&r instanceof Blob}function Vg(){return typeof Blob<"u"}function YE(r,e,n,s){if(s<e)throw Rp(`Invalid value for '${r}'. Expected ${e} or greater.`);if(s>n)throw Rp(`Invalid value for '${r}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(r,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${r}`}function $S(r){const e=encodeURIComponent;let n="?";for(const s in r)if(r.hasOwnProperty(s)){const o=e(s)+"="+e(r[s]);n=n+o+"&"}return n=n.slice(0,-1),n}var Oa;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Oa||(Oa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(r,e){const n=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,u=e.indexOf(r)!==-1;return n||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e,n,s,o,u,h,m,p,g,b,S,x=!0,U=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=h,this.callback_=m,this.errorCallback_=p,this.timeout_=g,this.progressCallback_=b,this.connectionFactory_=S,this.retry=x,this.isUsingEmulator=U,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((q,Y)=>{this.resolve_=q,this.reject_=Y,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new bh(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const h=m=>{const p=m.loaded,g=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,g)};this.progressCallback_!==null&&u.addUploadProgressListener(h),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(h),this.pendingConnection_=null;const m=u.getErrorCode()===Oa.NO_ERROR,p=u.getStatus();if(!m||LO(p,this.additionalRetryCodes_)&&this.retry){const b=u.getErrorCode()===Oa.ABORT;s(!1,new bh(!1,null,b));return}const g=this.successCodes_.indexOf(p)!==-1;s(!0,new bh(g,u))})},n=(s,o)=>{const u=this.resolve_,h=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(m,m.getResponse());jO(p)?u(p):u()}catch(p){h(p)}else if(m!==null){const p=kg();p.serverResponse=m.getErrorText(),this.errorCallback_?h(this.errorCallback_(m,p)):h(p)}else if(o.canceled){const p=this.appDelete_?XS():xO();h(p)}else{const p=wO();h(p)}};this.canceled_?n(!1,new bh(!1,null,!0)):this.backoffId_=VO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&PO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class bh{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function BO(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function qO(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function FO(r,e){e&&(r["X-Firebase-GMPID"]=e)}function HO(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function GO(r,e,n,s,o,u,h=!0,m=!1){const p=$S(r.urlParams),g=r.url+p,b=Object.assign({},r.headers);return FO(b,e),BO(b,n),qO(b,u),HO(b,s),new zO(g,r.method,b,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,h,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function QO(...r){const e=KO();if(e!==void 0){const n=new e;for(let s=0;s<r.length;s++)n.append(r[s]);return n.getBlob()}else{if(Vg())return new Blob(r);throw new St(Tt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function WO(r,e,n){return r.webkitSlice?r.webkitSlice(e,n):r.mozSlice?r.mozSlice(e,n):r.slice?r.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(r){if(typeof atob>"u")throw OO("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Qm{constructor(e,n){this.data=e,this.contentType=n||null}}function XO(r,e){switch(r){case Br.RAW:return new Qm(ZS(e));case Br.BASE64:case Br.BASE64URL:return new Qm(JS(r,e));case Br.DATA_URL:return new Qm(ZO(e),JO(e))}throw kg()}function ZS(r){const e=[];for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<r.length-1&&(r.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const u=s,h=r.charCodeAt(++n);s=65536|(u&1023)<<10|h&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function $O(r){let e;try{e=decodeURIComponent(r)}catch{throw Au(Br.DATA_URL,"Malformed data URL.")}return ZS(e)}function JS(r,e){switch(r){case Br.BASE64:{const o=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(o||u)throw Au(r,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Br.BASE64URL:{const o=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(o||u)throw Au(r,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=YO(e)}catch(o){throw o.message.includes("polyfill")?o:Au(r,"Invalid character found")}const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}class e1{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Au(Br.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=ek(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function ZO(r){const e=new e1(r);return e.base64?JS(Br.BASE64,e.rest):$O(e.rest)}function JO(r){return new e1(r).contentType}function ek(r,e){return r.length>=e.length?r.substring(r.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,n){let s=0,o="";WE(e)?(this.data_=e,s=e.size,o=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,n){if(WE(this.data_)){const s=this.data_,o=WO(s,e,n);return o===null?null:new Es(o)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new Es(s,!0)}}static getBlob(...e){if(Vg()){const n=e.map(s=>s instanceof Es?s.data_:s);return new Es(QO.apply(null,n))}else{const n=e.map(h=>Mg(h)?XO(Br.RAW,h).data:h.data_);let s=0;n.forEach(h=>{s+=h.byteLength});const o=new Uint8Array(s);let u=0;return n.forEach(h=>{for(let m=0;m<h.length;m++)o[u++]=h[m]}),new Es(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(r){let e;try{e=JSON.parse(r)}catch{return null}return UO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function nk(r,e){const n=e.split("/").filter(s=>s.length>0).join("/");return r.length===0?n:r+"/"+n}function n1(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(r,e){return e}class bn{constructor(e,n,s,o){this.server=e,this.local=n||e,this.writable=!!s,this.xform=o||rk}}let Th=null;function ik(r){return!Mg(r)||r.length<2?r:n1(r)}function r1(){if(Th)return Th;const r=[];r.push(new bn("bucket")),r.push(new bn("generation")),r.push(new bn("metageneration")),r.push(new bn("name","fullPath",!0));function e(u,h){return ik(h)}const n=new bn("name");n.xform=e,r.push(n);function s(u,h){return h!==void 0?Number(h):h}const o=new bn("size");return o.xform=s,r.push(o),r.push(new bn("timeCreated")),r.push(new bn("updated")),r.push(new bn("md5Hash",null,!0)),r.push(new bn("cacheControl",null,!0)),r.push(new bn("contentDisposition",null,!0)),r.push(new bn("contentEncoding",null,!0)),r.push(new bn("contentLanguage",null,!0)),r.push(new bn("contentType",null,!0)),r.push(new bn("metadata","customMetadata",!0)),Th=r,Th}function sk(r,e){function n(){const s=r.bucket,o=r.fullPath,u=new Kn(s,o);return e._makeStorageReference(u)}Object.defineProperty(r,"ref",{get:n})}function ak(r,e,n){const s={};s.type="file";const o=n.length;for(let u=0;u<o;u++){const h=n[u];s[h.local]=h.xform(s,e[h.server])}return sk(s,r),s}function i1(r,e,n){const s=t1(e);return s===null?null:ak(r,s,n)}function ok(r,e,n,s){const o=t1(e);if(o===null||!Mg(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const h=encodeURIComponent;return u.split(",").map(g=>{const b=r.bucket,S=r.fullPath,x="/b/"+h(b)+"/o/"+h(S),U=Pg(x,n,s),q=$S({alt:"media",token:g});return U+q})[0]}function lk(r,e){const n={},s=e.length;for(let o=0;o<s;o++){const u=e[o];u.writable&&(n[u.server]=r[u.local])}return JSON.stringify(n)}class s1{constructor(e,n,s,o){this.url=e,this.method=n,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(r){if(!r)throw kg()}function uk(r,e){function n(s,o){const u=i1(r,o,e);return a1(u!==null),u}return n}function ck(r,e){function n(s,o){const u=i1(r,o,e);return a1(u!==null),ok(u,o,r.host,r._protocol)}return n}function o1(r){function e(n,s){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=SO():o=TO():n.getStatus()===402?o=bO(r.bucket):n.getStatus()===403?o=AO(r.path):o=s,o.status=n.getStatus(),o.serverResponse=s.serverResponse,o}return e}function hk(r){const e=o1(r);function n(s,o){let u=e(s,o);return s.getStatus()===404&&(u=EO(r.path)),u.serverResponse=o.serverResponse,u}return n}function dk(r,e,n){const s=e.fullServerUrl(),o=Pg(s,r.host,r._protocol),u="GET",h=r.maxOperationRetryTime,m=new s1(o,u,ck(r,n),h);return m.errorHandler=hk(e),m}function fk(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}function mk(r,e,n){const s=Object.assign({},n);return s.fullPath=r.path,s.size=e.size(),s.contentType||(s.contentType=fk(null,e)),s}function pk(r,e,n,s,o){const u=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function m(){let X="";for(let oe=0;oe<2;oe++)X=X+Math.random().toString().slice(2);return X}const p=m();h["Content-Type"]="multipart/related; boundary="+p;const g=mk(e,s,o),b=lk(g,n),S="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+b+`\r
--`+p+`\r
Content-Type: `+g.contentType+`\r
\r
`,x=`\r
--`+p+"--",U=Es.getBlob(S,s,x);if(U===null)throw DO();const q={name:g.fullPath},Y=Pg(u,r.host,r._protocol),k="POST",Z=r.maxUploadRetryTime,K=new s1(Y,k,uk(r,n),Z);return K.urlParams=q,K.headers=h,K.body=U.uploadData(),K.errorHandler=o1(e),K}class gk{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Oa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Oa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Oa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,o,u){if(this.sent_)throw hu("cannot .send() more than once");if(Us(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),u!==void 0)for(const h in u)u.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,u[h].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw hu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw hu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw hu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw hu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class yk extends gk{initXhr(){this.xhr_.responseType="text"}}function l1(){return new yk}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n){this._service=e,n instanceof Kn?this._location=n:this._location=Kn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new La(e,n)}get root(){const e=new Kn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return n1(this._location.path)}get storage(){return this._service}get parent(){const e=tk(this._location.path);if(e===null)return null;const n=new Kn(this._location.bucket,e);return new La(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw kO(e)}}function vk(r,e,n){r._throwIfRoot("uploadBytes");const s=pk(r.storage,r._location,r1(),new Es(e,!0),n);return r.storage.makeRequestWithTokens(s,l1).then(o=>({metadata:o,ref:r}))}function _k(r){r._throwIfRoot("getDownloadURL");const e=dk(r.storage,r._location,r1());return r.storage.makeRequestWithTokens(e,l1).then(n=>{if(n===null)throw NO();return n})}function Ek(r,e){const n=nk(r._location.path,e),s=new Kn(r._location.bucket,n);return new La(r.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(r){return/^[A-Za-z]+:\/\//.test(r)}function Tk(r,e){return new La(r,e)}function u1(r,e){if(r instanceof jg){const n=r;if(n._bucket==null)throw IO();const s=new La(n,n._bucket);return e!=null?u1(s,e):s}else return e!==void 0?Ek(r,e):r}function Sk(r,e){if(e&&bk(e)){if(r instanceof jg)return Tk(r,e);throw Rp("To use ref(service, url), the first argument must be a Storage instance.")}else return u1(r,e)}function XE(r,e){const n=e?.[YS];return n==null?null:Kn.makeFromBucketSpec(n,r)}function Ak(r,e,n,s={}){r.host=`${e}:${n}`;const o=Us(e);o&&(Mp(`https://${r.host}/b`),Vp("Storage",!0)),r._isUsingEmulator=!0,r._protocol=o?"https":"http";const{mockUserToken:u}=s;u&&(r._overrideAuthToken=typeof u=="string"?u:Db(u,r.app.options.projectId))}class jg{constructor(e,n,s,o,u,h=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=h,this._bucket=null,this._host=WS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=vO,this._maxUploadRetryTime=_O,this._requests=new Set,o!=null?this._bucket=Kn.makeFromBucketSpec(o,this._host):this._bucket=XE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Kn.makeFromBucketSpec(this._url,e):this._bucket=XE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){YE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){YE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new La(this,e)}_makeRequest(e,n,s,o,u=!0){if(this._deleted)return new MO(XS());{const h=GO(e,this._appId,s,o,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,n){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,o).getPromise()}}const $E="@firebase/storage",ZE="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="storage";function h1(r,e,n){return r=ct(r),vk(r,e,n)}function d1(r){return r=ct(r),_k(r)}function f1(r,e){return r=ct(r),Sk(r,e)}function wk(r=Up(),e){r=ct(r);const s=sd(r,c1).getImmediate({identifier:e}),o=Rb("storage");return o&&xk(s,...o),s}function xk(r,e,n,s={}){Ak(r,e,n,s)}function Rk(r,{instanceIdentifier:e}){const n=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new jg(n,s,o,e,Fa)}function Ck(){Ma(new Is(c1,Rk,"PUBLIC").setMultipleInstances(!0)),qr($E,ZE,""),qr($E,ZE,"esm2020")}Ck();const Ik={apiKey:"AIzaSyD-7jepN9PAOze4SNQJ4pgYThvfwNylMpE",authDomain:"velas-santamarta.firebaseapp.com",projectId:"velas-santamarta",storageBucket:"velas-santamarta.firebasestorage.app",messagingSenderId:"643690285491",appId:"1:643690285491:web:3bc9600444cf0972ace3c6",measurementId:"G-VW13682S10"},Ug=kb(Ik),wu=gO(Ug),Qe=q2(Ug),m1=wk(Ug);function Qn(r,...e){const[n,s]=j.useState([]),[o,u]=j.useState(!0);return j.useEffect(()=>{const h=e.length?Ps(Wn(Qe,r),...e):Wn(Qe,r),m=dS(h,p=>{s(p.docs.map(g=>({id:g.id,...g.data()}))),u(!1)});return()=>m()},[r]),{data:n,loading:o}}const Dk=8,Nk=3e3,Ok=5e3,kk=()=>v.jsxs("div",{className:"hero-carousel-container",style:{minHeight:"380px",padding:"24px"},children:[v.jsx("div",{className:"hero-skeleton-block",style:{height:"210px",borderRadius:"8px",marginBottom:"16px"}}),v.jsx("div",{className:"hero-skeleton-block",style:{height:"14px",width:"64px",borderRadius:"20px",marginBottom:"12px"}}),v.jsx("div",{className:"hero-skeleton-block",style:{height:"18px",width:"72%",borderRadius:"4px",marginBottom:"8px"}}),v.jsx("div",{className:"hero-skeleton-block",style:{height:"16px",width:"38%",borderRadius:"4px"}})]}),Mk=()=>v.jsxs("div",{className:"hero-carousel-container",style:{minHeight:"340px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"16px"},children:[v.jsx("span",{style:{fontSize:"5rem",filter:"drop-shadow(0 8px 20px rgba(201,107,43,0.6))"},children:""}),v.jsx("p",{style:{color:"rgba(255,255,255,0.45)",fontSize:"11px",fontWeight:600,letterSpacing:"0.14em",textTransform:"uppercase"},children:"Prximamente nuevos productos"})]}),Vk=()=>{const{data:r,loading:e}=Qn("products",Dn("active","==",!0)),n=j.useMemo(()=>[...r].sort((Y,k)=>(k.createdAt?.toMillis?.()??0)-(Y.createdAt?.toMillis?.()??0)).slice(0,Dk),[r]),[s,o]=j.useState(0),[u,h]=j.useState(!1),m=j.useRef(!1),p=j.useRef(!1),g=j.useRef(null),b=qa();j.useEffect(()=>{n.length>0&&o(Y=>Math.min(Y,n.length-1))},[n.length]),j.useEffect(()=>{if(n.length<2)return;const Y=setInterval(()=>{p.current||m.current||(m.current=!0,h(!0),setTimeout(()=>{o(k=>(k+1)%n.length),h(!1),m.current=!1},200))},Nk);return()=>{clearInterval(Y),g.current&&clearTimeout(g.current)}},[n.length]);const S=Y=>{m.current||(p.current=!0,g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{p.current=!1},Ok),m.current=!0,h(!0),setTimeout(()=>{o(Y),h(!1),m.current=!1},200))};if(e)return v.jsx(kk,{});if(n.length===0)return v.jsx(Mk,{});const x=n[Math.min(s,n.length-1)],U=x.images?.[0]??x.imageUrl??"",q=n.length;return v.jsxs("div",{className:"hero-carousel-container",children:[v.jsxs("div",{onClick:()=>b(`/producto/${x.id}`),style:{cursor:"pointer",opacity:u?0:1,transition:"opacity 0.2s ease",padding:"20px 20px 12px"},children:[v.jsx("div",{style:{width:"100%",aspectRatio:"4/3",borderRadius:"8px",overflow:"hidden",backgroundColor:"rgba(255,255,255,0.04)",marginBottom:"14px"},children:U?v.jsx("img",{src:U,alt:x.name,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}}):v.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"3.5rem"},children:""})}),v.jsx("span",{style:{backgroundColor:"var(--vsm-brand)",color:"#fff",fontSize:"10px",fontWeight:700,letterSpacing:"0.1em",textTransform:"uppercase",padding:"3px 10px",borderRadius:"20px",display:"inline-block"},children:x.categoryName}),v.jsx("p",{style:{color:"#fff",fontWeight:700,fontSize:"15px",marginTop:"10px",marginBottom:"4px",lineHeight:1.3},children:x.name}),v.jsxs("p",{style:{color:"var(--vsm-brand)",fontWeight:700,fontSize:"16px"},children:["$",x.price.toLocaleString("es-CO")]})]}),q>1&&v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"hero-carousel-arrow hero-carousel-arrow-left",onClick:Y=>{Y.stopPropagation(),S((s-1+q)%q)},"aria-label":"Producto anterior",children:""}),v.jsx("button",{className:"hero-carousel-arrow hero-carousel-arrow-right",onClick:Y=>{Y.stopPropagation(),S((s+1)%q)},"aria-label":"Siguiente producto",children:""})]}),q>1&&v.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"6px",padding:"8px 20px 16px"},children:n.map((Y,k)=>v.jsx("button",{onClick:Z=>{Z.stopPropagation(),S(k)},"aria-label":`Producto ${k+1}`,style:{width:"7px",height:"7px",borderRadius:"50%",border:"none",backgroundColor:k===s?"var(--vsm-brand)":"rgba(255,255,255,0.3)",cursor:"pointer",padding:0,transition:"background-color 0.2s ease"}},k))})]})},Pk=()=>v.jsx("section",{style:{background:"linear-gradient(135deg, #1A0800 0%, #4A1E05 45%, #8B4513 80%, #C96B2B 100%)",minHeight:"520px",position:"relative"},className:"flex items-center",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-8 w-full grid grid-cols-1 lg:grid-cols-2 gap-12 items-center py-20",children:[v.jsxs("div",{children:[v.jsx("span",{style:{color:"#AEFF00",fontSize:"11px",fontWeight:700,letterSpacing:"0.15em",textTransform:"uppercase"},className:"block mb-5",children:" Ritual de bienestar"}),v.jsxs("h1",{style:{color:"#fff",fontSize:"clamp(2rem, 5vw, 3.5rem)",fontWeight:800,lineHeight:1.1,marginBottom:"1.25rem"},children:["Tu nuevo ritual diario",v.jsx("br",{}),"de bienestar "]}),v.jsx("p",{style:{color:"rgba(255,255,255,0.75)",fontSize:"15px",lineHeight:1.75,marginBottom:"2rem",maxWidth:"440px"},children:"Velas artesanales elaboradas a mano con cera natural en Santa Marta, Colombia. Cada aroma cuenta una historia del Caribe."}),v.jsxs("div",{className:"flex flex-wrap gap-4",children:[v.jsx(Sr,{to:"/juguetes",style:{backgroundColor:"var(--vsm-brand)",color:"#fff",borderRadius:"5px",padding:"12px 28px",fontSize:"13px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.07em",textDecoration:"none"},className:"hover:opacity-90 transition-opacity",children:"Comprar ahora"}),v.jsx("a",{href:"#nosotros",style:{color:"#fff",border:"1px solid rgba(255,255,255,0.5)",borderRadius:"5px",padding:"12px 28px",fontSize:"13px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.07em"},className:"hover:bg-white hover:text-black transition-all",children:"Ver coleccin"})]})]}),v.jsx(Vk,{})]})}),jk=[{icon:"",title:"Velas Aromticas",desc:"Elaboradas con cera de soya 100% natural y aceites esenciales puros. Cada vela llena tu espacio con aromas nicos inspirados en el Caribe colombiano: coco, mar, flores tropicales y especias."},{icon:"",title:"Velas Decorativas",desc:"Diseos artesanales nicos que combinan belleza y aroma. Cada pieza es moldeada y terminada a mano, convirtindose en un objeto decorativo que tambin perfuma tu hogar."}],Uk=()=>v.jsx("section",{style:{backgroundColor:"var(--vsm-white)"},className:"py-20 px-8",children:v.jsxs("div",{className:"max-w-7xl mx-auto",children:[v.jsx("h2",{style:{fontWeight:800,fontSize:"1.6rem",color:"var(--vsm-black)",marginBottom:"2rem"},children:"Conoce nuestras Velas y otros productos"}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:jk.map(r=>v.jsxs("div",{style:{backgroundColor:"#FBF6F0",borderRadius:"8px",padding:"2rem",borderLeft:"3px solid var(--vsm-brand)"},children:[v.jsx("div",{style:{fontSize:"3.5rem",marginBottom:"1rem"},children:r.icon}),v.jsx("h3",{style:{fontWeight:700,fontSize:"1.1rem",marginBottom:"0.75rem",color:"var(--vsm-black)"},children:r.title}),v.jsx("p",{style:{color:"var(--vsm-gray-mid)",lineHeight:1.8,fontSize:"14px",marginBottom:"1.25rem"},children:r.desc}),v.jsx(Sr,{to:"/juguetes",style:{color:"var(--vsm-brand)",fontWeight:700,fontSize:"13px",textDecoration:"underline",textUnderlineOffset:"4px"},children:"Ver productos "})]},r.title))})]})}),Lg=r=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}).format(r),p1=({product:r})=>{const[e,n]=j.useState(!1),s=r.images?.length?r.images:r.imageUrl?[r.imageUrl]:[],o=s.length>=2;return v.jsxs("div",{style:{backgroundColor:"var(--vsm-white)",borderRadius:"6px",overflow:"hidden",boxShadow:"var(--vsm-shadow)"},children:[v.jsxs("div",{style:{position:"relative",aspectRatio:"1",backgroundColor:"var(--vsm-bg-warm)",overflow:"hidden",cursor:o?"pointer":"default"},onMouseEnter:()=>o&&n(!0),onMouseLeave:()=>n(!1),children:[r.stock===0&&v.jsx("span",{style:{position:"absolute",top:"8px",left:"8px",zIndex:2,backgroundColor:"var(--vsm-error)",color:"#fff",fontSize:"10px",fontWeight:700,padding:"3px 8px",textTransform:"uppercase",letterSpacing:"0.08em",borderRadius:"2px"},children:"Agotado"}),s.length>0?v.jsxs(v.Fragment,{children:[v.jsx("img",{src:s[0],alt:r.name,style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover",opacity:e?0:1,transition:"opacity 0.4s ease"}}),s[1]&&v.jsx("img",{src:s[1],alt:r.name,style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover",opacity:e?1:0,transition:"opacity 0.4s ease"}})]}):v.jsx("div",{className:"w-full h-full flex items-center justify-center text-6xl",children:""})]}),v.jsxs("div",{style:{padding:"1rem"},children:[v.jsx("h3",{style:{fontSize:"13px",fontWeight:600,marginBottom:"4px",color:"var(--vsm-black)"},children:r.name}),v.jsx("p",{style:{fontSize:"10px",color:"var(--vsm-gray-mid)",marginBottom:"8px",lineHeight:1.5,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:r.description}),v.jsx("p",{style:{fontSize:"16px",fontWeight:800,color:"var(--vsm-black)",marginBottom:"12px"},children:Lg(r.price)}),v.jsx(Sr,{to:`/producto/${r.id}`,style:{display:"block",textAlign:"center",backgroundColor:r.stock===0?"var(--vsm-gray-mid)":"var(--vsm-brand)",color:"#fff",fontSize:"11px",fontWeight:700,padding:"10px",textTransform:"uppercase",letterSpacing:"0.07em",borderRadius:"4px",textDecoration:"none",pointerEvents:r.stock===0?"none":"auto"},className:"hover:opacity-90 transition-opacity",children:r.stock===0?"Agotado":"Ver producto"})]})]})},Lk=()=>v.jsxs("div",{style:{backgroundColor:"var(--vsm-white)",borderRadius:"6px",overflow:"hidden",boxShadow:"var(--vsm-shadow)"},children:[v.jsx("div",{style:{aspectRatio:"1",backgroundColor:"var(--vsm-gray)",animation:"pulse 1.5s ease-in-out infinite"}}),v.jsxs("div",{style:{padding:"1rem",display:"flex",flexDirection:"column",gap:"8px"},children:[v.jsx("div",{style:{height:"13px",backgroundColor:"var(--vsm-gray)",borderRadius:"3px",width:"70%",animation:"pulse 1.5s ease-in-out infinite"}}),v.jsx("div",{style:{height:"10px",backgroundColor:"var(--vsm-gray)",borderRadius:"3px",width:"90%",animation:"pulse 1.5s ease-in-out infinite"}}),v.jsx("div",{style:{height:"20px",backgroundColor:"var(--vsm-gray)",borderRadius:"3px",width:"45%",animation:"pulse 1.5s ease-in-out infinite"}})]})]}),zk=()=>{const{data:r,loading:e}=Qn("products"),n=r.filter(s=>s.active!==!1);return v.jsx("section",{style:{backgroundColor:"var(--vsm-bg)"},className:"py-20 px-8",children:v.jsxs("div",{className:"max-w-7xl mx-auto",children:[v.jsx("h2",{style:{fontWeight:800,fontSize:"1.6rem",color:"var(--vsm-black)",marginBottom:"1.75rem"},children:"Nuestros Productos"}),e?v.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-5",children:Array.from({length:6}).map((s,o)=>v.jsx(Lk,{},o))}):n.length===0?v.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"14px"},children:"No hay productos disponibles an."}):v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-5",children:n.map(s=>v.jsx(p1,{product:s},s.id))}),v.jsx("div",{style:{textAlign:"center",marginTop:"2.5rem"},children:v.jsx(Sr,{to:"/juguetes",style:{color:"var(--vsm-brand)",fontWeight:700,fontSize:"13px",textDecoration:"underline",textUnderlineOffset:"4px"},children:"Ver todos los productos "})})]})]})})},Bk=[{icon:"",name:"Velas de Soya"},{icon:"",name:"Velas de Cera de Abeja"},{icon:"",name:"Velas Decorativas"},{icon:"",name:"Velas Aromticas"}],qk=()=>v.jsx("section",{style:{backgroundColor:"var(--vsm-white)"},className:"py-20 px-8",children:v.jsxs("div",{className:"max-w-7xl mx-auto",children:[v.jsx("h2",{style:{fontWeight:800,fontSize:"1.6rem",textAlign:"center",color:"var(--vsm-black)",marginBottom:"1rem"},children:"Tipos de Velas Artesanales"}),v.jsx("p",{style:{color:"var(--vsm-gray-mid)",textAlign:"center",maxWidth:"650px",margin:"0 auto 2.5rem",lineHeight:1.8,fontSize:"14px"},children:"Ofrecemos ms de 6 tipos de velas artesanales con variedad de diseos y ms de 10 aromas exclusivos para crear la experiencia perfecta en tu hogar o como regalo especial."}),v.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-5",children:Bk.map(r=>v.jsxs(Sr,{to:"/juguetes",style:{backgroundColor:"var(--vsm-white)",borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 12px rgba(0,0,0,0.08)",textDecoration:"none"},className:"hover:shadow-md transition-shadow",children:[v.jsx("div",{style:{backgroundColor:"#FBF6F0",aspectRatio:"1",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"3rem"},children:r.icon}),v.jsx("p",{style:{fontWeight:700,fontSize:"13px",padding:"0.75rem",textAlign:"center",color:"var(--vsm-black)"},children:r.name})]},r.name))})]})}),Fk=[{stars:5,text:'"Las velas ms hermosas que he tenido. El aroma a coco me transporta directamente al Caribe. Las recomiendo 100%!"',author:"Mara Martnez, Bogot"},{stars:5,text:'"Compr el pack de lavanda y sndalo para regalar y quedaron fascinados. La presentacin es preciosa y el aroma dura muchsimo."',author:"Andrs Gmez, Medelln"},{stars:5,text:'"Calidad artesanal increble. Se nota que estn hechas con amor y buenos materiales. Ya ped mi tercer pedido."',author:"Luca Herrera, Cali"}],Hk=()=>v.jsx("section",{id:"nosotros",style:{backgroundColor:"var(--vsm-bg)"},className:"py-20 px-8",children:v.jsxs("div",{className:"max-w-7xl mx-auto",children:[v.jsx("h2",{style:{fontWeight:800,fontSize:"1.6rem",textAlign:"center",color:"var(--vsm-black)",marginBottom:"2.5rem"},children:"Lo que dicen nuestros clientes"}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Fk.map((r,e)=>v.jsxs("div",{style:{backgroundColor:"var(--vsm-white)",borderRadius:"var(--vsm-radius)",padding:"1.5rem",boxShadow:"var(--vsm-shadow-sm)"},children:[v.jsx("div",{style:{fontSize:"14px",color:"#F5A623",marginBottom:"0.75rem"},children:"".repeat(r.stars)}),v.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"14px",lineHeight:1.75,marginBottom:"1rem",fontStyle:"italic"},children:r.text}),v.jsxs("p",{style:{fontWeight:700,fontSize:"12px",color:"var(--vsm-black)"},children:[" ",r.author]})]},e))})]})}),Gk=()=>v.jsxs("section",{style:{backgroundColor:"var(--vsm-brand)",color:"#fff"},className:"py-16 px-8 text-center",children:[v.jsx("h2",{style:{fontWeight:800,fontSize:"1.75rem",marginBottom:"0.5rem"},children:"Regstrate y obtn 10% OFF"}),v.jsx("p",{style:{fontSize:"15px",opacity:.85,marginBottom:"2rem"},children:"en tu primera compra"}),v.jsxs("form",{className:"flex flex-col sm:flex-row gap-3 max-w-md mx-auto",onSubmit:r=>r.preventDefault(),children:[v.jsx("input",{type:"email",placeholder:"tu@correo.com",style:{flex:1,padding:"12px 16px",borderRadius:"5px",border:"none",fontSize:"14px",outline:"none",color:"var(--vsm-black)"}}),v.jsx("button",{type:"submit",style:{backgroundColor:"#111",color:"#fff",padding:"12px 24px",borderRadius:"5px",border:"none",fontSize:"12px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.07em",cursor:"pointer",whiteSpace:"nowrap"},className:"hover:opacity-90 transition-opacity",children:"Obtener mi 10% OFF"})]})]}),Kk=()=>v.jsxs("div",{className:"w-full",children:[v.jsx(Pk,{}),v.jsx(Uk,{}),v.jsx(zk,{}),v.jsx(qk,{}),v.jsx(Hk,{}),v.jsx(Gk,{})]}),Yt={width:"100%",padding:"10px 14px",border:"1px solid var(--vsm-gray)",borderRadius:"var(--vsm-radius-sm)",fontSize:"13px",fontFamily:"inherit",outline:"none",color:"var(--vsm-black)",backgroundColor:"var(--vsm-white)",transition:"border-color 0.2s"},Vt={fontSize:"13px",fontWeight:700,color:"var(--vsm-black)",display:"block",marginBottom:"6px"},Cd={backgroundColor:"var(--vsm-error-bg)",border:"1px solid var(--vsm-error-border)",borderRadius:"var(--vsm-radius-sm)",padding:"10px 14px"},Id={color:"var(--vsm-error)",fontSize:"13px",fontWeight:600},Qk={backgroundColor:"var(--vsm-success-bg)",border:"1px solid var(--vsm-success-border)",borderRadius:"var(--vsm-radius-sm)",padding:"10px 14px"},Wk={color:"var(--vsm-success)",fontSize:"13px",fontWeight:600},g1={backgroundColor:"var(--vsm-brand)",color:"#fff",border:"none",borderRadius:"var(--vsm-radius-sm)",padding:"12px",width:"100%",fontSize:"13px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.07em",cursor:"pointer",transition:"opacity 0.2s",fontFamily:"inherit"},ot=r=>{r.currentTarget.style.borderColor="var(--vsm-brand)"},lt=r=>{r.currentTarget.style.borderColor="var(--vsm-gray)"},Yk=()=>{const[r,e]=_r.useState(""),[n,s]=_r.useState(""),[o,u]=_r.useState(null),[h,m]=_r.useState(!1),p=qa(),g=async b=>{b.preventDefault(),m(!0);try{await eN(wu,r,n),u(null),p("/Admin")}catch{u("Correo o contrasea incorrectos. Por favor verifica tus datos."),s("")}finally{m(!1)}};return v.jsx("div",{style:{minHeight:"calc(100vh - 96px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},className:"w-full",children:v.jsxs("div",{style:{backgroundColor:"var(--vsm-white)",borderRadius:"var(--vsm-radius)",boxShadow:"var(--vsm-shadow-card)",padding:"2.5rem",width:"100%",maxWidth:"420px"},children:[v.jsx("h2",{style:{fontWeight:800,fontSize:"1.6rem",color:"var(--vsm-black)",marginBottom:"0.4rem"},children:"Acceder"}),v.jsxs("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"13px",marginBottom:"2rem"},children:["No tienes cuenta?"," ",v.jsx(Sr,{to:"/Register",style:{color:"var(--vsm-brand)",fontWeight:700,textDecoration:"underline",textUnderlineOffset:"3px"},children:"Regstrate aqu"})]}),v.jsxs("form",{onSubmit:g,noValidate:!0,children:[v.jsxs("div",{style:{marginBottom:"1.25rem"},children:[v.jsxs("label",{htmlFor:"email",style:Vt,children:["Nombre de usuario o correo electrnico"," ",v.jsx("span",{style:{color:"var(--vsm-error)"},children:"*"})]}),v.jsx("input",{type:"email",id:"email",value:r,onChange:b=>e(b.target.value),onFocus:ot,onBlur:lt,required:!0,style:Yt})]}),v.jsxs("div",{style:{marginBottom:"1.25rem"},children:[v.jsxs("label",{htmlFor:"password",style:Vt,children:["Contrasea ",v.jsx("span",{style:{color:"var(--vsm-error)"},children:"*"})]}),v.jsx("input",{type:"password",id:"password",value:n,onChange:b=>s(b.target.value),onFocus:ot,onBlur:lt,required:!0,style:Yt})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"1.5rem"},children:[v.jsx("input",{type:"checkbox",id:"remember",style:{width:"15px",height:"15px",accentColor:"var(--vsm-brand)",cursor:"pointer"}}),v.jsx("label",{htmlFor:"remember",style:{fontSize:"13px",color:"var(--vsm-gray-mid)",cursor:"pointer"},children:"Recurdame"})]}),o&&v.jsx("div",{style:{...Cd,marginBottom:"1rem"},children:v.jsx("p",{style:Id,children:o})}),v.jsx("button",{type:"submit",disabled:h,style:{...g1,cursor:h?"not-allowed":"pointer",opacity:h?.75:1},children:h?"Verificando...":"Acceso"}),v.jsx("p",{style:{textAlign:"center",marginTop:"1rem"},children:v.jsx("a",{href:"#",style:{color:"var(--vsm-gray-mid)",fontSize:"12px",textDecoration:"underline",textUnderlineOffset:"3px"},onClick:b=>b.preventDefault(),children:"Olvidaste la contrasea?"})})]})]})})},Xk=()=>{const[r,e]=_r.useState(""),[n,s]=_r.useState(""),[o,u]=_r.useState(""),[h,m]=_r.useState(""),[p,g]=_r.useState(null),[b,S]=_r.useState(!1),x=qa(),U=async q=>{if(q.preventDefault(),r.trim().length===0){g("Ingresa tu nombre completo.");return}if(o!==h){g("Las contraseas no coinciden.");return}if(o.length<6){g("La contrasea debe tener al menos 6 caracteres.");return}S(!0);try{const Y=await JD(wu,n,o);await nN(Y.user,{displayName:r.trim()}),g(null),x("/Login")}catch(Y){Y.code==="auth/email-already-in-use"?g("Este correo ya est registrado. Intenta iniciar sesin."):g("Error al crear la cuenta. Por favor intenta de nuevo."),u(""),m("")}finally{S(!1)}};return v.jsx("div",{style:{minHeight:"calc(100vh - 96px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},className:"w-full",children:v.jsxs("div",{style:{backgroundColor:"var(--vsm-white)",borderRadius:"var(--vsm-radius)",boxShadow:"var(--vsm-shadow-card)",padding:"2.5rem",width:"100%",maxWidth:"420px"},children:[v.jsx("h2",{style:{fontWeight:800,fontSize:"1.6rem",color:"var(--vsm-black)",marginBottom:"0.4rem"},children:"Crear cuenta"}),v.jsxs("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"13px",marginBottom:"2rem"},children:["Ya tienes cuenta?"," ",v.jsx(Sr,{to:"/Login",style:{color:"var(--vsm-brand)",fontWeight:700,textDecoration:"underline",textUnderlineOffset:"3px"},children:"Inicia sesin aqu"})]}),v.jsxs("form",{onSubmit:U,noValidate:!0,children:[v.jsxs("div",{style:{marginBottom:"1.25rem"},children:[v.jsxs("label",{htmlFor:"name",style:Vt,children:["Nombre completo ",v.jsx("span",{style:{color:"var(--vsm-error)"},children:"*"})]}),v.jsx("input",{type:"text",id:"name",value:r,onChange:q=>e(q.target.value),onFocus:ot,onBlur:lt,required:!0,style:Yt})]}),v.jsxs("div",{style:{marginBottom:"1.25rem"},children:[v.jsxs("label",{htmlFor:"email",style:Vt,children:["Correo electrnico ",v.jsx("span",{style:{color:"var(--vsm-error)"},children:"*"})]}),v.jsx("input",{type:"email",id:"email",value:n,onChange:q=>s(q.target.value),onFocus:ot,onBlur:lt,required:!0,style:Yt})]}),v.jsxs("div",{style:{marginBottom:"1.25rem"},children:[v.jsxs("label",{htmlFor:"password",style:Vt,children:["Contrasea ",v.jsx("span",{style:{color:"var(--vsm-error)"},children:"*"})]}),v.jsx("input",{type:"password",id:"password",value:o,onChange:q=>u(q.target.value),onFocus:ot,onBlur:lt,required:!0,style:Yt}),v.jsx("p",{style:{fontSize:"11px",color:"var(--vsm-gray-mid)",marginTop:"5px"},children:"Mnimo 6 caracteres."})]}),v.jsxs("div",{style:{marginBottom:"1.5rem"},children:[v.jsxs("label",{htmlFor:"confirmPassword",style:Vt,children:["Confirmar contrasea ",v.jsx("span",{style:{color:"var(--vsm-error)"},children:"*"})]}),v.jsx("input",{type:"password",id:"confirmPassword",value:h,onChange:q=>m(q.target.value),onFocus:ot,onBlur:lt,required:!0,style:Yt})]}),v.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px",marginBottom:"1.5rem"},children:[v.jsx("input",{type:"checkbox",id:"privacy",required:!0,style:{width:"15px",height:"15px",marginTop:"2px",accentColor:"var(--vsm-brand)",cursor:"pointer",flexShrink:0}}),v.jsxs("label",{htmlFor:"privacy",style:{fontSize:"12px",color:"var(--vsm-gray-mid)",cursor:"pointer",lineHeight:1.6},children:["He ledo y acepto la"," ",v.jsx("a",{href:"#",style:{color:"var(--vsm-brand)",textDecoration:"underline",textUnderlineOffset:"3px"},children:"Poltica de privacidad"})]})]}),p&&v.jsx("div",{style:{...Cd,marginBottom:"1rem"},children:v.jsx("p",{style:Id,children:p})}),v.jsx("button",{type:"submit",disabled:b,style:{...g1,cursor:b?"not-allowed":"pointer",opacity:b?.75:1},children:b?"Creando cuenta...":"Registrarme"})]})]})})},$k=5*60*1e3,JE=["mousemove","mousedown","keydown","scroll","touchstart","click"],y1=j.createContext({user:null,loading:!0,logout:async()=>{}}),Zk=({children:r})=>{const[e,n]=j.useState(null),[s,o]=j.useState(!0),u=j.useRef(null),h=async()=>{u.current&&clearTimeout(u.current),await UE(wu)};return j.useEffect(()=>{const m=sN(wu,p=>{n(p),o(!1)});return()=>m()},[]),j.useEffect(()=>{if(!e){u.current&&clearTimeout(u.current);return}const m=()=>{u.current&&clearTimeout(u.current),u.current=setTimeout(()=>UE(wu),$k)};return JE.forEach(p=>window.addEventListener(p,m,{passive:!0})),m(),()=>{JE.forEach(p=>window.removeEventListener(p,m)),u.current&&clearTimeout(u.current)}},[e]),v.jsx(y1.Provider,{value:{user:e,loading:s,logout:h},children:r})},zg=()=>j.useContext(y1);function Jk(){const[r,e]=j.useState(null),[n,s]=j.useState(!0);return j.useEffect(()=>{const o=dS(pn(Qe,"settings","general"),u=>{u.exists()?e(u.data()):e(null),s(!1)},()=>{e(null),s(!1)});return()=>o()},[]),{settings:r,loading:n}}const v1="/tiendaVirtual/assets/Logo-CuQzCToE.jpeg",eM=[{to:"/",text:"Inicio"},{to:"/juguetes",text:"+ Productos"},{to:"/#nosotros",text:"Nosotros"},{to:"/contacto",text:"Contacto"}],tM=()=>{const{user:r,logout:e}=zg(),n=qa(),{settings:s,loading:o}=Jk(),u=s?.logoUrl||v1,h=async()=>{await e(),n("/Login")};return v.jsx("header",{style:{position:"fixed",top:0,width:"100%",zIndex:40},children:v.jsxs("nav",{style:{backgroundColor:"var(--vsm-white)",borderBottom:"1px solid var(--vsm-gray)"},className:"flex justify-between items-center py-3 px-8",children:[v.jsxs(cu,{to:"/",className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[v.jsx("img",{src:u,alt:"Velas Santa Marta",style:{height:"38px",width:"auto",objectFit:"contain"}}),!o&&v.jsx("div",{children:s?.storeName?v.jsx("span",{style:{fontWeight:800,fontSize:"1rem",color:"#111",display:"block",lineHeight:1.2},children:s.storeName}):v.jsx(v.Fragment,{})})]}),v.jsx("ul",{className:"hidden md:flex items-center gap-8",children:eM.map(m=>v.jsx("li",{children:v.jsx(cu,{to:m.to,end:m.to==="/",style:({isActive:p})=>({color:"#111",fontWeight:p?700:600,fontSize:"13px",textDecoration:p?"underline":"none",textUnderlineOffset:"5px",textTransform:"uppercase",letterSpacing:"0.05em"}),className:"hover:opacity-60 transition-opacity",children:m.text})},m.to))}),v.jsx("div",{className:"flex items-center gap-4",children:r?v.jsxs(v.Fragment,{children:[v.jsx(cu,{to:"/Admin",style:{color:"#111",fontSize:"12px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em"},className:"hover:opacity-60 transition-opacity",children:"Admin"}),v.jsx("button",{onClick:h,style:{backgroundColor:"var(--vsm-black)",color:"#fff",fontSize:"11px",fontWeight:700,padding:"8px 16px",textTransform:"uppercase",letterSpacing:"0.05em",borderRadius:"4px",border:"none",cursor:"pointer",fontFamily:"inherit"},className:"hover:opacity-80 transition-opacity",children:"Cerrar sesin"})]}):v.jsxs(v.Fragment,{children:[v.jsx(cu,{to:"/Login",style:{color:"#111",fontSize:"12px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em"},className:"hover:opacity-60 transition-opacity",children:"Ingresar"}),v.jsx(cu,{to:"/Register",style:{backgroundColor:"var(--vsm-brand)",color:"#fff",fontSize:"11px",fontWeight:700,padding:"8px 16px",textTransform:"uppercase",letterSpacing:"0.05em",borderRadius:"4px"},className:"hover:opacity-90 transition-opacity",children:"Registro"})]})})]})})},nM=[{title:"Nuestras Polticas",links:[{label:"Privacidad",path:"/privacidad"},{label:"Trminos de uso",path:"/terminos"},{label:"Devoluciones",path:"/devoluciones"},{label:"Poltica de envo",path:"/envios"}]},{title:"Ms Informacin",links:[{label:"Contacto",path:"/contacto"},{label:"Nuestros aromas",path:"/aromas"},{label:"Cmo cuidar tu vela",path:"/cuidados"},{label:"Preguntas frecuentes",path:"/faq"}]}],rM=()=>v.jsxs("footer",{style:{backgroundColor:"var(--vsm-white)",borderTop:"1px solid var(--vsm-gray)"},className:"py-14",children:[v.jsxs("div",{className:"max-w-7xl mx-auto px-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-10",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[v.jsx("img",{src:v1,alt:"Velas Santa Marta",style:{height:"36px",width:"auto",objectFit:"contain"}}),v.jsxs("div",{children:[v.jsx("span",{style:{fontWeight:800,fontSize:"1rem",display:"block",lineHeight:1.1,color:"var(--vsm-black)"},children:"Velas"}),v.jsx("span",{style:{fontWeight:600,fontSize:"0.6rem",color:"var(--vsm-brand)",letterSpacing:"0.12em",textTransform:"uppercase"},children:"Santa Marta"})]})]}),v.jsx("div",{className:"flex gap-3 mt-4",children:[{label:"IG",href:"#"},{label:"TK",href:"#"},{label:"FB",href:"#"},{label:"YT",href:"#"}].map(r=>v.jsx("a",{href:r.href,style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"var(--vsm-brand)",color:"#fff",fontSize:"9px",fontWeight:800,display:"flex",alignItems:"center",justifyContent:"center",textDecoration:"none"},className:"hover:opacity-80 transition-opacity",children:r.label},r.label))})]}),v.jsxs("div",{children:[v.jsx("h3",{style:{fontWeight:800,fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.08em",marginBottom:"1rem",color:"var(--vsm-black)"},children:"Sobre Nosotros"}),v.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"13px",lineHeight:1.8},children:"Somos una pequea empresa artesanal nacida en Santa Marta, Colombia. Elaboramos velas a mano con cera natural e ingredientes del Caribe colombiano para crear experiencias nicas en tu hogar."})]}),nM.map(r=>v.jsxs("div",{children:[v.jsx("h3",{style:{fontWeight:800,fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.08em",marginBottom:"1rem",color:"var(--vsm-black)"},children:r.title}),v.jsx("ul",{style:{display:"flex",flexDirection:"column",gap:"0.6rem"},children:r.links.map(e=>v.jsx("li",{children:v.jsx(Sr,{to:e.path,style:{color:"var(--vsm-gray-mid)",fontSize:"13px",textDecoration:"none"},className:"hover:text-black transition-colors",children:e.label})},e.label))})]},r.title))]}),v.jsxs("div",{style:{borderTop:"1px solid var(--vsm-gray)",marginTop:"3rem",paddingTop:"1.5rem"},className:"max-w-7xl mx-auto px-8 flex flex-col md:flex-row justify-between items-center gap-2",children:[v.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"12px"},children:"Copyright  2025 Velas Santa Marta"}),v.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"12px"},children:"Santa Marta, Magdalena, Colombia"})]})]}),iM="96px",sM=({children:r,alignRight:e})=>{const s=Ba().pathname==="/";return v.jsx("div",{style:{marginTop:iM},className:`flex flex-col ${s?"":e?"items-end px-4":"items-center px-4"} w-full`,children:r})},aM=()=>v.jsxs("div",{className:"w-full",style:{maxWidth:"1200px",margin:"0 auto",padding:"2rem 1rem"},children:[v.jsx("div",{style:{width:"140px",height:"14px",backgroundColor:"var(--vsm-gray)",borderRadius:"4px",marginBottom:"2rem",animation:"pulse 1.5s ease-in-out infinite"}}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[3fr_2fr] gap-8 md:gap-12",children:[v.jsxs("div",{children:[v.jsx("div",{style:{aspectRatio:"1",backgroundColor:"var(--vsm-gray)",borderRadius:"12px",animation:"pulse 1.5s ease-in-out infinite"}}),v.jsx("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1rem"},children:[0,1,2].map(r=>v.jsx("div",{style:{width:"72px",height:"72px",backgroundColor:"var(--vsm-gray)",borderRadius:"var(--vsm-radius)",animation:"pulse 1.5s ease-in-out infinite"}},r))})]}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[[{w:"80px",h:"24px",r:"20px"},{w:"75%",h:"36px",r:"6px"},{w:"45%",h:"32px",r:"6px"},{w:"100%",h:"80px",r:"6px"}].map((r,e)=>v.jsx("div",{style:{width:r.w,height:r.h,backgroundColor:"var(--vsm-gray)",borderRadius:r.r,animation:"pulse 1.5s ease-in-out infinite"}},e)),v.jsx("div",{style:{width:"100%",height:"50px",backgroundColor:"var(--vsm-gray)",borderRadius:"var(--vsm-radius)",marginTop:"0.5rem",animation:"pulse 1.5s ease-in-out infinite"}})]})]})]}),oM=()=>v.jsxs("div",{style:{maxWidth:"560px",margin:"5rem auto",padding:"2rem",textAlign:"center"},children:[v.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:800,color:"var(--vsm-black)",marginBottom:"0.75rem"},children:"Producto no encontrado"}),v.jsx("p",{style:{color:"var(--vsm-gray-mid)",marginBottom:"2rem",lineHeight:1.6},children:"El producto que buscas no existe o fue eliminado."}),v.jsx(Sr,{to:"/juguetes",style:{color:"var(--vsm-brand)",fontWeight:600,textDecoration:"underline",textUnderlineOffset:"3px"},children:"Volver al catalogo"})]}),lM=()=>{const{id:r}=kw(),[e,n]=j.useState(null),[s,o]=j.useState([]),[u,h]=j.useState(!0),[m,p]=j.useState(!1),[g,b]=j.useState(0),[S,x]=j.useState(!1),[U,q]=j.useState(!1),[Y,k]=j.useState(1);if(j.useEffect(()=>{r&&(h(!0),p(!1),b(0),k(1),Promise.all([hS(pn(Qe,"products",r)),js(Wn(Qe,"categories"))]).then(([se,ge])=>{if(!se.exists()){p(!0);return}n({id:se.id,...se.data()}),o(ge.docs.map(R=>({id:R.id,...R.data()})))}).catch(()=>p(!0)).finally(()=>h(!1)))},[r]),u)return v.jsx(aM,{});if(m||!e)return v.jsx(oM,{});const Z=e.images?.length?e.images:e.imageUrl?[e.imageUrl]:[],K=s.find(se=>se.id===e.categoryId)?.name??"",X=e.stock===0,oe=se=>{se!==g&&(x(!0),setTimeout(()=>{b(se),x(!1)},150))};return v.jsxs("div",{className:"w-full",style:{maxWidth:"1200px",margin:"0 auto",padding:"2rem 1rem"},children:[v.jsx(Sr,{to:"/juguetes",style:{display:"inline-flex",alignItems:"center",gap:"0.35rem",color:"var(--vsm-gray-mid)",textDecoration:"none",fontSize:"13px",fontWeight:500,marginBottom:"2rem"},children:" Volver al catalogo"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[3fr_2fr] gap-8 md:gap-12",children:[v.jsxs("div",{children:[v.jsx("div",{style:{borderRadius:"12px",overflow:"hidden",border:"1px solid var(--vsm-gray)",aspectRatio:"1",backgroundColor:"var(--vsm-bg-warm)",cursor:Z.length>0?"zoom-in":"default"},children:Z.length>0?v.jsx("img",{src:Z[g],alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover",display:"block",opacity:S?0:1,transform:U?"scale(1.08)":"scale(1)",transition:"opacity 0.15s ease, transform 0.35s ease"},onMouseEnter:()=>q(!0),onMouseLeave:()=>q(!1)}):v.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--vsm-gray-mid)",fontSize:"14px"},children:"Sin imagen"})}),Z.length>1&&v.jsx("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1rem",overflowX:"auto",paddingBottom:"4px"},children:Z.map((se,ge)=>v.jsx("button",{onClick:()=>oe(ge),style:{flexShrink:0,width:"72px",height:"72px",borderRadius:"var(--vsm-radius)",overflow:"hidden",border:`2px solid ${ge===g?"var(--vsm-brand)":"var(--vsm-gray)"}`,padding:0,cursor:"pointer",backgroundColor:"var(--vsm-bg-warm)",transition:"border-color 0.2s",outline:"none"},children:v.jsx("img",{src:se,alt:`Vista ${ge+1}`,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}})},ge))})]}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:[K&&v.jsx("span",{style:{display:"inline-block",alignSelf:"flex-start",backgroundColor:"var(--vsm-gray)",color:"var(--vsm-gray-mid)",padding:"0.3rem 0.9rem",borderRadius:"20px",fontSize:"11px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.06em"},children:K}),v.jsx("h1",{style:{fontSize:"1.75rem",fontWeight:800,color:"var(--vsm-black)",lineHeight:1.2,margin:0},children:e.name}),v.jsx("p",{style:{fontSize:"2rem",fontWeight:800,color:"var(--vsm-brand)",margin:0},children:Lg(e.price)}),v.jsx("p",{style:{fontSize:"14px",color:"var(--vsm-gray-mid)",lineHeight:1.8,margin:0},children:e.description}),e.aroma&&v.jsxs("div",{style:{padding:"0.875rem 1rem",backgroundColor:"#FFF7F0",borderLeft:"3px solid var(--vsm-brand)",borderRadius:"0 8px 8px 0"},children:[v.jsx("strong",{style:{display:"block",color:"var(--vsm-brand)",fontSize:"11px",textTransform:"uppercase",letterSpacing:"0.06em",marginBottom:"0.3rem"},children:"Aroma"}),v.jsx("span",{style:{color:"var(--vsm-black)",fontSize:"14px"},children:e.aroma})]}),v.jsx("p",{style:{fontSize:"13px",fontWeight:600,margin:0,color:X?"var(--vsm-error)":"var(--vsm-success)"},children:X?"Sin stock":`${e.stock} disponibles`}),!X&&v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[v.jsx("span",{style:{color:"var(--vsm-gray-mid)",fontSize:"13px",fontWeight:500},children:"Cantidad:"}),v.jsxs("div",{style:{display:"inline-flex",alignItems:"center",border:"1px solid var(--vsm-gray)",borderRadius:"var(--vsm-radius)",overflow:"hidden"},children:[v.jsx("button",{onClick:()=>k(se=>Math.max(1,se-1)),style:{width:"40px",height:"40px",border:"none",backgroundColor:"transparent",cursor:"pointer",fontSize:"1.1rem",fontWeight:600,color:"var(--vsm-black)"},children:""}),v.jsx("span",{style:{width:"40px",textAlign:"center",fontSize:"14px",fontWeight:700},children:Y}),v.jsx("button",{onClick:()=>k(se=>Math.min(e.stock,se+1)),style:{width:"40px",height:"40px",border:"none",backgroundColor:"transparent",cursor:"pointer",fontSize:"1.1rem",fontWeight:600,color:"var(--vsm-black)"},children:"+"})]})]}),v.jsx("button",{disabled:X,style:{padding:"14px 24px",backgroundColor:X?"var(--vsm-gray)":"var(--vsm-brand)",color:X?"var(--vsm-gray-mid)":"#fff",border:"none",borderRadius:"var(--vsm-radius)",fontSize:"14px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.07em",cursor:X?"not-allowed":"pointer",transition:"background 0.2s ease",fontFamily:"inherit"},children:X?"Agotado":"Agregar al carrito"}),v.jsx("p",{style:{textAlign:"center",color:"var(--vsm-gray-mid)",fontSize:"12px",margin:0},children:"Envio disponible a todo el pais"})]})]})]})},Dd={padding:"6px 16px",borderRadius:"20px",border:"1px solid transparent",fontSize:"13px",fontWeight:600,cursor:"pointer",fontFamily:"inherit",transition:"background-color 0.15s, color 0.15s",whiteSpace:"nowrap"},eb={...Dd,backgroundColor:"var(--vsm-brand)",color:"#fff",borderColor:"var(--vsm-brand)"},tb={...Dd,backgroundColor:"var(--vsm-white)",color:"var(--vsm-gray-mid)",borderColor:"var(--vsm-gray)"},nb={...Dd,padding:"4px 13px",fontSize:"12px",backgroundColor:"var(--vsm-brand)",color:"#fff",borderColor:"var(--vsm-brand)"},rb={...Dd,padding:"4px 13px",fontSize:"12px",backgroundColor:"rgba(201,107,43,0.08)",color:"var(--vsm-brand)",borderColor:"rgba(201,107,43,0.3)"},uM=()=>v.jsxs("div",{style:{backgroundColor:"var(--vsm-white)",borderRadius:"6px",overflow:"hidden",boxShadow:"var(--vsm-shadow)"},children:[v.jsx("div",{style:{aspectRatio:"1",backgroundColor:"var(--vsm-gray)",animation:"pulse 1.5s ease-in-out infinite"}}),v.jsxs("div",{style:{padding:"1rem",display:"flex",flexDirection:"column",gap:"8px"},children:[v.jsx("div",{style:{height:"13px",backgroundColor:"var(--vsm-gray)",borderRadius:"3px",width:"70%",animation:"pulse 1.5s ease-in-out infinite"}}),v.jsx("div",{style:{height:"10px",backgroundColor:"var(--vsm-gray)",borderRadius:"3px",width:"90%",animation:"pulse 1.5s ease-in-out infinite"}}),v.jsx("div",{style:{height:"20px",backgroundColor:"var(--vsm-gray)",borderRadius:"3px",width:"45%",animation:"pulse 1.5s ease-in-out infinite"}})]})]}),cM=()=>{const{data:r,loading:e}=Qn("categories",Dn("active","==",!0)),{data:n,loading:s}=Qn("subcategories",Dn("active","==",!0)),{data:o,loading:u}=Qn("products",Dn("active","==",!0)),h=j.useMemo(()=>[...r].sort((K,X)=>(K.createdAt?.seconds??0)-(X.createdAt?.seconds??0)),[r]),m=j.useMemo(()=>[...n].sort((K,X)=>(K.createdAt?.seconds??0)-(X.createdAt?.seconds??0)),[n]),p=e||s||u,[g,b]=j.useState(null),[S,x]=j.useState(null),U=j.useMemo(()=>g?m.filter(K=>K.categoryId===g):[],[m,g]),q=j.useMemo(()=>new Set(h.map(K=>K.id)),[h]),Y=j.useMemo(()=>new Set(m.map(K=>K.id)),[m]),k=j.useMemo(()=>o.filter(K=>K.categoryId&&!q.has(K.categoryId)||K.subcategoryId&&!Y.has(K.subcategoryId)?!1:S?K.subcategoryId===S:g?K.categoryId===g:!0),[o,g,S,q,Y]),Z=K=>{b(K),x(null)};return v.jsxs("div",{style:{maxWidth:"1280px",margin:"0 auto",padding:"2rem 1rem"},children:[v.jsx("h1",{style:{fontWeight:800,fontSize:"1.75rem",color:"var(--vsm-black)",marginBottom:"1.75rem"},children:"Catlogo de Velas"}),!p&&h.length>0&&v.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginBottom:"0.75rem"},children:[v.jsx("button",{style:g===null?eb:tb,onClick:()=>Z(null),children:"Todos"}),h.map(K=>v.jsx("button",{style:g===K.id?eb:tb,onClick:()=>Z(K.id),children:K.name},K.id))]}),!p&&U.length>0&&v.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem",marginBottom:"1.5rem",paddingLeft:"0.25rem"},children:[v.jsx("button",{style:S===null?nb:rb,onClick:()=>x(null),children:"Todo"}),U.map(K=>v.jsx("button",{style:S===K.id?nb:rb,onClick:()=>x(K.id),children:K.name},K.id))]}),p?v.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5",children:Array.from({length:8}).map((K,X)=>v.jsx(uM,{},X))}):k.length===0?v.jsxs("div",{style:{textAlign:"center",padding:"4rem 0",color:"var(--vsm-gray-mid)"},children:[v.jsx("p",{style:{fontSize:"1rem",fontWeight:600},children:"No hay productos disponibles en esta categora."}),g&&v.jsx("button",{onClick:()=>Z(null),style:{marginTop:"1rem",color:"var(--vsm-brand)",background:"none",border:"none",cursor:"pointer",fontSize:"13px",fontWeight:700,textDecoration:"underline",fontFamily:"inherit"},children:"Ver todos los productos"})]}):v.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5",children:k.map(K=>v.jsx(p1,{product:K},K.id))})]})},hM=({products:r,categories:e})=>{const[n,s]=j.useState(!1),[o,u]=j.useState(new Set),[h,m]=j.useState(new Set),p=j.useMemo(()=>r.reduce((k,Z)=>k+(Z.stock??0),0),[r]),g=j.useMemo(()=>{const k=new Map;for(const Z of r){const K=Z.categoryId||"__none__";k.has(K)||k.set(K,[]),k.get(K).push(Z)}return k},[r]),b=j.useMemo(()=>{const k=new Map;for(const Z of r){const K=Z.categoryId||"__none__",X=Z.subcategoryId||"__none__";k.has(K)||k.set(K,new Map);const oe=k.get(K);oe.has(X)||oe.set(X,[]),oe.get(X).push(Z)}return k},[r]),S=k=>k.reduce((Z,K)=>Z+(K.stock??0),0),x=(k,Z)=>{Z(K=>{const X=new Set(K);return X.has(k)?X.delete(k):X.add(k),X})},U=j.useMemo(()=>{const k=[];for(const Z of e)g.has(Z.id)&&k.push({id:Z.id,name:Z.name});return g.has("__none__")&&k.push({id:"__none__",name:"Sin categora"}),k},[e,g]),q=k=>v.jsx("span",{style:{fontSize:"10px",color:"var(--vsm-gray-mid)",display:"inline-block",transform:k?"rotate(180deg)":"none",transition:"transform 0.2s",flexShrink:0},children:""}),Y=(k,Z)=>v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:`0.35rem 1.5rem 0.35rem ${Z}`},children:[v.jsx("span",{style:{fontSize:"12px",color:k.active===!1?"var(--vsm-gray-mid)":"var(--vsm-black)",flex:1,marginRight:"0.75rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontStyle:k.active===!1?"italic":"normal"},children:k.name}),v.jsxs("span",{style:{fontSize:"12px",fontWeight:700,color:k.stock===0?"var(--vsm-error)":"var(--vsm-gray-mid)",flexShrink:0},children:[k.stock," uds."]})]},k.id);return v.jsxs("div",{style:{backgroundColor:"var(--vsm-white)",borderRadius:"var(--vsm-radius)",borderTop:"3px solid var(--vsm-brand)",boxShadow:"var(--vsm-shadow-sm)",overflow:"hidden"},children:[v.jsxs("div",{onClick:()=>s(k=>!k),style:{padding:"1.25rem 1.5rem",cursor:"pointer",display:"flex",alignItems:"flex-start",justifyContent:"space-between",userSelect:"none"},children:[v.jsxs("div",{children:[v.jsx("p",{style:{fontSize:"13px",color:"var(--vsm-gray-mid)",fontWeight:600,marginBottom:"0.5rem"},children:"Stock Total"}),v.jsxs("p",{style:{fontSize:"2rem",fontWeight:800,color:"var(--vsm-brand)",lineHeight:1},children:[p,v.jsx("span",{style:{fontSize:"0.875rem",fontWeight:600,marginLeft:"0.35rem"},children:"uds."})]})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",marginTop:"0.2rem"},children:[v.jsx("span",{style:{fontSize:"11px",color:"var(--vsm-gray-mid)"},children:n?"Ocultar":"Ver detalle"}),q(n)]})]}),n&&v.jsx("div",{style:{borderTop:"1px solid var(--vsm-gray)",maxHeight:"400px",overflowY:"auto"},children:U.length===0?v.jsx("p",{style:{padding:"0.75rem 1.5rem",fontSize:"13px",color:"var(--vsm-gray-mid)"},children:"Sin productos"}):U.map(k=>{const Z=g.get(k.id)||[],K=S(Z),X=o.has(k.id),oe=b.get(k.id)||new Map,se=Z.some(w=>!!w.subcategoryId),ge=[];oe.forEach((w,C)=>{if(C==="__none__")return;const P=w[0]?.subcategoryName||"Subcategora";ge.push({id:C,name:P,prods:w})});const R=oe.get("__none__")||[];return R.length>0&&se&&ge.push({id:`${k.id}__nosub`,name:"Sin subcategora",prods:R}),v.jsxs("div",{style:{borderBottom:"1px solid var(--vsm-gray)"},children:[v.jsxs("div",{onClick:()=>x(k.id,u),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.6rem 1.5rem",cursor:"pointer",userSelect:"none",backgroundColor:X?"rgba(201,107,43,0.05)":"transparent"},children:[v.jsx("span",{style:{fontSize:"13px",fontWeight:700,color:"var(--vsm-black)"},children:k.name}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[v.jsxs("span",{style:{fontSize:"13px",fontWeight:700,color:"var(--vsm-brand)"},children:[K," uds."]}),q(X)]})]}),X&&v.jsx("div",{children:se?ge.map(w=>{const C=S(w.prods),P=h.has(w.id);return v.jsxs("div",{children:[v.jsxs("div",{onClick:()=>x(w.id,m),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.45rem 1.5rem 0.45rem 2.75rem",cursor:"pointer",userSelect:"none",backgroundColor:P?"rgba(201,107,43,0.08)":"rgba(201,107,43,0.03)"},children:[v.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:"var(--vsm-gray-mid)"},children:w.name}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[v.jsxs("span",{style:{fontSize:"12px",fontWeight:600,color:"var(--vsm-brand)"},children:[C," uds."]}),q(P)]})]}),P&&w.prods.map(M=>Y(M,"4rem"))]},w.id)}):Z.map(w=>Y(w,"2.75rem"))})]},k.id)})})]})},dM=()=>{const{data:r,loading:e}=Qn("products"),{data:n,loading:s}=Qn("categories"),o=e||s,u=v.jsx("div",{style:{backgroundColor:"var(--vsm-gray)",borderRadius:"var(--vsm-radius)",height:"110px",animation:"pulse 1.5s ease-in-out infinite"}});if(o)return v.jsxs("div",{children:[v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[u,u]}),u]});const h=[{label:"Total Productos",value:r.length,color:"var(--vsm-brand)"},{label:"Total Categoras",value:n.length,color:"var(--vsm-brand)"}];return v.jsxs("div",{children:[v.jsx("h2",{style:{fontWeight:800,fontSize:"1.1rem",color:"var(--vsm-black)",marginBottom:"1.25rem"},children:"Dashboard"}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:h.map(m=>v.jsxs("div",{style:{backgroundColor:"var(--vsm-white)",borderRadius:"var(--vsm-radius)",padding:"1.25rem 1.5rem",borderTop:`3px solid ${m.color}`,boxShadow:"var(--vsm-shadow-sm)"},children:[v.jsx("p",{style:{fontSize:"13px",color:"var(--vsm-gray-mid)",fontWeight:600,marginBottom:"0.5rem"},children:m.label}),v.jsx("p",{style:{fontSize:"2rem",fontWeight:800,color:m.color,lineHeight:1},children:m.value})]},m.label))}),v.jsx(hM,{products:r,categories:n})]})},xu=({isOpen:r,onClose:e,children:n,maxWidth:s="560px"})=>(j.useEffect(()=>{if(!r)return;document.body.style.overflow="hidden";const o=u=>{u.key==="Escape"&&e()};return window.addEventListener("keydown",o),()=>{document.body.style.overflow="",window.removeEventListener("keydown",o)}},[r,e]),r?v.jsx("div",{onClick:e,style:{position:"fixed",inset:0,zIndex:50,backgroundColor:"rgba(0,0,0,0.45)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},children:v.jsxs("div",{onClick:o=>o.stopPropagation(),style:{backgroundColor:"var(--vsm-white)",borderRadius:"var(--vsm-radius)",padding:"2rem",width:"100%",maxWidth:s,position:"relative",maxHeight:"90vh",overflowY:"auto"},children:[v.jsx("button",{onClick:e,"aria-label":"Cerrar",style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",cursor:"pointer",fontSize:"1.25rem",color:"var(--vsm-gray-mid)",lineHeight:1,padding:"4px"},children:""}),n]})}):null),_1=()=>()=>{document.dispatchEvent(new MouseEvent("click",{bubbles:!0}))},Sh=5,ib={name:"",description:"",price:"",stock:"",categoryId:"",subcategoryId:"",imageUrl:"",active:!0},sb={position:"absolute",top:-6,right:-6,width:20,height:20,borderRadius:"50%",backgroundColor:"var(--vsm-error)",color:"#fff",border:"none",cursor:"pointer",fontSize:"10px",fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"inherit",lineHeight:1,padding:0},fM=({isOpen:r,onClose:e,product:n,categories:s,subcategories:o})=>{const u=_1(),[h,m]=j.useState(ib),[p,g]=j.useState([]),[b,S]=j.useState([]),[x,U]=j.useState(""),[q,Y]=j.useState(0),[k,Z]=j.useState(null),[K,X]=j.useState(!1);j.useEffect(()=>{if(r){m(n?{name:n.name,description:n.description,price:n.price,stock:n.stock,categoryId:n.categoryId,subcategoryId:n.subcategoryId??"",imageUrl:n.imageUrl,active:n.active!==!1}:ib);const ue=n?.images?.length?n.images:n?.imageUrl?[n.imageUrl]:[];g(ue),S([]),U(""),Y(ye=>ye+1),Z(null)}},[r,n]);const oe=(ue,ye)=>m(Q=>({...Q,[ue]:ye})),se=j.useMemo(()=>o.filter(ue=>ue.categoryId===h.categoryId&&ue.active),[o,h.categoryId]),ge=p.length+b.length,R=ge<Sh,w=()=>{const ue=x.trim();!ue||!R||(g(ye=>[...ye,ue]),U(""))},C=ue=>g(ye=>ye.filter((Q,ae)=>ae!==ue)),P=ue=>S(ye=>ye.filter((Q,ae)=>ae!==ue)),M=ue=>{u();const ye=Array.from(ue.target.files??[]);if(!ye.length)return;const Q=Sh-ge;S(ae=>[...ae,...ye.slice(0,Q)]),Y(ae=>ae+1)},O=async(ue,ye,Q)=>{const ae=ue.name.split(".").pop(),fe=f1(m1,`products/${ye}/image-${Date.now()}-${Q}.${ae}`);return await h1(fe,ue),d1(fe)},I=async ue=>{if(ue.preventDefault(),!h.name.trim()){Z("El nombre es obligatorio.");return}X(!0),Z(null);try{const ye=s.find(fe=>fe.id===h.categoryId),Q=se.find(fe=>fe.id===h.subcategoryId),ae={name:h.name.trim(),description:h.description.trim(),price:Number(h.price)||0,stock:Number(h.stock)||0,categoryId:h.categoryId,categoryName:ye?.name??"",subcategoryId:h.subcategoryId||null,subcategoryName:Q?.name??null,active:h.active};if(n){const fe=[];for(let N=0;N<b.length;N++)try{fe.push(await O(b[N],n.id,N))}catch{console.warn("Upload failed for file",N)}const Ne=[...p,...fe];if(await Ri(pn(Qe,"products",n.id),{...ae,imageUrl:Ne[0]??"",images:Ne,updatedAt:Cs()}),fe.length<b.length){Z("Producto guardado, pero algunas imgenes no pudieron subirse."),X(!1);return}}else{const fe=await Tp(Wn(Qe,"products"),{...ae,imageUrl:p[0]??"",images:p,createdAt:Cs(),updatedAt:Cs()});if(b.length>0){const Ne=[];for(let N=0;N<b.length;N++)try{Ne.push(await O(b[N],fe.id,N))}catch{console.warn("Upload failed for file",N)}if(Ne.length>0){const N=[...p,...Ne];await Ri(pn(Qe,"products",fe.id),{imageUrl:N[0]??"",images:N})}if(Ne.length<b.length){Z("Producto creado, pero algunas imgenes no pudieron subirse."),X(!1);return}}}e()}catch(ye){console.error(ye),Z("Error al guardar. Intenta de nuevo.")}finally{X(!1)}};return v.jsxs(xu,{isOpen:r,onClose:e,maxWidth:"560px",children:[v.jsx("h3",{style:{fontWeight:800,fontSize:"1.1rem",color:"var(--vsm-black)",marginBottom:"1.25rem"},children:n?"Editar producto":"Nuevo producto"}),v.jsx("form",{onSubmit:I,noValidate:!0,children:v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[v.jsxs("div",{children:[v.jsxs("label",{style:Vt,children:["Nombre ",v.jsx("span",{style:{color:"var(--vsm-error)"},children:"*"})]}),v.jsx("input",{value:h.name,onChange:ue=>oe("name",ue.target.value),style:Yt,onFocus:ot,onBlur:lt})]}),v.jsxs("div",{children:[v.jsx("label",{style:Vt,children:"Descripcin"}),v.jsx("textarea",{value:h.description,onChange:ue=>oe("description",ue.target.value),rows:3,style:{...Yt,resize:"vertical"},onFocus:ot,onBlur:lt})]}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[v.jsxs("div",{children:[v.jsx("label",{style:Vt,children:"Precio (COP)"}),v.jsx("input",{type:"number",min:"0",value:h.price,placeholder:"0",onChange:ue=>oe("price",ue.target.value===""?"":Number(ue.target.value)),style:Yt,onFocus:ot,onBlur:lt})]}),v.jsxs("div",{children:[v.jsx("label",{style:Vt,children:"Stock"}),v.jsx("input",{type:"number",min:"0",value:h.stock,placeholder:"0",onChange:ue=>oe("stock",ue.target.value===""?"":Number(ue.target.value)),style:Yt,onFocus:ot,onBlur:lt})]})]}),v.jsxs("div",{children:[v.jsx("label",{style:Vt,children:"Categora"}),v.jsxs("select",{value:h.categoryId,onChange:ue=>{oe("categoryId",ue.target.value),m(ye=>({...ye,categoryId:ue.target.value,subcategoryId:""}))},style:{...Yt,cursor:"pointer"},onFocus:ot,onBlur:lt,children:[v.jsx("option",{value:"",children:"Sin categora"}),s.filter(ue=>ue.active).map(ue=>v.jsx("option",{value:ue.id,children:ue.name},ue.id))]})]}),se.length>0&&v.jsxs("div",{children:[v.jsx("label",{style:Vt,children:"Subcategora"}),v.jsxs("select",{value:h.subcategoryId,onChange:ue=>oe("subcategoryId",ue.target.value),style:{...Yt,cursor:"pointer"},onFocus:ot,onBlur:lt,children:[v.jsx("option",{value:"",children:"Sin subcategora"}),se.map(ue=>v.jsx("option",{value:ue.id,children:ue.name},ue.id))]})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.6rem"},children:[v.jsx("input",{id:"product-active",type:"checkbox",checked:h.active,onChange:ue=>m(ye=>({...ye,active:ue.target.checked})),style:{width:16,height:16,cursor:"pointer",accentColor:"var(--vsm-brand)"}}),v.jsx("label",{htmlFor:"product-active",style:{...Vt,margin:0,cursor:"pointer",fontWeight:600},children:"Producto activo (visible en el catlogo)"})]}),v.jsxs("div",{children:[v.jsxs("label",{style:Vt,children:["Imgenes"," ",v.jsxs("span",{style:{color:"var(--vsm-gray-mid)",fontWeight:400},children:["(",ge,"/",Sh,")  la primera es la principal"]})]}),ge>0&&v.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px",marginBottom:"0.75rem"},children:[p.map((ue,ye)=>v.jsxs("div",{style:{position:"relative",width:72,height:72,flexShrink:0},children:[v.jsx("img",{src:ue,alt:`Imagen ${ye+1}`,style:{width:72,height:72,objectFit:"cover",borderRadius:"var(--vsm-radius-sm)",border:ye===0?"2px solid var(--vsm-brand)":"1px solid var(--vsm-gray)"}}),ye===0&&v.jsx("span",{style:{position:"absolute",bottom:3,left:3,backgroundColor:"var(--vsm-brand)",color:"#fff",fontSize:"9px",fontWeight:700,padding:"1px 5px",borderRadius:"2px"},children:"Principal"}),v.jsx("button",{type:"button",onClick:()=>C(ye),style:sb,children:""})]},ye)),b.map((ue,ye)=>v.jsxs("div",{style:{position:"relative",width:72,height:72,flexShrink:0},children:[v.jsx("img",{src:URL.createObjectURL(ue),alt:ue.name,style:{width:72,height:72,objectFit:"cover",borderRadius:"var(--vsm-radius-sm)",border:"2px dashed var(--vsm-brand)"}}),v.jsx("span",{style:{position:"absolute",bottom:3,left:3,backgroundColor:"#F5A623",color:"#fff",fontSize:"9px",fontWeight:700,padding:"1px 5px",borderRadius:"2px"},children:"Por subir"}),v.jsx("button",{type:"button",onClick:()=>P(ye),style:sb,children:""})]},`p-${ye}`))]}),R&&v.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:[v.jsx("input",{value:x,onChange:ue=>U(ue.target.value),onKeyDown:ue=>{ue.key==="Enter"&&(ue.preventDefault(),w())},placeholder:"https://... pegar URL de imagen",style:{...Yt,flex:1},onFocus:ot,onBlur:lt}),v.jsx("button",{type:"button",onClick:w,disabled:!x.trim(),style:{padding:"9px 14px",borderRadius:"var(--vsm-radius-sm)",border:"none",backgroundColor:x.trim()?"var(--vsm-brand)":"var(--vsm-gray)",color:"#fff",fontSize:"12px",fontWeight:700,cursor:x.trim()?"pointer":"not-allowed",fontFamily:"inherit",whiteSpace:"nowrap"},children:"+ URL"})]}),R&&v.jsxs("div",{children:[v.jsx("p",{style:{fontSize:"11px",color:"var(--vsm-gray-mid)",marginBottom:"4px"},children:"O subir archivo(s):"}),v.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:M,style:{fontSize:"13px",color:"var(--vsm-gray-mid)"}},q)]}),!R&&v.jsxs("p",{style:{fontSize:"12px",color:"var(--vsm-gray-mid)",marginTop:"4px"},children:["Mximo de ",Sh," imgenes alcanzado."]})]}),k&&v.jsx("div",{style:Cd,children:v.jsx("p",{style:Id,children:k})}),v.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end",paddingTop:"0.5rem"},children:[v.jsx("button",{type:"button",onClick:e,disabled:K,style:{padding:"9px 20px",borderRadius:"var(--vsm-radius-sm)",border:"1px solid var(--vsm-gray)",backgroundColor:"var(--vsm-white)",color:"var(--vsm-gray-mid)",fontSize:"13px",fontWeight:600,cursor:"pointer",fontFamily:"inherit"},children:"Cancelar"}),v.jsx("button",{type:"submit",disabled:K,style:{padding:"9px 20px",borderRadius:"var(--vsm-radius-sm)",border:"none",backgroundColor:"var(--vsm-brand)",color:"#fff",fontSize:"13px",fontWeight:700,cursor:K?"not-allowed":"pointer",opacity:K?.75:1,fontFamily:"inherit"},children:K?"Guardando...":"Guardar"})]})]})})]})};async function ab(r){const[e,n]=await Promise.all([js(Ps(Wn(Qe,"subcategories"),Dn("categoryId","==",r),Dn("active","==",!0))),js(Ps(Wn(Qe,"products"),Dn("categoryId","==",r),Dn("active","==",!0)))]);return{activeSubcategories:e.docs.map(s=>({id:s.id,...s.data()})),activeProducts:n.docs.map(s=>({id:s.id,...s.data()}))}}async function mM(r){await Ri(pn(Qe,"categories",r),{active:!1})}async function ob(r,e){const n=Ag(Qe);n.update(pn(Qe,"categories",r),{active:!e}),e&&(await js(Ps(Wn(Qe,"subcategories"),Dn("categoryId","==",r)))).docs.forEach(o=>n.update(o.ref,{active:!1})),await n.commit()}async function pM(r,e){const n=Ag(Qe);n.update(pn(Qe,"categories",r),{name:e,updatedAt:Cs()});const[s,o]=await Promise.all([js(Ps(Wn(Qe,"subcategories"),Dn("categoryId","==",r))),js(Ps(Wn(Qe,"products"),Dn("categoryId","==",r)))]);s.docs.forEach(u=>n.update(u.ref,{categoryName:e})),o.docs.forEach(u=>n.update(u.ref,{categoryName:e})),await n.commit()}async function gM(r){return{activeProducts:(await js(Ps(Wn(Qe,"products"),Dn("subcategoryId","==",r),Dn("active","==",!0)))).docs.map(n=>({id:n.id,...n.data()}))}}async function yM(r){await Ri(pn(Qe,"subcategories",r),{active:!1})}async function vM(r,e){await Ri(pn(Qe,"subcategories",r),{active:!e})}async function _M(r,e){const n=Ag(Qe);n.update(pn(Qe,"subcategories",r),{name:e,updatedAt:Cs()}),(await js(Ps(Wn(Qe,"products"),Dn("subcategoryId","==",r)))).docs.forEach(o=>n.update(o.ref,{subcategoryName:e})),await n.commit()}const Cp=({isOpen:r,onClose:e,onConfirm:n,title:s,message:o,loading:u})=>v.jsxs(xu,{isOpen:r,onClose:e,maxWidth:"420px",children:[v.jsx("h3",{style:{fontWeight:800,fontSize:"1.1rem",color:"var(--vsm-black)",marginBottom:"0.75rem"},children:s}),v.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"14px",marginBottom:"1.5rem",lineHeight:1.6},children:o}),v.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[v.jsx("button",{onClick:e,disabled:u,style:{padding:"9px 20px",borderRadius:"var(--vsm-radius-sm)",border:"1px solid var(--vsm-gray)",backgroundColor:"var(--vsm-white)",color:"var(--vsm-gray-mid)",fontSize:"13px",fontWeight:600,cursor:u?"not-allowed":"pointer",fontFamily:"inherit"},children:"Cancelar"}),v.jsx("button",{onClick:n,disabled:u,style:{padding:"9px 20px",borderRadius:"var(--vsm-radius-sm)",border:"none",backgroundColor:"var(--vsm-error)",color:"#fff",fontSize:"13px",fontWeight:700,cursor:u?"not-allowed":"pointer",opacity:u?.75:1,fontFamily:"inherit"},children:u?"Eliminando...":"Eliminar"})]})]}),Ip=({active:r,onChange:e,disabled:n})=>v.jsx("button",{type:"button",onClick:e,disabled:n,"aria-label":r?"Desactivar":"Activar",style:{width:36,height:20,borderRadius:10,border:"none",backgroundColor:r?"var(--vsm-brand)":"var(--vsm-gray)",position:"relative",cursor:n?"not-allowed":"pointer",flexShrink:0,transition:"background-color 0.2s",opacity:n?.6:1,padding:0},children:v.jsx("span",{style:{position:"absolute",top:2,left:r?18:2,width:16,height:16,borderRadius:"50%",backgroundColor:"#fff",transition:"left 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.25)"}})}),ms={padding:"7px 10px",border:"1px solid var(--vsm-gray)",borderRadius:"var(--vsm-radius-sm)",fontSize:"13px",fontFamily:"inherit",outline:"none",flex:1,color:"var(--vsm-black)",backgroundColor:"var(--vsm-white)"},Rn={padding:"5px 12px",borderRadius:"4px",border:"none",fontSize:"12px",fontWeight:600,cursor:"pointer",fontFamily:"inherit",whiteSpace:"nowrap"},EM=()=>{const{data:r}=Qn("categories",wE("createdAt","asc")),{data:e}=Qn("subcategories",wE("createdAt","asc")),{data:n}=Qn("products"),s=j.useMemo(()=>{const $=new Map;for(const _e of e)$.has(_e.categoryId)||$.set(_e.categoryId,[]),$.get(_e.categoryId).push(_e);return $},[e]),o=j.useMemo(()=>{const $=new Map;for(const _e of e)_e.active&&$.set(_e.categoryId,($.get(_e.categoryId)??0)+1);return $},[e]),u=j.useMemo(()=>{const $=new Map;for(const _e of n)_e.active!==!1&&$.set(_e.categoryId,($.get(_e.categoryId)??0)+1);return $},[n]),h=j.useMemo(()=>{const $=new Map;for(const _e of n)_e.active!==!1&&_e.subcategoryId&&$.set(_e.subcategoryId,($.get(_e.subcategoryId)??0)+1);return $},[n]),[m,p]=j.useState(""),[g,b]=j.useState(""),[S,x]=j.useState(null),[U,q]=j.useState(!1),Y=async()=>{const $=m.trim();if(!$){x("El nombre no puede estar vaco.");return}if(r.some(_e=>_e.name.toLowerCase()===$.toLowerCase())){x("Ya existe una categora con ese nombre.");return}q(!0),x(null);try{await Tp(Wn(Qe,"categories"),{name:$,description:g.trim(),active:!0,createdAt:Cs()}),p(""),b("")}catch{x("Error al agregar. Intenta de nuevo.")}finally{q(!1)}},[k,Z]=j.useState(null),[K,X]=j.useState(""),[oe,se]=j.useState(""),[ge,R]=j.useState(null),[w,C]=j.useState(!1),P=$=>{Z($.id),X($.name),se($.description??""),R(null)},M=async $=>{const _e=K.trim();if(!_e){R("El nombre no puede estar vaco.");return}if(r.some(Je=>Je.id!==$.id&&Je.name.toLowerCase()===_e.toLowerCase())){R("Ya existe una categora con ese nombre.");return}C(!0),R(null);try{_e!==$.name&&await pM($.id,_e),oe.trim()!==($.description??"")&&await Ri(pn(Qe,"categories",$.id),{description:oe.trim()}),Z(null)}catch{R("Error al guardar.")}finally{C(!1)}},[O,I]=j.useState(null),[ue,ye]=j.useState(!1),[Q,ae]=j.useState(null),fe=async $=>{const _e=await ab($.id);_e.activeSubcategories.length>0||_e.activeProducts.length>0?ae({cat:$,subCount:_e.activeSubcategories.length,prodCount:_e.activeProducts.length}):I($)},Ne=async()=>{if(O){ye(!0);try{await mM(O.id),I(null)}catch{}finally{ye(!1)}}},[N,ie]=j.useState(null),[de,ce]=j.useState(null),ve=async $=>{if($.active){const _e=await ab($.id);if(_e.activeSubcategories.length>0||_e.activeProducts.length>0){ie({cat:$,subCount:_e.activeSubcategories.length,prodCount:_e.activeProducts.length});return}}ce($.id);try{await ob($.id,$.active)}catch{}finally{ce(null)}},Me=async()=>{if(!N)return;const{cat:$}=N;ie(null),ce($.id);try{await ob($.id,$.active)}catch{}finally{ce(null)}},[Se,Ut]=j.useState(null),[Ge,Tn]=j.useState({}),[Oi,$r]=j.useState({}),[Zr,kn]=j.useState({}),[lr,Qa]=j.useState({}),ki=async $=>{const _e=(Ge[$.id]??"").trim();if(!_e){kn(Ye=>({...Ye,[$.id]:"El nombre no puede estar vaco."}));return}if((s.get($.id)??[]).some(Ye=>Ye.name.toLowerCase()===_e.toLowerCase())){kn(Ye=>({...Ye,[$.id]:"Ya existe una subcategora con ese nombre."}));return}Qa(Ye=>({...Ye,[$.id]:!0})),kn(Ye=>({...Ye,[$.id]:""}));try{await Tp(Wn(Qe,"subcategories"),{name:_e,description:(Oi[$.id]??"").trim(),categoryId:$.id,categoryName:$.name,active:!0,createdAt:Cs()}),Tn(Ye=>({...Ye,[$.id]:""})),$r(Ye=>({...Ye,[$.id]:""}))}catch{kn(Ye=>({...Ye,[$.id]:"Error al agregar."}))}finally{Qa(Ye=>({...Ye,[$.id]:!1}))}},[an,Mi]=j.useState(null),[vt,At]=j.useState(""),[Mn,Wa]=j.useState(""),[Vi,Ar]=j.useState(null),[Yn,ur]=j.useState(!1),Ft=$=>{Mi($.id),At($.name),Wa($.description??""),Ar(null)},gn=async $=>{const _e=vt.trim();if(!_e){Ar("El nombre no puede estar vaco.");return}if((s.get($.categoryId)??[]).some(Ye=>Ye.id!==$.id&&Ye.name.toLowerCase()===_e.toLowerCase())){Ar("Ya existe una subcategora con ese nombre.");return}ur(!0),Ar(null);try{_e!==$.name&&await _M($.id,_e),Mn.trim()!==($.description??"")&&await Ri(pn(Qe,"subcategories",$.id),{description:Mn.trim()}),Mi(null)}catch{Ar("Error al guardar.")}finally{ur(!1)}},[Nt,Fs]=j.useState(null),[Ya,Hs]=j.useState(!1),[Xt,Xn]=j.useState(null),Vn=async $=>{const _e=await gM($.id);_e.activeProducts.length>0?Xn({sub:$,prodCount:_e.activeProducts.length}):Fs($)},Sn=async()=>{if(Nt){Hs(!0);try{await yM(Nt.id),Fs(null)}catch{}finally{Hs(!1)}}},[wr,Jr]=j.useState(null),Gs=async $=>{Jr($.id);try{await vM($.id,$.active)}catch{}finally{Jr(null)}};return v.jsxs("div",{children:[v.jsx("h3",{style:{fontWeight:700,fontSize:"1rem",color:"var(--vsm-black)",marginBottom:"1.25rem"},children:"Categoras"}),v.jsxs("div",{style:{backgroundColor:"var(--vsm-bg)",borderRadius:"6px",padding:"1rem",marginBottom:"1.5rem",border:"1px solid var(--vsm-gray)"},children:[v.jsx("p",{style:{fontSize:"12px",fontWeight:700,color:"var(--vsm-gray-mid)",marginBottom:"0.6rem"},children:"Nueva categora"}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[v.jsx("input",{value:m,onChange:$=>{p($.target.value),x(null)},onKeyDown:$=>{$.key==="Enter"&&Y()},placeholder:"Nombre *",style:{...ms,minWidth:160},onFocus:ot,onBlur:lt}),v.jsx("input",{value:g,onChange:$=>b($.target.value),placeholder:"Descripcin (opcional)",style:{...ms,minWidth:200},onFocus:ot,onBlur:lt}),v.jsx("button",{onClick:Y,disabled:U,style:{...Rn,backgroundColor:"var(--vsm-brand)",color:"#fff",padding:"7px 16px",opacity:U?.75:1,cursor:U?"not-allowed":"pointer"},children:U?"Agregando...":"Agregar"})]}),S&&v.jsx("p",{style:{color:"var(--vsm-error)",fontSize:"12px",marginTop:"0.4rem"},children:S})]}),r.length===0?v.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"13px"},children:"No hay categoras an."}):v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:r.map($=>{const _e=Se===$.id,Je=k===$.id,Ye=s.get($.id)??[],xr=Ye.length,Rr=o.get($.id)??0,Ks=u.get($.id)??0;return v.jsxs("div",{style:{border:"1px solid var(--vsm-gray)",borderRadius:"6px",overflow:"hidden",opacity:$.active?1:.65},children:[v.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.6rem",padding:"10px 12px",backgroundColor:"var(--vsm-white)"},children:Je?v.jsxs(v.Fragment,{children:[v.jsx("input",{value:K,onChange:Be=>{X(Be.target.value),R(null)},onKeyDown:Be=>{Be.key==="Enter"&&M($)},style:{...ms,maxWidth:200},onFocus:ot,onBlur:lt,autoFocus:!0}),v.jsx("input",{value:oe,onChange:Be=>se(Be.target.value),placeholder:"Descripcin",style:{...ms,maxWidth:220},onFocus:ot,onBlur:lt}),ge&&v.jsx("span",{style:{color:"var(--vsm-error)",fontSize:"11px"},children:ge}),v.jsx("button",{onClick:()=>M($),disabled:w,style:{...Rn,backgroundColor:"var(--vsm-brand)",color:"#fff",opacity:w?.75:1,cursor:w?"not-allowed":"pointer"},children:w?"...":"Guardar"}),v.jsx("button",{onClick:()=>Z(null),style:{...Rn,border:"1px solid var(--vsm-gray)",color:"var(--vsm-gray-mid)",backgroundColor:"transparent",cursor:"pointer"},children:"Cancelar"})]}):v.jsxs(v.Fragment,{children:[v.jsx("button",{type:"button",onClick:()=>Ut(_e?null:$.id),style:{background:"none",border:"none",cursor:"pointer",padding:"2px 4px",fontSize:"12px",color:"var(--vsm-gray-mid)"},title:_e?"Colapsar":"Expandir subcategoras",children:_e?"":""}),v.jsxs("div",{style:{flex:1,minWidth:0},children:[v.jsx("span",{style:{fontSize:"14px",fontWeight:600,color:"var(--vsm-black)"},children:$.name}),$.description&&v.jsx("span",{style:{fontSize:"11px",color:"var(--vsm-gray-mid)",marginLeft:"8px"},children:$.description})]}),v.jsxs("span",{style:{fontSize:"11px",color:"var(--vsm-gray-mid)",whiteSpace:"nowrap"},children:[Rr,"/",xr," subs  ",Ks," prods"]}),v.jsx(Ip,{active:$.active,onChange:()=>ve($),disabled:de===$.id}),v.jsx("button",{onClick:()=>P($),style:{...Rn,border:"1px solid var(--vsm-gray)",color:"var(--vsm-gray-mid)",backgroundColor:"transparent",cursor:"pointer"},children:"Editar"}),v.jsx("button",{onClick:()=>fe($),style:{...Rn,backgroundColor:"var(--vsm-error-bg)",color:"var(--vsm-error)",border:"1px solid var(--vsm-error-border)",cursor:"pointer"},children:"Eliminar"})]})}),_e&&v.jsxs("div",{style:{borderTop:"1px solid var(--vsm-gray)",backgroundColor:"var(--vsm-bg)",padding:"0.75rem 1rem"},children:[Ye.length===0?v.jsx("p",{style:{fontSize:"12px",color:"var(--vsm-gray-mid)",marginBottom:"0.75rem"},children:"Sin subcategoras."}):v.jsx("div",{style:{overflowX:"auto",marginBottom:"0.75rem"},children:v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[v.jsx("thead",{children:v.jsx("tr",{style:{borderBottom:"1px solid var(--vsm-gray)"},children:["Nombre","Descripcin","Prods activos","Activo","Acciones"].map(Be=>v.jsx("th",{style:{textAlign:"left",padding:"5px 8px",fontWeight:700,color:"var(--vsm-gray-mid)",whiteSpace:"nowrap"},children:Be},Be))})}),v.jsx("tbody",{children:Ye.map(Be=>{const $t=an===Be.id,ol=h.get(Be.id)??0;return v.jsx("tr",{style:{borderBottom:"1px solid var(--vsm-gray)",opacity:Be.active?1:.6},children:$t?v.jsx("td",{colSpan:5,style:{padding:"6px 8px"},children:v.jsxs("div",{style:{display:"flex",gap:"0.4rem",flexWrap:"wrap",alignItems:"center"},children:[v.jsx("input",{value:vt,onChange:on=>{At(on.target.value),Ar(null)},onKeyDown:on=>{on.key==="Enter"&&gn(Be)},placeholder:"Nombre",style:{...ms,maxWidth:180},onFocus:ot,onBlur:lt,autoFocus:!0}),v.jsx("input",{value:Mn,onChange:on=>Wa(on.target.value),placeholder:"Descripcin",style:{...ms,maxWidth:200},onFocus:ot,onBlur:lt}),Vi&&v.jsx("span",{style:{color:"var(--vsm-error)",fontSize:"11px"},children:Vi}),v.jsx("button",{onClick:()=>gn(Be),disabled:Yn,style:{...Rn,backgroundColor:"var(--vsm-brand)",color:"#fff",opacity:Yn?.75:1,cursor:Yn?"not-allowed":"pointer"},children:Yn?"...":"Guardar"}),v.jsx("button",{onClick:()=>Mi(null),style:{...Rn,border:"1px solid var(--vsm-gray)",color:"var(--vsm-gray-mid)",backgroundColor:"transparent",cursor:"pointer"},children:"Cancelar"})]})}):v.jsxs(v.Fragment,{children:[v.jsx("td",{style:{padding:"6px 8px",fontWeight:600,color:"var(--vsm-black)"},children:Be.name}),v.jsx("td",{style:{padding:"6px 8px",color:"var(--vsm-gray-mid)"},children:Be.description??""}),v.jsx("td",{style:{padding:"6px 8px",color:"var(--vsm-gray-mid)"},children:ol}),v.jsx("td",{style:{padding:"6px 8px"},children:v.jsx(Ip,{active:Be.active,onChange:()=>Gs(Be),disabled:wr===Be.id})}),v.jsx("td",{style:{padding:"6px 8px"},children:v.jsxs("div",{style:{display:"flex",gap:"0.3rem"},children:[v.jsx("button",{onClick:()=>Ft(Be),style:{...Rn,border:"1px solid var(--vsm-gray)",color:"var(--vsm-gray-mid)",backgroundColor:"transparent",cursor:"pointer",padding:"3px 8px"},children:"Editar"}),v.jsx("button",{onClick:()=>Vn(Be),style:{...Rn,backgroundColor:"var(--vsm-error-bg)",color:"var(--vsm-error)",border:"1px solid var(--vsm-error-border)",cursor:"pointer",padding:"3px 8px"},children:"Eliminar"})]})})]})},Be.id)})})]})}),v.jsxs("div",{style:{borderTop:"1px dashed var(--vsm-gray)",paddingTop:"0.6rem"},children:[v.jsx("p",{style:{fontSize:"11px",fontWeight:700,color:"var(--vsm-gray-mid)",marginBottom:"0.4rem"},children:"Nueva subcategora"}),v.jsxs("div",{style:{display:"flex",gap:"0.4rem",flexWrap:"wrap"},children:[v.jsx("input",{value:Ge[$.id]??"",onChange:Be=>{Tn($t=>({...$t,[$.id]:Be.target.value})),kn($t=>({...$t,[$.id]:""}))},onKeyDown:Be=>{Be.key==="Enter"&&ki($)},placeholder:"Nombre *",style:{...ms,maxWidth:180,fontSize:"12px",padding:"5px 8px"},onFocus:ot,onBlur:lt}),v.jsx("input",{value:Oi[$.id]??"",onChange:Be=>$r($t=>({...$t,[$.id]:Be.target.value})),placeholder:"Descripcin (opcional)",style:{...ms,maxWidth:220,fontSize:"12px",padding:"5px 8px"},onFocus:ot,onBlur:lt}),v.jsx("button",{onClick:()=>ki($),disabled:lr[$.id],style:{...Rn,backgroundColor:"var(--vsm-brand)",color:"#fff",padding:"5px 14px",fontSize:"12px",opacity:lr[$.id]?.75:1,cursor:lr[$.id]?"not-allowed":"pointer"},children:lr[$.id]?"...":"Agregar"})]}),Zr[$.id]&&v.jsx("p",{style:{color:"var(--vsm-error)",fontSize:"11px",marginTop:"0.3rem"},children:Zr[$.id]})]})]})]},$.id)})}),v.jsx(xu,{isOpen:!!Q,onClose:()=>ae(null),maxWidth:"420px",children:Q&&v.jsxs("div",{children:[v.jsxs("h4",{style:{fontWeight:700,fontSize:"1rem",marginBottom:"0.75rem",color:"var(--vsm-black)"},children:['No se puede eliminar "',Q.cat.name,'"']}),v.jsx("p",{style:{fontSize:"13px",color:"var(--vsm-gray-mid)",marginBottom:"0.5rem"},children:"Esta categora tiene dependencias activas:"}),v.jsxs("ul",{style:{fontSize:"13px",color:"var(--vsm-black)",paddingLeft:"1.25rem",marginBottom:"1rem"},children:[Q.subCount>0&&v.jsxs("li",{children:[Q.subCount," subcategora",Q.subCount>1?"s":""," activa",Q.subCount>1?"s":""]}),Q.prodCount>0&&v.jsxs("li",{children:[Q.prodCount," producto",Q.prodCount>1?"s":""," activo",Q.prodCount>1?"s":""]})]}),v.jsx("p",{style:{fontSize:"12px",color:"var(--vsm-gray-mid)"},children:"Desactiva o reasigna los productos y subcategoras antes de eliminar la categora."}),v.jsx("div",{style:{textAlign:"right",marginTop:"1.25rem"},children:v.jsx("button",{onClick:()=>ae(null),style:{...Rn,border:"1px solid var(--vsm-gray)",color:"var(--vsm-gray-mid)",backgroundColor:"transparent",cursor:"pointer",padding:"7px 18px"},children:"Entendido"})})]})}),v.jsx(Cp,{isOpen:!!O,onClose:()=>I(null),onConfirm:Ne,title:"Eliminar categora",message:`Marcar "${O?.name}" como eliminada? Esta accin ocultar la categora del catlogo.`,loading:ue}),v.jsx(xu,{isOpen:!!N,onClose:()=>ie(null),maxWidth:"420px",children:N&&v.jsxs("div",{children:[v.jsxs("h4",{style:{fontWeight:700,fontSize:"1rem",marginBottom:"0.75rem",color:"var(--vsm-black)"},children:['Desactivar "',N.cat.name,'"']}),v.jsx("p",{style:{fontSize:"13px",color:"var(--vsm-gray-mid)",marginBottom:"0.5rem"},children:"Al desactivar esta categora tambin se desactivarn:"}),v.jsxs("ul",{style:{fontSize:"13px",color:"var(--vsm-black)",paddingLeft:"1.25rem",marginBottom:"1rem"},children:[N.subCount>0&&v.jsxs("li",{children:[N.subCount," subcategora",N.subCount>1?"s":""," activa",N.subCount>1?"s":""]}),N.prodCount>0&&v.jsxs("li",{children:[N.prodCount," producto",N.prodCount>1?"s":""," activo",N.prodCount>1?"s":""," (no se desactivan automticamente)"]})]}),v.jsx("p",{style:{fontSize:"12px",color:"var(--vsm-gray-mid)",marginBottom:"1rem"},children:"Continuar?"}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[v.jsx("button",{onClick:()=>ie(null),style:{...Rn,border:"1px solid var(--vsm-gray)",color:"var(--vsm-gray-mid)",backgroundColor:"transparent",cursor:"pointer",padding:"7px 18px"},children:"Cancelar"}),v.jsx("button",{onClick:Me,style:{...Rn,backgroundColor:"var(--vsm-brand)",color:"#fff",cursor:"pointer",padding:"7px 18px"},children:"Desactivar"})]})]})}),v.jsx(xu,{isOpen:!!Xt,onClose:()=>Xn(null),maxWidth:"400px",children:Xt&&v.jsxs("div",{children:[v.jsxs("h4",{style:{fontWeight:700,fontSize:"1rem",marginBottom:"0.75rem",color:"var(--vsm-black)"},children:['No se puede eliminar "',Xt.sub.name,'"']}),v.jsxs("p",{style:{fontSize:"13px",color:"var(--vsm-gray-mid)",marginBottom:"0.5rem"},children:["Esta subcategora tiene ",Xt.prodCount," producto",Xt.prodCount>1?"s":""," activo",Xt.prodCount>1?"s":"","."]}),v.jsx("p",{style:{fontSize:"12px",color:"var(--vsm-gray-mid)"},children:"Desactiva o reasigna los productos antes de eliminar la subcategora."}),v.jsx("div",{style:{textAlign:"right",marginTop:"1.25rem"},children:v.jsx("button",{onClick:()=>Xn(null),style:{...Rn,border:"1px solid var(--vsm-gray)",color:"var(--vsm-gray-mid)",backgroundColor:"transparent",cursor:"pointer",padding:"7px 18px"},children:"Entendido"})})]})}),v.jsx(Cp,{isOpen:!!Nt,onClose:()=>Fs(null),onConfirm:Sn,title:"Eliminar subcategora",message:`Marcar "${Nt?.name}" como eliminada? Esta accin ocultar la subcategora del catlogo.`,loading:Ya})]})},Wm=10,bM=()=>{const{data:r}=Qn("products"),{data:e}=Qn("categories"),{data:n}=Qn("subcategories"),[s,o]=j.useState("productos"),[u,h]=j.useState(1);j.useEffect(()=>{h(1)},[r]);const[m,p]=j.useState(!1),[g,b]=j.useState(),[S,x]=j.useState(null),[U,q]=j.useState(!1),[Y,k]=j.useState(null),Z=j.useMemo(()=>new Map(e.map(O=>[O.id,O.name])),[e]),K=j.useMemo(()=>new Map(n.map(O=>[O.id,O.name])),[n]),X=O=>Z.get(O)??"",oe=O=>O?K.get(O)??"":"",se=Math.max(1,Math.ceil(r.length/Wm)),ge=r.slice((u-1)*Wm,u*Wm),R=async()=>{if(S){q(!0);try{await Ri(pn(Qe,"products",S.id),{active:!1}),x(null)}catch{}finally{q(!1)}}},w=async O=>{k(O.id);try{await Ri(pn(Qe,"products",O.id),{active:O.active===!1})}catch{}finally{k(null)}},C=()=>{b(void 0),p(!0)},P=O=>{b(O),p(!0)},M=O=>({padding:"7px 18px",border:"none",borderBottom:O?"2px solid var(--vsm-brand)":"2px solid transparent",backgroundColor:"transparent",color:O?"var(--vsm-brand)":"var(--vsm-gray-mid)",fontWeight:O?700:600,fontSize:"13px",cursor:"pointer",fontFamily:"inherit"});return v.jsxs("div",{children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[v.jsx("h2",{style:{fontWeight:800,fontSize:"1.1rem",color:"var(--vsm-black)"},children:"Productos"}),s==="productos"&&v.jsx("button",{onClick:C,style:{backgroundColor:"var(--vsm-brand)",color:"#fff",border:"none",borderRadius:"5px",padding:"8px 18px",fontSize:"13px",fontWeight:700,cursor:"pointer",fontFamily:"inherit"},children:"+ Nuevo Producto"})]}),v.jsxs("div",{style:{borderBottom:"1px solid var(--vsm-gray)",marginBottom:"1.25rem",display:"flex"},children:[v.jsx("button",{style:M(s==="productos"),onClick:()=>o("productos"),children:"Productos"}),v.jsx("button",{style:M(s==="categorias"),onClick:()=>o("categorias"),children:"Categoras"})]}),s==="categorias"?v.jsx(EM,{}):v.jsxs(v.Fragment,{children:[r.length===0?v.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"13px"},children:"No hay productos an. Crea el primero."}):v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{overflowX:"auto"},children:v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[v.jsx("thead",{children:v.jsx("tr",{style:{borderBottom:"2px solid var(--vsm-gray)"},children:["Imagen","Nombre","Categora","Subcategora","Precio","Stock","Activo","Acciones"].map(O=>v.jsx("th",{style:{textAlign:"left",padding:"8px 10px",fontWeight:700,color:"var(--vsm-gray-mid)",whiteSpace:"nowrap"},children:O},O))})}),v.jsx("tbody",{children:ge.map(O=>{const I=O.active!==!1;return v.jsxs("tr",{style:{borderBottom:"1px solid var(--vsm-gray)",opacity:I?1:.55},children:[v.jsx("td",{style:{padding:"8px 10px"},children:O.imageUrl?v.jsx("img",{src:O.imageUrl,alt:O.name,style:{width:48,height:48,objectFit:"cover",borderRadius:"4px",border:"1px solid var(--vsm-gray)"}}):v.jsx("span",{style:{fontSize:"1.5rem"},children:""})}),v.jsx("td",{style:{padding:"8px 10px",fontWeight:600,color:"var(--vsm-black)"},children:O.name}),v.jsx("td",{style:{padding:"8px 10px",color:"var(--vsm-gray-mid)"},children:X(O.categoryId)}),v.jsx("td",{style:{padding:"8px 10px",color:"var(--vsm-gray-mid)"},children:oe(O.subcategoryId)}),v.jsx("td",{style:{padding:"8px 10px",color:"var(--vsm-black)"},children:Lg(O.price)}),v.jsx("td",{style:{padding:"8px 10px",fontWeight:O.stock===0?700:400,color:O.stock===0?"var(--vsm-error)":"var(--vsm-black)"},children:O.stock}),v.jsx("td",{style:{padding:"8px 10px"},children:v.jsx(Ip,{active:I,onChange:()=>w(O),disabled:Y===O.id})}),v.jsx("td",{style:{padding:"8px 10px"},children:v.jsxs("div",{style:{display:"flex",gap:"0.4rem"},children:[v.jsx("button",{onClick:()=>P(O),style:lb("var(--vsm-gray)","var(--vsm-black)"),children:"Editar"}),v.jsx("button",{onClick:()=>x(O),style:lb("var(--vsm-error-bg)","var(--vsm-error)"),children:"Desactivar"})]})})]},O.id)})})]})}),se>1&&v.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"1rem",alignItems:"center"},children:[v.jsx("button",{onClick:()=>h(O=>Math.max(1,O-1)),disabled:u===1,style:ub(u===1),children:" Ant"}),v.jsxs("span",{style:{fontSize:"12px",color:"var(--vsm-gray-mid)"},children:["Pg ",u," / ",se]}),v.jsx("button",{onClick:()=>h(O=>Math.min(se,O+1)),disabled:u===se,style:ub(u===se),children:"Sig "})]})]}),v.jsx(fM,{isOpen:m,onClose:()=>p(!1),product:g,categories:e,subcategories:n}),v.jsx(Cp,{isOpen:!!S,onClose:()=>x(null),onConfirm:R,title:"Desactivar producto",message:`"${S?.name}" dejar de aparecer en el catlogo. Puedes reactivarlo desde la columna Activo.`,loading:U})]})]})},lb=(r,e)=>({padding:"4px 10px",borderRadius:"4px",border:"none",backgroundColor:r,color:e,fontSize:"12px",fontWeight:600,cursor:"pointer",fontFamily:"inherit"}),ub=r=>({padding:"5px 12px",borderRadius:"4px",border:"1px solid var(--vsm-gray)",backgroundColor:r?"var(--vsm-gray)":"var(--vsm-white)",color:r?"var(--vsm-gray-mid)":"var(--vsm-black)",fontSize:"12px",fontWeight:600,cursor:r?"not-allowed":"pointer",fontFamily:"inherit"}),E1=pn(Qe,"settings","general");async function TM(){const r=await hS(E1);return r.exists()?r.data():null}async function SM(r){const e=r.name.split(".").pop(),n=f1(m1,`logos/store-logo.${e}`);return await h1(n,r),d1(n)}async function AM(r,e){await Z2(E1,{...r,logoUrl:e,updatedAt:Cs()},{merge:!0})}const cb={storeName:"",description:"",email:"",phone:"",social:{instagram:"",facebook:"",whatsapp:"",tiktok:""}},wM=()=>{const r=_1(),[e,n]=j.useState(cb),[s,o]=j.useState(""),[u,h]=j.useState(null),[m,p]=j.useState(null),[g,b]=j.useState(0),[S,x]=j.useState(!1),[U,q]=j.useState(!0),[Y,k]=j.useState(!1),[Z,K]=j.useState(null);j.useEffect(()=>{TM().then(R=>{R&&(n({storeName:R.storeName??"",description:R.description??"",email:R.email??"",phone:R.phone??"",social:R.social??cb.social}),o(R.logoUrl??"")),q(!1)}).catch(()=>q(!1))},[]);const X=(R,w)=>n(C=>({...C,[R]:w})),oe=(R,w)=>n(C=>({...C,social:{...C.social,[R]:w}})),se=R=>{r();const w=R.target.files?.[0];w&&(h(w),p(URL.createObjectURL(w)))},ge=async R=>{R.preventDefault(),x(!0),K(null),k(!1);try{let w=s;u&&(w=await SM(u),o(w),h(null),p(null),b(C=>C+1)),await AM(e,w),k(!0),setTimeout(()=>k(!1),3e3)}catch{K("Error al guardar. Intenta de nuevo.")}finally{x(!1)}};return U?v.jsx("div",{style:{color:"var(--vsm-gray-mid)",fontSize:"13px"},children:"Cargando configuracin..."}):v.jsxs("div",{children:[v.jsx("h2",{style:{fontWeight:800,fontSize:"1.1rem",color:"var(--vsm-black)",marginBottom:"1.25rem"},children:"Configuracin de la tienda"}),v.jsx("form",{onSubmit:ge,noValidate:!0,children:v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem",maxWidth:"540px"},children:[v.jsxs("div",{children:[v.jsx("label",{style:Vt,children:"Logo de la tienda"}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[(m||s)&&v.jsx("div",{style:{position:"relative",width:72,height:72},children:v.jsx("img",{src:m??s,alt:"Logo",style:{width:72,height:72,objectFit:"contain",borderRadius:"6px",border:"1px solid var(--vsm-gray)"}})}),v.jsx("input",{type:"file",accept:"image/*",onChange:se,style:{fontSize:"13px",color:"var(--vsm-gray-mid)"}},g)]}),u&&v.jsxs("p",{style:{fontSize:"12px",color:"var(--vsm-gray-mid)"},children:["Nuevo logo: ",u.name]})]}),v.jsxs("div",{children:[v.jsx("label",{style:Vt,children:"Nombre de la tienda"}),v.jsx("input",{value:e.storeName,onChange:R=>X("storeName",R.target.value),style:Yt,onFocus:ot,onBlur:lt})]}),v.jsxs("div",{children:[v.jsx("label",{style:Vt,children:"Descripcin"}),v.jsx("textarea",{value:e.description,onChange:R=>n(w=>({...w,description:R.target.value})),rows:3,style:{...Yt,resize:"vertical"},onFocus:ot,onBlur:lt})]}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[v.jsxs("div",{children:[v.jsx("label",{style:Vt,children:"Correo de contacto"}),v.jsx("input",{value:e.email,onChange:R=>X("email",R.target.value),type:"email",style:Yt,onFocus:ot,onBlur:lt})]}),v.jsxs("div",{children:[v.jsx("label",{style:Vt,children:"Telfono / WhatsApp"}),v.jsx("input",{value:e.phone,onChange:R=>X("phone",R.target.value),style:Yt,onFocus:ot,onBlur:lt})]})]}),v.jsxs("div",{children:[v.jsx("label",{style:{...Vt,marginBottom:"0.75rem"},children:"Redes sociales"}),v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.6rem"},children:["instagram","facebook","whatsapp","tiktok"].map(R=>v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx("span",{style:{fontSize:"12px",width:80,color:"var(--vsm-gray-mid)",fontWeight:600,textTransform:"capitalize"},children:R}),v.jsx("input",{value:e.social[R],onChange:w=>oe(R,w.target.value),placeholder:`URL de ${R}`,style:{...Yt,flex:1},onFocus:ot,onBlur:lt})]},R))})]}),Z&&v.jsx("div",{style:Cd,children:v.jsx("p",{style:Id,children:Z})}),Y&&v.jsx("div",{style:Qk,children:v.jsx("p",{style:Wk,children:"Configuracin guardada correctamente."})}),v.jsx("button",{type:"submit",disabled:S,style:{alignSelf:"flex-start",backgroundColor:"var(--vsm-brand)",color:"#fff",border:"none",borderRadius:"var(--vsm-radius-sm)",padding:"10px 24px",fontSize:"13px",fontWeight:700,cursor:S?"not-allowed":"pointer",opacity:S?.75:1,fontFamily:"inherit"},children:S?"Guardando...":"Guardar cambios"})]})})]})},hb=[{id:"dashboard",label:"Dashboard"},{id:"productos",label:"Productos"},{id:"configuracion",label:"Configuracin"}],xM=()=>{const{user:r,logout:e}=zg(),n=qa(),[s,o]=j.useState("dashboard"),u=async()=>{await e(),n("/Login")},h=r?.displayName??r?.email??"Admin",m=p=>({display:"block",width:"100%",textAlign:"left",padding:"10px 14px",borderRadius:"6px",border:"none",backgroundColor:s===p.id?"var(--vsm-brand)":"transparent",color:s===p.id?"#fff":"var(--vsm-gray-mid)",fontWeight:s===p.id?700:600,fontSize:"13px",cursor:"pointer",fontFamily:"inherit",transition:"background-color 0.15s, color 0.15s"});return v.jsxs("div",{style:{minHeight:"calc(100vh - 96px)",padding:"2rem 1rem"},className:"max-w-6xl w-full mx-auto",children:[v.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",paddingBottom:"1.25rem",borderBottom:"1px solid var(--vsm-gray)",flexWrap:"wrap",gap:"1rem"},children:[v.jsxs("div",{children:[v.jsx("h1",{style:{fontWeight:800,fontSize:"1.4rem",color:"var(--vsm-black)"},children:"Panel de Administracin"}),v.jsxs("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"13px",marginTop:"4px"},children:["Hola, ",v.jsx("strong",{style:{color:"var(--vsm-black)"},children:h})]})]}),v.jsx("button",{onClick:u,style:{backgroundColor:"var(--vsm-black)",color:"#fff",padding:"10px 20px",borderRadius:"5px",border:"none",fontSize:"12px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.07em",cursor:"pointer",fontFamily:"inherit",whiteSpace:"nowrap"},className:"hover:opacity-80 transition-opacity",children:"Cerrar sesin"})]}),v.jsxs("div",{style:{display:"flex",gap:"1.5rem",marginTop:"1.5rem",flexWrap:"wrap"},children:[v.jsx("nav",{className:"hidden md:flex",style:{flexDirection:"column",width:200,flexShrink:0,gap:"0.25rem"},children:hb.map(p=>v.jsx("button",{onClick:()=>o(p.id),style:m(p),children:p.label},p.id))}),v.jsx("nav",{className:"flex md:hidden",style:{width:"100%",borderBottom:"1px solid var(--vsm-gray)",paddingBottom:"0.5rem",gap:"0.25rem"},children:hb.map(p=>v.jsx("button",{onClick:()=>o(p.id),style:{flex:1,padding:"8px 4px",borderRadius:"5px",border:"none",backgroundColor:s===p.id?"var(--vsm-brand)":"transparent",color:s===p.id?"#fff":"var(--vsm-gray-mid)",fontWeight:s===p.id?700:600,fontSize:"12px",cursor:"pointer",fontFamily:"inherit"},children:p.label},p.id))}),v.jsxs("main",{style:{flex:1,minWidth:0},children:[s==="dashboard"&&v.jsx(dM,{}),s==="productos"&&v.jsx(bM,{}),s==="configuracion"&&v.jsx(wM,{})]})]})]})},RM=({children:r})=>{const{user:e,loading:n}=zg();return n?v.jsx("p",{children:"cargando..."}):e?v.jsx(v.Fragment,{children:r}):v.jsx(Ww,{to:"/Login"})};function CM(){return v.jsxs(ix,{children:[v.jsx(tM,{}),v.jsx(sM,{children:v.jsxs(Xw,{children:[v.jsx(ps,{path:"/",element:v.jsx(Kk,{})}),v.jsx(ps,{path:"/juguetes",element:v.jsx(cM,{})}),v.jsx(ps,{path:"/producto/:id",element:v.jsx(lM,{})}),v.jsx(ps,{path:"/Login",element:v.jsx(Yk,{})}),v.jsx(ps,{path:"/Register",element:v.jsx(Xk,{})}),v.jsx(ps,{path:"/Admin",element:v.jsx(RM,{children:v.jsx(xM,{})})}),v.jsx(ps,{path:"*",element:v.jsx("p",{children:"Not Found"})})]})}),v.jsx(rM,{})]})}sw.createRoot(document.getElementById("root")).render(v.jsx(j.StrictMode,{children:v.jsx(Zk,{children:v.jsx(CM,{})})}));
