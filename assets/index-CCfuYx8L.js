function iw(r,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const c=Object.getOwnPropertyDescriptor(s,o);c&&Object.defineProperty(r,o,c.get?c:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function sw(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Om={exports:{}},cc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o0;function aw(){if(o0)return cc;o0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,c){var h=null;if(c!==void 0&&(h=""+c),o.key!==void 0&&(h=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:r,type:s,key:h,ref:o!==void 0?o:null,props:c}}return cc.Fragment=e,cc.jsx=n,cc.jsxs=n,cc}var l0;function ow(){return l0||(l0=1,Om.exports=aw()),Om.exports}var g=ow(),km={exports:{}},Oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c0;function lw(){if(c0)return Oe;c0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),T=Symbol.iterator;function A(N){return N===null||typeof N!="object"?null:(N=T&&N[T]||N["@@iterator"],typeof N=="function"?N:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,Y={};function k(N,ie,de){this.props=N,this.context=ie,this.refs=Y,this.updater=de||P}k.prototype.isReactComponent={},k.prototype.setState=function(N,ie){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,ie,"setState")},k.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function Z(){}Z.prototype=k.prototype;function te(N,ie,de){this.props=N,this.context=ie,this.refs=Y,this.updater=de||P}var H=te.prototype=new Z;H.constructor=te,F(H,k.prototype),H.isPureReactComponent=!0;var se=Array.isArray,ae={H:null,A:null,T:null,S:null,V:null},ge=Object.prototype.hasOwnProperty;function R(N,ie,de,ue,ve,Me){return de=Me.ref,{$$typeof:r,type:N,key:ie,ref:de!==void 0?de:null,props:Me}}function w(N,ie){return R(N.type,ie,void 0,void 0,void 0,N.props)}function C(N){return typeof N=="object"&&N!==null&&N.$$typeof===r}function U(N){var ie={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(de){return ie[de]})}var M=/\/+/g;function O(N,ie){return typeof N=="object"&&N!==null&&N.key!=null?U(""+N.key):ie.toString(36)}function I(){}function ce(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(I,I):(N.status="pending",N.then(function(ie){N.status==="pending"&&(N.status="fulfilled",N.value=ie)},function(ie){N.status==="pending"&&(N.status="rejected",N.reason=ie)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function ye(N,ie,de,ue,ve){var Me=typeof N;(Me==="undefined"||Me==="boolean")&&(N=null);var Se=!1;if(N===null)Se=!0;else switch(Me){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(N.$$typeof){case r:case e:Se=!0;break;case b:return Se=N._init,ye(Se(N._payload),ie,de,ue,ve)}}if(Se)return ve=ve(N),Se=ue===""?"."+O(N,0):ue,se(ve)?(de="",Se!=null&&(de=Se.replace(M,"$&/")+"/"),ye(ve,ie,de,"",function(xn){return xn})):ve!=null&&(C(ve)&&(ve=w(ve,de+(ve.key==null||N&&N.key===ve.key?"":(""+ve.key).replace(M,"$&/")+"/")+Se)),ie.push(ve)),1;Se=0;var Ut=ue===""?".":ue+":";if(se(N))for(var We=0;We<N.length;We++)ue=N[We],Me=Ut+O(ue,We),Se+=ye(ue,ie,de,Me,ve);else if(We=A(N),typeof We=="function")for(N=We.call(N),We=0;!(ue=N.next()).done;)ue=ue.value,Me=Ut+O(ue,We++),Se+=ye(ue,ie,de,Me,ve);else if(Me==="object"){if(typeof N.then=="function")return ye(ce(N),ie,de,ue,ve);throw ie=String(N),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Se}function K(N,ie,de){if(N==null)return N;var ue=[],ve=0;return ye(N,ue,"","",function(Me){return ie.call(de,Me,ve++)}),ue}function oe(N){if(N._status===-1){var ie=N._result;ie=ie(),ie.then(function(de){(N._status===0||N._status===-1)&&(N._status=1,N._result=de)},function(de){(N._status===0||N._status===-1)&&(N._status=2,N._result=de)}),N._status===-1&&(N._status=0,N._result=ie)}if(N._status===1)return N._result.default;throw N._result}var fe=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function Ne(){}return Oe.Children={map:K,forEach:function(N,ie,de){K(N,function(){ie.apply(this,arguments)},de)},count:function(N){var ie=0;return K(N,function(){ie++}),ie},toArray:function(N){return K(N,function(ie){return ie})||[]},only:function(N){if(!C(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Oe.Component=k,Oe.Fragment=n,Oe.Profiler=o,Oe.PureComponent=te,Oe.StrictMode=s,Oe.Suspense=p,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ae,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(N){return ae.H.useMemoCache(N)}},Oe.cache=function(N){return function(){return N.apply(null,arguments)}},Oe.cloneElement=function(N,ie,de){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var ue=F({},N.props),ve=N.key,Me=void 0;if(ie!=null)for(Se in ie.ref!==void 0&&(Me=void 0),ie.key!==void 0&&(ve=""+ie.key),ie)!ge.call(ie,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&ie.ref===void 0||(ue[Se]=ie[Se]);var Se=arguments.length-2;if(Se===1)ue.children=de;else if(1<Se){for(var Ut=Array(Se),We=0;We<Se;We++)Ut[We]=arguments[We+2];ue.children=Ut}return R(N.type,ve,void 0,void 0,Me,ue)},Oe.createContext=function(N){return N={$$typeof:h,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:c,_context:N},N},Oe.createElement=function(N,ie,de){var ue,ve={},Me=null;if(ie!=null)for(ue in ie.key!==void 0&&(Me=""+ie.key),ie)ge.call(ie,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(ve[ue]=ie[ue]);var Se=arguments.length-2;if(Se===1)ve.children=de;else if(1<Se){for(var Ut=Array(Se),We=0;We<Se;We++)Ut[We]=arguments[We+2];ve.children=Ut}if(N&&N.defaultProps)for(ue in Se=N.defaultProps,Se)ve[ue]===void 0&&(ve[ue]=Se[ue]);return R(N,Me,void 0,void 0,null,ve)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(N){return{$$typeof:m,render:N}},Oe.isValidElement=C,Oe.lazy=function(N){return{$$typeof:b,_payload:{_status:-1,_result:N},_init:oe}},Oe.memo=function(N,ie){return{$$typeof:y,type:N,compare:ie===void 0?null:ie}},Oe.startTransition=function(N){var ie=ae.T,de={};ae.T=de;try{var ue=N(),ve=ae.S;ve!==null&&ve(de,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(Ne,fe)}catch(Me){fe(Me)}finally{ae.T=ie}},Oe.unstable_useCacheRefresh=function(){return ae.H.useCacheRefresh()},Oe.use=function(N){return ae.H.use(N)},Oe.useActionState=function(N,ie,de){return ae.H.useActionState(N,ie,de)},Oe.useCallback=function(N,ie){return ae.H.useCallback(N,ie)},Oe.useContext=function(N){return ae.H.useContext(N)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(N,ie){return ae.H.useDeferredValue(N,ie)},Oe.useEffect=function(N,ie,de){var ue=ae.H;if(typeof de=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ue.useEffect(N,ie)},Oe.useId=function(){return ae.H.useId()},Oe.useImperativeHandle=function(N,ie,de){return ae.H.useImperativeHandle(N,ie,de)},Oe.useInsertionEffect=function(N,ie){return ae.H.useInsertionEffect(N,ie)},Oe.useLayoutEffect=function(N,ie){return ae.H.useLayoutEffect(N,ie)},Oe.useMemo=function(N,ie){return ae.H.useMemo(N,ie)},Oe.useOptimistic=function(N,ie){return ae.H.useOptimistic(N,ie)},Oe.useReducer=function(N,ie,de){return ae.H.useReducer(N,ie,de)},Oe.useRef=function(N){return ae.H.useRef(N)},Oe.useState=function(N){return ae.H.useState(N)},Oe.useSyncExternalStore=function(N,ie,de){return ae.H.useSyncExternalStore(N,ie,de)},Oe.useTransition=function(){return ae.H.useTransition()},Oe.version="19.1.0",Oe}var u0;function Up(){return u0||(u0=1,km.exports=lw()),km.exports}var j=Up();const _r=sw(j),cw=iw({__proto__:null,default:_r},[j]);var Mm={exports:{}},uc={},Pm={exports:{}},jm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0;function uw(){return h0||(h0=1,function(r){function e(K,oe){var fe=K.length;K.push(oe);e:for(;0<fe;){var Ne=fe-1>>>1,N=K[Ne];if(0<o(N,oe))K[Ne]=oe,K[fe]=N,fe=Ne;else break e}}function n(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var oe=K[0],fe=K.pop();if(fe!==oe){K[0]=fe;e:for(var Ne=0,N=K.length,ie=N>>>1;Ne<ie;){var de=2*(Ne+1)-1,ue=K[de],ve=de+1,Me=K[ve];if(0>o(ue,fe))ve<N&&0>o(Me,ue)?(K[Ne]=Me,K[ve]=fe,Ne=ve):(K[Ne]=ue,K[de]=fe,Ne=de);else if(ve<N&&0>o(Me,fe))K[Ne]=Me,K[ve]=fe,Ne=ve;else break e}}return oe}function o(K,oe){var fe=K.sortIndex-oe.sortIndex;return fe!==0?fe:K.id-oe.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var p=[],y=[],b=1,T=null,A=3,P=!1,F=!1,Y=!1,k=!1,Z=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function se(K){for(var oe=n(y);oe!==null;){if(oe.callback===null)s(y);else if(oe.startTime<=K)s(y),oe.sortIndex=oe.expirationTime,e(p,oe);else break;oe=n(y)}}function ae(K){if(Y=!1,se(K),!F)if(n(p)!==null)F=!0,ge||(ge=!0,O());else{var oe=n(y);oe!==null&&ye(ae,oe.startTime-K)}}var ge=!1,R=-1,w=5,C=-1;function U(){return k?!0:!(r.unstable_now()-C<w)}function M(){if(k=!1,ge){var K=r.unstable_now();C=K;var oe=!0;try{e:{F=!1,Y&&(Y=!1,te(R),R=-1),P=!0;var fe=A;try{t:{for(se(K),T=n(p);T!==null&&!(T.expirationTime>K&&U());){var Ne=T.callback;if(typeof Ne=="function"){T.callback=null,A=T.priorityLevel;var N=Ne(T.expirationTime<=K);if(K=r.unstable_now(),typeof N=="function"){T.callback=N,se(K),oe=!0;break t}T===n(p)&&s(p),se(K)}else s(p);T=n(p)}if(T!==null)oe=!0;else{var ie=n(y);ie!==null&&ye(ae,ie.startTime-K),oe=!1}}break e}finally{T=null,A=fe,P=!1}oe=void 0}}finally{oe?O():ge=!1}}}var O;if(typeof H=="function")O=function(){H(M)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,ce=I.port2;I.port1.onmessage=M,O=function(){ce.postMessage(null)}}else O=function(){Z(M,0)};function ye(K,oe){R=Z(function(){K(r.unstable_now())},oe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(K){K.callback=null},r.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<K?Math.floor(1e3/K):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_next=function(K){switch(A){case 1:case 2:case 3:var oe=3;break;default:oe=A}var fe=A;A=oe;try{return K()}finally{A=fe}},r.unstable_requestPaint=function(){k=!0},r.unstable_runWithPriority=function(K,oe){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var fe=A;A=K;try{return oe()}finally{A=fe}},r.unstable_scheduleCallback=function(K,oe,fe){var Ne=r.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Ne+fe:Ne):fe=Ne,K){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=fe+N,K={id:b++,callback:oe,priorityLevel:K,startTime:fe,expirationTime:N,sortIndex:-1},fe>Ne?(K.sortIndex=fe,e(y,K),n(p)===null&&K===n(y)&&(Y?(te(R),R=-1):Y=!0,ye(ae,fe-Ne))):(K.sortIndex=N,e(p,K),F||P||(F=!0,ge||(ge=!0,O()))),K},r.unstable_shouldYield=U,r.unstable_wrapCallback=function(K){var oe=A;return function(){var fe=A;A=oe;try{return K.apply(this,arguments)}finally{A=fe}}}}(jm)),jm}var d0;function hw(){return d0||(d0=1,Pm.exports=uw()),Pm.exports}var Vm={exports:{}},dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f0;function dw(){if(f0)return dn;f0=1;var r=Up();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(p,y,b){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:p,containerInfo:y,implementation:b}}var h=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,dn.createPortal=function(p,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(p,y,null,b)},dn.flushSync=function(p){var y=h.T,b=s.p;try{if(h.T=null,s.p=2,p)return p()}finally{h.T=y,s.p=b,s.d.f()}},dn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(p,y))},dn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},dn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var b=y.as,T=m(b,y.crossOrigin),A=typeof y.integrity=="string"?y.integrity:void 0,P=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?s.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:T,integrity:A,fetchPriority:P}):b==="script"&&s.d.X(p,{crossOrigin:T,integrity:A,fetchPriority:P,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},dn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=m(y.as,y.crossOrigin);s.d.M(p,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(p)},dn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,T=m(b,y.crossOrigin);s.d.L(p,b,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},dn.preloadModule=function(p,y){if(typeof p=="string")if(y){var b=m(y.as,y.crossOrigin);s.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(p)},dn.requestFormReset=function(p){s.d.r(p)},dn.unstable_batchedUpdates=function(p,y){return p(y)},dn.useFormState=function(p,y,b){return h.H.useFormState(p,y,b)},dn.useFormStatus=function(){return h.H.useHostTransitionStatus()},dn.version="19.1.0",dn}var m0;function bE(){if(m0)return Vm.exports;m0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Vm.exports=dw(),Vm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p0;function fw(){if(p0)return uc;p0=1;var r=hw(),e=Up(),n=bE();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function h(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(c(t)!==t)throw Error(s(188))}function p(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return m(d),t;if(f===l)return m(d),i;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=d,l=f;else{for(var E=!1,S=d.child;S;){if(S===a){E=!0,a=d,l=f;break}if(S===l){E=!0,l=d,a=f;break}S=S.sibling}if(!E){for(S=f.child;S;){if(S===a){E=!0,a=f,l=d;break}if(S===l){E=!0,l=f,a=d;break}S=S.sibling}if(!E)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function y(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=y(t),i!==null)return i;t=t.sibling}return null}var b=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),Z=Symbol.for("react.provider"),te=Symbol.for("react.consumer"),H=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function O(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function ce(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case F:return"Fragment";case k:return"Profiler";case Y:return"StrictMode";case ae:return"Suspense";case ge:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case P:return"Portal";case H:return(t.displayName||"Context")+".Provider";case te:return(t._context.displayName||"Context")+".Consumer";case se:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return i=t.displayName||null,i!==null?i:ce(t.type)||"Memo";case w:i=t._payload,t=t._init;try{return ce(t(i))}catch{}}return null}var ye=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},Ne=[],N=-1;function ie(t){return{current:t}}function de(t){0>N||(t.current=Ne[N],Ne[N]=null,N--)}function ue(t,i){N++,Ne[N]=t.current,t.current=i}var ve=ie(null),Me=ie(null),Se=ie(null),Ut=ie(null);function We(t,i){switch(ue(Se,i),ue(Me,t),ue(ve,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?P_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=P_(i),t=j_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}de(ve),ue(ve,t)}function xn(){de(ve),de(Me),de(Se)}function Pi(t){t.memoizedState!==null&&ue(Ut,t);var i=ve.current,a=j_(i,t.type);i!==a&&(ue(Me,t),ue(ve,a))}function $r(t){Me.current===t&&(de(ve),de(Me)),Ut.current===t&&(de(Ut),ic._currentValue=fe)}var Zr=Object.prototype.hasOwnProperty,Pn=r.unstable_scheduleCallback,lr=r.unstable_cancelCallback,Ka=r.unstable_shouldYield,ji=r.unstable_requestPaint,ln=r.unstable_now,Vi=r.unstable_getCurrentPriorityLevel,vt=r.unstable_ImmediatePriority,xt=r.unstable_UserBlockingPriority,jn=r.unstable_NormalPriority,Qa=r.unstable_LowPriority,Ui=r.unstable_IdlePriority,xr=r.log,Yn=r.unstable_setDisableYieldValue,cr=null,Ht=null;function vn(t){if(typeof xr=="function"&&Yn(t),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(cr,t)}catch{}}var Ot=Math.clz32?Math.clz32:Ws,Gs=Math.log,Ya=Math.LN2;function Ws(t){return t>>>=0,t===0?32:31-(Gs(t)/Ya|0)|0}var $t=256,Xn=4194304;function Vn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function wn(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var d=0,f=t.suspendedLanes,E=t.pingedLanes;t=t.warmLanes;var S=l&134217727;return S!==0?(l=S&~f,l!==0?d=Vn(l):(E&=S,E!==0?d=Vn(E):a||(a=S&~t,a!==0&&(d=Vn(a))))):(S=l&~f,S!==0?d=Vn(S):E!==0?d=Vn(E):a||(a=l&~t,a!==0&&(d=Vn(a)))),d===0?0:i!==0&&i!==d&&(i&f)===0&&(f=d&-d,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:d}function wr(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Jr(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ks(){var t=$t;return $t<<=1,($t&4194048)===0&&($t=256),t}function X(){var t=Xn;return Xn<<=1,(Xn&62914560)===0&&(Xn=4194304),t}function _e(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Je(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ye(t,i,a,l,d,f){var E=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var S=t.entanglements,D=t.expirationTimes,q=t.hiddenUpdates;for(a=E&~a;0<a;){var $=31-Ot(a),ne=1<<$;S[$]=0,D[$]=-1;var G=q[$];if(G!==null)for(q[$]=null,$=0;$<G.length;$++){var W=G[$];W!==null&&(W.lane&=-536870913)}a&=~ne}l!==0&&Ar(t,l,0),f!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=f&~(E&~i))}function Ar(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Ot(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Rr(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-Ot(a),d=1<<l;d&i|t[l]&i&&(t[l]|=i),a&=~d}}function Qs(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Be(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Zt(){var t=oe.p;return t!==0?t:(t=window.event,t===void 0?32:t0(t.type))}function ll(t,i){var a=oe.p;try{return oe.p=t,i()}finally{oe.p=a}}var cn=Math.random().toString(36).slice(2),wt="__reactFiber$"+cn,Jt="__reactProps$"+cn,ei="__reactContainer$"+cn,Ys="__reactEvents$"+cn,Xs="__reactListeners$"+cn,Vd="__reactHandles$"+cn,ur="__reactResources$"+cn,Li="__reactMarker$"+cn;function Xa(t){delete t[wt],delete t[Jt],delete t[Ys],delete t[Xs],delete t[Vd]}function Cr(t){var i=t[wt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[ei]||a[wt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=z_(t);t!==null;){if(a=t[wt])return a;t=z_(t)}return i}t=a,a=t.parentNode}return null}function Ir(t){if(t=t[wt]||t[ei]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function zi(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function Bi(t){var i=t[ur];return i||(i=t[ur]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function At(t){t[Li]=!0}var tu=new Set,$s={};function Dr(t,i){Nr(t,i),Nr(t+"Capture",i)}function Nr(t,i){for($s[t]=i,t=0;t<i.length;t++)tu.add(i[t])}var Zs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Or={},$a={};function Ud(t){return Zr.call($a,t)?!0:Zr.call(Or,t)?!1:Zs.test(t)?$a[t]=!0:(Or[t]=!0,!1)}function Js(t,i,a){if(Ud(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function ea(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function $n(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}var ta,Za;function ti(t){if(ta===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ta=i&&i[1]||"",Za=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ta+t+Za}var Ja=!1;function eo(t,i){if(!t||Ja)return"";Ja=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(W){var G=W}Reflect.construct(t,[],ne)}else{try{ne.call()}catch(W){G=W}t.call(ne.prototype)}}else{try{throw Error()}catch(W){G=W}(ne=t())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(W){if(W&&G&&typeof W.stack=="string")return[W.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),E=f[0],S=f[1];if(E&&S){var D=E.split(`
`),q=S.split(`
`);for(d=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;d<q.length&&!q[d].includes("DetermineComponentFrameRoot");)d++;if(l===D.length||d===q.length)for(l=D.length-1,d=q.length-1;1<=l&&0<=d&&D[l]!==q[d];)d--;for(;1<=l&&0<=d;l--,d--)if(D[l]!==q[d]){if(l!==1||d!==1)do if(l--,d--,0>d||D[l]!==q[d]){var $=`
`+D[l].replace(" at new "," at ");return t.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",t.displayName)),$}while(1<=l&&0<=d);break}}}finally{Ja=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ti(a):""}function Ld(t){switch(t.tag){case 26:case 27:case 5:return ti(t.type);case 16:return ti("Lazy");case 13:return ti("Suspense");case 19:return ti("SuspenseList");case 0:case 15:return eo(t.type,!1);case 11:return eo(t.type.render,!1);case 1:return eo(t.type,!0);case 31:return ti("Activity");default:return""}}function hr(t){try{var i="";do i+=Ld(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function mt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qi(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function na(t){var i=qi(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,f=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return d.call(this)},set:function(E){l=""+E,f.call(this,E)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Fi(t){t._valueTracker||(t._valueTracker=na(t))}function et(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=qi(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function ni(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ra=/[\n"\\]/g;function Gt(t){return t.replace(ra,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function cl(t,i,a,l,d,f,E,S){t.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.type=E:t.removeAttribute("type"),i!=null?E==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+mt(i)):t.value!==""+mt(i)&&(t.value=""+mt(i)):E!=="submit"&&E!=="reset"||t.removeAttribute("value"),i!=null?hl(t,E,mt(i)):a!=null?hl(t,E,mt(a)):l!=null&&t.removeAttribute("value"),d==null&&f!=null&&(t.defaultChecked=!!f),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+mt(S):t.removeAttribute("name")}function ul(t,i,a,l,d,f,E,S){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null))return;a=a!=null?""+mt(a):"",i=i!=null?""+mt(i):a,S||i===t.value||(t.value=i),t.defaultValue=i}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=S?t.checked:!!l,t.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(t.name=E)}function hl(t,i,a){i==="number"&&ni(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Hi(t,i,a,l){if(t=t.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=i.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&l&&(t[a].defaultSelected=!0)}else{for(a=""+mt(a),i=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,l&&(t[d].defaultSelected=!0);return}i!==null||t[d].disabled||(i=t[d])}i!==null&&(i.selected=!0)}}function nu(t,i,a){if(i!=null&&(i=""+mt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+mt(a):""}function ru(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(ye(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=mt(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Zn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var ri=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dl(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||ri.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function fl(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var d in i)l=i[d],i.hasOwnProperty(d)&&a[d]!==l&&dl(t,d,l)}else for(var f in i)i.hasOwnProperty(f)&&dl(t,f,i[f])}function to(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),su=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function dr(t){return su.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var ml=null;function pl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gi=null,_n=null;function au(t){var i=Ir(t);if(i&&(t=i.stateNode)){var a=t[Jt]||null;e:switch(t=i.stateNode,i.type){case"input":if(cl(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Gt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var d=l[Jt]||null;if(!d)throw Error(s(90));cl(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&et(l)}break e;case"textarea":nu(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Hi(t,!!a.multiple,i,!1)}}}var ia=!1;function sa(t,i,a){if(ia)return t(i,a);ia=!0;try{var l=t(i);return l}finally{if(ia=!1,(Gi!==null||_n!==null)&&(Yu(),Gi&&(i=Gi,t=_n,_n=Gi=null,au(i),t)))for(i=0;i<t.length;i++)au(t[i])}}function Wi(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Jt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ii=!1;if(bn)try{var Ki={};Object.defineProperty(Ki,"passive",{get:function(){ii=!0}}),window.addEventListener("test",Ki,Ki),window.removeEventListener("test",Ki,Ki)}catch{ii=!1}var Jn=null,ot=null,no=null;function ou(){if(no)return no;var t,i=ot,a=i.length,l,d="value"in Jn?Jn.value:Jn.textContent,f=d.length;for(t=0;t<a&&i[t]===d[t];t++);var E=a-t;for(l=1;l<=E&&i[a-l]===d[f-l];l++);return no=d.slice(t,1<l?1-l:void 0)}function aa(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function oa(){return!0}function gl(){return!1}function Lt(t){function i(a,l,d,f,E){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=E,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(a=t[S],this[S]=a?a(f):f[S]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?oa:gl,this.isPropagationStopped=gl,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=oa)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=oa)},persist:function(){},isPersistent:oa}),i}var un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},la=Lt(un),ca=b({},un,{view:0,detail:0}),ua=Lt(ca),ro,ha,kr,da=b({},ca,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ao,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==kr&&(kr&&t.type==="mousemove"?(ro=t.screenX-kr.screenX,ha=t.screenY-kr.screenY):ha=ro=0,kr=t),ro)},movementY:function(t){return"movementY"in t?t.movementY:ha}}),fa=Lt(da),zd=b({},da,{dataTransfer:0}),lu=Lt(zd),ma=b({},ca,{relatedTarget:0}),io=Lt(ma),cu=b({},un,{animationName:0,elapsedTime:0,pseudoElement:0}),yl=Lt(cu),vl=b({},un,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),uu=Lt(vl),so=b({},un,{data:0}),_l=Lt(so),hu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},si={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},du={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fu(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=du[t])?!!i[t]:!1}function ao(){return fu}var mu=b({},ca,{key:function(t){if(t.key){var i=hu[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=aa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?si[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ao,charCode:function(t){return t.type==="keypress"?aa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?aa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),oo=Lt(mu),En=b({},da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bl=Lt(En),pu=b({},ca,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ao}),Qi=Lt(pu),u=b({},un,{propertyName:0,elapsedTime:0,pseudoElement:0}),v=Lt(u),_=b({},da,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),x=Lt(_),B=b({},un,{newState:0,oldState:0}),Q=Lt(B),le=[9,13,27,32],Ie=bn&&"CompositionEvent"in window,ht=null;bn&&"documentMode"in document&&(ht=document.documentMode);var Xe=bn&&"TextEvent"in window&&!ht,Rt=bn&&(!Ie||ht&&8<ht&&11>=ht),Un=" ",Mr=!1;function fr(t,i){switch(t){case"keyup":return le.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mr(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pr=!1;function El(t,i){switch(t){case"compositionend":return mr(i);case"keypress":return i.which!==32?null:(Mr=!0,Un);case"textInput":return t=i.data,t===Un&&Mr?null:t;default:return null}}function NS(t,i){if(pr)return t==="compositionend"||!Ie&&fr(t,i)?(t=ou(),no=ot=Jn=null,pr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Rt&&i.locale!=="ko"?null:i.data;default:return null}}var OS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yg(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!OS[t.type]:i==="textarea"}function Xg(t,i,a,l){Gi?_n?_n.push(l):_n=[l]:Gi=l,i=th(i,"onChange"),0<i.length&&(a=new la("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Tl=null,Sl=null;function kS(t){D_(t,0)}function gu(t){var i=zi(t);if(et(i))return t}function $g(t,i){if(t==="change")return i}var Zg=!1;if(bn){var Bd;if(bn){var qd="oninput"in document;if(!qd){var Jg=document.createElement("div");Jg.setAttribute("oninput","return;"),qd=typeof Jg.oninput=="function"}Bd=qd}else Bd=!1;Zg=Bd&&(!document.documentMode||9<document.documentMode)}function ey(){Tl&&(Tl.detachEvent("onpropertychange",ty),Sl=Tl=null)}function ty(t){if(t.propertyName==="value"&&gu(Sl)){var i=[];Xg(i,Sl,t,pl(t)),sa(kS,i)}}function MS(t,i,a){t==="focusin"?(ey(),Tl=i,Sl=a,Tl.attachEvent("onpropertychange",ty)):t==="focusout"&&ey()}function PS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gu(Sl)}function jS(t,i){if(t==="click")return gu(i)}function VS(t,i){if(t==="input"||t==="change")return gu(i)}function US(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Ln=typeof Object.is=="function"?Object.is:US;function xl(t,i){if(Ln(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!Zr.call(i,d)||!Ln(t[d],i[d]))return!1}return!0}function ny(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ry(t,i){var a=ny(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ny(a)}}function iy(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?iy(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function sy(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=ni(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=ni(t.document)}return i}function Fd(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var LS=bn&&"documentMode"in document&&11>=document.documentMode,lo=null,Hd=null,wl=null,Gd=!1;function ay(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Gd||lo==null||lo!==ni(l)||(l=lo,"selectionStart"in l&&Fd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),wl&&xl(wl,l)||(wl=l,l=th(Hd,"onSelect"),0<l.length&&(i=new la("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=lo)))}function pa(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var co={animationend:pa("Animation","AnimationEnd"),animationiteration:pa("Animation","AnimationIteration"),animationstart:pa("Animation","AnimationStart"),transitionrun:pa("Transition","TransitionRun"),transitionstart:pa("Transition","TransitionStart"),transitioncancel:pa("Transition","TransitionCancel"),transitionend:pa("Transition","TransitionEnd")},Wd={},oy={};bn&&(oy=document.createElement("div").style,"AnimationEvent"in window||(delete co.animationend.animation,delete co.animationiteration.animation,delete co.animationstart.animation),"TransitionEvent"in window||delete co.transitionend.transition);function ga(t){if(Wd[t])return Wd[t];if(!co[t])return t;var i=co[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in oy)return Wd[t]=i[a];return t}var ly=ga("animationend"),cy=ga("animationiteration"),uy=ga("animationstart"),zS=ga("transitionrun"),BS=ga("transitionstart"),qS=ga("transitioncancel"),hy=ga("transitionend"),dy=new Map,Kd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Kd.push("scrollEnd");function gr(t,i){dy.set(t,i),Dr(i,[t])}var fy=new WeakMap;function er(t,i){if(typeof t=="object"&&t!==null){var a=fy.get(t);return a!==void 0?a:(i={value:t,source:i,stack:hr(i)},fy.set(t,i),i)}return{value:t,source:i,stack:hr(i)}}var tr=[],uo=0,Qd=0;function yu(){for(var t=uo,i=Qd=uo=0;i<t;){var a=tr[i];tr[i++]=null;var l=tr[i];tr[i++]=null;var d=tr[i];tr[i++]=null;var f=tr[i];if(tr[i++]=null,l!==null&&d!==null){var E=l.pending;E===null?d.next=d:(d.next=E.next,E.next=d),l.pending=d}f!==0&&my(a,d,f)}}function vu(t,i,a,l){tr[uo++]=t,tr[uo++]=i,tr[uo++]=a,tr[uo++]=l,Qd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Yd(t,i,a,l){return vu(t,i,a,l),_u(t)}function ho(t,i){return vu(t,null,null,i),_u(t)}function my(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var d=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(d=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,d&&i!==null&&(d=31-Ot(a),t=f.hiddenUpdates,l=t[d],l===null?t[d]=[i]:l.push(i),i.lane=a|536870912),f):null}function _u(t){if(50<Xl)throw Xl=0,nm=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var fo={};function FS(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(t,i,a,l){return new FS(t,i,a,l)}function Xd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ai(t,i){var a=t.alternate;return a===null?(a=zn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function py(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function bu(t,i,a,l,d,f){var E=0;if(l=t,typeof t=="function")Xd(t)&&(E=1);else if(typeof t=="string")E=Gx(t,a,ve.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=zn(31,a,i,d),t.elementType=C,t.lanes=f,t;case F:return ya(a.children,d,f,i);case Y:E=8,d|=24;break;case k:return t=zn(12,a,i,d|2),t.elementType=k,t.lanes=f,t;case ae:return t=zn(13,a,i,d),t.elementType=ae,t.lanes=f,t;case ge:return t=zn(19,a,i,d),t.elementType=ge,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Z:case H:E=10;break e;case te:E=9;break e;case se:E=11;break e;case R:E=14;break e;case w:E=16,l=null;break e}E=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=zn(E,a,i,d),i.elementType=t,i.type=l,i.lanes=f,i}function ya(t,i,a,l){return t=zn(7,t,l,i),t.lanes=a,t}function $d(t,i,a){return t=zn(6,t,null,i),t.lanes=a,t}function Zd(t,i,a){return i=zn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var mo=[],po=0,Eu=null,Tu=0,nr=[],rr=0,va=null,oi=1,li="";function _a(t,i){mo[po++]=Tu,mo[po++]=Eu,Eu=t,Tu=i}function gy(t,i,a){nr[rr++]=oi,nr[rr++]=li,nr[rr++]=va,va=t;var l=oi;t=li;var d=32-Ot(l)-1;l&=~(1<<d),a+=1;var f=32-Ot(i)+d;if(30<f){var E=d-d%5;f=(l&(1<<E)-1).toString(32),l>>=E,d-=E,oi=1<<32-Ot(i)+d|a<<d|l,li=f+t}else oi=1<<f|a<<d|l,li=t}function Jd(t){t.return!==null&&(_a(t,1),gy(t,1,0))}function ef(t){for(;t===Eu;)Eu=mo[--po],mo[po]=null,Tu=mo[--po],mo[po]=null;for(;t===va;)va=nr[--rr],nr[rr]=null,li=nr[--rr],nr[rr]=null,oi=nr[--rr],nr[rr]=null}var Tn=null,_t=null,Ke=!1,ba=null,Pr=!1,tf=Error(s(519));function Ea(t){var i=Error(s(418,""));throw Cl(er(i,t)),tf}function yy(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[wt]=t,i[Jt]=l,a){case"dialog":Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":case"embed":Ve("load",i);break;case"video":case"audio":for(a=0;a<Zl.length;a++)Ve(Zl[a],i);break;case"source":Ve("error",i);break;case"img":case"image":case"link":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"input":Ve("invalid",i),ul(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Fi(i);break;case"select":Ve("invalid",i);break;case"textarea":Ve("invalid",i),ru(i,l.value,l.defaultValue,l.children),Fi(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||M_(i.textContent,a)?(l.popover!=null&&(Ve("beforetoggle",i),Ve("toggle",i)),l.onScroll!=null&&Ve("scroll",i),l.onScrollEnd!=null&&Ve("scrollend",i),l.onClick!=null&&(i.onclick=nh),i=!0):i=!1,i||Ea(t)}function vy(t){for(Tn=t.return;Tn;)switch(Tn.tag){case 5:case 13:Pr=!1;return;case 27:case 3:Pr=!0;return;default:Tn=Tn.return}}function Al(t){if(t!==Tn)return!1;if(!Ke)return vy(t),Ke=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||vm(t.type,t.memoizedProps)),a=!a),a&&_t&&Ea(t),vy(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){_t=vr(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}_t=null}}else i===27?(i=_t,us(t.type)?(t=Tm,Tm=null,_t=t):_t=i):_t=Tn?vr(t.stateNode.nextSibling):null;return!0}function Rl(){_t=Tn=null,Ke=!1}function _y(){var t=ba;return t!==null&&(Cn===null?Cn=t:Cn.push.apply(Cn,t),ba=null),t}function Cl(t){ba===null?ba=[t]:ba.push(t)}var nf=ie(null),Ta=null,ci=null;function Yi(t,i,a){ue(nf,i._currentValue),i._currentValue=a}function ui(t){t._currentValue=nf.current,de(nf)}function rf(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function sf(t,i,a,l){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var f=d.dependencies;if(f!==null){var E=d.child;f=f.firstContext;e:for(;f!==null;){var S=f;f=d;for(var D=0;D<i.length;D++)if(S.context===i[D]){f.lanes|=a,S=f.alternate,S!==null&&(S.lanes|=a),rf(f.return,a,t),l||(E=null);break e}f=S.next}}else if(d.tag===18){if(E=d.return,E===null)throw Error(s(341));E.lanes|=a,f=E.alternate,f!==null&&(f.lanes|=a),rf(E,a,t),E=null}else E=d.child;if(E!==null)E.return=d;else for(E=d;E!==null;){if(E===t){E=null;break}if(d=E.sibling,d!==null){d.return=E.return,E=d;break}E=E.return}d=E}}function Il(t,i,a,l){t=null;for(var d=i,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var E=d.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var S=d.type;Ln(d.pendingProps.value,E.value)||(t!==null?t.push(S):t=[S])}}else if(d===Ut.current){if(E=d.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(ic):t=[ic])}d=d.return}t!==null&&sf(i,t,a,l),i.flags|=262144}function Su(t){for(t=t.firstContext;t!==null;){if(!Ln(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Sa(t){Ta=t,ci=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function hn(t){return by(Ta,t)}function xu(t,i){return Ta===null&&Sa(t),by(t,i)}function by(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},ci===null){if(t===null)throw Error(s(308));ci=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else ci=ci.next=i;return a}var HS=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},GS=r.unstable_scheduleCallback,WS=r.unstable_NormalPriority,zt={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function af(){return{controller:new HS,data:new Map,refCount:0}}function Dl(t){t.refCount--,t.refCount===0&&GS(WS,function(){t.controller.abort()})}var Nl=null,of=0,go=0,yo=null;function KS(t,i){if(Nl===null){var a=Nl=[];of=0,go=cm(),yo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return of++,i.then(Ey,Ey),i}function Ey(){if(--of===0&&Nl!==null){yo!==null&&(yo.status="fulfilled");var t=Nl;Nl=null,go=0,yo=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function QS(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var d=0;d<a.length;d++)(0,a[d])(i)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var Ty=K.S;K.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&KS(t,i),Ty!==null&&Ty(t,i)};var xa=ie(null);function lf(){var t=xa.current;return t!==null?t:lt.pooledCache}function wu(t,i){i===null?ue(xa,xa.current):ue(xa,i.pool)}function Sy(){var t=lf();return t===null?null:{parent:zt._currentValue,pool:t}}var Ol=Error(s(460)),xy=Error(s(474)),Au=Error(s(542)),cf={then:function(){}};function wy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ru(){}function Ay(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Ru,Ru),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Cy(t),t;default:if(typeof i.status=="string")i.then(Ru,Ru);else{if(t=lt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var d=i;d.status="fulfilled",d.value=l}},function(l){if(i.status==="pending"){var d=i;d.status="rejected",d.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Cy(t),t}throw kl=i,Ol}}var kl=null;function Ry(){if(kl===null)throw Error(s(459));var t=kl;return kl=null,t}function Cy(t){if(t===Ol||t===Au)throw Error(s(483))}var Xi=!1;function uf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function $i(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Zi(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,($e&2)!==0){var d=l.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),l.pending=i,i=_u(t),my(t,null,a),i}return vu(t,l,i,a),_u(t)}function Ml(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Rr(t,a)}}function df(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?d=f=E:f=f.next=E,a=a.next}while(a!==null);f===null?d=f=i:f=f.next=i}else d=f=i;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var ff=!1;function Pl(){if(ff){var t=yo;if(t!==null)throw t}}function jl(t,i,a,l){ff=!1;var d=t.updateQueue;Xi=!1;var f=d.firstBaseUpdate,E=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var D=S,q=D.next;D.next=null,E===null?f=q:E.next=q,E=D;var $=t.alternate;$!==null&&($=$.updateQueue,S=$.lastBaseUpdate,S!==E&&(S===null?$.firstBaseUpdate=q:S.next=q,$.lastBaseUpdate=D))}if(f!==null){var ne=d.baseState;E=0,$=q=D=null,S=f;do{var G=S.lane&-536870913,W=G!==S.lane;if(W?(qe&G)===G:(l&G)===G){G!==0&&G===go&&(ff=!0),$!==null&&($=$.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Re=t,Te=S;G=i;var rt=a;switch(Te.tag){case 1:if(Re=Te.payload,typeof Re=="function"){ne=Re.call(rt,ne,G);break e}ne=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Te.payload,G=typeof Re=="function"?Re.call(rt,ne,G):Re,G==null)break e;ne=b({},ne,G);break e;case 2:Xi=!0}}G=S.callback,G!==null&&(t.flags|=64,W&&(t.flags|=8192),W=d.callbacks,W===null?d.callbacks=[G]:W.push(G))}else W={lane:G,tag:S.tag,payload:S.payload,callback:S.callback,next:null},$===null?(q=$=W,D=ne):$=$.next=W,E|=G;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;W=S,S=W.next,W.next=null,d.lastBaseUpdate=W,d.shared.pending=null}}while(!0);$===null&&(D=ne),d.baseState=D,d.firstBaseUpdate=q,d.lastBaseUpdate=$,f===null&&(d.shared.lanes=0),as|=E,t.lanes=E,t.memoizedState=ne}}function Iy(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function Dy(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Iy(a[t],i)}var vo=ie(null),Cu=ie(0);function Ny(t,i){t=yi,ue(Cu,t),ue(vo,i),yi=t|i.baseLanes}function mf(){ue(Cu,yi),ue(vo,vo.current)}function pf(){yi=Cu.current,de(vo),de(Cu)}var Ji=0,ke=null,tt=null,kt=null,Iu=!1,_o=!1,wa=!1,Du=0,Vl=0,bo=null,YS=0;function Ct(){throw Error(s(321))}function gf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!Ln(t[a],i[a]))return!1;return!0}function yf(t,i,a,l,d,f){return Ji=f,ke=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,K.H=t===null||t.memoizedState===null?mv:pv,wa=!1,f=a(l,d),wa=!1,_o&&(f=ky(i,a,l,d)),Oy(t),f}function Oy(t){K.H=ju;var i=tt!==null&&tt.next!==null;if(Ji=0,kt=tt=ke=null,Iu=!1,Vl=0,bo=null,i)throw Error(s(300));t===null||Wt||(t=t.dependencies,t!==null&&Su(t)&&(Wt=!0))}function ky(t,i,a,l){ke=t;var d=0;do{if(_o&&(bo=null),Vl=0,_o=!1,25<=d)throw Error(s(301));if(d+=1,kt=tt=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}K.H=nx,f=i(a,l)}while(_o);return f}function XS(){var t=K.H,i=t.useState()[0];return i=typeof i.then=="function"?Ul(i):i,t=t.useState()[0],(tt!==null?tt.memoizedState:null)!==t&&(ke.flags|=1024),i}function vf(){var t=Du!==0;return Du=0,t}function _f(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function bf(t){if(Iu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Iu=!1}Ji=0,kt=tt=ke=null,_o=!1,Vl=Du=0,bo=null}function An(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?ke.memoizedState=kt=t:kt=kt.next=t,kt}function Mt(){if(tt===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=tt.next;var i=kt===null?ke.memoizedState:kt.next;if(i!==null)kt=i,tt=t;else{if(t===null)throw ke.alternate===null?Error(s(467)):Error(s(310));tt=t,t={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},kt===null?ke.memoizedState=kt=t:kt=kt.next=t}return kt}function Ef(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ul(t){var i=Vl;return Vl+=1,bo===null&&(bo=[]),t=Ay(bo,t,i),i=ke,(kt===null?i.memoizedState:kt.next)===null&&(i=i.alternate,K.H=i===null||i.memoizedState===null?mv:pv),t}function Nu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ul(t);if(t.$$typeof===H)return hn(t)}throw Error(s(438,String(t)))}function Tf(t){var i=null,a=ke.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=ke.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(d){return d.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Ef(),ke.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=U;return i.index++,a}function hi(t,i){return typeof i=="function"?i(t):i}function Ou(t){var i=Mt();return Sf(i,tt,t)}function Sf(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var d=t.baseQueue,f=l.pending;if(f!==null){if(d!==null){var E=d.next;d.next=f.next,f.next=E}i.baseQueue=d=f,l.pending=null}if(f=t.baseState,d===null)t.memoizedState=f;else{i=d.next;var S=E=null,D=null,q=i,$=!1;do{var ne=q.lane&-536870913;if(ne!==q.lane?(qe&ne)===ne:(Ji&ne)===ne){var G=q.revertLane;if(G===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),ne===go&&($=!0);else if((Ji&G)===G){q=q.next,G===go&&($=!0);continue}else ne={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(S=D=ne,E=f):D=D.next=ne,ke.lanes|=G,as|=G;ne=q.action,wa&&a(f,ne),f=q.hasEagerState?q.eagerState:a(f,ne)}else G={lane:ne,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(S=D=G,E=f):D=D.next=G,ke.lanes|=ne,as|=ne;q=q.next}while(q!==null&&q!==i);if(D===null?E=f:D.next=S,!Ln(f,t.memoizedState)&&(Wt=!0,$&&(a=yo,a!==null)))throw a;t.memoizedState=f,t.baseState=E,t.baseQueue=D,l.lastRenderedState=f}return d===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function xf(t){var i=Mt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,d=a.pending,f=i.memoizedState;if(d!==null){a.pending=null;var E=d=d.next;do f=t(f,E.action),E=E.next;while(E!==d);Ln(f,i.memoizedState)||(Wt=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,l]}function My(t,i,a){var l=ke,d=Mt(),f=Ke;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var E=!Ln((tt||d).memoizedState,a);E&&(d.memoizedState=a,Wt=!0),d=d.queue;var S=Vy.bind(null,l,d,t);if(Ll(2048,8,S,[t]),d.getSnapshot!==i||E||kt!==null&&kt.memoizedState.tag&1){if(l.flags|=2048,Eo(9,ku(),jy.bind(null,l,d,a,i),null),lt===null)throw Error(s(349));f||(Ji&124)!==0||Py(l,i,a)}return a}function Py(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=ke.updateQueue,i===null?(i=Ef(),ke.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function jy(t,i,a,l){i.value=a,i.getSnapshot=l,Uy(i)&&Ly(t)}function Vy(t,i,a){return a(function(){Uy(i)&&Ly(t)})}function Uy(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!Ln(t,a)}catch{return!0}}function Ly(t){var i=ho(t,2);i!==null&&Gn(i,t,2)}function wf(t){var i=An();if(typeof t=="function"){var a=t;if(t=a(),wa){vn(!0);try{a()}finally{vn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:t},i}function zy(t,i,a,l){return t.baseState=a,Sf(t,tt,typeof l=="function"?l:hi)}function $S(t,i,a,l,d){if(Pu(t))throw Error(s(485));if(t=i.action,t!==null){var f={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){f.listeners.push(E)}};K.T!==null?a(!0):f.isTransition=!1,l(f),a=i.pending,a===null?(f.next=i.pending=f,By(i,f)):(f.next=a.next,i.pending=a.next=f)}}function By(t,i){var a=i.action,l=i.payload,d=t.state;if(i.isTransition){var f=K.T,E={};K.T=E;try{var S=a(d,l),D=K.S;D!==null&&D(E,S),qy(t,i,S)}catch(q){Af(t,i,q)}finally{K.T=f}}else try{f=a(d,l),qy(t,i,f)}catch(q){Af(t,i,q)}}function qy(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Fy(t,i,l)},function(l){return Af(t,i,l)}):Fy(t,i,a)}function Fy(t,i,a){i.status="fulfilled",i.value=a,Hy(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,By(t,a)))}function Af(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Hy(i),i=i.next;while(i!==l)}t.action=null}function Hy(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Gy(t,i){return i}function Wy(t,i){if(Ke){var a=lt.formState;if(a!==null){e:{var l=ke;if(Ke){if(_t){t:{for(var d=_t,f=Pr;d.nodeType!==8;){if(!f){d=null;break t}if(d=vr(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){_t=vr(d.nextSibling),l=d.data==="F!";break e}}Ea(l)}l=!1}l&&(i=a[0])}}return a=An(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gy,lastRenderedState:i},a.queue=l,a=hv.bind(null,ke,l),l.dispatch=a,l=wf(!1),f=Nf.bind(null,ke,!1,l.queue),l=An(),d={state:i,dispatch:null,action:t,pending:null},l.queue=d,a=$S.bind(null,ke,d,f,a),d.dispatch=a,l.memoizedState=t,[i,a,!1]}function Ky(t){var i=Mt();return Qy(i,tt,t)}function Qy(t,i,a){if(i=Sf(t,i,Gy)[0],t=Ou(hi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Ul(i)}catch(E){throw E===Ol?Au:E}else l=i;i=Mt();var d=i.queue,f=d.dispatch;return a!==i.memoizedState&&(ke.flags|=2048,Eo(9,ku(),ZS.bind(null,d,a),null)),[l,f,t]}function ZS(t,i){t.action=i}function Yy(t){var i=Mt(),a=tt;if(a!==null)return Qy(i,a,t);Mt(),i=i.memoizedState,a=Mt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Eo(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=ke.updateQueue,i===null&&(i=Ef(),ke.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function ku(){return{destroy:void 0,resource:void 0}}function Xy(){return Mt().memoizedState}function Mu(t,i,a,l){var d=An();l=l===void 0?null:l,ke.flags|=t,d.memoizedState=Eo(1|i,ku(),a,l)}function Ll(t,i,a,l){var d=Mt();l=l===void 0?null:l;var f=d.memoizedState.inst;tt!==null&&l!==null&&gf(l,tt.memoizedState.deps)?d.memoizedState=Eo(i,f,a,l):(ke.flags|=t,d.memoizedState=Eo(1|i,f,a,l))}function $y(t,i){Mu(8390656,8,t,i)}function Zy(t,i){Ll(2048,8,t,i)}function Jy(t,i){return Ll(4,2,t,i)}function ev(t,i){return Ll(4,4,t,i)}function tv(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function nv(t,i,a){a=a!=null?a.concat([t]):null,Ll(4,4,tv.bind(null,i,t),a)}function Rf(){}function rv(t,i){var a=Mt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&gf(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function iv(t,i){var a=Mt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&gf(i,l[1]))return l[0];if(l=t(),wa){vn(!0);try{t()}finally{vn(!1)}}return a.memoizedState=[l,i],l}function Cf(t,i,a){return a===void 0||(Ji&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=o_(),ke.lanes|=t,as|=t,a)}function sv(t,i,a,l){return Ln(a,i)?a:vo.current!==null?(t=Cf(t,a,l),Ln(t,i)||(Wt=!0),t):(Ji&42)===0?(Wt=!0,t.memoizedState=a):(t=o_(),ke.lanes|=t,as|=t,i)}function av(t,i,a,l,d){var f=oe.p;oe.p=f!==0&&8>f?f:8;var E=K.T,S={};K.T=S,Nf(t,!1,i,a);try{var D=d(),q=K.S;if(q!==null&&q(S,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var $=QS(D,l);zl(t,i,$,Hn(t))}else zl(t,i,l,Hn(t))}catch(ne){zl(t,i,{then:function(){},status:"rejected",reason:ne},Hn())}finally{oe.p=f,K.T=E}}function JS(){}function If(t,i,a,l){if(t.tag!==5)throw Error(s(476));var d=ov(t).queue;av(t,d,i,fe,a===null?JS:function(){return lv(t),a(l)})}function ov(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:fe},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function lv(t){var i=ov(t).next.queue;zl(t,i,{},Hn())}function Df(){return hn(ic)}function cv(){return Mt().memoizedState}function uv(){return Mt().memoizedState}function ex(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Hn();t=$i(a);var l=Zi(i,t,a);l!==null&&(Gn(l,i,a),Ml(l,i,a)),i={cache:af()},t.payload=i;return}i=i.return}}function tx(t,i,a){var l=Hn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Pu(t)?dv(i,a):(a=Yd(t,i,a,l),a!==null&&(Gn(a,t,l),fv(a,i,l)))}function hv(t,i,a){var l=Hn();zl(t,i,a,l)}function zl(t,i,a,l){var d={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Pu(t))dv(i,d);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var E=i.lastRenderedState,S=f(E,a);if(d.hasEagerState=!0,d.eagerState=S,Ln(S,E))return vu(t,i,d,0),lt===null&&yu(),!1}catch{}finally{}if(a=Yd(t,i,d,l),a!==null)return Gn(a,t,l),fv(a,i,l),!0}return!1}function Nf(t,i,a,l){if(l={lane:2,revertLane:cm(),action:l,hasEagerState:!1,eagerState:null,next:null},Pu(t)){if(i)throw Error(s(479))}else i=Yd(t,a,l,2),i!==null&&Gn(i,t,2)}function Pu(t){var i=t.alternate;return t===ke||i!==null&&i===ke}function dv(t,i){_o=Iu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function fv(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Rr(t,a)}}var ju={readContext:hn,use:Nu,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct},mv={readContext:hn,use:Nu,useCallback:function(t,i){return An().memoizedState=[t,i===void 0?null:i],t},useContext:hn,useEffect:$y,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Mu(4194308,4,tv.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Mu(4194308,4,t,i)},useInsertionEffect:function(t,i){Mu(4,2,t,i)},useMemo:function(t,i){var a=An();i=i===void 0?null:i;var l=t();if(wa){vn(!0);try{t()}finally{vn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=An();if(a!==void 0){var d=a(i);if(wa){vn(!0);try{a(i)}finally{vn(!1)}}}else d=i;return l.memoizedState=l.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},l.queue=t,t=t.dispatch=tx.bind(null,ke,t),[l.memoizedState,t]},useRef:function(t){var i=An();return t={current:t},i.memoizedState=t},useState:function(t){t=wf(t);var i=t.queue,a=hv.bind(null,ke,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Rf,useDeferredValue:function(t,i){var a=An();return Cf(a,t,i)},useTransition:function(){var t=wf(!1);return t=av.bind(null,ke,t.queue,!0,!1),An().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=ke,d=An();if(Ke){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),lt===null)throw Error(s(349));(qe&124)!==0||Py(l,i,a)}d.memoizedState=a;var f={value:a,getSnapshot:i};return d.queue=f,$y(Vy.bind(null,l,f,t),[t]),l.flags|=2048,Eo(9,ku(),jy.bind(null,l,f,a,i),null),a},useId:function(){var t=An(),i=lt.identifierPrefix;if(Ke){var a=li,l=oi;a=(l&~(1<<32-Ot(l)-1)).toString(32)+a,i=""+i+"R"+a,a=Du++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=YS++,i=""+i+"r"+a.toString(32)+"";return t.memoizedState=i},useHostTransitionStatus:Df,useFormState:Wy,useActionState:Wy,useOptimistic:function(t){var i=An();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Nf.bind(null,ke,!0,a),a.dispatch=i,[t,i]},useMemoCache:Tf,useCacheRefresh:function(){return An().memoizedState=ex.bind(null,ke)}},pv={readContext:hn,use:Nu,useCallback:rv,useContext:hn,useEffect:Zy,useImperativeHandle:nv,useInsertionEffect:Jy,useLayoutEffect:ev,useMemo:iv,useReducer:Ou,useRef:Xy,useState:function(){return Ou(hi)},useDebugValue:Rf,useDeferredValue:function(t,i){var a=Mt();return sv(a,tt.memoizedState,t,i)},useTransition:function(){var t=Ou(hi)[0],i=Mt().memoizedState;return[typeof t=="boolean"?t:Ul(t),i]},useSyncExternalStore:My,useId:cv,useHostTransitionStatus:Df,useFormState:Ky,useActionState:Ky,useOptimistic:function(t,i){var a=Mt();return zy(a,tt,t,i)},useMemoCache:Tf,useCacheRefresh:uv},nx={readContext:hn,use:Nu,useCallback:rv,useContext:hn,useEffect:Zy,useImperativeHandle:nv,useInsertionEffect:Jy,useLayoutEffect:ev,useMemo:iv,useReducer:xf,useRef:Xy,useState:function(){return xf(hi)},useDebugValue:Rf,useDeferredValue:function(t,i){var a=Mt();return tt===null?Cf(a,t,i):sv(a,tt.memoizedState,t,i)},useTransition:function(){var t=xf(hi)[0],i=Mt().memoizedState;return[typeof t=="boolean"?t:Ul(t),i]},useSyncExternalStore:My,useId:cv,useHostTransitionStatus:Df,useFormState:Yy,useActionState:Yy,useOptimistic:function(t,i){var a=Mt();return tt!==null?zy(a,tt,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Tf,useCacheRefresh:uv},To=null,Bl=0;function Vu(t){var i=Bl;return Bl+=1,To===null&&(To=[]),Ay(To,t,i)}function ql(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Uu(t,i){throw i.$$typeof===T?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function gv(t){var i=t._init;return i(t._payload)}function yv(t){function i(L,V){if(t){var z=L.deletions;z===null?(L.deletions=[V],L.flags|=16):z.push(V)}}function a(L,V){if(!t)return null;for(;V!==null;)i(L,V),V=V.sibling;return null}function l(L){for(var V=new Map;L!==null;)L.key!==null?V.set(L.key,L):V.set(L.index,L),L=L.sibling;return V}function d(L,V){return L=ai(L,V),L.index=0,L.sibling=null,L}function f(L,V,z){return L.index=z,t?(z=L.alternate,z!==null?(z=z.index,z<V?(L.flags|=67108866,V):z):(L.flags|=67108866,V)):(L.flags|=1048576,V)}function E(L){return t&&L.alternate===null&&(L.flags|=67108866),L}function S(L,V,z,ee){return V===null||V.tag!==6?(V=$d(z,L.mode,ee),V.return=L,V):(V=d(V,z),V.return=L,V)}function D(L,V,z,ee){var pe=z.type;return pe===F?$(L,V,z.props.children,ee,z.key):V!==null&&(V.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===w&&gv(pe)===V.type)?(V=d(V,z.props),ql(V,z),V.return=L,V):(V=bu(z.type,z.key,z.props,null,L.mode,ee),ql(V,z),V.return=L,V)}function q(L,V,z,ee){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=Zd(z,L.mode,ee),V.return=L,V):(V=d(V,z.children||[]),V.return=L,V)}function $(L,V,z,ee,pe){return V===null||V.tag!==7?(V=ya(z,L.mode,ee,pe),V.return=L,V):(V=d(V,z),V.return=L,V)}function ne(L,V,z){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=$d(""+V,L.mode,z),V.return=L,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case A:return z=bu(V.type,V.key,V.props,null,L.mode,z),ql(z,V),z.return=L,z;case P:return V=Zd(V,L.mode,z),V.return=L,V;case w:var ee=V._init;return V=ee(V._payload),ne(L,V,z)}if(ye(V)||O(V))return V=ya(V,L.mode,z,null),V.return=L,V;if(typeof V.then=="function")return ne(L,Vu(V),z);if(V.$$typeof===H)return ne(L,xu(L,V),z);Uu(L,V)}return null}function G(L,V,z,ee){var pe=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return pe!==null?null:S(L,V,""+z,ee);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case A:return z.key===pe?D(L,V,z,ee):null;case P:return z.key===pe?q(L,V,z,ee):null;case w:return pe=z._init,z=pe(z._payload),G(L,V,z,ee)}if(ye(z)||O(z))return pe!==null?null:$(L,V,z,ee,null);if(typeof z.then=="function")return G(L,V,Vu(z),ee);if(z.$$typeof===H)return G(L,V,xu(L,z),ee);Uu(L,z)}return null}function W(L,V,z,ee,pe){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return L=L.get(z)||null,S(V,L,""+ee,pe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case A:return L=L.get(ee.key===null?z:ee.key)||null,D(V,L,ee,pe);case P:return L=L.get(ee.key===null?z:ee.key)||null,q(V,L,ee,pe);case w:var Pe=ee._init;return ee=Pe(ee._payload),W(L,V,z,ee,pe)}if(ye(ee)||O(ee))return L=L.get(z)||null,$(V,L,ee,pe,null);if(typeof ee.then=="function")return W(L,V,z,Vu(ee),pe);if(ee.$$typeof===H)return W(L,V,z,xu(V,ee),pe);Uu(V,ee)}return null}function Re(L,V,z,ee){for(var pe=null,Pe=null,be=V,xe=V=0,Qt=null;be!==null&&xe<z.length;xe++){be.index>xe?(Qt=be,be=null):Qt=be.sibling;var He=G(L,be,z[xe],ee);if(He===null){be===null&&(be=Qt);break}t&&be&&He.alternate===null&&i(L,be),V=f(He,V,xe),Pe===null?pe=He:Pe.sibling=He,Pe=He,be=Qt}if(xe===z.length)return a(L,be),Ke&&_a(L,xe),pe;if(be===null){for(;xe<z.length;xe++)be=ne(L,z[xe],ee),be!==null&&(V=f(be,V,xe),Pe===null?pe=be:Pe.sibling=be,Pe=be);return Ke&&_a(L,xe),pe}for(be=l(be);xe<z.length;xe++)Qt=W(be,L,xe,z[xe],ee),Qt!==null&&(t&&Qt.alternate!==null&&be.delete(Qt.key===null?xe:Qt.key),V=f(Qt,V,xe),Pe===null?pe=Qt:Pe.sibling=Qt,Pe=Qt);return t&&be.forEach(function(ps){return i(L,ps)}),Ke&&_a(L,xe),pe}function Te(L,V,z,ee){if(z==null)throw Error(s(151));for(var pe=null,Pe=null,be=V,xe=V=0,Qt=null,He=z.next();be!==null&&!He.done;xe++,He=z.next()){be.index>xe?(Qt=be,be=null):Qt=be.sibling;var ps=G(L,be,He.value,ee);if(ps===null){be===null&&(be=Qt);break}t&&be&&ps.alternate===null&&i(L,be),V=f(ps,V,xe),Pe===null?pe=ps:Pe.sibling=ps,Pe=ps,be=Qt}if(He.done)return a(L,be),Ke&&_a(L,xe),pe;if(be===null){for(;!He.done;xe++,He=z.next())He=ne(L,He.value,ee),He!==null&&(V=f(He,V,xe),Pe===null?pe=He:Pe.sibling=He,Pe=He);return Ke&&_a(L,xe),pe}for(be=l(be);!He.done;xe++,He=z.next())He=W(be,L,xe,He.value,ee),He!==null&&(t&&He.alternate!==null&&be.delete(He.key===null?xe:He.key),V=f(He,V,xe),Pe===null?pe=He:Pe.sibling=He,Pe=He);return t&&be.forEach(function(rw){return i(L,rw)}),Ke&&_a(L,xe),pe}function rt(L,V,z,ee){if(typeof z=="object"&&z!==null&&z.type===F&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case A:e:{for(var pe=z.key;V!==null;){if(V.key===pe){if(pe=z.type,pe===F){if(V.tag===7){a(L,V.sibling),ee=d(V,z.props.children),ee.return=L,L=ee;break e}}else if(V.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===w&&gv(pe)===V.type){a(L,V.sibling),ee=d(V,z.props),ql(ee,z),ee.return=L,L=ee;break e}a(L,V);break}else i(L,V);V=V.sibling}z.type===F?(ee=ya(z.props.children,L.mode,ee,z.key),ee.return=L,L=ee):(ee=bu(z.type,z.key,z.props,null,L.mode,ee),ql(ee,z),ee.return=L,L=ee)}return E(L);case P:e:{for(pe=z.key;V!==null;){if(V.key===pe)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){a(L,V.sibling),ee=d(V,z.children||[]),ee.return=L,L=ee;break e}else{a(L,V);break}else i(L,V);V=V.sibling}ee=Zd(z,L.mode,ee),ee.return=L,L=ee}return E(L);case w:return pe=z._init,z=pe(z._payload),rt(L,V,z,ee)}if(ye(z))return Re(L,V,z,ee);if(O(z)){if(pe=O(z),typeof pe!="function")throw Error(s(150));return z=pe.call(z),Te(L,V,z,ee)}if(typeof z.then=="function")return rt(L,V,Vu(z),ee);if(z.$$typeof===H)return rt(L,V,xu(L,z),ee);Uu(L,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,V!==null&&V.tag===6?(a(L,V.sibling),ee=d(V,z),ee.return=L,L=ee):(a(L,V),ee=$d(z,L.mode,ee),ee.return=L,L=ee),E(L)):a(L,V)}return function(L,V,z,ee){try{Bl=0;var pe=rt(L,V,z,ee);return To=null,pe}catch(be){if(be===Ol||be===Au)throw be;var Pe=zn(29,be,null,L.mode);return Pe.lanes=ee,Pe.return=L,Pe}finally{}}}var So=yv(!0),vv=yv(!1),ir=ie(null),jr=null;function es(t){var i=t.alternate;ue(Bt,Bt.current&1),ue(ir,t),jr===null&&(i===null||vo.current!==null||i.memoizedState!==null)&&(jr=t)}function _v(t){if(t.tag===22){if(ue(Bt,Bt.current),ue(ir,t),jr===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(jr=t)}}else ts()}function ts(){ue(Bt,Bt.current),ue(ir,ir.current)}function di(t){de(ir),jr===t&&(jr=null),de(Bt)}var Bt=ie(0);function Lu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Em(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Of(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:b({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var kf={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=Hn(),d=$i(l);d.payload=i,a!=null&&(d.callback=a),i=Zi(t,d,l),i!==null&&(Gn(i,t,l),Ml(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=Hn(),d=$i(l);d.tag=1,d.payload=i,a!=null&&(d.callback=a),i=Zi(t,d,l),i!==null&&(Gn(i,t,l),Ml(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Hn(),l=$i(a);l.tag=2,i!=null&&(l.callback=i),i=Zi(t,l,a),i!==null&&(Gn(i,t,a),Ml(i,t,a))}};function bv(t,i,a,l,d,f,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,E):i.prototype&&i.prototype.isPureReactComponent?!xl(a,l)||!xl(d,f):!0}function Ev(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&kf.enqueueReplaceState(i,i.state,null)}function Aa(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=b({},a));for(var d in t)a[d]===void 0&&(a[d]=t[d])}return a}var zu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Tv(t){zu(t)}function Sv(t){console.error(t)}function xv(t){zu(t)}function Bu(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function wv(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Mf(t,i,a){return a=$i(a),a.tag=3,a.payload={element:null},a.callback=function(){Bu(t,i)},a}function Av(t){return t=$i(t),t.tag=3,t}function Rv(t,i,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var f=l.value;t.payload=function(){return d(f)},t.callback=function(){wv(i,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(t.callback=function(){wv(i,a,l),typeof d!="function"&&(os===null?os=new Set([this]):os.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function rx(t,i,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Il(i,a,d,!0),a=ir.current,a!==null){switch(a.tag){case 13:return jr===null?im():a.alternate===null&&bt===0&&(bt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===cf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),am(t,l,d)),!1;case 22:return a.flags|=65536,l===cf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),am(t,l,d)),!1}throw Error(s(435,a.tag))}return am(t,l,d),im(),!1}if(Ke)return i=ir.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=d,l!==tf&&(t=Error(s(422),{cause:l}),Cl(er(t,a)))):(l!==tf&&(i=Error(s(423),{cause:l}),Cl(er(i,a))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,l=er(l,a),d=Mf(t.stateNode,l,d),df(t,d),bt!==4&&(bt=2)),!1;var f=Error(s(520),{cause:l});if(f=er(f,a),Yl===null?Yl=[f]:Yl.push(f),bt!==4&&(bt=2),i===null)return!0;l=er(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=d&-d,a.lanes|=t,t=Mf(a.stateNode,l,t),df(a,t),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(os===null||!os.has(f))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Av(d),Rv(d,t,a,l),df(a,d),!1}a=a.return}while(a!==null);return!1}var Cv=Error(s(461)),Wt=!1;function en(t,i,a,l){i.child=t===null?vv(i,null,a,l):So(i,t.child,a,l)}function Iv(t,i,a,l,d){a=a.render;var f=i.ref;if("ref"in l){var E={};for(var S in l)S!=="ref"&&(E[S]=l[S])}else E=l;return Sa(i),l=yf(t,i,a,E,f,d),S=vf(),t!==null&&!Wt?(_f(t,i,d),fi(t,i,d)):(Ke&&S&&Jd(i),i.flags|=1,en(t,i,l,d),i.child)}function Dv(t,i,a,l,d){if(t===null){var f=a.type;return typeof f=="function"&&!Xd(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,Nv(t,i,f,l,d)):(t=bu(a.type,null,l,i,i.mode,d),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,!qf(t,d)){var E=f.memoizedProps;if(a=a.compare,a=a!==null?a:xl,a(E,l)&&t.ref===i.ref)return fi(t,i,d)}return i.flags|=1,t=ai(f,l),t.ref=i.ref,t.return=i,i.child=t}function Nv(t,i,a,l,d){if(t!==null){var f=t.memoizedProps;if(xl(f,l)&&t.ref===i.ref)if(Wt=!1,i.pendingProps=l=f,qf(t,d))(t.flags&131072)!==0&&(Wt=!0);else return i.lanes=t.lanes,fi(t,i,d)}return Pf(t,i,a,l,d)}function Ov(t,i,a){var l=i.pendingProps,d=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,t!==null){for(d=i.child=t.child,f=0;d!==null;)f=f|d.lanes|d.childLanes,d=d.sibling;i.childLanes=f&~l}else i.childLanes=0,i.child=null;return kv(t,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&wu(i,f!==null?f.cachePool:null),f!==null?Ny(i,f):mf(),_v(i);else return i.lanes=i.childLanes=536870912,kv(t,i,f!==null?f.baseLanes|a:a,a)}else f!==null?(wu(i,f.cachePool),Ny(i,f),ts(),i.memoizedState=null):(t!==null&&wu(i,null),mf(),ts());return en(t,i,d,a),i.child}function kv(t,i,a,l){var d=lf();return d=d===null?null:{parent:zt._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&wu(i,null),mf(),_v(i),t!==null&&Il(t,i,l,!0),null}function qu(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Pf(t,i,a,l,d){return Sa(i),a=yf(t,i,a,l,void 0,d),l=vf(),t!==null&&!Wt?(_f(t,i,d),fi(t,i,d)):(Ke&&l&&Jd(i),i.flags|=1,en(t,i,a,d),i.child)}function Mv(t,i,a,l,d,f){return Sa(i),i.updateQueue=null,a=ky(i,l,a,d),Oy(t),l=vf(),t!==null&&!Wt?(_f(t,i,f),fi(t,i,f)):(Ke&&l&&Jd(i),i.flags|=1,en(t,i,a,f),i.child)}function Pv(t,i,a,l,d){if(Sa(i),i.stateNode===null){var f=fo,E=a.contextType;typeof E=="object"&&E!==null&&(f=hn(E)),f=new a(l,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=kf,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=l,f.state=i.memoizedState,f.refs={},uf(i),E=a.contextType,f.context=typeof E=="object"&&E!==null?hn(E):fo,f.state=i.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(Of(i,a,E,l),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(E=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),E!==f.state&&kf.enqueueReplaceState(f,f.state,null),jl(i,l,f,d),Pl(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){f=i.stateNode;var S=i.memoizedProps,D=Aa(a,S);f.props=D;var q=f.context,$=a.contextType;E=fo,typeof $=="object"&&$!==null&&(E=hn($));var ne=a.getDerivedStateFromProps;$=typeof ne=="function"||typeof f.getSnapshotBeforeUpdate=="function",S=i.pendingProps!==S,$||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(S||q!==E)&&Ev(i,f,l,E),Xi=!1;var G=i.memoizedState;f.state=G,jl(i,l,f,d),Pl(),q=i.memoizedState,S||G!==q||Xi?(typeof ne=="function"&&(Of(i,a,ne,l),q=i.memoizedState),(D=Xi||bv(i,a,D,l,G,q,E))?($||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=q),f.props=l,f.state=q,f.context=E,l=D):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{f=i.stateNode,hf(t,i),E=i.memoizedProps,$=Aa(a,E),f.props=$,ne=i.pendingProps,G=f.context,q=a.contextType,D=fo,typeof q=="object"&&q!==null&&(D=hn(q)),S=a.getDerivedStateFromProps,(q=typeof S=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E!==ne||G!==D)&&Ev(i,f,l,D),Xi=!1,G=i.memoizedState,f.state=G,jl(i,l,f,d),Pl();var W=i.memoizedState;E!==ne||G!==W||Xi||t!==null&&t.dependencies!==null&&Su(t.dependencies)?(typeof S=="function"&&(Of(i,a,S,l),W=i.memoizedState),($=Xi||bv(i,a,$,l,G,W,D)||t!==null&&t.dependencies!==null&&Su(t.dependencies))?(q||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,W,D),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,W,D)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=W),f.props=l,f.state=W,f.context=D,l=$):(typeof f.componentDidUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(i.flags|=1024),l=!1)}return f=l,qu(t,i),l=(i.flags&128)!==0,f||l?(f=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,t!==null&&l?(i.child=So(i,t.child,null,d),i.child=So(i,null,a,d)):en(t,i,a,d),i.memoizedState=f.state,t=i.child):t=fi(t,i,d),t}function jv(t,i,a,l){return Rl(),i.flags|=256,en(t,i,a,l),i.child}var jf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vf(t){return{baseLanes:t,cachePool:Sy()}}function Uf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=sr),t}function Vv(t,i,a){var l=i.pendingProps,d=!1,f=(i.flags&128)!==0,E;if((E=f)||(E=t!==null&&t.memoizedState===null?!1:(Bt.current&2)!==0),E&&(d=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,t===null){if(Ke){if(d?es(i):ts(),Ke){var S=_t,D;if(D=S){e:{for(D=S,S=Pr;D.nodeType!==8;){if(!S){S=null;break e}if(D=vr(D.nextSibling),D===null){S=null;break e}}S=D}S!==null?(i.memoizedState={dehydrated:S,treeContext:va!==null?{id:oi,overflow:li}:null,retryLane:536870912,hydrationErrors:null},D=zn(18,null,null,0),D.stateNode=S,D.return=i,i.child=D,Tn=i,_t=null,D=!0):D=!1}D||Ea(i)}if(S=i.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return Em(S)?i.lanes=32:i.lanes=536870912,null;di(i)}return S=l.children,l=l.fallback,d?(ts(),d=i.mode,S=Fu({mode:"hidden",children:S},d),l=ya(l,d,a,null),S.return=i,l.return=i,S.sibling=l,i.child=S,d=i.child,d.memoizedState=Vf(a),d.childLanes=Uf(t,E,a),i.memoizedState=jf,l):(es(i),Lf(i,S))}if(D=t.memoizedState,D!==null&&(S=D.dehydrated,S!==null)){if(f)i.flags&256?(es(i),i.flags&=-257,i=zf(t,i,a)):i.memoizedState!==null?(ts(),i.child=t.child,i.flags|=128,i=null):(ts(),d=l.fallback,S=i.mode,l=Fu({mode:"visible",children:l.children},S),d=ya(d,S,a,null),d.flags|=2,l.return=i,d.return=i,l.sibling=d,i.child=l,So(i,t.child,null,a),l=i.child,l.memoizedState=Vf(a),l.childLanes=Uf(t,E,a),i.memoizedState=jf,i=d);else if(es(i),Em(S)){if(E=S.nextSibling&&S.nextSibling.dataset,E)var q=E.dgst;E=q,l=Error(s(419)),l.stack="",l.digest=E,Cl({value:l,source:null,stack:null}),i=zf(t,i,a)}else if(Wt||Il(t,i,a,!1),E=(a&t.childLanes)!==0,Wt||E){if(E=lt,E!==null&&(l=a&-a,l=(l&42)!==0?1:Qs(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==D.retryLane))throw D.retryLane=l,ho(t,l),Gn(E,t,l),Cv;S.data==="$?"||im(),i=zf(t,i,a)}else S.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=D.treeContext,_t=vr(S.nextSibling),Tn=i,Ke=!0,ba=null,Pr=!1,t!==null&&(nr[rr++]=oi,nr[rr++]=li,nr[rr++]=va,oi=t.id,li=t.overflow,va=i),i=Lf(i,l.children),i.flags|=4096);return i}return d?(ts(),d=l.fallback,S=i.mode,D=t.child,q=D.sibling,l=ai(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,q!==null?d=ai(q,d):(d=ya(d,S,a,null),d.flags|=2),d.return=i,l.return=i,l.sibling=d,i.child=l,l=d,d=i.child,S=t.child.memoizedState,S===null?S=Vf(a):(D=S.cachePool,D!==null?(q=zt._currentValue,D=D.parent!==q?{parent:q,pool:q}:D):D=Sy(),S={baseLanes:S.baseLanes|a,cachePool:D}),d.memoizedState=S,d.childLanes=Uf(t,E,a),i.memoizedState=jf,l):(es(i),a=t.child,t=a.sibling,a=ai(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(E=i.deletions,E===null?(i.deletions=[t],i.flags|=16):E.push(t)),i.child=a,i.memoizedState=null,a)}function Lf(t,i){return i=Fu({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Fu(t,i){return t=zn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function zf(t,i,a){return So(i,t.child,null,a),t=Lf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Uv(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),rf(t.return,i,a)}function Bf(t,i,a,l,d){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=d)}function Lv(t,i,a){var l=i.pendingProps,d=l.revealOrder,f=l.tail;if(en(t,i,l.children,a),l=Bt.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Uv(t,a,i);else if(t.tag===19)Uv(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ue(Bt,l),d){case"forwards":for(a=i.child,d=null;a!==null;)t=a.alternate,t!==null&&Lu(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),Bf(i,!1,d,a,f);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(t=d.alternate,t!==null&&Lu(t)===null){i.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}Bf(i,!0,a,null,f);break;case"together":Bf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function fi(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),as|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Il(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=ai(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=ai(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function qf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Su(t)))}function ix(t,i,a){switch(i.tag){case 3:We(i,i.stateNode.containerInfo),Yi(i,zt,t.memoizedState.cache),Rl();break;case 27:case 5:Pi(i);break;case 4:We(i,i.stateNode.containerInfo);break;case 10:Yi(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(es(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Vv(t,i,a):(es(i),t=fi(t,i,a),t!==null?t.sibling:null);es(i);break;case 19:var d=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Il(t,i,a,!1),l=(a&i.childLanes)!==0),d){if(l)return Lv(t,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ue(Bt,Bt.current),l)break;return null;case 22:case 23:return i.lanes=0,Ov(t,i,a);case 24:Yi(i,zt,t.memoizedState.cache)}return fi(t,i,a)}function zv(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Wt=!0;else{if(!qf(t,a)&&(i.flags&128)===0)return Wt=!1,ix(t,i,a);Wt=(t.flags&131072)!==0}else Wt=!1,Ke&&(i.flags&1048576)!==0&&gy(i,Tu,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,d=l._init;if(l=d(l._payload),i.type=l,typeof l=="function")Xd(l)?(t=Aa(l,t),i.tag=1,i=Pv(null,i,l,t,a)):(i.tag=0,i=Pf(null,i,l,t,a));else{if(l!=null){if(d=l.$$typeof,d===se){i.tag=11,i=Iv(null,i,l,t,a);break e}else if(d===R){i.tag=14,i=Dv(null,i,l,t,a);break e}}throw i=ce(l)||l,Error(s(306,i,""))}}return i;case 0:return Pf(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,d=Aa(l,i.pendingProps),Pv(t,i,l,d,a);case 3:e:{if(We(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var f=i.memoizedState;d=f.element,hf(t,i),jl(i,l,null,a);var E=i.memoizedState;if(l=E.cache,Yi(i,zt,l),l!==f.cache&&sf(i,[zt],a,!0),Pl(),l=E.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=jv(t,i,l,a);break e}else if(l!==d){d=er(Error(s(424)),i),Cl(d),i=jv(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(_t=vr(t.firstChild),Tn=i,Ke=!0,ba=null,Pr=!0,a=vv(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Rl(),l===d){i=fi(t,i,a);break e}en(t,i,l,a)}i=i.child}return i;case 26:return qu(t,i),t===null?(a=H_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ke||(a=i.type,t=i.pendingProps,l=rh(Se.current).createElement(a),l[wt]=i,l[Jt]=t,nn(l,a,t),At(l),i.stateNode=l):i.memoizedState=H_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Pi(i),t===null&&Ke&&(l=i.stateNode=B_(i.type,i.pendingProps,Se.current),Tn=i,Pr=!0,d=_t,us(i.type)?(Tm=d,_t=vr(l.firstChild)):_t=d),en(t,i,i.pendingProps.children,a),qu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Ke&&((d=l=_t)&&(l=Ox(l,i.type,i.pendingProps,Pr),l!==null?(i.stateNode=l,Tn=i,_t=vr(l.firstChild),Pr=!1,d=!0):d=!1),d||Ea(i)),Pi(i),d=i.type,f=i.pendingProps,E=t!==null?t.memoizedProps:null,l=f.children,vm(d,f)?l=null:E!==null&&vm(d,E)&&(i.flags|=32),i.memoizedState!==null&&(d=yf(t,i,XS,null,null,a),ic._currentValue=d),qu(t,i),en(t,i,l,a),i.child;case 6:return t===null&&Ke&&((t=a=_t)&&(a=kx(a,i.pendingProps,Pr),a!==null?(i.stateNode=a,Tn=i,_t=null,t=!0):t=!1),t||Ea(i)),null;case 13:return Vv(t,i,a);case 4:return We(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=So(i,null,l,a):en(t,i,l,a),i.child;case 11:return Iv(t,i,i.type,i.pendingProps,a);case 7:return en(t,i,i.pendingProps,a),i.child;case 8:return en(t,i,i.pendingProps.children,a),i.child;case 12:return en(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Yi(i,i.type,l.value),en(t,i,l.children,a),i.child;case 9:return d=i.type._context,l=i.pendingProps.children,Sa(i),d=hn(d),l=l(d),i.flags|=1,en(t,i,l,a),i.child;case 14:return Dv(t,i,i.type,i.pendingProps,a);case 15:return Nv(t,i,i.type,i.pendingProps,a);case 19:return Lv(t,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},t===null?(a=Fu(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=ai(t.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Ov(t,i,a);case 24:return Sa(i),l=hn(zt),t===null?(d=lf(),d===null&&(d=lt,f=af(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=a),d=f),i.memoizedState={parent:l,cache:d},uf(i),Yi(i,zt,d)):((t.lanes&a)!==0&&(hf(t,i),jl(i,null,null,a),Pl()),d=t.memoizedState,f=i.memoizedState,d.parent!==l?(d={parent:l,cache:l},i.memoizedState=d,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=d),Yi(i,zt,l)):(l=f.cache,Yi(i,zt,l),l!==d.cache&&sf(i,[zt],a,!0))),en(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function mi(t){t.flags|=4}function Bv(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Y_(i)){if(i=ir.current,i!==null&&((qe&4194048)===qe?jr!==null:(qe&62914560)!==qe&&(qe&536870912)===0||i!==jr))throw kl=cf,xy;t.flags|=8192}}function Hu(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?X():536870912,t.lanes|=i,Ro|=i)}function Fl(t,i){if(!Ke)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function pt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function sx(t,i,a){var l=i.pendingProps;switch(ef(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(i),null;case 1:return pt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ui(zt),xn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Al(i)?mi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,_y())),pt(i),null;case 26:return a=i.memoizedState,t===null?(mi(i),a!==null?(pt(i),Bv(i,a)):(pt(i),i.flags&=-16777217)):a?a!==t.memoizedState?(mi(i),pt(i),Bv(i,a)):(pt(i),i.flags&=-16777217):(t.memoizedProps!==l&&mi(i),pt(i),i.flags&=-16777217),null;case 27:$r(i),a=Se.current;var d=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&mi(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return pt(i),null}t=ve.current,Al(i)?yy(i):(t=B_(d,l,a),i.stateNode=t,mi(i))}return pt(i),null;case 5:if($r(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&mi(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return pt(i),null}if(t=ve.current,Al(i))yy(i);else{switch(d=rh(Se.current),t){case 1:t=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?d.createElement("select",{is:l.is}):d.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?d.createElement(a,{is:l.is}):d.createElement(a)}}t[wt]=i,t[Jt]=l;e:for(d=i.child;d!==null;){if(d.tag===5||d.tag===6)t.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===i)break e;for(;d.sibling===null;){if(d.return===null||d.return===i)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}i.stateNode=t;e:switch(nn(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&mi(i)}}return pt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&mi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=Se.current,Al(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,d=Tn,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}t[wt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||M_(t.nodeValue,a)),t||Ea(i)}else t=rh(t).createTextNode(l),t[wt]=i,i.stateNode=t}return pt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=Al(i),l!==null&&l.dehydrated!==null){if(t===null){if(!d)throw Error(s(318));if(d=i.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[wt]=i}else Rl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;pt(i),d=!1}else d=_y(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return i.flags&256?(di(i),i):(di(i),null)}if(di(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=i.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==d&&(l.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),Hu(i,i.updateQueue),pt(i),null;case 4:return xn(),t===null&&fm(i.stateNode.containerInfo),pt(i),null;case 10:return ui(i.type),pt(i),null;case 19:if(de(Bt),d=i.memoizedState,d===null)return pt(i),null;if(l=(i.flags&128)!==0,f=d.rendering,f===null)if(l)Fl(d,!1);else{if(bt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(f=Lu(t),f!==null){for(i.flags|=128,Fl(d,!1),t=f.updateQueue,i.updateQueue=t,Hu(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)py(a,t),a=a.sibling;return ue(Bt,Bt.current&1|2),i.child}t=t.sibling}d.tail!==null&&ln()>Ku&&(i.flags|=128,l=!0,Fl(d,!1),i.lanes=4194304)}else{if(!l)if(t=Lu(f),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,Hu(i,t),Fl(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!Ke)return pt(i),null}else 2*ln()-d.renderingStartTime>Ku&&a!==536870912&&(i.flags|=128,l=!0,Fl(d,!1),i.lanes=4194304);d.isBackwards?(f.sibling=i.child,i.child=f):(t=d.last,t!==null?t.sibling=f:i.child=f,d.last=f)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=ln(),i.sibling=null,t=Bt.current,ue(Bt,l?t&1|2:t&1),i):(pt(i),null);case 22:case 23:return di(i),pf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(pt(i),i.subtreeFlags&6&&(i.flags|=8192)):pt(i),a=i.updateQueue,a!==null&&Hu(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&de(xa),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ui(zt),pt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function ax(t,i){switch(ef(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return ui(zt),xn(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return $r(i),null;case 13:if(di(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Rl()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return de(Bt),null;case 4:return xn(),null;case 10:return ui(i.type),null;case 22:case 23:return di(i),pf(),t!==null&&de(xa),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return ui(zt),null;case 25:return null;default:return null}}function qv(t,i){switch(ef(i),i.tag){case 3:ui(zt),xn();break;case 26:case 27:case 5:$r(i);break;case 4:xn();break;case 13:di(i);break;case 19:de(Bt);break;case 10:ui(i.type);break;case 22:case 23:di(i),pf(),t!==null&&de(xa);break;case 24:ui(zt)}}function Hl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&t)===t){l=void 0;var f=a.create,E=a.inst;l=f(),E.destroy=l}a=a.next}while(a!==d)}}catch(S){it(i,i.return,S)}}function ns(t,i,a){try{var l=i.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var f=d.next;l=f;do{if((l.tag&t)===t){var E=l.inst,S=E.destroy;if(S!==void 0){E.destroy=void 0,d=i;var D=a,q=S;try{q()}catch($){it(d,D,$)}}}l=l.next}while(l!==f)}}catch($){it(i,i.return,$)}}function Fv(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Dy(i,a)}catch(l){it(t,t.return,l)}}}function Hv(t,i,a){a.props=Aa(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){it(t,i,l)}}function Gl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(d){it(t,i,d)}}function Vr(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){it(t,i,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){it(t,i,d)}else a.current=null}function Gv(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){it(t,t.return,d)}}function Ff(t,i,a){try{var l=t.stateNode;Rx(l,t.type,a,i),l[Jt]=i}catch(d){it(t,t.return,d)}}function Wv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&us(t.type)||t.tag===4}function Hf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Wv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&us(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gf(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=nh));else if(l!==4&&(l===27&&us(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Gf(t,i,a),t=t.sibling;t!==null;)Gf(t,i,a),t=t.sibling}function Gu(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&us(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Gu(t,i,a),t=t.sibling;t!==null;)Gu(t,i,a),t=t.sibling}function Kv(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,d=i.attributes;d.length;)i.removeAttributeNode(d[0]);nn(i,l,a),i[wt]=t,i[Jt]=a}catch(f){it(t,t.return,f)}}var pi=!1,It=!1,Wf=!1,Qv=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function ox(t,i){if(t=t.containerInfo,gm=ch,t=sy(t),Fd(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var E=0,S=-1,D=-1,q=0,$=0,ne=t,G=null;t:for(;;){for(var W;ne!==a||d!==0&&ne.nodeType!==3||(S=E+d),ne!==f||l!==0&&ne.nodeType!==3||(D=E+l),ne.nodeType===3&&(E+=ne.nodeValue.length),(W=ne.firstChild)!==null;)G=ne,ne=W;for(;;){if(ne===t)break t;if(G===a&&++q===d&&(S=E),G===f&&++$===l&&(D=E),(W=ne.nextSibling)!==null)break;ne=G,G=ne.parentNode}ne=W}a=S===-1||D===-1?null:{start:S,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(ym={focusedElem:t,selectionRange:a},ch=!1,Kt=i;Kt!==null;)if(i=Kt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,Kt=t;else for(;Kt!==null;){switch(i=Kt,f=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=i,d=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var Re=Aa(a.type,d,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Re,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(Te){it(a,a.return,Te)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)bm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":bm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Kt=t;break}Kt=i.return}}function Yv(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:rs(t,a),l&4&&Hl(5,a);break;case 1:if(rs(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(E){it(a,a.return,E)}else{var d=Aa(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(d,i,t.__reactInternalSnapshotBeforeUpdate)}catch(E){it(a,a.return,E)}}l&64&&Fv(a),l&512&&Gl(a,a.return);break;case 3:if(rs(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Dy(t,i)}catch(E){it(a,a.return,E)}}break;case 27:i===null&&l&4&&Kv(a);case 26:case 5:rs(t,a),i===null&&l&4&&Gv(a),l&512&&Gl(a,a.return);break;case 12:rs(t,a);break;case 13:rs(t,a),l&4&&Zv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=gx.bind(null,a),Mx(t,a))));break;case 22:if(l=a.memoizedState!==null||pi,!l){i=i!==null&&i.memoizedState!==null||It,d=pi;var f=It;pi=l,(It=i)&&!f?is(t,a,(a.subtreeFlags&8772)!==0):rs(t,a),pi=d,It=f}break;case 30:break;default:rs(t,a)}}function Xv(t){var i=t.alternate;i!==null&&(t.alternate=null,Xv(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Xa(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ft=null,Rn=!1;function gi(t,i,a){for(a=a.child;a!==null;)$v(t,i,a),a=a.sibling}function $v(t,i,a){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(cr,a)}catch{}switch(a.tag){case 26:It||Vr(a,i),gi(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:It||Vr(a,i);var l=ft,d=Rn;us(a.type)&&(ft=a.stateNode,Rn=!1),gi(t,i,a),ec(a.stateNode),ft=l,Rn=d;break;case 5:It||Vr(a,i);case 6:if(l=ft,d=Rn,ft=null,gi(t,i,a),ft=l,Rn=d,ft!==null)if(Rn)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(a.stateNode)}catch(f){it(a,i,f)}else try{ft.removeChild(a.stateNode)}catch(f){it(a,i,f)}break;case 18:ft!==null&&(Rn?(t=ft,L_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),lc(t)):L_(ft,a.stateNode));break;case 4:l=ft,d=Rn,ft=a.stateNode.containerInfo,Rn=!0,gi(t,i,a),ft=l,Rn=d;break;case 0:case 11:case 14:case 15:It||ns(2,a,i),It||ns(4,a,i),gi(t,i,a);break;case 1:It||(Vr(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Hv(a,i,l)),gi(t,i,a);break;case 21:gi(t,i,a);break;case 22:It=(l=It)||a.memoizedState!==null,gi(t,i,a),It=l;break;default:gi(t,i,a)}}function Zv(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{lc(t)}catch(a){it(i,i.return,a)}}function lx(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Qv),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Qv),i;default:throw Error(s(435,t.tag))}}function Kf(t,i){var a=lx(t);i.forEach(function(l){var d=yx.bind(null,t,l);a.has(l)||(a.add(l),l.then(d,d))})}function Bn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],f=t,E=i,S=E;e:for(;S!==null;){switch(S.tag){case 27:if(us(S.type)){ft=S.stateNode,Rn=!1;break e}break;case 5:ft=S.stateNode,Rn=!1;break e;case 3:case 4:ft=S.stateNode.containerInfo,Rn=!0;break e}S=S.return}if(ft===null)throw Error(s(160));$v(f,E,d),ft=null,Rn=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Jv(i,t),i=i.sibling}var yr=null;function Jv(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Bn(i,t),qn(t),l&4&&(ns(3,t,t.return),Hl(3,t),ns(5,t,t.return));break;case 1:Bn(i,t),qn(t),l&512&&(It||a===null||Vr(a,a.return)),l&64&&pi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=yr;if(Bn(i,t),qn(t),l&512&&(It||a===null||Vr(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":f=d.getElementsByTagName("title")[0],(!f||f[Li]||f[wt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(l),d.head.insertBefore(f,d.querySelector("head > title"))),nn(f,l,a),f[wt]=t,At(f),l=f;break e;case"link":var E=K_("link","href",d).get(l+(a.href||""));if(E){for(var S=0;S<E.length;S++)if(f=E[S],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(S,1);break t}}f=d.createElement(l),nn(f,l,a),d.head.appendChild(f);break;case"meta":if(E=K_("meta","content",d).get(l+(a.content||""))){for(S=0;S<E.length;S++)if(f=E[S],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(S,1);break t}}f=d.createElement(l),nn(f,l,a),d.head.appendChild(f);break;default:throw Error(s(468,l))}f[wt]=t,At(f),l=f}t.stateNode=l}else Q_(d,t.type,t.stateNode);else t.stateNode=W_(d,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?Q_(d,t.type,t.stateNode):W_(d,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Ff(t,t.memoizedProps,a.memoizedProps)}break;case 27:Bn(i,t),qn(t),l&512&&(It||a===null||Vr(a,a.return)),a!==null&&l&4&&Ff(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Bn(i,t),qn(t),l&512&&(It||a===null||Vr(a,a.return)),t.flags&32){d=t.stateNode;try{Zn(d,"")}catch(W){it(t,t.return,W)}}l&4&&t.stateNode!=null&&(d=t.memoizedProps,Ff(t,d,a!==null?a.memoizedProps:d)),l&1024&&(Wf=!0);break;case 6:if(Bn(i,t),qn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(W){it(t,t.return,W)}}break;case 3:if(ah=null,d=yr,yr=ih(i.containerInfo),Bn(i,t),yr=d,qn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{lc(i.containerInfo)}catch(W){it(t,t.return,W)}Wf&&(Wf=!1,e_(t));break;case 4:l=yr,yr=ih(t.stateNode.containerInfo),Bn(i,t),qn(t),yr=l;break;case 12:Bn(i,t),qn(t);break;case 13:Bn(i,t),qn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Jf=ln()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Kf(t,l)));break;case 22:d=t.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,q=pi,$=It;if(pi=q||d,It=$||D,Bn(i,t),It=$,pi=q,qn(t),l&8192)e:for(i=t.stateNode,i._visibility=d?i._visibility&-2:i._visibility|1,d&&(a===null||D||pi||It||Ra(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){D=a=i;try{if(f=D.stateNode,d)E=f.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{S=D.stateNode;var ne=D.memoizedProps.style,G=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;S.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(W){it(D,D.return,W)}}}else if(i.tag===6){if(a===null){D=i;try{D.stateNode.nodeValue=d?"":D.memoizedProps}catch(W){it(D,D.return,W)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Kf(t,a))));break;case 19:Bn(i,t),qn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Kf(t,l)));break;case 30:break;case 21:break;default:Bn(i,t),qn(t)}}function qn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(Wv(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var d=a.stateNode,f=Hf(t);Gu(t,f,d);break;case 5:var E=a.stateNode;a.flags&32&&(Zn(E,""),a.flags&=-33);var S=Hf(t);Gu(t,S,E);break;case 3:case 4:var D=a.stateNode.containerInfo,q=Hf(t);Gf(t,q,D);break;default:throw Error(s(161))}}catch($){it(t,t.return,$)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function e_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;e_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function rs(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Yv(t,i.alternate,i),i=i.sibling}function Ra(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:ns(4,i,i.return),Ra(i);break;case 1:Vr(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Hv(i,i.return,a),Ra(i);break;case 27:ec(i.stateNode);case 26:case 5:Vr(i,i.return),Ra(i);break;case 22:i.memoizedState===null&&Ra(i);break;case 30:Ra(i);break;default:Ra(i)}t=t.sibling}}function is(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,d=t,f=i,E=f.flags;switch(f.tag){case 0:case 11:case 15:is(d,f,a),Hl(4,f);break;case 1:if(is(d,f,a),l=f,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(q){it(l,l.return,q)}if(l=f,d=l.updateQueue,d!==null){var S=l.stateNode;try{var D=d.shared.hiddenCallbacks;if(D!==null)for(d.shared.hiddenCallbacks=null,d=0;d<D.length;d++)Iy(D[d],S)}catch(q){it(l,l.return,q)}}a&&E&64&&Fv(f),Gl(f,f.return);break;case 27:Kv(f);case 26:case 5:is(d,f,a),a&&l===null&&E&4&&Gv(f),Gl(f,f.return);break;case 12:is(d,f,a);break;case 13:is(d,f,a),a&&E&4&&Zv(d,f);break;case 22:f.memoizedState===null&&is(d,f,a),Gl(f,f.return);break;case 30:break;default:is(d,f,a)}i=i.sibling}}function Qf(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Dl(a))}function Yf(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Dl(t))}function Ur(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)t_(t,i,a,l),i=i.sibling}function t_(t,i,a,l){var d=i.flags;switch(i.tag){case 0:case 11:case 15:Ur(t,i,a,l),d&2048&&Hl(9,i);break;case 1:Ur(t,i,a,l);break;case 3:Ur(t,i,a,l),d&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Dl(t)));break;case 12:if(d&2048){Ur(t,i,a,l),t=i.stateNode;try{var f=i.memoizedProps,E=f.id,S=f.onPostCommit;typeof S=="function"&&S(E,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){it(i,i.return,D)}}else Ur(t,i,a,l);break;case 13:Ur(t,i,a,l);break;case 23:break;case 22:f=i.stateNode,E=i.alternate,i.memoizedState!==null?f._visibility&2?Ur(t,i,a,l):Wl(t,i):f._visibility&2?Ur(t,i,a,l):(f._visibility|=2,xo(t,i,a,l,(i.subtreeFlags&10256)!==0)),d&2048&&Qf(E,i);break;case 24:Ur(t,i,a,l),d&2048&&Yf(i.alternate,i);break;default:Ur(t,i,a,l)}}function xo(t,i,a,l,d){for(d=d&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var f=t,E=i,S=a,D=l,q=E.flags;switch(E.tag){case 0:case 11:case 15:xo(f,E,S,D,d),Hl(8,E);break;case 23:break;case 22:var $=E.stateNode;E.memoizedState!==null?$._visibility&2?xo(f,E,S,D,d):Wl(f,E):($._visibility|=2,xo(f,E,S,D,d)),d&&q&2048&&Qf(E.alternate,E);break;case 24:xo(f,E,S,D,d),d&&q&2048&&Yf(E.alternate,E);break;default:xo(f,E,S,D,d)}i=i.sibling}}function Wl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,d=l.flags;switch(l.tag){case 22:Wl(a,l),d&2048&&Qf(l.alternate,l);break;case 24:Wl(a,l),d&2048&&Yf(l.alternate,l);break;default:Wl(a,l)}i=i.sibling}}var Kl=8192;function wo(t){if(t.subtreeFlags&Kl)for(t=t.child;t!==null;)n_(t),t=t.sibling}function n_(t){switch(t.tag){case 26:wo(t),t.flags&Kl&&t.memoizedState!==null&&Kx(yr,t.memoizedState,t.memoizedProps);break;case 5:wo(t);break;case 3:case 4:var i=yr;yr=ih(t.stateNode.containerInfo),wo(t),yr=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Kl,Kl=16777216,wo(t),Kl=i):wo(t));break;default:wo(t)}}function r_(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Ql(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Kt=l,s_(l,t)}r_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)i_(t),t=t.sibling}function i_(t){switch(t.tag){case 0:case 11:case 15:Ql(t),t.flags&2048&&ns(9,t,t.return);break;case 3:Ql(t);break;case 12:Ql(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Wu(t)):Ql(t);break;default:Ql(t)}}function Wu(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Kt=l,s_(l,t)}r_(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:ns(8,i,i.return),Wu(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Wu(i));break;default:Wu(i)}t=t.sibling}}function s_(t,i){for(;Kt!==null;){var a=Kt;switch(a.tag){case 0:case 11:case 15:ns(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Dl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Kt=l;else e:for(a=t;Kt!==null;){l=Kt;var d=l.sibling,f=l.return;if(Xv(l),l===a){Kt=null;break e}if(d!==null){d.return=f,Kt=d;break e}Kt=f}}}var cx={getCacheForType:function(t){var i=hn(zt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},ux=typeof WeakMap=="function"?WeakMap:Map,$e=0,lt=null,je=null,qe=0,Ze=0,Fn=null,ss=!1,Ao=!1,Xf=!1,yi=0,bt=0,as=0,Ca=0,$f=0,sr=0,Ro=0,Yl=null,Cn=null,Zf=!1,Jf=0,Ku=1/0,Qu=null,os=null,tn=0,ls=null,Co=null,Io=0,em=0,tm=null,a_=null,Xl=0,nm=null;function Hn(){if(($e&2)!==0&&qe!==0)return qe&-qe;if(K.T!==null){var t=go;return t!==0?t:cm()}return Zt()}function o_(){sr===0&&(sr=(qe&536870912)===0||Ke?Ks():536870912);var t=ir.current;return t!==null&&(t.flags|=32),sr}function Gn(t,i,a){(t===lt&&(Ze===2||Ze===9)||t.cancelPendingCommit!==null)&&(Do(t,0),cs(t,qe,sr,!1)),Je(t,a),(($e&2)===0||t!==lt)&&(t===lt&&(($e&2)===0&&(Ca|=a),bt===4&&cs(t,qe,sr,!1)),Lr(t))}function l_(t,i,a){if(($e&6)!==0)throw Error(s(327));var l=!a&&(i&124)===0&&(i&t.expiredLanes)===0||wr(t,i),d=l?fx(t,i):sm(t,i,!0),f=l;do{if(d===0){Ao&&!l&&cs(t,i,0,!1);break}else{if(a=t.current.alternate,f&&!hx(a)){d=sm(t,i,!1),f=!1;continue}if(d===2){if(f=i,t.errorRecoveryDisabledLanes&f)var E=0;else E=t.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var S=t;d=Yl;var D=S.current.memoizedState.isDehydrated;if(D&&(Do(S,E).flags|=256),E=sm(S,E,!1),E!==2){if(Xf&&!D){S.errorRecoveryDisabledLanes|=f,Ca|=f,d=4;break e}f=Cn,Cn=d,f!==null&&(Cn===null?Cn=f:Cn.push.apply(Cn,f))}d=E}if(f=!1,d!==2)continue}}if(d===1){Do(t,0),cs(t,i,0,!0);break}e:{switch(l=t,f=d,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:cs(l,i,sr,!ss);break e;case 2:Cn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(d=Jf+300-ln(),10<d)){if(cs(l,i,sr,!ss),wn(l,0,!0)!==0)break e;l.timeoutHandle=V_(c_.bind(null,l,a,Cn,Qu,Zf,i,sr,Ca,Ro,ss,f,2,-0,0),d);break e}c_(l,a,Cn,Qu,Zf,i,sr,Ca,Ro,ss,f,0,-0,0)}}break}while(!0);Lr(t)}function c_(t,i,a,l,d,f,E,S,D,q,$,ne,G,W){if(t.timeoutHandle=-1,ne=i.subtreeFlags,(ne&8192||(ne&16785408)===16785408)&&(rc={stylesheets:null,count:0,unsuspend:Wx},n_(i),ne=Qx(),ne!==null)){t.cancelPendingCommit=ne(g_.bind(null,t,i,f,a,l,d,E,S,D,$,1,G,W)),cs(t,f,E,!q);return}g_(t,i,f,a,l,d,E,S,D)}function hx(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],f=d.getSnapshot;d=d.value;try{if(!Ln(f(),d))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function cs(t,i,a,l){i&=~$f,i&=~Ca,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var d=i;0<d;){var f=31-Ot(d),E=1<<f;l[f]=-1,d&=~E}a!==0&&Ar(t,a,i)}function Yu(){return($e&6)===0?($l(0),!1):!0}function rm(){if(je!==null){if(Ze===0)var t=je.return;else t=je,ci=Ta=null,bf(t),To=null,Bl=0,t=je;for(;t!==null;)qv(t.alternate,t),t=t.return;je=null}}function Do(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Ix(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),rm(),lt=t,je=a=ai(t.current,null),qe=i,Ze=0,Fn=null,ss=!1,Ao=wr(t,i),Xf=!1,Ro=sr=$f=Ca=as=bt=0,Cn=Yl=null,Zf=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var d=31-Ot(l),f=1<<d;i|=t[d],l&=~f}return yi=i,yu(),a}function u_(t,i){ke=null,K.H=ju,i===Ol||i===Au?(i=Ry(),Ze=3):i===xy?(i=Ry(),Ze=4):Ze=i===Cv?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Fn=i,je===null&&(bt=1,Bu(t,er(i,t.current)))}function h_(){var t=K.H;return K.H=ju,t===null?ju:t}function d_(){var t=K.A;return K.A=cx,t}function im(){bt=4,ss||(qe&4194048)!==qe&&ir.current!==null||(Ao=!0),(as&134217727)===0&&(Ca&134217727)===0||lt===null||cs(lt,qe,sr,!1)}function sm(t,i,a){var l=$e;$e|=2;var d=h_(),f=d_();(lt!==t||qe!==i)&&(Qu=null,Do(t,i)),i=!1;var E=bt;e:do try{if(Ze!==0&&je!==null){var S=je,D=Fn;switch(Ze){case 8:rm(),E=6;break e;case 3:case 2:case 9:case 6:ir.current===null&&(i=!0);var q=Ze;if(Ze=0,Fn=null,No(t,S,D,q),a&&Ao){E=0;break e}break;default:q=Ze,Ze=0,Fn=null,No(t,S,D,q)}}dx(),E=bt;break}catch($){u_(t,$)}while(!0);return i&&t.shellSuspendCounter++,ci=Ta=null,$e=l,K.H=d,K.A=f,je===null&&(lt=null,qe=0,yu()),E}function dx(){for(;je!==null;)f_(je)}function fx(t,i){var a=$e;$e|=2;var l=h_(),d=d_();lt!==t||qe!==i?(Qu=null,Ku=ln()+500,Do(t,i)):Ao=wr(t,i);e:do try{if(Ze!==0&&je!==null){i=je;var f=Fn;t:switch(Ze){case 1:Ze=0,Fn=null,No(t,i,f,1);break;case 2:case 9:if(wy(f)){Ze=0,Fn=null,m_(i);break}i=function(){Ze!==2&&Ze!==9||lt!==t||(Ze=7),Lr(t)},f.then(i,i);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:wy(f)?(Ze=0,Fn=null,m_(i)):(Ze=0,Fn=null,No(t,i,f,7));break;case 5:var E=null;switch(je.tag){case 26:E=je.memoizedState;case 5:case 27:var S=je;if(!E||Y_(E)){Ze=0,Fn=null;var D=S.sibling;if(D!==null)je=D;else{var q=S.return;q!==null?(je=q,Xu(q)):je=null}break t}}Ze=0,Fn=null,No(t,i,f,5);break;case 6:Ze=0,Fn=null,No(t,i,f,6);break;case 8:rm(),bt=6;break e;default:throw Error(s(462))}}mx();break}catch($){u_(t,$)}while(!0);return ci=Ta=null,K.H=l,K.A=d,$e=a,je!==null?0:(lt=null,qe=0,yu(),bt)}function mx(){for(;je!==null&&!Ka();)f_(je)}function f_(t){var i=zv(t.alternate,t,yi);t.memoizedProps=t.pendingProps,i===null?Xu(t):je=i}function m_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Mv(a,i,i.pendingProps,i.type,void 0,qe);break;case 11:i=Mv(a,i,i.pendingProps,i.type.render,i.ref,qe);break;case 5:bf(i);default:qv(a,i),i=je=py(i,yi),i=zv(a,i,yi)}t.memoizedProps=t.pendingProps,i===null?Xu(t):je=i}function No(t,i,a,l){ci=Ta=null,bf(i),To=null,Bl=0;var d=i.return;try{if(rx(t,d,i,a,qe)){bt=1,Bu(t,er(a,t.current)),je=null;return}}catch(f){if(d!==null)throw je=d,f;bt=1,Bu(t,er(a,t.current)),je=null;return}i.flags&32768?(Ke||l===1?t=!0:Ao||(qe&536870912)!==0?t=!1:(ss=t=!0,(l===2||l===9||l===3||l===6)&&(l=ir.current,l!==null&&l.tag===13&&(l.flags|=16384))),p_(i,t)):Xu(i)}function Xu(t){var i=t;do{if((i.flags&32768)!==0){p_(i,ss);return}t=i.return;var a=sx(i.alternate,i,yi);if(a!==null){je=a;return}if(i=i.sibling,i!==null){je=i;return}je=i=t}while(i!==null);bt===0&&(bt=5)}function p_(t,i){do{var a=ax(t.alternate,t);if(a!==null){a.flags&=32767,je=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){je=t;return}je=t=a}while(t!==null);bt=6,je=null}function g_(t,i,a,l,d,f,E,S,D){t.cancelPendingCommit=null;do $u();while(tn!==0);if(($e&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=Qd,Ye(t,a,f,E,S,D),t===lt&&(je=lt=null,qe=0),Co=i,ls=t,Io=a,em=f,tm=d,a_=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,vx(jn,function(){return E_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,d=oe.p,oe.p=2,E=$e,$e|=4;try{ox(t,i,a)}finally{$e=E,oe.p=d,K.T=l}}tn=1,y_(),v_(),__()}}function y_(){if(tn===1){tn=0;var t=ls,i=Co,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=oe.p;oe.p=2;var d=$e;$e|=4;try{Jv(i,t);var f=ym,E=sy(t.containerInfo),S=f.focusedElem,D=f.selectionRange;if(E!==S&&S&&S.ownerDocument&&iy(S.ownerDocument.documentElement,S)){if(D!==null&&Fd(S)){var q=D.start,$=D.end;if($===void 0&&($=q),"selectionStart"in S)S.selectionStart=q,S.selectionEnd=Math.min($,S.value.length);else{var ne=S.ownerDocument||document,G=ne&&ne.defaultView||window;if(G.getSelection){var W=G.getSelection(),Re=S.textContent.length,Te=Math.min(D.start,Re),rt=D.end===void 0?Te:Math.min(D.end,Re);!W.extend&&Te>rt&&(E=rt,rt=Te,Te=E);var L=ry(S,Te),V=ry(S,rt);if(L&&V&&(W.rangeCount!==1||W.anchorNode!==L.node||W.anchorOffset!==L.offset||W.focusNode!==V.node||W.focusOffset!==V.offset)){var z=ne.createRange();z.setStart(L.node,L.offset),W.removeAllRanges(),Te>rt?(W.addRange(z),W.extend(V.node,V.offset)):(z.setEnd(V.node,V.offset),W.addRange(z))}}}}for(ne=[],W=S;W=W.parentNode;)W.nodeType===1&&ne.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ne.length;S++){var ee=ne[S];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}ch=!!gm,ym=gm=null}finally{$e=d,oe.p=l,K.T=a}}t.current=i,tn=2}}function v_(){if(tn===2){tn=0;var t=ls,i=Co,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=oe.p;oe.p=2;var d=$e;$e|=4;try{Yv(t,i.alternate,i)}finally{$e=d,oe.p=l,K.T=a}}tn=3}}function __(){if(tn===4||tn===3){tn=0,ji();var t=ls,i=Co,a=Io,l=a_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?tn=5:(tn=0,Co=ls=null,b_(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(os=null),Be(a),i=i.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(cr,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=K.T,d=oe.p,oe.p=2,K.T=null;try{for(var f=t.onRecoverableError,E=0;E<l.length;E++){var S=l[E];f(S.value,{componentStack:S.stack})}}finally{K.T=i,oe.p=d}}(Io&3)!==0&&$u(),Lr(t),d=t.pendingLanes,(a&4194090)!==0&&(d&42)!==0?t===nm?Xl++:(Xl=0,nm=t):Xl=0,$l(0)}}function b_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Dl(i)))}function $u(t){return y_(),v_(),__(),E_()}function E_(){if(tn!==5)return!1;var t=ls,i=em;em=0;var a=Be(Io),l=K.T,d=oe.p;try{oe.p=32>a?32:a,K.T=null,a=tm,tm=null;var f=ls,E=Io;if(tn=0,Co=ls=null,Io=0,($e&6)!==0)throw Error(s(331));var S=$e;if($e|=4,i_(f.current),t_(f,f.current,E,a),$e=S,$l(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(cr,f)}catch{}return!0}finally{oe.p=d,K.T=l,b_(t,i)}}function T_(t,i,a){i=er(a,i),i=Mf(t.stateNode,i,2),t=Zi(t,i,2),t!==null&&(Je(t,2),Lr(t))}function it(t,i,a){if(t.tag===3)T_(t,t,a);else for(;i!==null;){if(i.tag===3){T_(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(os===null||!os.has(l))){t=er(a,t),a=Av(2),l=Zi(i,a,2),l!==null&&(Rv(a,l,i,t),Je(l,2),Lr(l));break}}i=i.return}}function am(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new ux;var d=new Set;l.set(i,d)}else d=l.get(i),d===void 0&&(d=new Set,l.set(i,d));d.has(a)||(Xf=!0,d.add(a),t=px.bind(null,t,i,a),i.then(t,t))}function px(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,lt===t&&(qe&a)===a&&(bt===4||bt===3&&(qe&62914560)===qe&&300>ln()-Jf?($e&2)===0&&Do(t,0):$f|=a,Ro===qe&&(Ro=0)),Lr(t)}function S_(t,i){i===0&&(i=X()),t=ho(t,i),t!==null&&(Je(t,i),Lr(t))}function gx(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),S_(t,a)}function yx(t,i){var a=0;switch(t.tag){case 13:var l=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),S_(t,a)}function vx(t,i){return Pn(t,i)}var Zu=null,Oo=null,om=!1,Ju=!1,lm=!1,Ia=0;function Lr(t){t!==Oo&&t.next===null&&(Oo===null?Zu=Oo=t:Oo=Oo.next=t),Ju=!0,om||(om=!0,bx())}function $l(t,i){if(!lm&&Ju){lm=!0;do for(var a=!1,l=Zu;l!==null;){if(t!==0){var d=l.pendingLanes;if(d===0)var f=0;else{var E=l.suspendedLanes,S=l.pingedLanes;f=(1<<31-Ot(42|t)+1)-1,f&=d&~(E&~S),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,R_(l,f))}else f=qe,f=wn(l,l===lt?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||wr(l,f)||(a=!0,R_(l,f));l=l.next}while(a);lm=!1}}function _x(){x_()}function x_(){Ju=om=!1;var t=0;Ia!==0&&(Cx()&&(t=Ia),Ia=0);for(var i=ln(),a=null,l=Zu;l!==null;){var d=l.next,f=w_(l,i);f===0?(l.next=null,a===null?Zu=d:a.next=d,d===null&&(Oo=a)):(a=l,(t!==0||(f&3)!==0)&&(Ju=!0)),l=d}$l(t)}function w_(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,d=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var E=31-Ot(f),S=1<<E,D=d[E];D===-1?((S&a)===0||(S&l)!==0)&&(d[E]=Jr(S,i)):D<=i&&(t.expiredLanes|=S),f&=~S}if(i=lt,a=qe,a=wn(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(Ze===2||Ze===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&lr(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||wr(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&lr(l),Be(a)){case 2:case 8:a=xt;break;case 32:a=jn;break;case 268435456:a=Ui;break;default:a=jn}return l=A_.bind(null,t),a=Pn(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&lr(l),t.callbackPriority=2,t.callbackNode=null,2}function A_(t,i){if(tn!==0&&tn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if($u()&&t.callbackNode!==a)return null;var l=qe;return l=wn(t,t===lt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(l_(t,l,i),w_(t,ln()),t.callbackNode!=null&&t.callbackNode===a?A_.bind(null,t):null)}function R_(t,i){if($u())return null;l_(t,i,!0)}function bx(){Dx(function(){($e&6)!==0?Pn(vt,_x):x_()})}function cm(){return Ia===0&&(Ia=Ks()),Ia}function C_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:dr(""+t)}function I_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function Ex(t,i,a,l,d){if(i==="submit"&&a&&a.stateNode===d){var f=C_((d[Jt]||null).action),E=l.submitter;E&&(i=(i=E[Jt]||null)?C_(i.formAction):E.getAttribute("formAction"),i!==null&&(f=i,E=null));var S=new la("action","action",null,l,d);t.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ia!==0){var D=E?I_(d,E):new FormData(d);If(a,{pending:!0,data:D,method:d.method,action:f},null,D)}}else typeof f=="function"&&(S.preventDefault(),D=E?I_(d,E):new FormData(d),If(a,{pending:!0,data:D,method:d.method,action:f},f,D))},currentTarget:d}]})}}for(var um=0;um<Kd.length;um++){var hm=Kd[um],Tx=hm.toLowerCase(),Sx=hm[0].toUpperCase()+hm.slice(1);gr(Tx,"on"+Sx)}gr(ly,"onAnimationEnd"),gr(cy,"onAnimationIteration"),gr(uy,"onAnimationStart"),gr("dblclick","onDoubleClick"),gr("focusin","onFocus"),gr("focusout","onBlur"),gr(zS,"onTransitionRun"),gr(BS,"onTransitionStart"),gr(qS,"onTransitionCancel"),gr(hy,"onTransitionEnd"),Nr("onMouseEnter",["mouseout","mouseover"]),Nr("onMouseLeave",["mouseout","mouseover"]),Nr("onPointerEnter",["pointerout","pointerover"]),Nr("onPointerLeave",["pointerout","pointerover"]),Dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Dr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zl));function D_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],d=l.event;l=l.listeners;e:{var f=void 0;if(i)for(var E=l.length-1;0<=E;E--){var S=l[E],D=S.instance,q=S.currentTarget;if(S=S.listener,D!==f&&d.isPropagationStopped())break e;f=S,d.currentTarget=q;try{f(d)}catch($){zu($)}d.currentTarget=null,f=D}else for(E=0;E<l.length;E++){if(S=l[E],D=S.instance,q=S.currentTarget,S=S.listener,D!==f&&d.isPropagationStopped())break e;f=S,d.currentTarget=q;try{f(d)}catch($){zu($)}d.currentTarget=null,f=D}}}}function Ve(t,i){var a=i[Ys];a===void 0&&(a=i[Ys]=new Set);var l=t+"__bubble";a.has(l)||(N_(i,t,2,!1),a.add(l))}function dm(t,i,a){var l=0;i&&(l|=4),N_(a,t,l,i)}var eh="_reactListening"+Math.random().toString(36).slice(2);function fm(t){if(!t[eh]){t[eh]=!0,tu.forEach(function(a){a!=="selectionchange"&&(xx.has(a)||dm(a,!1,t),dm(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[eh]||(i[eh]=!0,dm("selectionchange",!1,i))}}function N_(t,i,a,l){switch(t0(i)){case 2:var d=$x;break;case 8:d=Zx;break;default:d=Rm}a=d.bind(null,i,a,t),d=void 0,!ii||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),l?d!==void 0?t.addEventListener(i,a,{capture:!0,passive:d}):t.addEventListener(i,a,!0):d!==void 0?t.addEventListener(i,a,{passive:d}):t.addEventListener(i,a,!1)}function mm(t,i,a,l,d){var f=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var S=l.stateNode.containerInfo;if(S===d)break;if(E===4)for(E=l.return;E!==null;){var D=E.tag;if((D===3||D===4)&&E.stateNode.containerInfo===d)return;E=E.return}for(;S!==null;){if(E=Cr(S),E===null)return;if(D=E.tag,D===5||D===6||D===26||D===27){l=f=E;continue e}S=S.parentNode}}l=l.return}sa(function(){var q=f,$=pl(a),ne=[];e:{var G=dy.get(t);if(G!==void 0){var W=la,Re=t;switch(t){case"keypress":if(aa(a)===0)break e;case"keydown":case"keyup":W=oo;break;case"focusin":Re="focus",W=io;break;case"focusout":Re="blur",W=io;break;case"beforeblur":case"afterblur":W=io;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=fa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=lu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=Qi;break;case ly:case cy:case uy:W=yl;break;case hy:W=v;break;case"scroll":case"scrollend":W=ua;break;case"wheel":W=x;break;case"copy":case"cut":case"paste":W=uu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=bl;break;case"toggle":case"beforetoggle":W=Q}var Te=(i&4)!==0,rt=!Te&&(t==="scroll"||t==="scrollend"),L=Te?G!==null?G+"Capture":null:G;Te=[];for(var V=q,z;V!==null;){var ee=V;if(z=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||z===null||L===null||(ee=Wi(V,L),ee!=null&&Te.push(Jl(V,ee,z))),rt)break;V=V.return}0<Te.length&&(G=new W(G,Re,null,a,$),ne.push({event:G,listeners:Te}))}}if((i&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",W=t==="mouseout"||t==="pointerout",G&&a!==ml&&(Re=a.relatedTarget||a.fromElement)&&(Cr(Re)||Re[ei]))break e;if((W||G)&&(G=$.window===$?$:(G=$.ownerDocument)?G.defaultView||G.parentWindow:window,W?(Re=a.relatedTarget||a.toElement,W=q,Re=Re?Cr(Re):null,Re!==null&&(rt=c(Re),Te=Re.tag,Re!==rt||Te!==5&&Te!==27&&Te!==6)&&(Re=null)):(W=null,Re=q),W!==Re)){if(Te=fa,ee="onMouseLeave",L="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(Te=bl,ee="onPointerLeave",L="onPointerEnter",V="pointer"),rt=W==null?G:zi(W),z=Re==null?G:zi(Re),G=new Te(ee,V+"leave",W,a,$),G.target=rt,G.relatedTarget=z,ee=null,Cr($)===q&&(Te=new Te(L,V+"enter",Re,a,$),Te.target=z,Te.relatedTarget=rt,ee=Te),rt=ee,W&&Re)t:{for(Te=W,L=Re,V=0,z=Te;z;z=ko(z))V++;for(z=0,ee=L;ee;ee=ko(ee))z++;for(;0<V-z;)Te=ko(Te),V--;for(;0<z-V;)L=ko(L),z--;for(;V--;){if(Te===L||L!==null&&Te===L.alternate)break t;Te=ko(Te),L=ko(L)}Te=null}else Te=null;W!==null&&O_(ne,G,W,Te,!1),Re!==null&&rt!==null&&O_(ne,rt,Re,Te,!0)}}e:{if(G=q?zi(q):window,W=G.nodeName&&G.nodeName.toLowerCase(),W==="select"||W==="input"&&G.type==="file")var pe=$g;else if(Yg(G))if(Zg)pe=VS;else{pe=PS;var Pe=MS}else W=G.nodeName,!W||W.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?q&&to(q.elementType)&&(pe=$g):pe=jS;if(pe&&(pe=pe(t,q))){Xg(ne,pe,a,$);break e}Pe&&Pe(t,G,q),t==="focusout"&&q&&G.type==="number"&&q.memoizedProps.value!=null&&hl(G,"number",G.value)}switch(Pe=q?zi(q):window,t){case"focusin":(Yg(Pe)||Pe.contentEditable==="true")&&(lo=Pe,Hd=q,wl=null);break;case"focusout":wl=Hd=lo=null;break;case"mousedown":Gd=!0;break;case"contextmenu":case"mouseup":case"dragend":Gd=!1,ay(ne,a,$);break;case"selectionchange":if(LS)break;case"keydown":case"keyup":ay(ne,a,$)}var be;if(Ie)e:{switch(t){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else pr?fr(t,a)&&(xe="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(xe="onCompositionStart");xe&&(Rt&&a.locale!=="ko"&&(pr||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&pr&&(be=ou()):(Jn=$,ot="value"in Jn?Jn.value:Jn.textContent,pr=!0)),Pe=th(q,xe),0<Pe.length&&(xe=new _l(xe,t,null,a,$),ne.push({event:xe,listeners:Pe}),be?xe.data=be:(be=mr(a),be!==null&&(xe.data=be)))),(be=Xe?El(t,a):NS(t,a))&&(xe=th(q,"onBeforeInput"),0<xe.length&&(Pe=new _l("onBeforeInput","beforeinput",null,a,$),ne.push({event:Pe,listeners:xe}),Pe.data=be)),Ex(ne,t,q,a,$)}D_(ne,i)})}function Jl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function th(t,i){for(var a=i+"Capture",l=[];t!==null;){var d=t,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=Wi(t,a),d!=null&&l.unshift(Jl(t,d,f)),d=Wi(t,i),d!=null&&l.push(Jl(t,d,f))),t.tag===3)return l;t=t.return}return[]}function ko(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function O_(t,i,a,l,d){for(var f=i._reactName,E=[];a!==null&&a!==l;){var S=a,D=S.alternate,q=S.stateNode;if(S=S.tag,D!==null&&D===l)break;S!==5&&S!==26&&S!==27||q===null||(D=q,d?(q=Wi(a,f),q!=null&&E.unshift(Jl(a,q,D))):d||(q=Wi(a,f),q!=null&&E.push(Jl(a,q,D)))),a=a.return}E.length!==0&&t.push({event:i,listeners:E})}var wx=/\r\n?/g,Ax=/\u0000|\uFFFD/g;function k_(t){return(typeof t=="string"?t:""+t).replace(wx,`
`).replace(Ax,"")}function M_(t,i){return i=k_(i),k_(t)===i}function nh(){}function nt(t,i,a,l,d,f){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Zn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Zn(t,""+l);break;case"className":ea(t,"class",l);break;case"tabIndex":ea(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ea(t,a,l);break;case"style":fl(t,l,f);break;case"data":if(i!=="object"){ea(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=dr(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&nt(t,i,"name",d.name,d,null),nt(t,i,"formEncType",d.formEncType,d,null),nt(t,i,"formMethod",d.formMethod,d,null),nt(t,i,"formTarget",d.formTarget,d,null)):(nt(t,i,"encType",d.encType,d,null),nt(t,i,"method",d.method,d,null),nt(t,i,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=dr(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=nh);break;case"onScroll":l!=null&&Ve("scroll",t);break;case"onScrollEnd":l!=null&&Ve("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=dr(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ve("beforetoggle",t),Ve("toggle",t),Js(t,"popover",l);break;case"xlinkActuate":$n(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":$n(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":$n(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":$n(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":$n(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":$n(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":$n(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":$n(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":$n(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Js(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=iu.get(a)||a,Js(t,a,l))}}function pm(t,i,a,l,d,f){switch(a){case"style":fl(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Zn(t,l):(typeof l=="number"||typeof l=="bigint")&&Zn(t,""+l);break;case"onScroll":l!=null&&Ve("scroll",t);break;case"onScrollEnd":l!=null&&Ve("scrollend",t);break;case"onClick":l!=null&&(t.onclick=nh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$s.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),i=a.slice(2,d?a.length-7:void 0),f=t[Jt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(i,f,d),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,d);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Js(t,a,l)}}}function nn(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",t),Ve("load",t);var l=!1,d=!1,f;for(f in a)if(a.hasOwnProperty(f)){var E=a[f];if(E!=null)switch(f){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:nt(t,i,f,E,a,null)}}d&&nt(t,i,"srcSet",a.srcSet,a,null),l&&nt(t,i,"src",a.src,a,null);return;case"input":Ve("invalid",t);var S=f=E=d=null,D=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var $=a[l];if($!=null)switch(l){case"name":d=$;break;case"type":E=$;break;case"checked":D=$;break;case"defaultChecked":q=$;break;case"value":f=$;break;case"defaultValue":S=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,i));break;default:nt(t,i,l,$,a,null)}}ul(t,f,S,D,q,E,d,!1),Fi(t);return;case"select":Ve("invalid",t),l=E=f=null;for(d in a)if(a.hasOwnProperty(d)&&(S=a[d],S!=null))switch(d){case"value":f=S;break;case"defaultValue":E=S;break;case"multiple":l=S;default:nt(t,i,d,S,a,null)}i=f,a=E,t.multiple=!!l,i!=null?Hi(t,!!l,i,!1):a!=null&&Hi(t,!!l,a,!0);return;case"textarea":Ve("invalid",t),f=d=l=null;for(E in a)if(a.hasOwnProperty(E)&&(S=a[E],S!=null))switch(E){case"value":l=S;break;case"defaultValue":d=S;break;case"children":f=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:nt(t,i,E,S,a,null)}ru(t,l,d,f),Fi(t);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:nt(t,i,D,l,a,null)}return;case"dialog":Ve("beforetoggle",t),Ve("toggle",t),Ve("cancel",t),Ve("close",t);break;case"iframe":case"object":Ve("load",t);break;case"video":case"audio":for(l=0;l<Zl.length;l++)Ve(Zl[l],t);break;case"image":Ve("error",t),Ve("load",t);break;case"details":Ve("toggle",t);break;case"embed":case"source":case"link":Ve("error",t),Ve("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:nt(t,i,q,l,a,null)}return;default:if(to(i)){for($ in a)a.hasOwnProperty($)&&(l=a[$],l!==void 0&&pm(t,i,$,l,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null&&nt(t,i,S,l,a,null))}function Rx(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,E=null,S=null,D=null,q=null,$=null;for(W in a){var ne=a[W];if(a.hasOwnProperty(W)&&ne!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":D=ne;default:l.hasOwnProperty(W)||nt(t,i,W,null,l,ne)}}for(var G in l){var W=l[G];if(ne=a[G],l.hasOwnProperty(G)&&(W!=null||ne!=null))switch(G){case"type":f=W;break;case"name":d=W;break;case"checked":q=W;break;case"defaultChecked":$=W;break;case"value":E=W;break;case"defaultValue":S=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,i));break;default:W!==ne&&nt(t,i,G,W,l,ne)}}cl(t,E,S,D,q,$,f,d);return;case"select":W=E=S=G=null;for(f in a)if(D=a[f],a.hasOwnProperty(f)&&D!=null)switch(f){case"value":break;case"multiple":W=D;default:l.hasOwnProperty(f)||nt(t,i,f,null,l,D)}for(d in l)if(f=l[d],D=a[d],l.hasOwnProperty(d)&&(f!=null||D!=null))switch(d){case"value":G=f;break;case"defaultValue":S=f;break;case"multiple":E=f;default:f!==D&&nt(t,i,d,f,l,D)}i=S,a=E,l=W,G!=null?Hi(t,!!a,G,!1):!!l!=!!a&&(i!=null?Hi(t,!!a,i,!0):Hi(t,!!a,a?[]:"",!1));return;case"textarea":W=G=null;for(S in a)if(d=a[S],a.hasOwnProperty(S)&&d!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:nt(t,i,S,null,l,d)}for(E in l)if(d=l[E],f=a[E],l.hasOwnProperty(E)&&(d!=null||f!=null))switch(E){case"value":G=d;break;case"defaultValue":W=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==f&&nt(t,i,E,d,l,f)}nu(t,G,W);return;case"option":for(var Re in a)if(G=a[Re],a.hasOwnProperty(Re)&&G!=null&&!l.hasOwnProperty(Re))switch(Re){case"selected":t.selected=!1;break;default:nt(t,i,Re,null,l,G)}for(D in l)if(G=l[D],W=a[D],l.hasOwnProperty(D)&&G!==W&&(G!=null||W!=null))switch(D){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:nt(t,i,D,G,l,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)G=a[Te],a.hasOwnProperty(Te)&&G!=null&&!l.hasOwnProperty(Te)&&nt(t,i,Te,null,l,G);for(q in l)if(G=l[q],W=a[q],l.hasOwnProperty(q)&&G!==W&&(G!=null||W!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:nt(t,i,q,G,l,W)}return;default:if(to(i)){for(var rt in a)G=a[rt],a.hasOwnProperty(rt)&&G!==void 0&&!l.hasOwnProperty(rt)&&pm(t,i,rt,void 0,l,G);for($ in l)G=l[$],W=a[$],!l.hasOwnProperty($)||G===W||G===void 0&&W===void 0||pm(t,i,$,G,l,W);return}}for(var L in a)G=a[L],a.hasOwnProperty(L)&&G!=null&&!l.hasOwnProperty(L)&&nt(t,i,L,null,l,G);for(ne in l)G=l[ne],W=a[ne],!l.hasOwnProperty(ne)||G===W||G==null&&W==null||nt(t,i,ne,G,l,W)}var gm=null,ym=null;function rh(t){return t.nodeType===9?t:t.ownerDocument}function P_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function j_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function vm(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var _m=null;function Cx(){var t=window.event;return t&&t.type==="popstate"?t===_m?!1:(_m=t,!0):(_m=null,!1)}var V_=typeof setTimeout=="function"?setTimeout:void 0,Ix=typeof clearTimeout=="function"?clearTimeout:void 0,U_=typeof Promise=="function"?Promise:void 0,Dx=typeof queueMicrotask=="function"?queueMicrotask:typeof U_<"u"?function(t){return U_.resolve(null).then(t).catch(Nx)}:V_;function Nx(t){setTimeout(function(){throw t})}function us(t){return t==="head"}function L_(t,i){var a=i,l=0,d=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var E=t.ownerDocument;if(a&1&&ec(E.documentElement),a&2&&ec(E.body),a&4)for(a=E.head,ec(a),E=a.firstChild;E;){var S=E.nextSibling,D=E.nodeName;E[Li]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=S}}if(d===0){t.removeChild(f),lc(i);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);lc(i)}function bm(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":bm(a),Xa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Ox(t,i,a,l){for(;t.nodeType===1;){var d=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Li])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=vr(t.nextSibling),t===null)break}return null}function kx(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=vr(t.nextSibling),t===null))return null;return t}function Em(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Mx(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function vr(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var Tm=null;function z_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function B_(t,i,a){switch(i=rh(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function ec(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Xa(t)}var ar=new Map,q_=new Set;function ih(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var vi=oe.d;oe.d={f:Px,r:jx,D:Vx,C:Ux,L:Lx,m:zx,X:qx,S:Bx,M:Fx};function Px(){var t=vi.f(),i=Yu();return t||i}function jx(t){var i=Ir(t);i!==null&&i.tag===5&&i.type==="form"?lv(i):vi.r(t)}var Mo=typeof document>"u"?null:document;function F_(t,i,a){var l=Mo;if(l&&typeof i=="string"&&i){var d=Gt(i);d='link[rel="'+t+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),q_.has(d)||(q_.add(d),t={rel:t,crossOrigin:a,href:i},l.querySelector(d)===null&&(i=l.createElement("link"),nn(i,"link",t),At(i),l.head.appendChild(i)))}}function Vx(t){vi.D(t),F_("dns-prefetch",t,null)}function Ux(t,i){vi.C(t,i),F_("preconnect",t,i)}function Lx(t,i,a){vi.L(t,i,a);var l=Mo;if(l&&t&&i){var d='link[rel="preload"][as="'+Gt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+Gt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+Gt(a.imageSizes)+'"]')):d+='[href="'+Gt(t)+'"]';var f=d;switch(i){case"style":f=Po(t);break;case"script":f=jo(t)}ar.has(f)||(t=b({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),ar.set(f,t),l.querySelector(d)!==null||i==="style"&&l.querySelector(tc(f))||i==="script"&&l.querySelector(nc(f))||(i=l.createElement("link"),nn(i,"link",t),At(i),l.head.appendChild(i)))}}function zx(t,i){vi.m(t,i);var a=Mo;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",d='link[rel="modulepreload"][as="'+Gt(l)+'"][href="'+Gt(t)+'"]',f=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=jo(t)}if(!ar.has(f)&&(t=b({rel:"modulepreload",href:t},i),ar.set(f,t),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(nc(f)))return}l=a.createElement("link"),nn(l,"link",t),At(l),a.head.appendChild(l)}}}function Bx(t,i,a){vi.S(t,i,a);var l=Mo;if(l&&t){var d=Bi(l).hoistableStyles,f=Po(t);i=i||"default";var E=d.get(f);if(!E){var S={loading:0,preload:null};if(E=l.querySelector(tc(f)))S.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":i},a),(a=ar.get(f))&&Sm(t,a);var D=E=l.createElement("link");At(D),nn(D,"link",t),D._p=new Promise(function(q,$){D.onload=q,D.onerror=$}),D.addEventListener("load",function(){S.loading|=1}),D.addEventListener("error",function(){S.loading|=2}),S.loading|=4,sh(E,i,l)}E={type:"stylesheet",instance:E,count:1,state:S},d.set(f,E)}}}function qx(t,i){vi.X(t,i);var a=Mo;if(a&&t){var l=Bi(a).hoistableScripts,d=jo(t),f=l.get(d);f||(f=a.querySelector(nc(d)),f||(t=b({src:t,async:!0},i),(i=ar.get(d))&&xm(t,i),f=a.createElement("script"),At(f),nn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function Fx(t,i){vi.M(t,i);var a=Mo;if(a&&t){var l=Bi(a).hoistableScripts,d=jo(t),f=l.get(d);f||(f=a.querySelector(nc(d)),f||(t=b({src:t,async:!0,type:"module"},i),(i=ar.get(d))&&xm(t,i),f=a.createElement("script"),At(f),nn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function H_(t,i,a,l){var d=(d=Se.current)?ih(d):null;if(!d)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Po(a.href),a=Bi(d).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Po(a.href);var f=Bi(d).hoistableStyles,E=f.get(t);if(E||(d=d.ownerDocument||d,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,E),(f=d.querySelector(tc(t)))&&!f._p&&(E.instance=f,E.state.loading=5),ar.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ar.set(t,a),f||Hx(d,t,a,E.state))),i&&l===null)throw Error(s(528,""));return E}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=jo(a),a=Bi(d).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Po(t){return'href="'+Gt(t)+'"'}function tc(t){return'link[rel="stylesheet"]['+t+"]"}function G_(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function Hx(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),nn(i,"link",a),At(i),t.head.appendChild(i))}function jo(t){return'[src="'+Gt(t)+'"]'}function nc(t){return"script[async]"+t}function W_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+Gt(a.href)+'"]');if(l)return i.instance=l,At(l),l;var d=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),At(l),nn(l,"style",d),sh(l,a.precedence,t),i.instance=l;case"stylesheet":d=Po(a.href);var f=t.querySelector(tc(d));if(f)return i.state.loading|=4,i.instance=f,At(f),f;l=G_(a),(d=ar.get(d))&&Sm(l,d),f=(t.ownerDocument||t).createElement("link"),At(f);var E=f;return E._p=new Promise(function(S,D){E.onload=S,E.onerror=D}),nn(f,"link",l),i.state.loading|=4,sh(f,a.precedence,t),i.instance=f;case"script":return f=jo(a.src),(d=t.querySelector(nc(f)))?(i.instance=d,At(d),d):(l=a,(d=ar.get(f))&&(l=b({},a),xm(l,d)),t=t.ownerDocument||t,d=t.createElement("script"),At(d),nn(d,"link",l),t.head.appendChild(d),i.instance=d);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,sh(l,a.precedence,t));return i.instance}function sh(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,f=d,E=0;E<l.length;E++){var S=l[E];if(S.dataset.precedence===i)f=S;else if(f!==d)break}f?f.parentNode.insertBefore(t,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Sm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function xm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var ah=null;function K_(t,i,a){if(ah===null){var l=new Map,d=ah=new Map;d.set(a,l)}else d=ah,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),d=0;d<a.length;d++){var f=a[d];if(!(f[Li]||f[wt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var E=f.getAttribute(i)||"";E=t+E;var S=l.get(E);S?S.push(f):l.set(E,[f])}}return l}function Q_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function Gx(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Y_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var rc=null;function Wx(){}function Kx(t,i,a){if(rc===null)throw Error(s(475));var l=rc;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var d=Po(a.href),f=t.querySelector(tc(d));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=oh.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=f,At(f);return}f=t.ownerDocument||t,a=G_(a),(d=ar.get(d))&&Sm(a,d),f=f.createElement("link"),At(f);var E=f;E._p=new Promise(function(S,D){E.onload=S,E.onerror=D}),nn(f,"link",a),i.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=oh.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function Qx(){if(rc===null)throw Error(s(475));var t=rc;return t.stylesheets&&t.count===0&&wm(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&wm(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function oh(){if(this.count--,this.count===0){if(this.stylesheets)wm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var lh=null;function wm(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,lh=new Map,i.forEach(Yx,t),lh=null,oh.call(t))}function Yx(t,i){if(!(i.state.loading&4)){var a=lh.get(t);if(a)var l=a.get(null);else{a=new Map,lh.set(t,a);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var E=d[f];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}d=i.instance,E=d.getAttribute("data-precedence"),f=a.get(E)||l,f===l&&a.set(null,d),a.set(E,d),this.count++,l=oh.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),f?f.parentNode.insertBefore(d,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),i.state.loading|=4}}var ic={$$typeof:H,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function Xx(t,i,a,l,d,f,E,S){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_e(0),this.hiddenUpdates=_e(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function X_(t,i,a,l,d,f,E,S,D,q,$,ne){return t=new Xx(t,i,a,E,S,D,q,ne),i=1,f===!0&&(i|=24),f=zn(3,null,null,i),t.current=f,f.stateNode=t,i=af(),i.refCount++,t.pooledCache=i,i.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:i},uf(f),t}function $_(t){return t?(t=fo,t):fo}function Z_(t,i,a,l,d,f){d=$_(d),l.context===null?l.context=d:l.pendingContext=d,l=$i(i),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Zi(t,l,i),a!==null&&(Gn(a,t,i),Ml(a,t,i))}function J_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Am(t,i){J_(t,i),(t=t.alternate)&&J_(t,i)}function e0(t){if(t.tag===13){var i=ho(t,67108864);i!==null&&Gn(i,t,67108864),Am(t,67108864)}}var ch=!0;function $x(t,i,a,l){var d=K.T;K.T=null;var f=oe.p;try{oe.p=2,Rm(t,i,a,l)}finally{oe.p=f,K.T=d}}function Zx(t,i,a,l){var d=K.T;K.T=null;var f=oe.p;try{oe.p=8,Rm(t,i,a,l)}finally{oe.p=f,K.T=d}}function Rm(t,i,a,l){if(ch){var d=Cm(l);if(d===null)mm(t,i,l,uh,a),n0(t,l);else if(ew(d,t,i,a,l))l.stopPropagation();else if(n0(t,l),i&4&&-1<Jx.indexOf(t)){for(;d!==null;){var f=Ir(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var E=Vn(f.pendingLanes);if(E!==0){var S=f;for(S.pendingLanes|=2,S.entangledLanes|=2;E;){var D=1<<31-Ot(E);S.entanglements[1]|=D,E&=~D}Lr(f),($e&6)===0&&(Ku=ln()+500,$l(0))}}break;case 13:S=ho(f,2),S!==null&&Gn(S,f,2),Yu(),Am(f,2)}if(f=Cm(l),f===null&&mm(t,i,l,uh,a),f===d)break;d=f}d!==null&&l.stopPropagation()}else mm(t,i,l,null,a)}}function Cm(t){return t=pl(t),Im(t)}var uh=null;function Im(t){if(uh=null,t=Cr(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=h(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return uh=t,null}function t0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vi()){case vt:return 2;case xt:return 8;case jn:case Qa:return 32;case Ui:return 268435456;default:return 32}default:return 32}}var Dm=!1,hs=null,ds=null,fs=null,sc=new Map,ac=new Map,ms=[],Jx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function n0(t,i){switch(t){case"focusin":case"focusout":hs=null;break;case"dragenter":case"dragleave":ds=null;break;case"mouseover":case"mouseout":fs=null;break;case"pointerover":case"pointerout":sc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ac.delete(i.pointerId)}}function oc(t,i,a,l,d,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},i!==null&&(i=Ir(i),i!==null&&e0(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),t)}function ew(t,i,a,l,d){switch(i){case"focusin":return hs=oc(hs,t,i,a,l,d),!0;case"dragenter":return ds=oc(ds,t,i,a,l,d),!0;case"mouseover":return fs=oc(fs,t,i,a,l,d),!0;case"pointerover":var f=d.pointerId;return sc.set(f,oc(sc.get(f)||null,t,i,a,l,d)),!0;case"gotpointercapture":return f=d.pointerId,ac.set(f,oc(ac.get(f)||null,t,i,a,l,d)),!0}return!1}function r0(t){var i=Cr(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=h(a),i!==null){t.blockedOn=i,ll(t.priority,function(){if(a.tag===13){var l=Hn();l=Qs(l);var d=ho(a,l);d!==null&&Gn(d,a,l),Am(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hh(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Cm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);ml=l,a.target.dispatchEvent(l),ml=null}else return i=Ir(a),i!==null&&e0(i),t.blockedOn=a,!1;i.shift()}return!0}function i0(t,i,a){hh(t)&&a.delete(i)}function tw(){Dm=!1,hs!==null&&hh(hs)&&(hs=null),ds!==null&&hh(ds)&&(ds=null),fs!==null&&hh(fs)&&(fs=null),sc.forEach(i0),ac.forEach(i0)}function dh(t,i){t.blockedOn===i&&(t.blockedOn=null,Dm||(Dm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,tw)))}var fh=null;function s0(t){fh!==t&&(fh=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){fh===t&&(fh=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],d=t[i+2];if(typeof l!="function"){if(Im(l||a)===null)continue;break}var f=Ir(a);f!==null&&(t.splice(i,3),i-=3,If(f,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function lc(t){function i(D){return dh(D,t)}hs!==null&&dh(hs,t),ds!==null&&dh(ds,t),fs!==null&&dh(fs,t),sc.forEach(i),ac.forEach(i);for(var a=0;a<ms.length;a++){var l=ms[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ms.length&&(a=ms[0],a.blockedOn===null);)r0(a),a.blockedOn===null&&ms.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],f=a[l+1],E=d[Jt]||null;if(typeof f=="function")E||s0(a);else if(E){var S=null;if(f&&f.hasAttribute("formAction")){if(d=f,E=f[Jt]||null)S=E.formAction;else if(Im(d)!==null)continue}else S=E.action;typeof S=="function"?a[l+1]=S:(a.splice(l,3),l-=3),s0(a)}}}function Nm(t){this._internalRoot=t}mh.prototype.render=Nm.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=Hn();Z_(a,l,t,i,null,null)},mh.prototype.unmount=Nm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Z_(t.current,2,null,t,null,null),Yu(),i[ei]=null}};function mh(t){this._internalRoot=t}mh.prototype.unstable_scheduleHydration=function(t){if(t){var i=Zt();t={blockedOn:null,target:t,priority:i};for(var a=0;a<ms.length&&i!==0&&i<ms[a].priority;a++);ms.splice(a,0,t),a===0&&r0(t)}};var a0=e.version;if(a0!=="19.1.0")throw Error(s(527,a0,"19.1.0"));oe.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(i),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var nw={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ph.isDisabled&&ph.supportsFiber)try{cr=ph.inject(nw),Ht=ph}catch{}}return uc.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",d=Tv,f=Sv,E=xv,S=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(S=i.unstable_transitionCallbacks)),i=X_(t,1,!1,null,null,a,l,d,f,E,S,null),t[ei]=i.current,fm(t),new Nm(i)},uc.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,d="",f=Tv,E=Sv,S=xv,D=null,q=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(D=a.unstable_transitionCallbacks),a.formState!==void 0&&(q=a.formState)),i=X_(t,1,!0,i,a??null,l,d,f,E,S,D,q),i.context=$_(null),a=i.current,l=Hn(),l=Qs(l),d=$i(l),d.callback=null,Zi(a,d,l),a=l,i.current.lanes=a,Je(i,a),Lr(i),t[ei]=i.current,fm(t),new mh(i)},uc.version="19.1.0",uc}var g0;function mw(){if(g0)return Mm.exports;g0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Mm.exports=fw(),Mm.exports}var pw=mw();bE();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cc(){return Cc=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Cc.apply(this,arguments)}var Ss;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Ss||(Ss={}));const y0="popstate";function gw(r){r===void 0&&(r={});function e(o,c){let{pathname:h="/",search:m="",hash:p=""}=qa(o.location.hash.substr(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),rp("",{pathname:h,search:m,hash:p},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(o,c){let h=o.document.querySelector("base"),m="";if(h&&h.getAttribute("href")){let p=o.location.href,y=p.indexOf("#");m=y===-1?p:p.slice(0,y)}return m+"#"+(typeof c=="string"?c:Lh(c))}function s(o,c){Lp(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(c)+")")}return vw(e,n,s,r)}function gt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Lp(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yw(){return Math.random().toString(36).substr(2,8)}function v0(r,e){return{usr:r.state,key:r.key,idx:e}}function rp(r,e,n,s){return n===void 0&&(n=null),Cc({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?qa(e):e,{state:n,key:e&&e.key||s||yw()})}function Lh(r){let{pathname:e="/",search:n="",hash:s=""}=r;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function qa(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substr(n),r=r.substr(0,n));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function vw(r,e,n,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:c=!1}=s,h=o.history,m=Ss.Pop,p=null,y=b();y==null&&(y=0,h.replaceState(Cc({},h.state,{idx:y}),""));function b(){return(h.state||{idx:null}).idx}function T(){m=Ss.Pop;let k=b(),Z=k==null?null:k-y;y=k,p&&p({action:m,location:Y.location,delta:Z})}function A(k,Z){m=Ss.Push;let te=rp(Y.location,k,Z);n&&n(te,k),y=b()+1;let H=v0(te,y),se=Y.createHref(te);try{h.pushState(H,"",se)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;o.location.assign(se)}c&&p&&p({action:m,location:Y.location,delta:1})}function P(k,Z){m=Ss.Replace;let te=rp(Y.location,k,Z);n&&n(te,k),y=b();let H=v0(te,y),se=Y.createHref(te);h.replaceState(H,"",se),c&&p&&p({action:m,location:Y.location,delta:0})}function F(k){let Z=o.location.origin!=="null"?o.location.origin:o.location.href,te=typeof k=="string"?k:Lh(k);return te=te.replace(/ $/,"%20"),gt(Z,"No window.location.(origin|href) available to create URL for href: "+te),new URL(te,Z)}let Y={get action(){return m},get location(){return r(o,h)},listen(k){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(y0,T),p=k,()=>{o.removeEventListener(y0,T),p=null}},createHref(k){return e(o,k)},createURL:F,encodeLocation(k){let Z=F(k);return{pathname:Z.pathname,search:Z.search,hash:Z.hash}},push:A,replace:P,go(k){return h.go(k)}};return Y}var _0;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(_0||(_0={}));function _w(r,e,n){return n===void 0&&(n="/"),bw(r,e,n)}function bw(r,e,n,s){let o=typeof e=="string"?qa(e):e,c=Ko(o.pathname||"/",n);if(c==null)return null;let h=EE(r);Ew(h);let m=null;for(let p=0;m==null&&p<h.length;++p){let y=Ow(c);m=Dw(h[p],y)}return m}function EE(r,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let o=(c,h,m)=>{let p={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};p.relativePath.startsWith("/")&&(gt(p.relativePath.startsWith(s),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(s.length));let y=ws([s,p.relativePath]),b=n.concat(p);c.children&&c.children.length>0&&(gt(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),EE(c.children,e,b,y)),!(c.path==null&&!c.index)&&e.push({path:y,score:Cw(y,c.index),routesMeta:b})};return r.forEach((c,h)=>{var m;if(c.path===""||!((m=c.path)!=null&&m.includes("?")))o(c,h);else for(let p of TE(c.path))o(c,h,p)}),e}function TE(r){let e=r.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(s.length===0)return o?[c,""]:[c];let h=TE(s.join("/")),m=[];return m.push(...h.map(p=>p===""?c:[c,p].join("/"))),o&&m.push(...h),m.map(p=>r.startsWith("/")&&p===""?"/":p)}function Ew(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:Iw(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const Tw=/^:[\w-]+$/,Sw=3,xw=2,ww=1,Aw=10,Rw=-2,b0=r=>r==="*";function Cw(r,e){let n=r.split("/"),s=n.length;return n.some(b0)&&(s+=Rw),e&&(s+=xw),n.filter(o=>!b0(o)).reduce((o,c)=>o+(Tw.test(c)?Sw:c===""?ww:Aw),s)}function Iw(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function Dw(r,e,n){let{routesMeta:s}=r,o={},c="/",h=[];for(let m=0;m<s.length;++m){let p=s[m],y=m===s.length-1,b=c==="/"?e:e.slice(c.length)||"/",T=ip({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},b),A=p.route;if(!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:ws([c,T.pathname]),pathnameBase:jw(ws([c,T.pathnameBase])),route:A}),T.pathnameBase!=="/"&&(c=ws([c,T.pathnameBase]))}return h}function ip(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,s]=Nw(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let c=o[0],h=c.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((y,b,T)=>{let{paramName:A,isOptional:P}=b;if(A==="*"){let Y=m[T]||"";h=c.slice(0,c.length-Y.length).replace(/(.)\/+$/,"$1")}const F=m[T];return P&&!F?y[A]=void 0:y[A]=(F||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:h,pattern:r}}function Nw(r,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Lp(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function Ow(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Lp(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Ko(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}function kw(r,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:o=""}=typeof r=="string"?qa(r):r;return{pathname:n?n.startsWith("/")?n:Mw(n,e):e,search:Vw(s),hash:Uw(o)}}function Mw(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Um(r,e,n,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Pw(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function zp(r,e){let n=Pw(r);return e?n.map((s,o)=>o===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Bp(r,e,n,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=qa(r):(o=Cc({},r),gt(!o.pathname||!o.pathname.includes("?"),Um("?","pathname","search",o)),gt(!o.pathname||!o.pathname.includes("#"),Um("#","pathname","hash",o)),gt(!o.search||!o.search.includes("#"),Um("#","search","hash",o)));let c=r===""||o.pathname==="",h=c?"/":o.pathname,m;if(h==null)m=n;else{let T=e.length-1;if(!s&&h.startsWith("..")){let A=h.split("/");for(;A[0]==="..";)A.shift(),T-=1;o.pathname=A.join("/")}m=T>=0?e[T]:"/"}let p=kw(o,m),y=h&&h!=="/"&&h.endsWith("/"),b=(c||h===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(y||b)&&(p.pathname+="/"),p}const ws=r=>r.join("/").replace(/\/\/+/g,"/"),jw=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Vw=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Uw=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Lw(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const SE=["post","put","patch","delete"];new Set(SE);const zw=["get",...SE];new Set(zw);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ic(){return Ic=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Ic.apply(this,arguments)}const od=j.createContext(null),xE=j.createContext(null),Ni=j.createContext(null),ld=j.createContext(null),Oi=j.createContext({outlet:null,matches:[],isDataRoute:!1}),wE=j.createContext(null);function Bw(r,e){let{relative:n}=e===void 0?{}:e;tl()||gt(!1);let{basename:s,navigator:o}=j.useContext(Ni),{hash:c,pathname:h,search:m}=cd(r,{relative:n}),p=h;return s!=="/"&&(p=h==="/"?s:ws([s,h])),o.createHref({pathname:p,search:m,hash:c})}function tl(){return j.useContext(ld)!=null}function Ls(){return tl()||gt(!1),j.useContext(ld).location}function AE(r){j.useContext(Ni).static||j.useLayoutEffect(r)}function ki(){let{isDataRoute:r}=j.useContext(Oi);return r?tA():qw()}function qw(){tl()||gt(!1);let r=j.useContext(od),{basename:e,future:n,navigator:s}=j.useContext(Ni),{matches:o}=j.useContext(Oi),{pathname:c}=Ls(),h=JSON.stringify(zp(o,n.v7_relativeSplatPath)),m=j.useRef(!1);return AE(()=>{m.current=!0}),j.useCallback(function(y,b){if(b===void 0&&(b={}),!m.current)return;if(typeof y=="number"){s.go(y);return}let T=Bp(y,JSON.parse(h),c,b.relative==="path");r==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:ws([e,T.pathname])),(b.replace?s.replace:s.push)(T,b.state,b)},[e,s,h,c,r])}function Fw(){let{matches:r}=j.useContext(Oi),e=r[r.length-1];return e?e.params:{}}function cd(r,e){let{relative:n}=e===void 0?{}:e,{future:s}=j.useContext(Ni),{matches:o}=j.useContext(Oi),{pathname:c}=Ls(),h=JSON.stringify(zp(o,s.v7_relativeSplatPath));return j.useMemo(()=>Bp(r,JSON.parse(h),c,n==="path"),[r,h,c,n])}function Hw(r,e){return Gw(r,e)}function Gw(r,e,n,s){tl()||gt(!1);let{navigator:o}=j.useContext(Ni),{matches:c}=j.useContext(Oi),h=c[c.length-1],m=h?h.params:{};h&&h.pathname;let p=h?h.pathnameBase:"/";h&&h.route;let y=Ls(),b;if(e){var T;let k=typeof e=="string"?qa(e):e;p==="/"||(T=k.pathname)!=null&&T.startsWith(p)||gt(!1),b=k}else b=y;let A=b.pathname||"/",P=A;if(p!=="/"){let k=p.replace(/^\//,"").split("/");P="/"+A.replace(/^\//,"").split("/").slice(k.length).join("/")}let F=_w(r,{pathname:P}),Y=Xw(F&&F.map(k=>Object.assign({},k,{params:Object.assign({},m,k.params),pathname:ws([p,o.encodeLocation?o.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?p:ws([p,o.encodeLocation?o.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),c,n,s);return e&&Y?j.createElement(ld.Provider,{value:{location:Ic({pathname:"/",search:"",hash:"",state:null,key:"default"},b),navigationType:Ss.Pop}},Y):Y}function Ww(){let r=eA(),e=Lw(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:o},n):null,null)}const Kw=j.createElement(Ww,null);class Qw extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(Oi.Provider,{value:this.props.routeContext},j.createElement(wE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Yw(r){let{routeContext:e,match:n,children:s}=r,o=j.useContext(od);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(Oi.Provider,{value:e},s)}function Xw(r,e,n,s){var o;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),r==null){var c;if(!n)return null;if(n.errors)r=n.matches;else if((c=s)!=null&&c.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let h=r,m=(o=n)==null?void 0:o.errors;if(m!=null){let b=h.findIndex(T=>T.route.id&&m?.[T.route.id]!==void 0);b>=0||gt(!1),h=h.slice(0,Math.min(h.length,b+1))}let p=!1,y=-1;if(n&&s&&s.v7_partialHydration)for(let b=0;b<h.length;b++){let T=h[b];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(y=b),T.route.id){let{loaderData:A,errors:P}=n,F=T.route.loader&&A[T.route.id]===void 0&&(!P||P[T.route.id]===void 0);if(T.route.lazy||F){p=!0,y>=0?h=h.slice(0,y+1):h=[h[0]];break}}}return h.reduceRight((b,T,A)=>{let P,F=!1,Y=null,k=null;n&&(P=m&&T.route.id?m[T.route.id]:void 0,Y=T.route.errorElement||Kw,p&&(y<0&&A===0?(nA("route-fallback"),F=!0,k=null):y===A&&(F=!0,k=T.route.hydrateFallbackElement||null)));let Z=e.concat(h.slice(0,A+1)),te=()=>{let H;return P?H=Y:F?H=k:T.route.Component?H=j.createElement(T.route.Component,null):T.route.element?H=T.route.element:H=b,j.createElement(Yw,{match:T,routeContext:{outlet:b,matches:Z,isDataRoute:n!=null},children:H})};return n&&(T.route.ErrorBoundary||T.route.errorElement||A===0)?j.createElement(Qw,{location:n.location,revalidation:n.revalidation,component:Y,error:P,children:te(),routeContext:{outlet:null,matches:Z,isDataRoute:!0}}):te()},null)}var RE=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(RE||{}),CE=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(CE||{});function $w(r){let e=j.useContext(od);return e||gt(!1),e}function Zw(r){let e=j.useContext(xE);return e||gt(!1),e}function Jw(r){let e=j.useContext(Oi);return e||gt(!1),e}function IE(r){let e=Jw(),n=e.matches[e.matches.length-1];return n.route.id||gt(!1),n.route.id}function eA(){var r;let e=j.useContext(wE),n=Zw(),s=IE();return e!==void 0?e:(r=n.errors)==null?void 0:r[s]}function tA(){let{router:r}=$w(RE.UseNavigateStable),e=IE(CE.UseNavigateStable),n=j.useRef(!1);return AE(()=>{n.current=!0}),j.useCallback(function(o,c){c===void 0&&(c={}),n.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,Ic({fromRouteId:e},c)))},[r,e])}const E0={};function nA(r,e,n){E0[r]||(E0[r]=!0)}function rA(r,e){r?.v7_startTransition,r?.v7_relativeSplatPath}function iA(r){let{to:e,replace:n,state:s,relative:o}=r;tl()||gt(!1);let{future:c,static:h}=j.useContext(Ni),{matches:m}=j.useContext(Oi),{pathname:p}=Ls(),y=ki(),b=Bp(e,zp(m,c.v7_relativeSplatPath),p,o==="path"),T=JSON.stringify(b);return j.useEffect(()=>y(JSON.parse(T),{replace:n,state:s,relative:o}),[y,T,o,n,s]),null}function _i(r){gt(!1)}function sA(r){let{basename:e="/",children:n=null,location:s,navigationType:o=Ss.Pop,navigator:c,static:h=!1,future:m}=r;tl()&&gt(!1);let p=e.replace(/^\/*/,"/"),y=j.useMemo(()=>({basename:p,navigator:c,static:h,future:Ic({v7_relativeSplatPath:!1},m)}),[p,m,c,h]);typeof s=="string"&&(s=qa(s));let{pathname:b="/",search:T="",hash:A="",state:P=null,key:F="default"}=s,Y=j.useMemo(()=>{let k=Ko(b,p);return k==null?null:{location:{pathname:k,search:T,hash:A,state:P,key:F},navigationType:o}},[p,b,T,A,P,F,o]);return Y==null?null:j.createElement(Ni.Provider,{value:y},j.createElement(ld.Provider,{children:n,value:Y}))}function aA(r){let{children:e,location:n}=r;return Hw(sp(e),n)}new Promise(()=>{});function sp(r,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(r,(s,o)=>{if(!j.isValidElement(s))return;let c=[...e,o];if(s.type===j.Fragment){n.push.apply(n,sp(s.props.children,c));return}s.type!==_i&&gt(!1),!s.props.index||!s.props.children||gt(!1);let h={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=sp(s.props.children,c)),n.push(h)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zh(){return zh=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},zh.apply(this,arguments)}function DE(r,e){if(r==null)return{};var n={},s=Object.keys(r),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}function oA(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function lA(r,e){return r.button===0&&(!e||e==="_self")&&!oA(r)}function ap(r){return r===void 0&&(r=""),new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((e,n)=>{let s=r[n];return e.concat(Array.isArray(s)?s.map(o=>[n,o]):[[n,s]])},[]))}function cA(r,e){let n=ap(r);return e&&e.forEach((s,o)=>{n.has(o)||e.getAll(o).forEach(c=>{n.append(o,c)})}),n}const uA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],hA=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],dA="6";try{window.__reactRouterVersion=dA}catch{}const fA=j.createContext({isTransitioning:!1}),mA="startTransition",T0=cw[mA];function pA(r){let{basename:e,children:n,future:s,window:o}=r,c=j.useRef();c.current==null&&(c.current=gw({window:o,v5Compat:!0}));let h=c.current,[m,p]=j.useState({action:h.action,location:h.location}),{v7_startTransition:y}=s||{},b=j.useCallback(T=>{y&&T0?T0(()=>p(T)):p(T)},[p,y]);return j.useLayoutEffect(()=>h.listen(b),[h,b]),j.useEffect(()=>rA(s),[s]),j.createElement(sA,{basename:e,children:n,location:m.location,navigationType:m.action,navigator:h,future:s})}const gA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sr=j.forwardRef(function(e,n){let{onClick:s,relative:o,reloadDocument:c,replace:h,state:m,target:p,to:y,preventScrollReset:b,viewTransition:T}=e,A=DE(e,uA),{basename:P}=j.useContext(Ni),F,Y=!1;if(typeof y=="string"&&yA.test(y)&&(F=y,gA))try{let H=new URL(window.location.href),se=y.startsWith("//")?new URL(H.protocol+y):new URL(y),ae=Ko(se.pathname,P);se.origin===H.origin&&ae!=null?y=ae+se.search+se.hash:Y=!0}catch{}let k=Bw(y,{relative:o}),Z=_A(y,{replace:h,state:m,target:p,preventScrollReset:b,relative:o,viewTransition:T});function te(H){s&&s(H),H.defaultPrevented||Z(H)}return j.createElement("a",zh({},A,{href:F||k,onClick:Y||c?s:te,ref:n,target:p}))}),hc=j.forwardRef(function(e,n){let{"aria-current":s="page",caseSensitive:o=!1,className:c="",end:h=!1,style:m,to:p,viewTransition:y,children:b}=e,T=DE(e,hA),A=cd(p,{relative:T.relative}),P=Ls(),F=j.useContext(xE),{navigator:Y,basename:k}=j.useContext(Ni),Z=F!=null&&EA(A)&&y===!0,te=Y.encodeLocation?Y.encodeLocation(A).pathname:A.pathname,H=P.pathname,se=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;o||(H=H.toLowerCase(),se=se?se.toLowerCase():null,te=te.toLowerCase()),se&&k&&(se=Ko(se,k)||se);const ae=te!=="/"&&te.endsWith("/")?te.length-1:te.length;let ge=H===te||!h&&H.startsWith(te)&&H.charAt(ae)==="/",R=se!=null&&(se===te||!h&&se.startsWith(te)&&se.charAt(te.length)==="/"),w={isActive:ge,isPending:R,isTransitioning:Z},C=ge?s:void 0,U;typeof c=="function"?U=c(w):U=[c,ge?"active":null,R?"pending":null,Z?"transitioning":null].filter(Boolean).join(" ");let M=typeof m=="function"?m(w):m;return j.createElement(Sr,zh({},T,{"aria-current":C,className:U,ref:n,style:M,to:p,viewTransition:y}),typeof b=="function"?b(w):b)});var op;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(op||(op={}));var S0;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(S0||(S0={}));function vA(r){let e=j.useContext(od);return e||gt(!1),e}function _A(r,e){let{target:n,replace:s,state:o,preventScrollReset:c,relative:h,viewTransition:m}=e===void 0?{}:e,p=ki(),y=Ls(),b=cd(r,{relative:h});return j.useCallback(T=>{if(lA(T,n)){T.preventDefault();let A=s!==void 0?s:Lh(y)===Lh(b);p(r,{replace:A,state:o,preventScrollReset:c,relative:h,viewTransition:m})}},[y,p,b,s,o,n,r,c,h,m])}function bA(r){let e=j.useRef(ap(r)),n=j.useRef(!1),s=Ls(),o=j.useMemo(()=>cA(s.search,n.current?null:e.current),[s.search]),c=ki(),h=j.useCallback((m,p)=>{const y=ap(typeof m=="function"?m(o):m);n.current=!0,c("?"+y,p)},[c,o]);return[o,h]}function EA(r,e){e===void 0&&(e={});let n=j.useContext(fA);n==null&&gt(!1);let{basename:s}=vA(op.useViewTransitionState),o=cd(r,{relative:e.relative});if(!n.isTransitioning)return!1;let c=Ko(n.currentLocation.pathname,s)||n.currentLocation.pathname,h=Ko(n.nextLocation.pathname,s)||n.nextLocation.pathname;return ip(o.pathname,h)!=null||ip(o.pathname,c)!=null}const TA=()=>{};var x0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},SA=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[n++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[n++],h=r[n++],m=r[n++],p=((o&7)<<18|(c&63)<<12|(h&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const c=r[n++],h=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|h&63)}}return e.join("")},OE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const c=r[o],h=o+1<r.length,m=h?r[o+1]:0,p=o+2<r.length,y=p?r[o+2]:0,b=c>>2,T=(c&3)<<4|m>>4;let A=(m&15)<<2|y>>6,P=y&63;p||(P=64,h||(A=64)),s.push(n[b],n[T],n[A],n[P])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(NE(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):SA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const c=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const y=o<r.length?n[r.charAt(o)]:64;++o;const T=o<r.length?n[r.charAt(o)]:64;if(++o,c==null||m==null||y==null||T==null)throw new xA;const A=c<<2|m>>4;if(s.push(A),y!==64){const P=m<<4&240|y>>2;if(s.push(P),T!==64){const F=y<<6&192|T;s.push(F)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class xA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wA=function(r){const e=NE(r);return OE.encodeByteArray(e,!0)},Bh=function(r){return wA(r).replace(/\./g,"")},kE=function(r){try{return OE.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=()=>AA().__FIREBASE_DEFAULTS__,CA=()=>{if(typeof process>"u"||typeof x0>"u")return;const r=x0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},IA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&kE(r[1]);return e&&JSON.parse(e)},ud=()=>{try{return TA()||RA()||CA()||IA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},ME=r=>ud()?.emulatorHosts?.[r],PE=r=>{const e=ME(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},jE=()=>ud()?.config,VE=r=>ud()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qp(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Bh(JSON.stringify(n)),Bh(JSON.stringify(h)),""].join(".")}const _c={};function NA(){const r={prod:[],emulator:[]};for(const e of Object.keys(_c))_c[e]?r.emulator.push(e):r.prod.push(e);return r}function OA(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let w0=!1;function Fp(r,e){if(typeof window>"u"||typeof document>"u"||!zs(window.location.host)||_c[r]===e||_c[r]||w0)return;_c[r]=e;function n(A){return`__firebase__banner__${A}`}const s="__firebase__banner",c=NA().prod.length>0;function h(){const A=document.getElementById(s);A&&A.remove()}function m(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function p(A,P){A.setAttribute("width","24"),A.setAttribute("id",P),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function y(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{w0=!0,h()},A}function b(A,P){A.setAttribute("id",P),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function T(){const A=OA(s),P=n("text"),F=document.getElementById(P)||document.createElement("span"),Y=n("learnmore"),k=document.getElementById(Y)||document.createElement("a"),Z=n("preprendIcon"),te=document.getElementById(Z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const H=A.element;m(H),b(k,Y);const se=y();p(te,Z),H.append(te,F,k,se),document.body.appendChild(H)}c?(F.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function MA(){const r=ud()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jA(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function VA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UA(){const r=gn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function LA(){return!MA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zA(){try{return typeof indexedDB=="object"}catch{return!1}}function BA(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="FirebaseError";class Xr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=qA,Object.setPrototypeOf(this,Xr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zc.prototype.create)}}class zc{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],h=c?FA(c,s):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Xr(o,m,s)}}function FA(r,e){return r.replace(HA,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const HA=/\{\$([^}]+)}/g;function GA(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Pa(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const c=r[o],h=e[o];if(A0(c)&&A0(h)){if(!Pa(c,h))return!1}else if(c!==h)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function A0(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function fc(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,c]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function mc(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function WA(r,e){const n=new KA(r,e);return n.subscribe.bind(n)}class KA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");QA(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Lm),o.error===void 0&&(o.error=Lm),o.complete===void 0&&(o.complete=Lm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function QA(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Lm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(r){return r&&r._delegate?r._delegate:r}class Ds{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new DA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($A(e))try{this.getOrInitializeService({instanceIdentifier:Da})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=Da){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Da){return this.instances.has(e)}getOptions(e=Da){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&h.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:XA(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Da){return this.component?this.component.multipleInstances?e:Da:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XA(r){return r===Da?void 0:r}function $A(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new YA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ue||(Ue={}));const JA={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},eR=Ue.INFO,tR={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},nR=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=tR[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hp{constructor(e){this.name=e,this._logLevel=eR,this._logHandler=nR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const rR=(r,e)=>e.some(n=>r instanceof n);let R0,C0;function iR(){return R0||(R0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sR(){return C0||(C0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const LE=new WeakMap,lp=new WeakMap,zE=new WeakMap,zm=new WeakMap,Gp=new WeakMap;function aR(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",h)},c=()=>{n(As(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&LE.set(n,r)}).catch(()=>{}),Gp.set(e,r),e}function oR(r){if(lp.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",h),r.removeEventListener("abort",h)},c=()=>{n(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",h),r.addEventListener("abort",h)});lp.set(r,e)}let cp={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return lp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||zE.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return As(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function lR(r){cp=r(cp)}function cR(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Bm(this),e,...n);return zE.set(s,e.sort?e.sort():[e]),As(s)}:sR().includes(r)?function(...e){return r.apply(Bm(this),e),As(LE.get(this))}:function(...e){return As(r.apply(Bm(this),e))}}function uR(r){return typeof r=="function"?cR(r):(r instanceof IDBTransaction&&oR(r),rR(r,iR())?new Proxy(r,cp):r)}function As(r){if(r instanceof IDBRequest)return aR(r);if(zm.has(r))return zm.get(r);const e=uR(r);return e!==r&&(zm.set(r,e),Gp.set(e,r)),e}const Bm=r=>Gp.get(r);function hR(r,e,{blocked:n,upgrade:s,blocking:o,terminated:c}={}){const h=indexedDB.open(r,e),m=As(h);return s&&h.addEventListener("upgradeneeded",p=>{s(As(h.result),p.oldVersion,p.newVersion,As(h.transaction),p)}),n&&h.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{c&&p.addEventListener("close",()=>c()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const dR=["get","getKey","getAll","getAllKeys","count"],fR=["put","add","delete","clear"],qm=new Map;function I0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(qm.get(e))return qm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=fR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||dR.includes(n)))return;const c=async function(h,...m){const p=this.transaction(h,o?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&p.done]))[0]};return qm.set(e,c),c}lR(r=>({...r,get:(e,n,s)=>I0(e,n)||r.get(e,n,s),has:(e,n)=>!!I0(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function pR(r){return r.getComponent()?.type==="VERSION"}const up="@firebase/app",D0="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=new Hp("@firebase/app"),gR="@firebase/app-compat",yR="@firebase/analytics-compat",vR="@firebase/analytics",_R="@firebase/app-check-compat",bR="@firebase/app-check",ER="@firebase/auth",TR="@firebase/auth-compat",SR="@firebase/database",xR="@firebase/data-connect",wR="@firebase/database-compat",AR="@firebase/functions",RR="@firebase/functions-compat",CR="@firebase/installations",IR="@firebase/installations-compat",DR="@firebase/messaging",NR="@firebase/messaging-compat",OR="@firebase/performance",kR="@firebase/performance-compat",MR="@firebase/remote-config",PR="@firebase/remote-config-compat",jR="@firebase/storage",VR="@firebase/storage-compat",UR="@firebase/firestore",LR="@firebase/ai",zR="@firebase/firestore-compat",BR="firebase",qR="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="[DEFAULT]",FR={[up]:"fire-core",[gR]:"fire-core-compat",[vR]:"fire-analytics",[yR]:"fire-analytics-compat",[bR]:"fire-app-check",[_R]:"fire-app-check-compat",[ER]:"fire-auth",[TR]:"fire-auth-compat",[SR]:"fire-rtdb",[xR]:"fire-data-connect",[wR]:"fire-rtdb-compat",[AR]:"fire-fn",[RR]:"fire-fn-compat",[CR]:"fire-iid",[IR]:"fire-iid-compat",[DR]:"fire-fcm",[NR]:"fire-fcm-compat",[OR]:"fire-perf",[kR]:"fire-perf-compat",[MR]:"fire-rc",[PR]:"fire-rc-compat",[jR]:"fire-gcs",[VR]:"fire-gcs-compat",[UR]:"fire-fst",[zR]:"fire-fst-compat",[LR]:"fire-vertex","fire-js":"fire-js",[BR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh=new Map,HR=new Map,dp=new Map;function N0(r,e){try{r.container.addComponent(e)}catch(n){wi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function ja(r){const e=r.name;if(dp.has(e))return wi.debug(`There were multiple attempts to register component ${e}.`),!1;dp.set(e,r);for(const n of qh.values())N0(n,r);for(const n of HR.values())N0(n,r);return!0}function hd(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Wn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rs=new zc("app","Firebase",GR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa=qR;function BE(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:hp,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Rs.create("bad-app-name",{appName:String(o)});if(n||(n=jE()),!n)throw Rs.create("no-options");const c=qh.get(o);if(c){if(Pa(n,c.options)&&Pa(s,c.config))return c;throw Rs.create("duplicate-app",{appName:o})}const h=new ZA(o);for(const p of dp.values())h.addComponent(p);const m=new WR(n,s,h);return qh.set(o,m),m}function Wp(r=hp){const e=qh.get(r);if(!e&&r===hp&&jE())return BE();if(!e)throw Rs.create("no-app",{appName:r});return e}function qr(r,e,n){let s=FR[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wi.warn(h.join(" "));return}ja(new Ds(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR="firebase-heartbeat-database",QR=1,Dc="firebase-heartbeat-store";let Fm=null;function qE(){return Fm||(Fm=hR(KR,QR,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Dc)}catch(n){console.warn(n)}}}}).catch(r=>{throw Rs.create("idb-open",{originalErrorMessage:r.message})})),Fm}async function YR(r){try{const n=(await qE()).transaction(Dc),s=await n.objectStore(Dc).get(FE(r));return await n.done,s}catch(e){if(e instanceof Xr)wi.warn(e.message);else{const n=Rs.create("idb-get",{originalErrorMessage:e?.message});wi.warn(n.message)}}}async function O0(r,e){try{const s=(await qE()).transaction(Dc,"readwrite");await s.objectStore(Dc).put(e,FE(r)),await s.done}catch(n){if(n instanceof Xr)wi.warn(n.message);else{const s=Rs.create("idb-set",{originalErrorMessage:n?.message});wi.warn(s.message)}}}function FE(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=1024,$R=30;class ZR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new eC(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=k0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>$R){const o=tC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){wi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=k0(),{heartbeatsToSend:n,unsentEntries:s}=JR(this._heartbeatsCache.heartbeats),o=Bh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return wi.warn(e),""}}}function k0(){return new Date().toISOString().substring(0,10)}function JR(r,e=XR){const n=[];let s=r.slice();for(const o of r){const c=n.find(h=>h.agent===o.agent);if(c){if(c.dates.push(o.date),M0(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),M0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class eC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zA()?BA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await YR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return O0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return O0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function M0(r){return Bh(JSON.stringify({version:2,heartbeats:r})).length}function tC(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(r){ja(new Ds("platform-logger",e=>new mR(e),"PRIVATE")),ja(new Ds("heartbeat",e=>new ZR(e),"PRIVATE")),qr(up,D0,r),qr(up,D0,"esm2020"),qr("fire-js","")}nC("");var P0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cs,HE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,w){function C(){}C.prototype=w.prototype,R.F=w.prototype,R.prototype=new C,R.prototype.constructor=R,R.D=function(U,M,O){for(var I=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)I[ce-2]=arguments[ce];return w.prototype[M].apply(U,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,w,C){C||(C=0);const U=Array(16);if(typeof w=="string")for(var M=0;M<16;++M)U[M]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(M=0;M<16;++M)U[M]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=R.g[0],C=R.g[1],M=R.g[2];let O=R.g[3],I;I=w+(O^C&(M^O))+U[0]+3614090360&4294967295,w=C+(I<<7&4294967295|I>>>25),I=O+(M^w&(C^M))+U[1]+3905402710&4294967295,O=w+(I<<12&4294967295|I>>>20),I=M+(C^O&(w^C))+U[2]+606105819&4294967295,M=O+(I<<17&4294967295|I>>>15),I=C+(w^M&(O^w))+U[3]+3250441966&4294967295,C=M+(I<<22&4294967295|I>>>10),I=w+(O^C&(M^O))+U[4]+4118548399&4294967295,w=C+(I<<7&4294967295|I>>>25),I=O+(M^w&(C^M))+U[5]+1200080426&4294967295,O=w+(I<<12&4294967295|I>>>20),I=M+(C^O&(w^C))+U[6]+2821735955&4294967295,M=O+(I<<17&4294967295|I>>>15),I=C+(w^M&(O^w))+U[7]+4249261313&4294967295,C=M+(I<<22&4294967295|I>>>10),I=w+(O^C&(M^O))+U[8]+1770035416&4294967295,w=C+(I<<7&4294967295|I>>>25),I=O+(M^w&(C^M))+U[9]+2336552879&4294967295,O=w+(I<<12&4294967295|I>>>20),I=M+(C^O&(w^C))+U[10]+4294925233&4294967295,M=O+(I<<17&4294967295|I>>>15),I=C+(w^M&(O^w))+U[11]+2304563134&4294967295,C=M+(I<<22&4294967295|I>>>10),I=w+(O^C&(M^O))+U[12]+1804603682&4294967295,w=C+(I<<7&4294967295|I>>>25),I=O+(M^w&(C^M))+U[13]+4254626195&4294967295,O=w+(I<<12&4294967295|I>>>20),I=M+(C^O&(w^C))+U[14]+2792965006&4294967295,M=O+(I<<17&4294967295|I>>>15),I=C+(w^M&(O^w))+U[15]+1236535329&4294967295,C=M+(I<<22&4294967295|I>>>10),I=w+(M^O&(C^M))+U[1]+4129170786&4294967295,w=C+(I<<5&4294967295|I>>>27),I=O+(C^M&(w^C))+U[6]+3225465664&4294967295,O=w+(I<<9&4294967295|I>>>23),I=M+(w^C&(O^w))+U[11]+643717713&4294967295,M=O+(I<<14&4294967295|I>>>18),I=C+(O^w&(M^O))+U[0]+3921069994&4294967295,C=M+(I<<20&4294967295|I>>>12),I=w+(M^O&(C^M))+U[5]+3593408605&4294967295,w=C+(I<<5&4294967295|I>>>27),I=O+(C^M&(w^C))+U[10]+38016083&4294967295,O=w+(I<<9&4294967295|I>>>23),I=M+(w^C&(O^w))+U[15]+3634488961&4294967295,M=O+(I<<14&4294967295|I>>>18),I=C+(O^w&(M^O))+U[4]+3889429448&4294967295,C=M+(I<<20&4294967295|I>>>12),I=w+(M^O&(C^M))+U[9]+568446438&4294967295,w=C+(I<<5&4294967295|I>>>27),I=O+(C^M&(w^C))+U[14]+3275163606&4294967295,O=w+(I<<9&4294967295|I>>>23),I=M+(w^C&(O^w))+U[3]+4107603335&4294967295,M=O+(I<<14&4294967295|I>>>18),I=C+(O^w&(M^O))+U[8]+1163531501&4294967295,C=M+(I<<20&4294967295|I>>>12),I=w+(M^O&(C^M))+U[13]+2850285829&4294967295,w=C+(I<<5&4294967295|I>>>27),I=O+(C^M&(w^C))+U[2]+4243563512&4294967295,O=w+(I<<9&4294967295|I>>>23),I=M+(w^C&(O^w))+U[7]+1735328473&4294967295,M=O+(I<<14&4294967295|I>>>18),I=C+(O^w&(M^O))+U[12]+2368359562&4294967295,C=M+(I<<20&4294967295|I>>>12),I=w+(C^M^O)+U[5]+4294588738&4294967295,w=C+(I<<4&4294967295|I>>>28),I=O+(w^C^M)+U[8]+2272392833&4294967295,O=w+(I<<11&4294967295|I>>>21),I=M+(O^w^C)+U[11]+1839030562&4294967295,M=O+(I<<16&4294967295|I>>>16),I=C+(M^O^w)+U[14]+4259657740&4294967295,C=M+(I<<23&4294967295|I>>>9),I=w+(C^M^O)+U[1]+2763975236&4294967295,w=C+(I<<4&4294967295|I>>>28),I=O+(w^C^M)+U[4]+1272893353&4294967295,O=w+(I<<11&4294967295|I>>>21),I=M+(O^w^C)+U[7]+4139469664&4294967295,M=O+(I<<16&4294967295|I>>>16),I=C+(M^O^w)+U[10]+3200236656&4294967295,C=M+(I<<23&4294967295|I>>>9),I=w+(C^M^O)+U[13]+681279174&4294967295,w=C+(I<<4&4294967295|I>>>28),I=O+(w^C^M)+U[0]+3936430074&4294967295,O=w+(I<<11&4294967295|I>>>21),I=M+(O^w^C)+U[3]+3572445317&4294967295,M=O+(I<<16&4294967295|I>>>16),I=C+(M^O^w)+U[6]+76029189&4294967295,C=M+(I<<23&4294967295|I>>>9),I=w+(C^M^O)+U[9]+3654602809&4294967295,w=C+(I<<4&4294967295|I>>>28),I=O+(w^C^M)+U[12]+3873151461&4294967295,O=w+(I<<11&4294967295|I>>>21),I=M+(O^w^C)+U[15]+530742520&4294967295,M=O+(I<<16&4294967295|I>>>16),I=C+(M^O^w)+U[2]+3299628645&4294967295,C=M+(I<<23&4294967295|I>>>9),I=w+(M^(C|~O))+U[0]+4096336452&4294967295,w=C+(I<<6&4294967295|I>>>26),I=O+(C^(w|~M))+U[7]+1126891415&4294967295,O=w+(I<<10&4294967295|I>>>22),I=M+(w^(O|~C))+U[14]+2878612391&4294967295,M=O+(I<<15&4294967295|I>>>17),I=C+(O^(M|~w))+U[5]+4237533241&4294967295,C=M+(I<<21&4294967295|I>>>11),I=w+(M^(C|~O))+U[12]+1700485571&4294967295,w=C+(I<<6&4294967295|I>>>26),I=O+(C^(w|~M))+U[3]+2399980690&4294967295,O=w+(I<<10&4294967295|I>>>22),I=M+(w^(O|~C))+U[10]+4293915773&4294967295,M=O+(I<<15&4294967295|I>>>17),I=C+(O^(M|~w))+U[1]+2240044497&4294967295,C=M+(I<<21&4294967295|I>>>11),I=w+(M^(C|~O))+U[8]+1873313359&4294967295,w=C+(I<<6&4294967295|I>>>26),I=O+(C^(w|~M))+U[15]+4264355552&4294967295,O=w+(I<<10&4294967295|I>>>22),I=M+(w^(O|~C))+U[6]+2734768916&4294967295,M=O+(I<<15&4294967295|I>>>17),I=C+(O^(M|~w))+U[13]+1309151649&4294967295,C=M+(I<<21&4294967295|I>>>11),I=w+(M^(C|~O))+U[4]+4149444226&4294967295,w=C+(I<<6&4294967295|I>>>26),I=O+(C^(w|~M))+U[11]+3174756917&4294967295,O=w+(I<<10&4294967295|I>>>22),I=M+(w^(O|~C))+U[2]+718787259&4294967295,M=O+(I<<15&4294967295|I>>>17),I=C+(O^(M|~w))+U[9]+3951481745&4294967295,R.g[0]=R.g[0]+w&4294967295,R.g[1]=R.g[1]+(M+(I<<21&4294967295|I>>>11))&4294967295,R.g[2]=R.g[2]+M&4294967295,R.g[3]=R.g[3]+O&4294967295}s.prototype.v=function(R,w){w===void 0&&(w=R.length);const C=w-this.blockSize,U=this.C;let M=this.h,O=0;for(;O<w;){if(M==0)for(;O<=C;)o(this,R,O),O+=this.blockSize;if(typeof R=="string"){for(;O<w;)if(U[M++]=R.charCodeAt(O++),M==this.blockSize){o(this,U),M=0;break}}else for(;O<w;)if(U[M++]=R[O++],M==this.blockSize){o(this,U),M=0;break}}this.h=M,this.o+=w},s.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var w=1;w<R.length-8;++w)R[w]=0;w=this.o*8;for(var C=R.length-8;C<R.length;++C)R[C]=w&255,w/=256;for(this.v(R),R=Array(16),w=0,C=0;C<4;++C)for(let U=0;U<32;U+=8)R[w++]=this.g[C]>>>U&255;return R};function c(R,w){var C=m;return Object.prototype.hasOwnProperty.call(C,R)?C[R]:C[R]=w(R)}function h(R,w){this.h=w;const C=[];let U=!0;for(let M=R.length-1;M>=0;M--){const O=R[M]|0;U&&O==w||(C[M]=O,U=!1)}this.g=C}var m={};function p(R){return-128<=R&&R<128?c(R,function(w){return new h([w|0],w<0?-1:0)}):new h([R|0],R<0?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return T;if(R<0)return k(y(-R));const w=[];let C=1;for(let U=0;R>=C;U++)w[U]=R/C|0,C*=4294967296;return new h(w,0)}function b(R,w){if(R.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(R.charAt(0)=="-")return k(b(R.substring(1),w));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=y(Math.pow(w,8));let U=T;for(let O=0;O<R.length;O+=8){var M=Math.min(8,R.length-O);const I=parseInt(R.substring(O,O+M),w);M<8?(M=y(Math.pow(w,M)),U=U.j(M).add(y(I))):(U=U.j(C),U=U.add(y(I)))}return U}var T=p(0),A=p(1),P=p(16777216);r=h.prototype,r.m=function(){if(Y(this))return-k(this).m();let R=0,w=1;for(let C=0;C<this.g.length;C++){const U=this.i(C);R+=(U>=0?U:4294967296+U)*w,w*=4294967296}return R},r.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(F(this))return"0";if(Y(this))return"-"+k(this).toString(R);const w=y(Math.pow(R,6));var C=this;let U="";for(;;){const M=se(C,w).g;C=Z(C,M.j(w));let O=((C.g.length>0?C.g[0]:C.h)>>>0).toString(R);if(C=M,F(C))return O+U;for(;O.length<6;)O="0"+O;U=O+U}},r.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function F(R){if(R.h!=0)return!1;for(let w=0;w<R.g.length;w++)if(R.g[w]!=0)return!1;return!0}function Y(R){return R.h==-1}r.l=function(R){return R=Z(this,R),Y(R)?-1:F(R)?0:1};function k(R){const w=R.g.length,C=[];for(let U=0;U<w;U++)C[U]=~R.g[U];return new h(C,~R.h).add(A)}r.abs=function(){return Y(this)?k(this):this},r.add=function(R){const w=Math.max(this.g.length,R.g.length),C=[];let U=0;for(let M=0;M<=w;M++){let O=U+(this.i(M)&65535)+(R.i(M)&65535),I=(O>>>16)+(this.i(M)>>>16)+(R.i(M)>>>16);U=I>>>16,O&=65535,I&=65535,C[M]=I<<16|O}return new h(C,C[C.length-1]&-2147483648?-1:0)};function Z(R,w){return R.add(k(w))}r.j=function(R){if(F(this)||F(R))return T;if(Y(this))return Y(R)?k(this).j(k(R)):k(k(this).j(R));if(Y(R))return k(this.j(k(R)));if(this.l(P)<0&&R.l(P)<0)return y(this.m()*R.m());const w=this.g.length+R.g.length,C=[];for(var U=0;U<2*w;U++)C[U]=0;for(U=0;U<this.g.length;U++)for(let M=0;M<R.g.length;M++){const O=this.i(U)>>>16,I=this.i(U)&65535,ce=R.i(M)>>>16,ye=R.i(M)&65535;C[2*U+2*M]+=I*ye,te(C,2*U+2*M),C[2*U+2*M+1]+=O*ye,te(C,2*U+2*M+1),C[2*U+2*M+1]+=I*ce,te(C,2*U+2*M+1),C[2*U+2*M+2]+=O*ce,te(C,2*U+2*M+2)}for(R=0;R<w;R++)C[R]=C[2*R+1]<<16|C[2*R];for(R=w;R<2*w;R++)C[R]=0;return new h(C,0)};function te(R,w){for(;(R[w]&65535)!=R[w];)R[w+1]+=R[w]>>>16,R[w]&=65535,w++}function H(R,w){this.g=R,this.h=w}function se(R,w){if(F(w))throw Error("division by zero");if(F(R))return new H(T,T);if(Y(R))return w=se(k(R),w),new H(k(w.g),k(w.h));if(Y(w))return w=se(R,k(w)),new H(k(w.g),w.h);if(R.g.length>30){if(Y(R)||Y(w))throw Error("slowDivide_ only works with positive integers.");for(var C=A,U=w;U.l(R)<=0;)C=ae(C),U=ae(U);var M=ge(C,1),O=ge(U,1);for(U=ge(U,2),C=ge(C,2);!F(U);){var I=O.add(U);I.l(R)<=0&&(M=M.add(C),O=I),U=ge(U,1),C=ge(C,1)}return w=Z(R,M.j(w)),new H(M,w)}for(M=T;R.l(w)>=0;){for(C=Math.max(1,Math.floor(R.m()/w.m())),U=Math.ceil(Math.log(C)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),O=y(C),I=O.j(w);Y(I)||I.l(R)>0;)C-=U,O=y(C),I=O.j(w);F(O)&&(O=A),M=M.add(O),R=Z(R,I)}return new H(M,R)}r.B=function(R){return se(this,R).h},r.and=function(R){const w=Math.max(this.g.length,R.g.length),C=[];for(let U=0;U<w;U++)C[U]=this.i(U)&R.i(U);return new h(C,this.h&R.h)},r.or=function(R){const w=Math.max(this.g.length,R.g.length),C=[];for(let U=0;U<w;U++)C[U]=this.i(U)|R.i(U);return new h(C,this.h|R.h)},r.xor=function(R){const w=Math.max(this.g.length,R.g.length),C=[];for(let U=0;U<w;U++)C[U]=this.i(U)^R.i(U);return new h(C,this.h^R.h)};function ae(R){const w=R.g.length+1,C=[];for(let U=0;U<w;U++)C[U]=R.i(U)<<1|R.i(U-1)>>>31;return new h(C,R.h)}function ge(R,w){const C=w>>5;w%=32;const U=R.g.length-C,M=[];for(let O=0;O<U;O++)M[O]=w>0?R.i(O+C)>>>w|R.i(O+C+1)<<32-w:R.i(O+C);return new h(M,R.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,HE=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=b,Cs=h}).apply(typeof P0<"u"?P0:typeof self<"u"?self:typeof window<"u"?window:{});var gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var GE,pc,WE,Ih,fp,KE,QE,YE;(function(){var r,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof gh=="object"&&gh];for(var v=0;v<u.length;++v){var _=u[v];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(u,v){if(v)e:{var _=s;u=u.split(".");for(var x=0;x<u.length-1;x++){var B=u[x];if(!(B in _))break e;_=_[B]}u=u[u.length-1],x=_[u],v=v(x),v!=x&&v!=null&&e(_,u,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(v){var _=[],x;for(x in v)Object.prototype.hasOwnProperty.call(v,x)&&_.push([x,v[x]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function m(u){var v=typeof u;return v=="object"&&u!=null||v=="function"}function p(u,v,_){return u.call.apply(u.bind,arguments)}function y(u,v,_){return y=p,y.apply(null,arguments)}function b(u,v){var _=Array.prototype.slice.call(arguments,1);return function(){var x=_.slice();return x.push.apply(x,arguments),u.apply(this,x)}}function T(u,v){function _(){}_.prototype=v.prototype,u.Z=v.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(x,B,Q){for(var le=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)le[Ie-2]=arguments[Ie];return v.prototype[B].apply(x,le)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function P(u){const v=u.length;if(v>0){const _=Array(v);for(let x=0;x<v;x++)_[x]=u[x];return _}return[]}function F(u,v){for(let x=1;x<arguments.length;x++){const B=arguments[x];var _=typeof B;if(_=_!="object"?_:B?Array.isArray(B)?"array":_:"null",_=="array"||_=="object"&&typeof B.length=="number"){_=u.length||0;const Q=B.length||0;u.length=_+Q;for(let le=0;le<Q;le++)u[_+le]=B[le]}else u.push(B)}}class Y{constructor(v,_){this.i=v,this.j=_,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function k(u){h.setTimeout(()=>{throw u},0)}function Z(){var u=R;let v=null;return u.g&&(v=u.g,u.g=u.g.next,u.g||(u.h=null),v.next=null),v}class te{constructor(){this.h=this.g=null}add(v,_){const x=H.get();x.set(v,_),this.h?this.h.next=x:this.g=x,this.h=x}}var H=new Y(()=>new se,u=>u.reset());class se{constructor(){this.next=this.g=this.h=null}set(v,_){this.h=v,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,ge=!1,R=new te,w=()=>{const u=Promise.resolve(void 0);ae=()=>{u.then(C)}};function C(){for(var u;u=Z();){try{u.h.call(u.g)}catch(_){k(_)}var v=H;v.j(u),v.h<100&&(v.h++,u.next=v.g,v.g=u)}ge=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(u,v){this.type=u,this.g=this.target=v,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,v=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,v),h.removeEventListener("test",_,v)}catch{}return u}();function I(u){return/^[\s\xa0]*$/.test(u)}function ce(u,v){M.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,v)}T(ce,M),ce.prototype.init=function(u,v){const _=this.type=u.type,x=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=v,v=u.relatedTarget,v||(_=="mouseover"?v=u.fromElement:_=="mouseout"&&(v=u.toElement)),this.relatedTarget=v,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ce.Z.h.call(this)},ce.prototype.h=function(){ce.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ye="closure_listenable_"+(Math.random()*1e6|0),K=0;function oe(u,v,_,x,B){this.listener=u,this.proxy=null,this.src=v,this.type=_,this.capture=!!x,this.ha=B,this.key=++K,this.da=this.fa=!1}function fe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ne(u,v,_){for(const x in u)v.call(_,u[x],x,u)}function N(u,v){for(const _ in u)v.call(void 0,u[_],_,u)}function ie(u){const v={};for(const _ in u)v[_]=u[_];return v}const de="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(u,v){let _,x;for(let B=1;B<arguments.length;B++){x=arguments[B];for(_ in x)u[_]=x[_];for(let Q=0;Q<de.length;Q++)_=de[Q],Object.prototype.hasOwnProperty.call(x,_)&&(u[_]=x[_])}}function ve(u){this.src=u,this.g={},this.h=0}ve.prototype.add=function(u,v,_,x,B){const Q=u.toString();u=this.g[Q],u||(u=this.g[Q]=[],this.h++);const le=Se(u,v,x,B);return le>-1?(v=u[le],_||(v.fa=!1)):(v=new oe(v,this.src,Q,!!x,B),v.fa=_,u.push(v)),v};function Me(u,v){const _=v.type;if(_ in u.g){var x=u.g[_],B=Array.prototype.indexOf.call(x,v,void 0),Q;(Q=B>=0)&&Array.prototype.splice.call(x,B,1),Q&&(fe(v),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Se(u,v,_,x){for(let B=0;B<u.length;++B){const Q=u[B];if(!Q.da&&Q.listener==v&&Q.capture==!!_&&Q.ha==x)return B}return-1}var Ut="closure_lm_"+(Math.random()*1e6|0),We={};function xn(u,v,_,x,B){if(Array.isArray(v)){for(let Q=0;Q<v.length;Q++)xn(u,v[Q],_,x,B);return null}return _=Vi(_),u&&u[ye]?u.J(v,_,m(x)?!!x.capture:!1,B):Pi(u,v,_,!1,x,B)}function Pi(u,v,_,x,B,Q){if(!v)throw Error("Invalid event type");const le=m(B)?!!B.capture:!!B;let Ie=ji(u);if(Ie||(u[Ut]=Ie=new ve(u)),_=Ie.add(v,_,x,le,Q),_.proxy)return _;if(x=$r(),_.proxy=x,x.src=u,x.listener=_,u.addEventListener)O||(B=le),B===void 0&&(B=!1),u.addEventListener(v.toString(),x,B);else if(u.attachEvent)u.attachEvent(lr(v.toString()),x);else if(u.addListener&&u.removeListener)u.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return _}function $r(){function u(_){return v.call(u.src,u.listener,_)}const v=Ka;return u}function Zr(u,v,_,x,B){if(Array.isArray(v))for(var Q=0;Q<v.length;Q++)Zr(u,v[Q],_,x,B);else x=m(x)?!!x.capture:!!x,_=Vi(_),u&&u[ye]?(u=u.i,Q=String(v).toString(),Q in u.g&&(v=u.g[Q],_=Se(v,_,x,B),_>-1&&(fe(v[_]),Array.prototype.splice.call(v,_,1),v.length==0&&(delete u.g[Q],u.h--)))):u&&(u=ji(u))&&(v=u.g[v.toString()],u=-1,v&&(u=Se(v,_,x,B)),(_=u>-1?v[u]:null)&&Pn(_))}function Pn(u){if(typeof u!="number"&&u&&!u.da){var v=u.src;if(v&&v[ye])Me(v.i,u);else{var _=u.type,x=u.proxy;v.removeEventListener?v.removeEventListener(_,x,u.capture):v.detachEvent?v.detachEvent(lr(_),x):v.addListener&&v.removeListener&&v.removeListener(x),(_=ji(v))?(Me(_,u),_.h==0&&(_.src=null,v[Ut]=null)):fe(u)}}}function lr(u){return u in We?We[u]:We[u]="on"+u}function Ka(u,v){if(u.da)u=!0;else{v=new ce(v,this);const _=u.listener,x=u.ha||u.src;u.fa&&Pn(u),u=_.call(x,v)}return u}function ji(u){return u=u[Ut],u instanceof ve?u:null}var ln="__closure_events_fn_"+(Math.random()*1e9>>>0);function Vi(u){return typeof u=="function"?u:(u[ln]||(u[ln]=function(v){return u.handleEvent(v)}),u[ln])}function vt(){U.call(this),this.i=new ve(this),this.M=this,this.G=null}T(vt,U),vt.prototype[ye]=!0,vt.prototype.removeEventListener=function(u,v,_,x){Zr(this,u,v,_,x)};function xt(u,v){var _,x=u.G;if(x)for(_=[];x;x=x.G)_.push(x);if(u=u.M,x=v.type||v,typeof v=="string")v=new M(v,u);else if(v instanceof M)v.target=v.target||u;else{var B=v;v=new M(x,u),ue(v,B)}B=!0;let Q,le;if(_)for(le=_.length-1;le>=0;le--)Q=v.g=_[le],B=jn(Q,x,!0,v)&&B;if(Q=v.g=u,B=jn(Q,x,!0,v)&&B,B=jn(Q,x,!1,v)&&B,_)for(le=0;le<_.length;le++)Q=v.g=_[le],B=jn(Q,x,!1,v)&&B}vt.prototype.N=function(){if(vt.Z.N.call(this),this.i){var u=this.i;for(const v in u.g){const _=u.g[v];for(let x=0;x<_.length;x++)fe(_[x]);delete u.g[v],u.h--}}this.G=null},vt.prototype.J=function(u,v,_,x){return this.i.add(String(u),v,!1,_,x)},vt.prototype.K=function(u,v,_,x){return this.i.add(String(u),v,!0,_,x)};function jn(u,v,_,x){if(v=u.i.g[String(v)],!v)return!0;v=v.concat();let B=!0;for(let Q=0;Q<v.length;++Q){const le=v[Q];if(le&&!le.da&&le.capture==_){const Ie=le.listener,ht=le.ha||le.src;le.fa&&Me(u.i,le),B=Ie.call(ht,x)!==!1&&B}}return B&&!x.defaultPrevented}function Qa(u,v){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:h.setTimeout(u,v||0)}function Ui(u){u.g=Qa(()=>{u.g=null,u.i&&(u.i=!1,Ui(u))},u.l);const v=u.h;u.h=null,u.m.apply(null,v)}class xr extends U{constructor(v,_){super(),this.m=v,this.l=_,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Ui(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yn(u){U.call(this),this.h=u,this.g={}}T(Yn,U);var cr=[];function Ht(u){Ne(u.g,function(v,_){this.g.hasOwnProperty(_)&&Pn(v)},u),u.g={}}Yn.prototype.N=function(){Yn.Z.N.call(this),Ht(this)},Yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vn=h.JSON.stringify,Ot=h.JSON.parse,Gs=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Ya(){}function Ws(){}var $t={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Xn(){M.call(this,"d")}T(Xn,M);function Vn(){M.call(this,"c")}T(Vn,M);var wn={},wr=null;function Jr(){return wr=wr||new vt}wn.Ia="serverreachability";function Ks(u){M.call(this,wn.Ia,u)}T(Ks,M);function X(u){const v=Jr();xt(v,new Ks(v))}wn.STAT_EVENT="statevent";function _e(u,v){M.call(this,wn.STAT_EVENT,u),this.stat=v}T(_e,M);function Je(u){const v=Jr();xt(v,new _e(v,u))}wn.Ja="timingevent";function Ye(u,v){M.call(this,wn.Ja,u),this.size=v}T(Ye,M);function Ar(u,v){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},v)}function Rr(){this.g=!0}Rr.prototype.ua=function(){this.g=!1};function Qs(u,v,_,x,B,Q){u.info(function(){if(u.g)if(Q){var le="",Ie=Q.split("&");for(let Xe=0;Xe<Ie.length;Xe++){var ht=Ie[Xe].split("=");if(ht.length>1){const Rt=ht[0];ht=ht[1];const Un=Rt.split("_");le=Un.length>=2&&Un[1]=="type"?le+(Rt+"="+ht+"&"):le+(Rt+"=redacted&")}}}else le=null;else le=Q;return"XMLHTTP REQ ("+x+") [attempt "+B+"]: "+v+`
`+_+`
`+le})}function Be(u,v,_,x,B,Q,le){u.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+B+"]: "+v+`
`+_+`
`+Q+" "+le})}function Zt(u,v,_,x){u.info(function(){return"XMLHTTP TEXT ("+v+"): "+cn(u,_)+(x?" "+x:"")})}function ll(u,v){u.info(function(){return"TIMEOUT: "+v})}Rr.prototype.info=function(){};function cn(u,v){if(!u.g)return v;if(!v)return null;try{const Q=JSON.parse(v);if(Q){for(u=0;u<Q.length;u++)if(Array.isArray(Q[u])){var _=Q[u];if(!(_.length<2)){var x=_[1];if(Array.isArray(x)&&!(x.length<1)){var B=x[0];if(B!="noop"&&B!="stop"&&B!="close")for(let le=1;le<x.length;le++)x[le]=""}}}}return vn(Q)}catch{return v}}var wt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Jt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ei;function Ys(){}T(Ys,Ya),Ys.prototype.g=function(){return new XMLHttpRequest},ei=new Ys;function Xs(u){return encodeURIComponent(String(u))}function Vd(u){var v=1;u=u.split(":");const _=[];for(;v>0&&u.length;)_.push(u.shift()),v--;return u.length&&_.push(u.join(":")),_}function ur(u,v,_,x){this.j=u,this.i=v,this.l=_,this.S=x||1,this.V=new Yn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Li}function Li(){this.i=null,this.g="",this.h=!1}var Xa={},Cr={};function Ir(u,v,_){u.M=1,u.A=ni(mt(v)),u.u=_,u.R=!0,zi(u,null)}function zi(u,v){u.F=Date.now(),$s(u),u.B=mt(u.A);var _=u.B,x=u.S;Array.isArray(x)||(x=[String(x)]),iu(_.i,"t",x),u.C=0,_=u.j.L,u.h=new Li,u.g=ao(u.j,_?v:null,!u.u),u.P>0&&(u.O=new xr(y(u.Y,u,u.g),u.P)),v=u.V,_=u.g,x=u.ba;var B="readystatechange";Array.isArray(B)||(B&&(cr[0]=B.toString()),B=cr);for(let Q=0;Q<B.length;Q++){const le=xn(_,B[Q],x||v.handleEvent,!1,v.h||v);if(!le)break;v.g[le.key]=le}v=u.J?ie(u.J):{},u.u?(u.v||(u.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,v)):(u.v="GET",u.g.ea(u.B,u.v,null,v)),X(),Qs(u.i,u.v,u.B,u.l,u.S,u.u)}ur.prototype.ba=function(u){u=u.target;const v=this.O;v&&un(u)==3?v.j():this.Y(u)},ur.prototype.Y=function(u){try{if(u==this.g)e:{const Ie=un(this.g),ht=this.g.ya(),Xe=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||la(this.g)))){this.K||Ie!=4||ht==7||(ht==8||Xe<=0?X(3):X(2)),Nr(this);var v=this.g.ca();this.X=v;var _=Bi(this);if(this.o=v==200,Be(this.i,this.v,this.B,this.l,this.S,Ie,v),this.o){if(this.U&&!this.L){t:{if(this.g){var x,B=this.g;if((x=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(x)){var Q=x;break t}}Q=null}if(u=Q)Zt(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,$a(this,u);else{this.o=!1,this.m=3,Je(12),Or(this),Zs(this);break e}}if(this.R){u=!0;let Rt;for(;!this.K&&this.C<_.length;)if(Rt=tu(this,_),Rt==Cr){Ie==4&&(this.m=4,Je(14),u=!1),Zt(this.i,this.l,null,"[Incomplete Response]");break}else if(Rt==Xa){this.m=4,Je(15),Zt(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else Zt(this.i,this.l,Rt,null),$a(this,Rt);if(At(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||_.length!=0||this.h.h||(this.m=1,Je(16),u=!1),this.o=this.o&&u,!u)Zt(this.i,this.l,_,"[Invalid Chunked Response]"),Or(this),Zs(this);else if(_.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),vl(le),le.P=!0,Je(11))}}else Zt(this.i,this.l,_,null),$a(this,_);Ie==4&&Or(this),this.o&&!this.K&&(Ie==4?_l(this.j,this):(this.o=!1,$s(this)))}else ca(this.g),v==400&&_.indexOf("Unknown SID")>0?(this.m=3,Je(12)):(this.m=0,Je(13)),Or(this),Zs(this)}}}catch{}finally{}};function Bi(u){if(!At(u))return u.g.la();const v=la(u.g);if(v==="")return"";let _="";const x=v.length,B=un(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Or(u),Zs(u),"";u.h.i=new h.TextDecoder}for(let Q=0;Q<x;Q++)u.h.h=!0,_+=u.h.i.decode(v[Q],{stream:!(B&&Q==x-1)});return v.length=0,u.h.g+=_,u.C=0,u.h.g}function At(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function tu(u,v){var _=u.C,x=v.indexOf(`
`,_);return x==-1?Cr:(_=Number(v.substring(_,x)),isNaN(_)?Xa:(x+=1,x+_>v.length?Cr:(v=v.slice(x,x+_),u.C=x+_,v)))}ur.prototype.cancel=function(){this.K=!0,Or(this)};function $s(u){u.T=Date.now()+u.H,Dr(u,u.H)}function Dr(u,v){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Ar(y(u.aa,u),v)}function Nr(u){u.D&&(h.clearTimeout(u.D),u.D=null)}ur.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(ll(this.i,this.B),this.M!=2&&(X(),Je(17)),Or(this),this.m=2,Zs(this)):Dr(this,this.T-u)};function Zs(u){u.j.I==0||u.K||_l(u.j,u)}function Or(u){Nr(u);var v=u.O;v&&typeof v.dispose=="function"&&v.dispose(),u.O=null,Ht(u.V),u.g&&(v=u.g,u.g=null,v.abort(),v.dispose())}function $a(u,v){try{var _=u.j;if(_.I!=0&&(_.g==u||ta(_.h,u))){if(!u.L&&ta(_.h,u)&&_.I==3){try{var x=_.Ba.g.parse(v)}catch{x=null}if(Array.isArray(x)&&x.length==3){var B=x;if(B[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)so(_),kr(_);else break e;yl(_),Je(18)}}else _.xa=B[1],0<_.xa-_.K&&B[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Ar(y(_.Va,_),6e3));$n(_.h)<=1&&_.ta&&(_.ta=void 0)}else si(_,11)}else if((u.L||_.g==u)&&so(_),!I(v))for(B=_.Ba.g.parse(v),v=0;v<B.length;v++){let Xe=B[v];const Rt=Xe[0];if(!(Rt<=_.K))if(_.K=Rt,Xe=Xe[1],_.I==2)if(Xe[0]=="c"){_.M=Xe[1],_.ba=Xe[2];const Un=Xe[3];Un!=null&&(_.ka=Un,_.j.info("VER="+_.ka));const Mr=Xe[4];Mr!=null&&(_.za=Mr,_.j.info("SVER="+_.za));const fr=Xe[5];fr!=null&&typeof fr=="number"&&fr>0&&(x=1.5*fr,_.O=x,_.j.info("backChannelRequestTimeoutMs_="+x)),x=_;const mr=u.g;if(mr){const pr=mr.g?mr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pr){var Q=x.h;Q.g||pr.indexOf("spdy")==-1&&pr.indexOf("quic")==-1&&pr.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Za(Q,Q.h),Q.h=null))}if(x.G){const El=mr.g?mr.g.getResponseHeader("X-HTTP-Session-Id"):null;El&&(x.wa=El,et(x.J,x.G,El))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),x=_;var le=u;if(x.na=fu(x,x.L?x.ba:null,x.W),le.L){ti(x.h,le);var Ie=le,ht=x.O;ht&&(Ie.H=ht),Ie.D&&(Nr(Ie),$s(Ie)),x.g=le}else cu(x);_.i.length>0&&fa(_)}else Xe[0]!="stop"&&Xe[0]!="close"||si(_,7);else _.I==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?si(_,7):ha(_):Xe[0]!="noop"&&_.l&&_.l.qa(Xe),_.A=0)}}X(4)}catch{}}var Ud=class{constructor(u,v){this.g=u,this.map=v}};function Js(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ea(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function $n(u){return u.h?1:u.g?u.g.size:0}function ta(u,v){return u.h?u.h==v:u.g?u.g.has(v):!1}function Za(u,v){u.g?u.g.add(v):u.h=v}function ti(u,v){u.h&&u.h==v?u.h=null:u.g&&u.g.has(v)&&u.g.delete(v)}Js.prototype.cancel=function(){if(this.i=Ja(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ja(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let v=u.i;for(const _ of u.g.values())v=v.concat(_.G);return v}return P(u.i)}var eo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ld(u,v){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const x=u[_].indexOf("=");let B,Q=null;x>=0?(B=u[_].substring(0,x),Q=u[_].substring(x+1)):B=u[_],v(B,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function hr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;u instanceof hr?(this.l=u.l,qi(this,u.j),this.o=u.o,this.g=u.g,na(this,u.u),this.h=u.h,Fi(this,su(u.i)),this.m=u.m):u&&(v=String(u).match(eo))?(this.l=!1,qi(this,v[1]||"",!0),this.o=ra(v[2]||""),this.g=ra(v[3]||"",!0),na(this,v[4]),this.h=ra(v[5]||"",!0),Fi(this,v[6]||"",!0),this.m=ra(v[7]||"")):(this.l=!1,this.i=new Zn(null,this.l))}hr.prototype.toString=function(){const u=[];var v=this.j;v&&u.push(Gt(v,ul,!0),":");var _=this.g;return(_||v=="file")&&(u.push("//"),(v=this.o)&&u.push(Gt(v,ul,!0),"@"),u.push(Xs(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Gt(_,_.charAt(0)=="/"?Hi:hl,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Gt(_,ru)),u.join("")},hr.prototype.resolve=function(u){const v=mt(this);let _=!!u.j;_?qi(v,u.j):_=!!u.o,_?v.o=u.o:_=!!u.g,_?v.g=u.g:_=u.u!=null;var x=u.h;if(_)na(v,u.u);else if(_=!!u.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var B=v.h.lastIndexOf("/");B!=-1&&(x=v.h.slice(0,B+1)+x)}if(B=x,B==".."||B==".")x="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){x=B.lastIndexOf("/",0)==0,B=B.split("/");const Q=[];for(let le=0;le<B.length;){const Ie=B[le++];Ie=="."?x&&le==B.length&&Q.push(""):Ie==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),x&&le==B.length&&Q.push("")):(Q.push(Ie),x=!0)}x=Q.join("/")}else x=B}return _?v.h=x:_=u.i.toString()!=="",_?Fi(v,su(u.i)):_=!!u.m,_&&(v.m=u.m),v};function mt(u){return new hr(u)}function qi(u,v,_){u.j=_?ra(v,!0):v,u.j&&(u.j=u.j.replace(/:$/,""))}function na(u,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);u.u=v}else u.u=null}function Fi(u,v,_){v instanceof Zn?(u.i=v,ml(u.i,u.l)):(_||(v=Gt(v,nu)),u.i=new Zn(v,u.l))}function et(u,v,_){u.i.set(v,_)}function ni(u){return et(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ra(u,v){return u?v?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Gt(u,v,_){return typeof u=="string"?(u=encodeURI(u).replace(v,cl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function cl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ul=/[#\/\?@]/g,hl=/[#\?:]/g,Hi=/[#\?]/g,nu=/[#\?@]/g,ru=/#/g;function Zn(u,v){this.h=this.g=null,this.i=u||null,this.j=!!v}function ri(u){u.g||(u.g=new Map,u.h=0,u.i&&Ld(u.i,function(v,_){u.add(decodeURIComponent(v.replace(/\+/g," ")),_)}))}r=Zn.prototype,r.add=function(u,v){ri(this),this.i=null,u=dr(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(v),this.h+=1,this};function dl(u,v){ri(u),v=dr(u,v),u.g.has(v)&&(u.i=null,u.h-=u.g.get(v).length,u.g.delete(v))}function fl(u,v){return ri(u),v=dr(u,v),u.g.has(v)}r.forEach=function(u,v){ri(this),this.g.forEach(function(_,x){_.forEach(function(B){u.call(v,B,x,this)},this)},this)};function to(u,v){ri(u);let _=[];if(typeof v=="string")fl(u,v)&&(_=_.concat(u.g.get(dr(u,v))));else for(u=Array.from(u.g.values()),v=0;v<u.length;v++)_=_.concat(u[v]);return _}r.set=function(u,v){return ri(this),this.i=null,u=dr(this,u),fl(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[v]),this.h+=1,this},r.get=function(u,v){return u?(u=to(this,u),u.length>0?String(u[0]):v):v};function iu(u,v,_){dl(u,v),_.length>0&&(u.i=null,u.g.set(dr(u,v),P(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],v=Array.from(this.g.keys());for(let x=0;x<v.length;x++){var _=v[x];const B=Xs(_);_=to(this,_);for(let Q=0;Q<_.length;Q++){let le=B;_[Q]!==""&&(le+="="+Xs(_[Q])),u.push(le)}}return this.i=u.join("&")};function su(u){const v=new Zn;return v.i=u.i,u.g&&(v.g=new Map(u.g),v.h=u.h),v}function dr(u,v){return v=String(v),u.j&&(v=v.toLowerCase()),v}function ml(u,v){v&&!u.j&&(ri(u),u.i=null,u.g.forEach(function(_,x){const B=x.toLowerCase();x!=B&&(dl(this,x),iu(this,B,_))},u)),u.j=v}function pl(u,v){const _=new Rr;if(h.Image){const x=new Image;x.onload=b(_n,_,"TestLoadImage: loaded",!0,v,x),x.onerror=b(_n,_,"TestLoadImage: error",!1,v,x),x.onabort=b(_n,_,"TestLoadImage: abort",!1,v,x),x.ontimeout=b(_n,_,"TestLoadImage: timeout",!1,v,x),h.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=u}else v(!1)}function Gi(u,v){const _=new Rr,x=new AbortController,B=setTimeout(()=>{x.abort(),_n(_,"TestPingServer: timeout",!1,v)},1e4);fetch(u,{signal:x.signal}).then(Q=>{clearTimeout(B),Q.ok?_n(_,"TestPingServer: ok",!0,v):_n(_,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(B),_n(_,"TestPingServer: error",!1,v)})}function _n(u,v,_,x,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),x(_)}catch{}}function au(){this.g=new Gs}function ia(u){this.i=u.Sb||null,this.h=u.ab||!1}T(ia,Ya),ia.prototype.g=function(){return new sa(this.i,this.h)};function sa(u,v){vt.call(this),this.H=u,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(sa,vt),r=sa.prototype,r.open=function(u,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=v,this.readyState=1,ii(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(v.body=u),(this.H||h).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,bn(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ii(this)),this.g&&(this.readyState=3,ii(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Wi(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Wi(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var v=u.value?u.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!u.done}))&&(this.response=this.responseText+=v)}u.done?bn(this):ii(this),this.readyState==3&&Wi(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,bn(this))},r.Na=function(u){this.g&&(this.response=u,bn(this))},r.ga=function(){this.g&&bn(this)};function bn(u){u.readyState=4,u.l=null,u.j=null,u.B=null,ii(u)}r.setRequestHeader=function(u,v){this.A.append(u,v)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],v=this.h.entries();for(var _=v.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=v.next();return u.join(`\r
`)};function ii(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(sa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ki(u){let v="";return Ne(u,function(_,x){v+=x,v+=":",v+=_,v+=`\r
`}),v}function Jn(u,v,_){e:{for(x in _){var x=!1;break e}x=!0}x||(_=Ki(_),typeof u=="string"?_!=null&&Xs(_):et(u,v,_))}function ot(u){vt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(ot,vt);var no=/^https?$/i,ou=["POST","PUT"];r=ot.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,v,_,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);v=v?v.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ei.g(),this.g.onreadystatechange=A(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(u),!0),this.B=!1}catch(Q){aa(this,Q);return}if(u=_||"",_=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var B in x)_.set(B,x[B]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const Q of x.keys())_.set(Q,x.get(Q));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(_.keys()).find(Q=>Q.toLowerCase()=="content-type"),B=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(ou,v,void 0)>=0)||x||B||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,le]of _)this.g.setRequestHeader(Q,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(Q){aa(this,Q)}};function aa(u,v){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=v,u.o=5,oa(u),Lt(u)}function oa(u){u.A||(u.A=!0,xt(u,"complete"),xt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,xt(this,"complete"),xt(this,"abort"),Lt(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Lt(this,!0)),ot.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?gl(this):this.Xa())},r.Xa=function(){gl(this)};function gl(u){if(u.h&&typeof c<"u"){if(u.v&&un(u)==4)setTimeout(u.Ca.bind(u),0);else if(xt(u,"readystatechange"),un(u)==4){u.h=!1;try{const Q=u.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var _;if(!(_=v)){var x;if(x=Q===0){let le=String(u.D).match(eo)[1]||null;!le&&h.self&&h.self.location&&(le=h.self.location.protocol.slice(0,-1)),x=!no.test(le?le.toLowerCase():"")}_=x}if(_)xt(u,"complete"),xt(u,"success");else{u.o=6;try{var B=un(u)>2?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.ca()+"]",oa(u)}}finally{Lt(u)}}}}function Lt(u,v){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,v||xt(u,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function un(u){return u.g?u.g.readyState:0}r.ca=function(){try{return un(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var v=this.g.responseText;return u&&v.indexOf(u)==0&&(v=v.substring(u.length)),Ot(v)}};function la(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ca(u){const v={};u=(u.g&&un(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<u.length;x++){if(I(u[x]))continue;var _=Vd(u[x]);const B=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Q=v[B]||[];v[B]=Q,Q.push(_)}N(v,function(x){return x.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ua(u,v,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||v}function ro(u){this.za=0,this.i=[],this.j=new Rr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ua("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ua("baseRetryDelayMs",5e3,u),this.Za=ua("retryDelaySeedMs",1e4,u),this.Ta=ua("forwardChannelMaxRetries",2,u),this.va=ua("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Js(u&&u.concurrentRequestLimit),this.Ba=new au,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=ro.prototype,r.ka=8,r.I=1,r.connect=function(u,v,_,x){Je(0),this.W=u,this.H=v||{},_&&x!==void 0&&(this.H.OSID=_,this.H.OAID=x),this.F=this.X,this.J=fu(this,null,this.W),fa(this)};function ha(u){if(da(u),u.I==3){var v=u.V++,_=mt(u.J);if(et(_,"SID",u.M),et(_,"RID",v),et(_,"TYPE","terminate"),ma(u,_),v=new ur(u,u.j,v),v.M=2,v.A=ni(mt(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(v.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=v.A,_=!0),_||(v.g=ao(v.j,null),v.g.ea(v.A)),v.F=Date.now(),$s(v)}du(u)}function kr(u){u.g&&(vl(u),u.g.cancel(),u.g=null)}function da(u){kr(u),u.v&&(h.clearTimeout(u.v),u.v=null),so(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function fa(u){if(!ea(u.h)&&!u.m){u.m=!0;var v=u.Ea;ae||w(),ge||(ae(),ge=!0),R.add(v,u),u.D=0}}function zd(u,v){return $n(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=v.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Ar(y(u.Ea,u,v),hu(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const B=new ur(this,this.j,u);let Q=this.o;if(this.U&&(Q?(Q=ie(Q),ue(Q,this.U)):Q=this.U),this.u!==null||this.R||(B.J=Q,Q=null),this.S)e:{for(var v=0,_=0;_<this.i.length;_++){t:{var x=this.i[_];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(v+=x,v>4096){v=_;break e}if(v===4096||_===this.i.length-1){v=_+1;break e}}v=1e3}else v=1e3;v=io(this,B,v),_=mt(this.J),et(_,"RID",u),et(_,"CVER",22),this.G&&et(_,"X-HTTP-Session-Id",this.G),ma(this,_),Q&&(this.R?v="headers="+Xs(Ki(Q))+"&"+v:this.u&&Jn(_,this.u,Q)),Za(this.h,B),this.Ra&&et(_,"TYPE","init"),this.S?(et(_,"$req",v),et(_,"SID","null"),B.U=!0,Ir(B,_,null)):Ir(B,_,v),this.I=2}}else this.I==3&&(u?lu(this,u):this.i.length==0||ea(this.h)||lu(this))};function lu(u,v){var _;v?_=v.l:_=u.V++;const x=mt(u.J);et(x,"SID",u.M),et(x,"RID",_),et(x,"AID",u.K),ma(u,x),u.u&&u.o&&Jn(x,u.u,u.o),_=new ur(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),v&&(u.i=v.G.concat(u.i)),v=io(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Za(u.h,_),Ir(_,x,v)}function ma(u,v){u.H&&Ne(u.H,function(_,x){et(v,x,_)}),u.l&&Ne({},function(_,x){et(v,x,_)})}function io(u,v,_){_=Math.min(u.i.length,_);const x=u.l?y(u.l.Ka,u.l,u):null;e:{var B=u.i;let Ie=-1;for(;;){const ht=["count="+_];Ie==-1?_>0?(Ie=B[0].g,ht.push("ofs="+Ie)):Ie=0:ht.push("ofs="+Ie);let Xe=!0;for(let Rt=0;Rt<_;Rt++){var Q=B[Rt].g;const Un=B[Rt].map;if(Q-=Ie,Q<0)Ie=Math.max(0,B[Rt].g-100),Xe=!1;else try{Q="req"+Q+"_"||"";try{var le=Un instanceof Map?Un:Object.entries(Un);for(const[Mr,fr]of le){let mr=fr;m(fr)&&(mr=vn(fr)),ht.push(Q+Mr+"="+encodeURIComponent(mr))}}catch(Mr){throw ht.push(Q+"type="+encodeURIComponent("_badmap")),Mr}}catch{x&&x(Un)}}if(Xe){le=ht.join("&");break e}}le=void 0}return u=u.i.splice(0,_),v.G=u,le}function cu(u){if(!u.g&&!u.v){u.Y=1;var v=u.Da;ae||w(),ge||(ae(),ge=!0),R.add(v,u),u.A=0}}function yl(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Ar(y(u.Da,u),hu(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,uu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Ar(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Je(10),kr(this),uu(this))};function vl(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function uu(u){u.g=new ur(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var v=mt(u.na);et(v,"RID","rpc"),et(v,"SID",u.M),et(v,"AID",u.K),et(v,"CI",u.F?"0":"1"),!u.F&&u.ia&&et(v,"TO",u.ia),et(v,"TYPE","xmlhttp"),ma(u,v),u.u&&u.o&&Jn(v,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=ni(mt(v)),_.u=null,_.R=!0,zi(_,u)}r.Va=function(){this.C!=null&&(this.C=null,kr(this),yl(this),Je(19))};function so(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function _l(u,v){var _=null;if(u.g==v){so(u),vl(u),u.g=null;var x=2}else if(ta(u.h,v))_=v.G,ti(u.h,v),x=1;else return;if(u.I!=0){if(v.o)if(x==1){_=v.u?v.u.length:0,v=Date.now()-v.F;var B=u.D;x=Jr(),xt(x,new Ye(x,_)),fa(u)}else cu(u);else if(B=v.m,B==3||B==0&&v.X>0||!(x==1&&zd(u,v)||x==2&&yl(u)))switch(_&&_.length>0&&(v=u.h,v.i=v.i.concat(_)),B){case 1:si(u,5);break;case 4:si(u,10);break;case 3:si(u,6);break;default:si(u,2)}}}function hu(u,v){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*v}function si(u,v){if(u.j.info("Error code "+v),v==2){var _=y(u.bb,u),x=u.Ua;const B=!x;x=new hr(x||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||qi(x,"https"),ni(x),B?pl(x.toString(),_):Gi(x.toString(),_)}else Je(2);u.I=0,u.l&&u.l.pa(v),du(u),da(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Je(2)):(this.j.info("Failed to ping google.com"),Je(1))};function du(u){if(u.I=0,u.ja=[],u.l){const v=Ja(u.h);(v.length!=0||u.i.length!=0)&&(F(u.ja,v),F(u.ja,u.i),u.h.i.length=0,P(u.i),u.i.length=0),u.l.oa()}}function fu(u,v,_){var x=_ instanceof hr?mt(_):new hr(_);if(x.g!="")v&&(x.g=v+"."+x.g),na(x,x.u);else{var B=h.location;x=B.protocol,v=v?v+"."+B.hostname:B.hostname,B=+B.port;const Q=new hr(null);x&&qi(Q,x),v&&(Q.g=v),B&&na(Q,B),_&&(Q.h=_),x=Q}return _=u.G,v=u.wa,_&&v&&et(x,_,v),et(x,"VER",u.ka),ma(u,x),x}function ao(u,v,_){if(v&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=u.Aa&&!u.ma?new ot(new ia({ab:_})):new ot(u.ma),v.Fa(u.L),v}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function mu(){}r=mu.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function oo(){}oo.prototype.g=function(u,v){return new En(u,v)};function En(u,v){vt.call(this),this.g=new ro(v),this.l=u,this.h=v&&v.messageUrlParams||null,u=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(u?u["X-WebChannel-Content-Type"]=v.messageContentType:u={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(u?u["X-WebChannel-Client-Profile"]=v.sa:u={"X-WebChannel-Client-Profile":v.sa}),this.g.U=u,(u=v&&v.Qb)&&!I(u)&&(this.g.u=u),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!I(v)&&(this.g.G=v,u=this.h,u!==null&&v in u&&(u=this.h,v in u&&delete u[v])),this.j=new Qi(this)}T(En,vt),En.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){ha(this.g)},En.prototype.o=function(u){var v=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=vn(u),u=_);v.i.push(new Ud(v.Ya++,u)),v.I==3&&fa(v)},En.prototype.N=function(){this.g.l=null,delete this.j,ha(this.g),delete this.g,En.Z.N.call(this)};function bl(u){Xn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var v=u.__sm__;if(v){e:{for(const _ in v){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,v=v!==null&&u in v?v[u]:void 0),this.data=v}else this.data=u}T(bl,Xn);function pu(){Vn.call(this),this.status=1}T(pu,Vn);function Qi(u){this.g=u}T(Qi,mu),Qi.prototype.ra=function(){xt(this.g,"a")},Qi.prototype.qa=function(u){xt(this.g,new bl(u))},Qi.prototype.pa=function(u){xt(this.g,new pu)},Qi.prototype.oa=function(){xt(this.g,"b")},oo.prototype.createWebChannel=oo.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,YE=function(){return new oo},QE=function(){return Jr()},KE=wn,fp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},wt.NO_ERROR=0,wt.TIMEOUT=8,wt.HTTP_ERROR=6,Ih=wt,Jt.COMPLETE="complete",WE=Jt,Ws.EventType=$t,$t.OPEN="a",$t.CLOSE="b",$t.ERROR="c",$t.MESSAGE="d",vt.prototype.listen=vt.prototype.J,pc=Ws,ot.prototype.listenOnce=ot.prototype.K,ot.prototype.getLastError=ot.prototype.Ha,ot.prototype.getLastErrorCode=ot.prototype.ya,ot.prototype.getStatus=ot.prototype.ca,ot.prototype.getResponseJson=ot.prototype.La,ot.prototype.getResponseText=ot.prototype.la,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Fa,GE=ot}).apply(typeof gh<"u"?gh:typeof self<"u"?self:typeof window<"u"?window:{});const j0="@firebase/firestore",V0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va=new Hp("@firebase/firestore");function Uo(){return Va.logLevel}function me(r,...e){if(Va.logLevel<=Ue.DEBUG){const n=e.map(Kp);Va.debug(`Firestore (${nl}): ${r}`,...n)}}function Ai(r,...e){if(Va.logLevel<=Ue.ERROR){const n=e.map(Kp);Va.error(`Firestore (${nl}): ${r}`,...n)}}function Qo(r,...e){if(Va.logLevel<=Ue.WARN){const n=e.map(Kp);Va.warn(`Firestore (${nl}): ${r}`,...n)}}function Kp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,XE(r,s,n)}function XE(r,e,n){let s=`FIRESTORE (${nl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ai(s),new Error(s)}function Qe(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||XE(e,o,s)}function De(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Xr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(mn.UNAUTHENTICATED))}shutdown(){}}class iC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class sC{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Qe(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let c=new Ti;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ti,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const p=c;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},m=p=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ti)}},0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Qe(typeof s.accessToken=="string",31837,{l:s}),new $E(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new mn(e)}}class aC{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class oC{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new aC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(mn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class U0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Qe(this.o===void 0,3512);const s=c=>{c.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.m;return this.m=c.token,me("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const o=c=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new U0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new U0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=cC(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<n&&(s+=e.charAt(o[c]%62))}return s}}function Le(r,e){return r<e?-1:r>e?1:0}function mp(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const o=r.charAt(s),c=e.charAt(s);if(o!==c)return Hm(o)===Hm(c)?Le(o,c):Hm(o)?1:-1}return Le(r.length,e.length)}const uC=55296,hC=57343;function Hm(r){const e=r.charCodeAt(0);return e>=uC&&e<=hC}function Yo(r,e,n){return r.length===e.length&&r.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="__name__";class zr{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ae(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return zr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof zr?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const c=zr.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Le(e.length,n.length)}static compareSegments(e,n){const s=zr.isNumericId(e),o=zr.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?zr.extractNumericId(e).compare(zr.extractNumericId(n)):mp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Cs.fromString(e.substring(4,e.length-2))}}class ct extends zr{construct(e,n,s){return new ct(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new he(J.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new ct(n)}static emptyPath(){return new ct([])}}const dC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends zr{construct(e,n,s){return new sn(e,n,s)}static isValidIdentifier(e){return dC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===L0}static keyField(){return new sn([L0])}static fromServerFormat(e){const n=[];let s="",o=0;const c=()=>{if(s.length===0)throw new he(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new he(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new he(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(s+=m,o++):(c(),o++)}if(c(),h)throw new he(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sn(n)}static emptyPath(){return new sn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ct.fromString(e))}static fromName(e){return new Ee(ct.fromString(e).popFirst(5))}static empty(){return new Ee(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ct.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ct(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(r,e,n){if(!n)throw new he(J.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function fC(r,e,n,s){if(e===!0&&s===!0)throw new he(J.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function z0(r){if(!Ee.isDocumentKey(r))throw new he(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function B0(r){if(Ee.isDocumentKey(r))throw new he(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function JE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function dd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ae(12329,{type:typeof r})}function On(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new he(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dd(r);throw new he(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(r,e){const n={typeString:r};return e&&(n.value=e),n}function qc(r,e){if(!JE(r))throw new he(J.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(c!==void 0&&h!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new he(J.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=-62135596800,F0=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*F0);return new dt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<q0)throw new he(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/F0}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(qc(e,dt._jsonSchema))return new dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-q0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:Vt("string",dt._jsonSchemaVersion),seconds:Vt("number"),nanoseconds:Vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new dt(0,0))}static max(){return new Ce(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc=-1;function mC(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ce.fromTimestamp(s===1e9?new dt(n+1,0):new dt(n,s));return new Ns(o,Ee.empty(),e)}function pC(r){return new Ns(r.readTime,r.key,Nc)}class Ns{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Ns(Ce.min(),Ee.empty(),Nc)}static max(){return new Ns(Ce.max(),Ee.empty(),Nc)}}function gC(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=Ee.comparator(r.documentKey,e.documentKey),n!==0?n:Le(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(r){if(r.code!==J.FAILED_PRECONDITION||r.message!==yC)throw r;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):re.reject(n)}static resolve(e){return new re((n,s)=>{n(e)})}static reject(e){return new re((n,s)=>{s(e)})}static waitFor(e){return new re((n,s)=>{let o=0,c=0,h=!1;e.forEach(m=>{++o,m.next(()=>{++c,h&&c===o&&n()},p=>s(p))}),h=!0,c===o&&n()})}static or(e){let n=re.resolve(!1);for(const s of e)n=n.next(o=>o?re.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,c)=>{s.push(n.call(this,o,c))}),this.waitFor(s)}static mapArray(e,n){return new re((s,o)=>{const c=e.length,h=new Array(c);let m=0;for(let p=0;p<c;p++){const y=p;n(e[y]).next(b=>{h[y]=b,++m,m===c&&s(h)},b=>o(b))}})}static doWhile(e,n){return new re((s,o)=>{const c=()=>{e()===!0?n().next(()=>{c()},o):s()};c()})}}function _C(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function il(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}fd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp=-1;function md(r){return r==null}function Fh(r){return r===0&&1/r==-1/0}function bC(r){return typeof r=="number"&&Number.isInteger(r)&&!Fh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="";function EC(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=H0(e)),e=TC(r.get(n),e);return H0(e)}function TC(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const c=r.charAt(o);switch(c){case"\0":n+="";break;case e1:n+="";break;default:n+=c}}return n}function H0(r){return r+e1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function Bs(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function t1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n){this.comparator=e,this.root=n||rn.EMPTY}insert(e,n){return new yt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yh(this.root,e,this.comparator,!1)}getReverseIterator(){return new yh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yh(this.root,e,this.comparator,!0)}}class yh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rn{constructor(e,n,s,o,c){this.key=e,this.value=n,this.color=s??rn.RED,this.left=o??rn.EMPTY,this.right=c??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,c){return new rn(e??this.key,n??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const c=s(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,s),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return rn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,s,o,c){return this}insert(e,n,s){return new rn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new W0(this.data.getIterator())}getIteratorFrom(e){return new W0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ft(this.comparator);return n.data=e,n}}class W0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.fields=e,e.sort(sn.comparator)}static empty(){return new Kn([])}unionWith(e){let n=new Ft(sn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Kn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Yo(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new n1("Invalid base64 string: "+c):c}}(e);return new on(n)}static fromUint8Array(e){const n=function(o){let c="";for(let h=0;h<o.length;++h)c+=String.fromCharCode(o[h]);return c}(e);return new on(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}on.EMPTY_BYTE_STRING=new on("");const SC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Os(r){if(Qe(!!r,39018),typeof r=="string"){let e=0;const n=SC.exec(r);if(Qe(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Dt(r.seconds),nanos:Dt(r.nanos)}}function Dt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ks(r){return typeof r=="string"?on.fromBase64String(r):on.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1="server_timestamp",i1="__type__",s1="__previous_value__",a1="__local_write_time__";function Xp(r){return(r?.mapValue?.fields||{})[i1]?.stringValue===r1}function pd(r){const e=r.mapValue.fields[s1];return Xp(e)?pd(e):e}function Oc(r){const e=Os(r.mapValue.fields[a1].timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,n,s,o,c,h,m,p,y,b){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=b}}const Hh="(default)";class kc{constructor(e,n){this.projectId=e,this.database=n||Hh}static empty(){return new kc("","")}get isDefaultDatabase(){return this.database===Hh}isEqual(e){return e instanceof kc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="__type__",wC="__max__",vh={mapValue:{}},l1="__vector__",Gh="value";function Ms(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Xp(r)?4:RC(r)?9007199254740991:AC(r)?10:11:Ae(28295,{value:r})}function Yr(r,e){if(r===e)return!0;const n=Ms(r);if(n!==Ms(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Oc(r).isEqual(Oc(e));case 3:return function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const h=Os(o.timestampValue),m=Os(c.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,c){return ks(o.bytesValue).isEqual(ks(c.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,c){return Dt(o.geoPointValue.latitude)===Dt(c.geoPointValue.latitude)&&Dt(o.geoPointValue.longitude)===Dt(c.geoPointValue.longitude)}(r,e);case 2:return function(o,c){if("integerValue"in o&&"integerValue"in c)return Dt(o.integerValue)===Dt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const h=Dt(o.doubleValue),m=Dt(c.doubleValue);return h===m?Fh(h)===Fh(m):isNaN(h)&&isNaN(m)}return!1}(r,e);case 9:return Yo(r.arrayValue.values||[],e.arrayValue.values||[],Yr);case 10:case 11:return function(o,c){const h=o.mapValue.fields||{},m=c.mapValue.fields||{};if(G0(h)!==G0(m))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(m[p]===void 0||!Yr(h[p],m[p])))return!1;return!0}(r,e);default:return Ae(52216,{left:r})}}function Mc(r,e){return(r.values||[]).find(n=>Yr(n,e))!==void 0}function Xo(r,e){if(r===e)return 0;const n=Ms(r),s=Ms(e);if(n!==s)return Le(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(r.booleanValue,e.booleanValue);case 2:return function(c,h){const m=Dt(c.integerValue||c.doubleValue),p=Dt(h.integerValue||h.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(r,e);case 3:return K0(r.timestampValue,e.timestampValue);case 4:return K0(Oc(r),Oc(e));case 5:return mp(r.stringValue,e.stringValue);case 6:return function(c,h){const m=ks(c),p=ks(h);return m.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(c,h){const m=c.split("/"),p=h.split("/");for(let y=0;y<m.length&&y<p.length;y++){const b=Le(m[y],p[y]);if(b!==0)return b}return Le(m.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(c,h){const m=Le(Dt(c.latitude),Dt(h.latitude));return m!==0?m:Le(Dt(c.longitude),Dt(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return Q0(r.arrayValue,e.arrayValue);case 10:return function(c,h){const m=c.fields||{},p=h.fields||{},y=m[Gh]?.arrayValue,b=p[Gh]?.arrayValue,T=Le(y?.values?.length||0,b?.values?.length||0);return T!==0?T:Q0(y,b)}(r.mapValue,e.mapValue);case 11:return function(c,h){if(c===vh.mapValue&&h===vh.mapValue)return 0;if(c===vh.mapValue)return 1;if(h===vh.mapValue)return-1;const m=c.fields||{},p=Object.keys(m),y=h.fields||{},b=Object.keys(y);p.sort(),b.sort();for(let T=0;T<p.length&&T<b.length;++T){const A=mp(p[T],b[T]);if(A!==0)return A;const P=Xo(m[p[T]],y[b[T]]);if(P!==0)return P}return Le(p.length,b.length)}(r.mapValue,e.mapValue);default:throw Ae(23264,{he:n})}}function K0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Le(r,e);const n=Os(r),s=Os(e),o=Le(n.seconds,s.seconds);return o!==0?o:Le(n.nanos,s.nanos)}function Q0(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const c=Xo(n[o],s[o]);if(c)return c}return Le(n.length,s.length)}function $o(r){return pp(r)}function pp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=Os(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return ks(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return Ee.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",o=!0;for(const c of n.values||[])o?o=!1:s+=",",s+=pp(c);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const h of s)c?c=!1:o+=",",o+=`${h}:${pp(n.fields[h])}`;return o+"}"}(r.mapValue):Ae(61005,{value:r})}function Dh(r){switch(Ms(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pd(r);return e?16+Dh(e):16;case 5:return 2*r.stringValue.length;case 6:return ks(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,c)=>o+Dh(c),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return Bs(s.fields,(c,h)=>{o+=c.length+Dh(h)}),o}(r.mapValue);default:throw Ae(13486,{value:r})}}function Y0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function gp(r){return!!r&&"integerValue"in r}function $p(r){return!!r&&"arrayValue"in r}function X0(r){return!!r&&"nullValue"in r}function $0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Nh(r){return!!r&&"mapValue"in r}function AC(r){return(r?.mapValue?.fields||{})[o1]?.stringValue===l1}function bc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Bs(r.mapValue.fields,(n,s)=>e.mapValue.fields[n]=bc(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=bc(r.arrayValue.values[n]);return e}return{...r}}function RC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===wC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.value=e}static empty(){return new Nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Nh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=bc(n)}setAll(e){let n=sn.emptyPath(),s={},o=[];e.forEach((h,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}h?s[m.lastSegment()]=bc(h):o.push(m.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,s,o)}delete(e){const n=this.field(e.popLast());Nh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Yr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Nh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Bs(n,(o,c)=>e[o]=c);for(const o of s)delete e[o]}clone(){return new Nn(bc(this.value))}}function c1(r){const e=[];return Bs(r.fields,(n,s)=>{const o=new sn([n]);if(Nh(s)){const c=c1(s.mapValue).fields;if(c.length===0)e.push(o);else for(const h of c)e.push(o.child(h))}else e.push(o)}),new Kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n,s,o,c,h,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=c,this.data=h,this.documentState=m}static newInvalidDocument(e){return new pn(e,0,Ce.min(),Ce.min(),Ce.min(),Nn.empty(),0)}static newFoundDocument(e,n,s,o){return new pn(e,1,n,Ce.min(),s,o,0)}static newNoDocument(e,n){return new pn(e,2,n,Ce.min(),Ce.min(),Nn.empty(),0)}static newUnknownDocument(e,n){return new pn(e,3,n,Ce.min(),Ce.min(),Nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,n){this.position=e,this.inclusive=n}}function Z0(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const c=e[o],h=r.position[o];if(c.field.isKeyField()?s=Ee.comparator(Ee.fromName(h.referenceValue),n.key):s=Xo(h,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function J0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Yr(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n="asc"){this.field=e,this.dir=n}}function CC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{}class jt extends u1{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new DC(e,n,s):n==="array-contains"?new kC(e,s):n==="in"?new MC(e,s):n==="not-in"?new PC(e,s):n==="array-contains-any"?new jC(e,s):new jt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new NC(e,s):new OC(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Xo(n,this.value)):n!==null&&Ms(this.value)===Ms(n)&&this.matchesComparison(Xo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Er extends u1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Er(e,n)}matches(e){return h1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function h1(r){return r.op==="and"}function d1(r){return IC(r)&&h1(r)}function IC(r){for(const e of r.filters)if(e instanceof Er)return!1;return!0}function yp(r){if(r instanceof jt)return r.field.canonicalString()+r.op.toString()+$o(r.value);if(d1(r))return r.filters.map(e=>yp(e)).join(",");{const e=r.filters.map(n=>yp(n)).join(",");return`${r.op}(${e})`}}function f1(r,e){return r instanceof jt?function(s,o){return o instanceof jt&&s.op===o.op&&s.field.isEqual(o.field)&&Yr(s.value,o.value)}(r,e):r instanceof Er?function(s,o){return o instanceof Er&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((c,h,m)=>c&&f1(h,o.filters[m]),!0):!1}(r,e):void Ae(19439)}function m1(r){return r instanceof jt?function(n){return`${n.field.canonicalString()} ${n.op} ${$o(n.value)}`}(r):r instanceof Er?function(n){return n.op.toString()+" {"+n.getFilters().map(m1).join(" ,")+"}"}(r):"Filter"}class DC extends jt{constructor(e,n,s){super(e,n,s),this.key=Ee.fromName(s.referenceValue)}matches(e){const n=Ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class NC extends jt{constructor(e,n){super(e,"in",n),this.keys=p1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class OC extends jt{constructor(e,n){super(e,"not-in",n),this.keys=p1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function p1(r,e){return(e.arrayValue?.values||[]).map(n=>Ee.fromName(n.referenceValue))}class kC extends jt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return $p(n)&&Mc(n.arrayValue,this.value)}}class MC extends jt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Mc(this.value.arrayValue,n)}}class PC extends jt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Mc(this.value.arrayValue,n)}}class jC extends jt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!$p(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Mc(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,n=null,s=[],o=[],c=null,h=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=h,this.endAt=m,this.Te=null}}function eb(r,e=null,n=[],s=[],o=null,c=null,h=null){return new VC(r,e,n,s,o,c,h)}function Zp(r){const e=De(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>yp(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),md(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>$o(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>$o(s)).join(",")),e.Te=n}return e.Te}function Jp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!CC(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!f1(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!J0(r.startAt,e.startAt)&&J0(r.endAt,e.endAt)}function vp(r){return Ee.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,n=null,s=[],o=[],c=null,h="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=h,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function UC(r,e,n,s,o,c,h,m){return new sl(r,e,n,s,o,c,h,m)}function gd(r){return new sl(r)}function tb(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function g1(r){return r.collectionGroup!==null}function Ec(r){const e=De(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Ft(sn.comparator);return h.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(m=m.add(y.field))})}),m})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Pc(c,s))}),n.has(sn.keyField().canonicalString())||e.Ie.push(new Pc(sn.keyField(),s))}return e.Ie}function Fr(r){const e=De(r);return e.Ee||(e.Ee=LC(e,Ec(r))),e.Ee}function LC(r,e){if(r.limitType==="F")return eb(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const c=o.dir==="desc"?"asc":"desc";return new Pc(o.field,c)});const n=r.endAt?new Wh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Wh(r.startAt.position,r.startAt.inclusive):null;return eb(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function _p(r,e){const n=r.filters.concat([e]);return new sl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function bp(r,e,n){return new sl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function yd(r,e){return Jp(Fr(r),Fr(e))&&r.limitType===e.limitType}function y1(r){return`${Zp(Fr(r))}|lt:${r.limitType}`}function Lo(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>m1(o)).join(", ")}]`),md(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>$o(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>$o(o)).join(",")),`Target(${s})`}(Fr(r))}; limitType=${r.limitType})`}function vd(r,e){return e.isFoundDocument()&&function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Ee.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(r,e)&&function(s,o){for(const c of Ec(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(h,m,p){const y=Z0(h,m,p);return h.inclusive?y<=0:y<0}(s.startAt,Ec(s),o)||s.endAt&&!function(h,m,p){const y=Z0(h,m,p);return h.inclusive?y>=0:y>0}(s.endAt,Ec(s),o))}(r,e)}function zC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function v1(r){return(e,n)=>{let s=!1;for(const o of Ec(r)){const c=BC(o,e,n);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function BC(r,e,n){const s=r.field.isKeyField()?Ee.comparator(e.key,n.key):function(c,h,m){const p=h.data.field(c),y=m.data.field(c);return p!==null&&y!==null?Xo(p,y):Ae(42886)}(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Bs(this.inner,(n,s)=>{for(const[o,c]of s)e(o,c)})}isEmpty(){return t1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=new yt(Ee.comparator);function Ri(){return qC}const _1=new yt(Ee.comparator);function gc(...r){let e=_1;for(const n of r)e=e.insert(n.key,n);return e}function b1(r){let e=_1;return r.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Na(){return Tc()}function E1(){return Tc()}function Tc(){return new Ha(r=>r.toString(),(r,e)=>r.isEqual(e))}const FC=new yt(Ee.comparator),HC=new Ft(Ee.comparator);function ze(...r){let e=HC;for(const n of r)e=e.add(n);return e}const GC=new Ft(Le);function WC(){return GC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fh(e)?"-0":e}}function T1(r){return{integerValue:""+r}}function KC(r,e){return bC(e)?T1(e):eg(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(){this._=void 0}}function QC(r,e,n){return r instanceof jc?function(o,c){const h={fields:{[i1]:{stringValue:r1},[a1]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Xp(c)&&(c=pd(c)),c&&(h.fields[s1]=c),{mapValue:h}}(n,e):r instanceof Vc?x1(r,e):r instanceof Uc?w1(r,e):function(o,c){const h=S1(o,c),m=nb(h)+nb(o.Ae);return gp(h)&&gp(o.Ae)?T1(m):eg(o.serializer,m)}(r,e)}function YC(r,e,n){return r instanceof Vc?x1(r,e):r instanceof Uc?w1(r,e):n}function S1(r,e){return r instanceof Kh?function(s){return gp(s)||function(c){return!!c&&"doubleValue"in c}(s)}(e)?e:{integerValue:0}:null}class jc extends _d{}class Vc extends _d{constructor(e){super(),this.elements=e}}function x1(r,e){const n=A1(e);for(const s of r.elements)n.some(o=>Yr(o,s))||n.push(s);return{arrayValue:{values:n}}}class Uc extends _d{constructor(e){super(),this.elements=e}}function w1(r,e){let n=A1(e);for(const s of r.elements)n=n.filter(o=>!Yr(o,s));return{arrayValue:{values:n}}}class Kh extends _d{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function nb(r){return Dt(r.integerValue||r.doubleValue)}function A1(r){return $p(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,n){this.field=e,this.transform=n}}function $C(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof Vc&&o instanceof Vc||s instanceof Uc&&o instanceof Uc?Yo(s.elements,o.elements,Yr):s instanceof Kh&&o instanceof Kh?Yr(s.Ae,o.Ae):s instanceof jc&&o instanceof jc}(r.transform,e.transform)}class ZC{constructor(e,n){this.version=e,this.transformResults=n}}class kn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Oh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class bd{}function R1(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new tg(r.key,kn.none()):new Fc(r.key,r.data,kn.none());{const n=r.data,s=Nn.empty();let o=new Ft(sn.comparator);for(let c of e.fields)if(!o.has(c)){let h=n.field(c);h===null&&c.length>1&&(c=c.popLast(),h=n.field(c)),h===null?s.delete(c):s.set(c,h),o=o.add(c)}return new qs(r.key,s,new Kn(o.toArray()),kn.none())}}function JC(r,e,n){r instanceof Fc?function(o,c,h){const m=o.value.clone(),p=ib(o.fieldTransforms,c,h.transformResults);m.setAll(p),c.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(r,e,n):r instanceof qs?function(o,c,h){if(!Oh(o.precondition,c))return void c.convertToUnknownDocument(h.version);const m=ib(o.fieldTransforms,c,h.transformResults),p=c.data;p.setAll(C1(o)),p.setAll(m),c.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(r,e,n):function(o,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,n)}function Sc(r,e,n,s){return r instanceof Fc?function(c,h,m,p){if(!Oh(c.precondition,h))return m;const y=c.value.clone(),b=sb(c.fieldTransforms,p,h);return y.setAll(b),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null}(r,e,n,s):r instanceof qs?function(c,h,m,p){if(!Oh(c.precondition,h))return m;const y=sb(c.fieldTransforms,p,h),b=h.data;return b.setAll(C1(c)),b.setAll(y),h.convertToFoundDocument(h.version,b).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(T=>T.field))}(r,e,n,s):function(c,h,m){return Oh(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m}(r,e,n)}function eI(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),c=S1(s.transform,o||null);c!=null&&(n===null&&(n=Nn.empty()),n.set(s.field,c))}return n||null}function rb(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Yo(s,o,(c,h)=>$C(c,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Fc extends bd{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class qs extends bd{constructor(e,n,s,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function C1(r){const e=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}}),e}function ib(r,e,n){const s=new Map;Qe(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const c=r[o],h=c.transform,m=e.data.field(c.field);s.set(c.field,YC(h,m,n[o]))}return s}function sb(r,e,n){const s=new Map;for(const o of r){const c=o.transform,h=n.data.field(o.field);s.set(o.field,QC(c,h,e))}return s}class tg extends bd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tI extends bd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&JC(c,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Sc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Sc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=E1();return this.mutations.forEach(o=>{const c=e.get(o.key),h=c.overlayedDocument;let m=this.applyToLocalView(h,c.mutatedFields);m=n.has(o.key)?null:m;const p=R1(h,m);p!==null&&s.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(Ce.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ze())}isEqual(e){return this.batchId===e.batchId&&Yo(this.mutations,e.mutations,(n,s)=>rb(n,s))&&Yo(this.baseMutations,e.baseMutations,(n,s)=>rb(n,s))}}class ng{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Qe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=function(){return FC}();const c=e.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,s[h].version);return new ng(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,Fe;function sI(r){switch(r){case J.OK:return Ae(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Ae(15467,{code:r})}}function I1(r){if(r===void 0)return Ai("GRPC error has no .code"),J.UNKNOWN;switch(r){case Pt.OK:return J.OK;case Pt.CANCELLED:return J.CANCELLED;case Pt.UNKNOWN:return J.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return J.INTERNAL;case Pt.UNAVAILABLE:return J.UNAVAILABLE;case Pt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Pt.NOT_FOUND:return J.NOT_FOUND;case Pt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Pt.ABORTED:return J.ABORTED;case Pt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Pt.DATA_LOSS:return J.DATA_LOSS;default:return Ae(39323,{code:r})}}(Fe=Pt||(Pt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=new Cs([4294967295,4294967295],0);function ab(r){const e=aI().encode(r),n=new HE;return n.update(e),new Uint8Array(n.digest())}function ob(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Cs([n,s],0),new Cs([o,c],0)]}class rg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new yc(`Invalid padding: ${n}`);if(s<0)throw new yc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new yc(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new yc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Cs.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(Cs.fromNumber(s)));return o.compare(oI)===1&&(o=new Cs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=ab(e),[s,o]=ob(n);for(let c=0;c<this.hashCount;c++){const h=this.ye(s,o,c);if(!this.we(h))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new rg(c,o,n);return s.forEach(m=>h.insert(m)),h}insert(e){if(this.ge===0)return;const n=ab(e),[s,o]=ob(n);for(let c=0;c<this.hashCount;c++){const h=this.ye(s,o,c);this.Se(h)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class yc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,n,s,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Hc.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Ed(Ce.min(),o,new yt(Le),Ri(),ze())}}class Hc{constructor(e,n,s,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Hc(s,n,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class D1{constructor(e,n){this.targetId=e,this.Ce=n}}class N1{constructor(e,n,s=on.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class lb{constructor(){this.ve=0,this.Fe=cb(),this.Me=on.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),n=ze(),s=ze();return this.Fe.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ae(38017,{changeType:c})}}),new Hc(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=cb()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class lI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ri(),this.Je=_h(),this.He=_h(),this.Ye=new yt(Le)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,o)=>{this.rt(o)&&n(o)})}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(vp(c))if(s===0){const h=new Ee(c.path);this.et(n,h,pn.newNoDocument(h,Ce.min()))}else Qe(s===1,20013,{expectedCount:s});else{const h=this._t(n);if(h!==s){const m=this.ut(e),p=m?this.ct(m,e,h):1;if(p!==0){this.it(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=n;let h,m;try{h=ks(s).toUint8Array()}catch(p){if(p instanceof n1)return Qo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new rg(h,o,c)}catch(p){return Qo(p instanceof yc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach(c=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(n,c,null),o++)}),o}Tt(e){const n=new Map;this.ze.forEach((c,h)=>{const m=this.ot(h);if(m){if(c.current&&vp(m.target)){const p=new Ee(m.target.path);this.It(p).has(h)||this.Et(h,p)||this.et(h,p,pn.newNoDocument(p,e))}c.Be&&(n.set(h,c.ke()),c.qe())}});let s=ze();this.He.forEach((c,h)=>{let m=!0;h.forEachWhile(p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(c))}),this.je.forEach((c,h)=>h.setReadTime(e));const o=new Ed(e,n,this.Ye,this.je,s);return this.je=Ri(),this.Je=_h(),this.He=_h(),this.Ye=new yt(Le),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new lb,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ft(Le),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ft(Le),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new lb),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function _h(){return new yt(Ee.comparator)}function cb(){return new yt(Ee.comparator)}const cI={asc:"ASCENDING",desc:"DESCENDING"},uI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hI={and:"AND",or:"OR"};class dI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ep(r,e){return r.useProto3Json||md(e)?e:{value:e}}function Qh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function O1(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function fI(r,e){return Qh(r,e.toTimestamp())}function Hr(r){return Qe(!!r,49232),Ce.fromTimestamp(function(n){const s=Os(n);return new dt(s.seconds,s.nanos)}(r))}function ig(r,e){return Tp(r,e).canonicalString()}function Tp(r,e){const n=function(o){return new ct(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?n:n.child(e)}function k1(r){const e=ct.fromString(r);return Qe(U1(e),10190,{key:e.toString()}),e}function Sp(r,e){return ig(r.databaseId,e.path)}function Gm(r,e){const n=k1(e);if(n.get(1)!==r.databaseId.projectId)throw new he(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new he(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Ee(P1(n))}function M1(r,e){return ig(r.databaseId,e)}function mI(r){const e=k1(r);return e.length===4?ct.emptyPath():P1(e)}function xp(r){return new ct(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function P1(r){return Qe(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function ub(r,e,n){return{name:Sp(r,e),fields:n.value.mapValue.fields}}function pI(r,e){let n;if("targetChange"in e){e.targetChange;const s=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ae(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=function(y,b){return y.useProto3Json?(Qe(b===void 0||typeof b=="string",58123),on.fromBase64String(b||"")):(Qe(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),on.fromUint8Array(b||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(y){const b=y.code===void 0?J.UNKNOWN:I1(y.code);return new he(b,y.message||"")}(h);n=new N1(s,o,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Gm(r,s.document.name),c=Hr(s.document.updateTime),h=s.document.createTime?Hr(s.document.createTime):Ce.min(),m=new Nn({mapValue:{fields:s.document.fields}}),p=pn.newFoundDocument(o,c,h,m),y=s.targetIds||[],b=s.removedTargetIds||[];n=new kh(y,b,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Gm(r,s.document),c=s.readTime?Hr(s.readTime):Ce.min(),h=pn.newNoDocument(o,c),m=s.removedTargetIds||[];n=new kh([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Gm(r,s.document),c=s.removedTargetIds||[];n=new kh([],c,o,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,h=new iI(o,c),m=s.targetId;n=new D1(m,h)}}return n}function gI(r,e){let n;if(e instanceof Fc)n={update:ub(r,e.key,e.value)};else if(e instanceof tg)n={delete:Sp(r,e.key)};else if(e instanceof qs)n={update:ub(r,e.key,e.data),updateMask:wI(e.fieldMask)};else{if(!(e instanceof tI))return Ae(16599,{Vt:e.type});n={verify:Sp(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(c,h){const m=h.transform;if(m instanceof jc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Vc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Uc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Kh)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw Ae(20930,{transform:h.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,c){return c.updateTime!==void 0?{updateTime:fI(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ae(27497)}(r,e.precondition)),n}function yI(r,e){return r&&r.length>0?(Qe(e!==void 0,14353),r.map(n=>function(o,c){let h=o.updateTime?Hr(o.updateTime):Hr(c);return h.isEqual(Ce.min())&&(h=Hr(c)),new ZC(h,o.transformResults||[])}(n,e))):[]}function vI(r,e){return{documents:[M1(r,e.path)]}}function _I(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=M1(r,o);const c=function(y){if(y.length!==0)return V1(Er.create(y,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const h=function(y){if(y.length!==0)return y.map(b=>function(A){return{field:zo(A.field),direction:TI(A.dir)}}(b))}(e.orderBy);h&&(n.structuredQuery.orderBy=h);const m=Ep(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ft:n,parent:o}}function bI(r){let e=mI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Qe(s===1,65062);const b=n.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let c=[];n.where&&(c=function(T){const A=j1(T);return A instanceof Er&&d1(A)?A.getFilters():[A]}(n.where));let h=[];n.orderBy&&(h=function(T){return T.map(A=>function(F){return new Pc(Bo(F.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(F.direction))}(A))}(n.orderBy));let m=null;n.limit&&(m=function(T){let A;return A=typeof T=="object"?T.value:T,md(A)?null:A}(n.limit));let p=null;n.startAt&&(p=function(T){const A=!!T.before,P=T.values||[];return new Wh(P,A)}(n.startAt));let y=null;return n.endAt&&(y=function(T){const A=!T.before,P=T.values||[];return new Wh(P,A)}(n.endAt)),UC(e,o,h,c,m,"F",p,y)}function EI(r,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function j1(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Bo(n.unaryFilter.field);return jt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Bo(n.unaryFilter.field);return jt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Bo(n.unaryFilter.field);return jt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Bo(n.unaryFilter.field);return jt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}}(r):r.fieldFilter!==void 0?function(n){return jt.create(Bo(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return Er.create(n.compositeFilter.filters.map(s=>j1(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}}(n.compositeFilter.op))}(r):Ae(30097,{filter:r})}function TI(r){return cI[r]}function SI(r){return uI[r]}function xI(r){return hI[r]}function zo(r){return{fieldPath:r.canonicalString()}}function Bo(r){return sn.fromServerFormat(r.fieldPath)}function V1(r){return r instanceof jt?function(n){if(n.op==="=="){if($0(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NAN"}};if(X0(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($0(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NOT_NAN"}};if(X0(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zo(n.field),op:SI(n.op),value:n.value}}}(r):r instanceof Er?function(n){const s=n.getFilters().map(o=>V1(o));return s.length===1?s[0]:{compositeFilter:{op:xI(n.op),filters:s}}}(r):Ae(54877,{filter:r})}function wI(r){const e=[];return r.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function U1(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,n,s,o,c=Ce.min(),h=Ce.min(),m=on.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new xs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e){this.yt=e}}function RI(r){const e=bI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?bp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.Cn=new II}addToCollectionParentIndex(e,n){return this.Cn.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve(Ns.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve(Ns.min())}updateCollectionGroup(e,n,s){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class II{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Ft(ct.comparator),c=!o.has(s);return this.index[n]=o.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ft(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},L1=41943040;class Dn{static withCacheSize(e){return new Dn(e,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(L1,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Zo(0)}static cr(){return new Zo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="LruGarbageCollector",DI=1048576;function fb([r,e],[n,s]){const o=Le(r,n);return o===0?Le(e,s):o}class NI{constructor(e){this.Ir=e,this.buffer=new Ft(fb),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();fb(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class OI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(db,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){il(n)?me(db,"Ignoring IndexedDB error during garbage collection: ",n):await rl(n)}await this.Vr(3e5)})}}class kI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return re.resolve(fd.ce);const s=new NI(n);return this.mr.forEachTarget(e,o=>s.Ar(o.sequenceNumber)).next(()=>this.mr.pr(e,o=>s.Ar(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(hb)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hb):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,c,h,m,p,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o))).next(T=>(s=T,m=Date.now(),this.removeTargets(e,s,n))).next(T=>(c=T,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(T=>(y=Date.now(),Uo()<=Ue.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-b}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${c} targets in `+(p-m)+`ms
	Removed ${T} documents in `+(y-p)+`ms
Total Duration: ${y-b}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:T})))}}function MI(r,e){return new kI(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this.changes=new Ha(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?re.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&Sc(s.mutation,o,Kn.empty(),dt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,ze()).next(()=>s))}getLocalViewOfDocuments(e,n,s=ze()){const o=Na();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(c=>{let h=gc();return c.forEach((m,p)=>{h=h.insert(m,p.overlayedDocument)}),h}))}getOverlayedDocuments(e,n){const s=Na();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,ze()))}populateOverlays(e,n,s){const o=[];return s.forEach(c=>{n.has(c)||o.push(c)}),this.documentOverlayCache.getOverlays(e,o).next(c=>{c.forEach((h,m)=>{n.set(h,m)})})}computeViews(e,n,s,o){let c=Ri();const h=Tc(),m=function(){return Tc()}();return n.forEach((p,y)=>{const b=s.get(y.key);o.has(y.key)&&(b===void 0||b.mutation instanceof qs)?c=c.insert(y.key,y):b!==void 0?(h.set(y.key,b.mutation.getFieldMask()),Sc(b.mutation,y,b.mutation.getFieldMask(),dt.now())):h.set(y.key,Kn.empty())}),this.recalculateAndSaveOverlays(e,c).next(p=>(p.forEach((y,b)=>h.set(y,b)),n.forEach((y,b)=>m.set(y,new jI(b,h.get(y)??null))),m))}recalculateAndSaveOverlays(e,n){const s=Tc();let o=new yt((h,m)=>h-m),c=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(h=>{for(const m of h)m.keys().forEach(p=>{const y=n.get(p);if(y===null)return;let b=s.get(p)||Kn.empty();b=m.applyToLocalView(y,b),s.set(p,b);const T=(o.get(m.batchId)||ze()).add(p);o=o.insert(m.batchId,T)})}).next(()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),y=p.key,b=p.value,T=E1();b.forEach(A=>{if(!c.has(A)){const P=R1(n.get(A),s.get(A));P!==null&&T.set(A,P),c=c.add(A)}}),h.push(this.documentOverlayCache.saveOverlays(e,y,T))}return re.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(h){return Ee.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):g1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(c=>{const h=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-c.size):re.resolve(Na());let m=Nc,p=c;return h.next(y=>re.forEach(y,(b,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),c.get(b)?re.resolve():this.remoteDocumentCache.getEntry(e,b).next(A=>{p=p.insert(b,A)}))).next(()=>this.populateOverlays(e,y,c)).next(()=>this.computeViews(e,p,y,ze())).next(b=>({batchId:m,changes:b1(b)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ee(n)).next(s=>{let o=gc();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const c=n.collectionGroup;let h=gc();return this.indexManager.getCollectionParents(e,c).next(m=>re.forEach(m,p=>{const y=function(T,A){return new sl(A,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(n,p.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next(b=>{b.forEach((T,A)=>{h=h.insert(T,A)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,n,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,o))).next(h=>{c.forEach((p,y)=>{const b=y.getKey();h.get(b)===null&&(h=h.insert(b,pn.newInvalidDocument(b)))});let m=gc();return h.forEach((p,y)=>{const b=c.get(p);b!==void 0&&Sc(b.mutation,y,Kn.empty(),dt.now()),vd(n,y)&&(m=m.insert(p,y))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return re.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Hr(o.createTime)}}(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(o){return{name:o.name,query:RI(o.bundledQuery),readTime:Hr(o.readTime)}}(n)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(){this.overlays=new yt(Ee.comparator),this.qr=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Na();return re.forEach(n,o=>this.getOverlay(e,o).next(c=>{c!==null&&s.set(o,c)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,c)=>{this.St(e,n,c)}),re.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach(c=>this.overlays=this.overlays.remove(c)),this.qr.delete(s)),re.resolve()}getOverlaysForCollection(e,n,s){const o=Na(),c=n.length+1,h=new Ee(n.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const p=m.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&p.largestBatchId>s&&o.set(p.getKey(),p)}return re.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let c=new yt((y,b)=>y-b);const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let b=c.get(y.largestBatchId);b===null&&(b=Na(),c=c.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const m=Na(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,b)=>m.set(y,b)),!(m.size()>=o)););return re.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new rI(n,s));let c=this.qr.get(n);c===void 0&&(c=ze(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(){this.Qr=new Ft(Yt.$r),this.Ur=new Ft(Yt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Yt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new Yt(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new Ee(new ct([])),s=new Yt(n,e),o=new Yt(n,e+1),c=[];return this.Ur.forEachInRange([s,o],h=>{this.Gr(h),c.push(h.key)}),c}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ee(new ct([])),s=new Yt(n,e),o=new Yt(n,e+1);let c=ze();return this.Ur.forEachInRange([s,o],h=>{c=c.add(h.key)}),c}containsKey(e){const n=new Yt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Yt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ee.comparator(e.key,n.key)||Le(e.Yr,n.Yr)}static Kr(e,n){return Le(e.Yr,n.Yr)||Ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ft(Yt.$r)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new nI(c,n,s,o);this.mutationQueue.push(h);for(const m of o)this.Zr=this.Zr.add(new Yt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return re.resolve(h)}lookupMutationBatch(e,n){return re.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),c=o<0?0:o;return re.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Yp:this.tr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Yt(n,0),o=new Yt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,o],h=>{const m=this.Xr(h.Yr);c.push(m)}),re.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ft(Le);return n.forEach(o=>{const c=new Yt(o,0),h=new Yt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,h],m=>{s=s.add(m.Yr)})}),re.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let c=s;Ee.isDocumentKey(c)||(c=c.child(""));const h=new Yt(new Ee(c),0);let m=new Ft(Le);return this.Zr.forEachWhile(p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(m=m.add(p.Yr)),!0)},h),re.resolve(this.ti(m))}ti(e){const n=[];return e.forEach(s=>{const o=this.Xr(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){Qe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return re.forEach(n.mutations,o=>{const c=new Yt(o.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new Yt(n,0),o=this.Zr.firstAfterOrEqual(s);return re.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.ri=e,this.docs=function(){return new yt(Ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),c=o?o.size:0,h=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return re.resolve(s?s.document.mutableCopy():pn.newInvalidDocument(n))}getEntries(e,n){let s=Ri();return n.forEach(o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():pn.newInvalidDocument(o))}),re.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let c=Ri();const h=n.path,m=new Ee(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:y,value:{document:b}}=p.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||gC(pC(b),s)<=0||(o.has(b.key)||vd(n,b))&&(c=c.insert(b.key,b.mutableCopy()))}return re.resolve(c)}getAllFromCollectionGroup(e,n,s,o){Ae(9500)}ii(e,n){return re.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new FI(this)}getSize(e){return re.resolve(this.size)}}class FI extends PI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)}),re.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.persistence=e,this.si=new Ha(n=>Zp(n),Jp),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new sg,this.targetCount=0,this.ai=Zo.ur()}forEachTarget(e,n){return this.si.forEach((s,o)=>n(o)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),re.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Zo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.Pr(n),re.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,s){let o=0;const c=[];return this.si.forEach((h,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(h),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),re.waitFor(c).next(()=>o)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return re.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),re.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach(h=>{c.push(o.markPotentiallyOrphaned(e,h))}),re.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),re.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return re.resolve(s)}containsKey(e,n){return re.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e,n){this.ui={},this.overlays={},this.ci=new fd(0),this.li=!1,this.li=!0,this.hi=new zI,this.referenceDelegate=e(this),this.Pi=new HI(this),this.indexManager=new CI,this.remoteDocumentCache=function(o){return new qI(o)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new AI(n),this.Ii=new UI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new LI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new BI(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){me("MemoryPersistence","Starting transaction:",e);const o=new GI(this.ci.next());return this.referenceDelegate.Ei(),s(o).next(c=>this.referenceDelegate.di(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Ai(e,n){return re.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class GI extends vC{constructor(e){super(),this.currentSequenceNumber=e}}class ag{constructor(e){this.persistence=e,this.Ri=new sg,this.Vi=null}static mi(e){return new ag(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),re.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),re.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(o=>this.fi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(c=>this.fi.add(c.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.fi,s=>{const o=Ee.fromPath(s);return this.gi(e,o).next(c=>{c||n.removeEntry(o,Ce.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return re.or([()=>re.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Yh{constructor(e,n){this.persistence=e,this.pi=new Ha(s=>EC(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=MI(this,n)}static mi(e,n){return new Yh(e,n)}Ei(){}di(e){return re.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return re.forEach(this.pi,(s,o)=>this.br(e,s,o).next(c=>c?re.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,h=>this.br(e,h,n).next(m=>{m||(s++,c.removeEntry(h,Ce.min()))})).next(()=>c.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Dh(e.data.value)),n}br(e,n,s){return re.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return re.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=ze(),o=ze();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new og(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return LA()?8:_C(gn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const c={result:null};return this.ys(e,n).next(h=>{c.result=h}).next(()=>{if(!c.result)return this.ws(e,n,o,s).next(h=>{c.result=h})}).next(()=>{if(c.result)return;const h=new WI;return this.Ss(e,n,h).next(m=>{if(c.result=m,this.Vs)return this.bs(e,n,h,m.size)})}).next(()=>c.result)}bs(e,n,s,o){return s.documentReadCount<this.fs?(Uo()<=Ue.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Lo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),re.resolve()):(Uo()<=Ue.DEBUG&&me("QueryEngine","Query:",Lo(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Uo()<=Ue.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Lo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fr(n))):re.resolve())}ys(e,n){if(tb(n))return re.resolve(null);let s=Fr(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=bp(n,null,"F"),s=Fr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const h=ze(...c);return this.ps.getDocuments(e,h).next(m=>this.indexManager.getMinOffset(e,s).next(p=>{const y=this.Ds(n,m);return this.Cs(n,y,h,p.readTime)?this.ys(e,bp(n,null,"F")):this.vs(e,y,n,p)}))})))}ws(e,n,s,o){return tb(n)||o.isEqual(Ce.min())?re.resolve(null):this.ps.getDocuments(e,s).next(c=>{const h=this.Ds(n,c);return this.Cs(n,h,s,o)?re.resolve(null):(Uo()<=Ue.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Lo(n)),this.vs(e,h,n,mC(o,Nc)).next(m=>m))})}Ds(e,n){let s=new Ft(v1(e));return n.forEach((o,c)=>{vd(e,c)&&(s=s.add(c))}),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,s){return Uo()<=Ue.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Lo(n)),this.ps.getDocumentsMatchingQuery(e,n,Ns.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next(c=>(n.forEach(h=>{c=c.insert(h.key,h)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="LocalStore",QI=3e8;class YI{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new yt(Le),this.xs=new Ha(c=>Zp(c),Jp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function XI(r,e,n,s){return new YI(r,e,n,s)}async function B1(r,e){const n=De(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(c=>{const h=[],m=[];let p=ze();for(const y of o){h.push(y.batchId);for(const b of y.mutations)p=p.add(b.key)}for(const y of c){m.push(y.batchId);for(const b of y.mutations)p=p.add(b.key)}return n.localDocuments.getDocuments(s,p).next(y=>({Ls:y,removedBatchIds:h,addedBatchIds:m}))})})}function $I(r,e){const n=De(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return function(m,p,y,b){const T=y.batch,A=T.keys();let P=re.resolve();return A.forEach(F=>{P=P.next(()=>b.getEntry(p,F)).next(Y=>{const k=y.docVersions.get(F);Qe(k!==null,48541),Y.version.compareTo(k)<0&&(T.applyToRemoteDocument(Y,y),Y.isValidDocument()&&(Y.setReadTime(y.commitVersion),b.addEntry(Y)))})}),P.next(()=>m.mutationQueue.removeMutationBatch(p,T))}(n,s,e,c).next(()=>c.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let p=ze();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(p=p.add(m.batch.mutations[y].key));return p}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function q1(r){const e=De(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function ZI(r,e){const n=De(r),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach((b,T)=>{const A=o.get(T);if(!A)return;m.push(n.Pi.removeMatchingKeys(c,b.removedDocuments,T).next(()=>n.Pi.addMatchingKeys(c,b.addedDocuments,T)));let P=A.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(T)!==null?P=P.withResumeToken(on.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):b.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(b.resumeToken,s)),o=o.insert(T,P),function(Y,k,Z){return Y.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=QI?!0:Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0}(A,P,b)&&m.push(n.Pi.updateTargetData(c,P))});let p=Ri(),y=ze();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,b))}),m.push(JI(c,h,e.documentUpdates).next(b=>{p=b.ks,y=b.qs})),!s.isEqual(Ce.min())){const b=n.Pi.getLastRemoteSnapshotVersion(c).next(T=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s));m.push(b)}return re.waitFor(m).next(()=>h.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,p,y)).next(()=>p)}).then(c=>(n.Ms=o,c))}function JI(r,e,n){let s=ze(),o=ze();return n.forEach(c=>s=s.add(c)),e.getEntries(r,s).next(c=>{let h=Ri();return n.forEach((m,p)=>{const y=c.get(m);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Ce.min())?(e.removeEntry(m,p.readTime),h=h.insert(m,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),h=h.insert(m,p)):me(lg,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",p.version)}),{ks:h,qs:o}})}function e2(r,e){const n=De(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Yp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function t2(r,e){const n=De(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Pi.getTargetData(s,e).next(c=>c?(o=c,re.resolve(o)):n.Pi.allocateTargetId(s).next(h=>(o=new xs(e,h,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function wp(r,e,n){const s=De(r),o=s.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,h=>s.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!il(h))throw h;me(lg,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function mb(r,e,n){const s=De(r);let o=Ce.min(),c=ze();return s.persistence.runTransaction("Execute query","readwrite",h=>function(p,y,b){const T=De(p),A=T.xs.get(b);return A!==void 0?re.resolve(T.Ms.get(A)):T.Pi.getTargetData(y,b)}(s,h,Fr(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,m.targetId).next(p=>{c=p})}).next(()=>s.Fs.getDocumentsMatchingQuery(h,e,n?o:Ce.min(),n?c:ze())).next(m=>(n2(s,zC(e),m),{documents:m,Qs:c})))}function n2(r,e,n){let s=r.Os.get(e)||Ce.min();n.forEach((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),r.Os.set(e,s)}class pb{constructor(){this.activeTargetIds=WC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class r2{constructor(){this.Mo=new pb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new pb,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb="ConnectivityMonitor";class yb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(gb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(gb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bh=null;function Ap(){return bh===null?bh=function(){return 268435456+Math.round(2147483648*Math.random())}():bh++,"0x"+bh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="RestConnection",s2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class a2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Hh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,c){const h=Ap(),m=this.zo(e,n.toUriEncodedString());me(Wm,`Sending RPC '${e}' ${h}:`,m,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,c);const{host:y}=new URL(m),b=zs(y);return this.Jo(e,m,p,s,b).then(T=>(me(Wm,`Received RPC '${e}' ${h}: `,T),T),T=>{throw Qo(Wm,`RPC '${e}' ${h} failed with error: `,T,"url: ",m,"request:",s),T})}Ho(e,n,s,o,c,h){return this.Go(e,n,s,o,c)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,c)=>e[c]=o),s&&s.headers.forEach((o,c)=>e[c]=o)}zo(e,n){const s=s2[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class l2 extends a2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,c){const h=Ap();return new Promise((m,p)=>{const y=new GE;y.setWithCredentials(!0),y.listenOnce(WE.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Ih.NO_ERROR:const T=y.getResponseJson();me(fn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),m(T);break;case Ih.TIMEOUT:me(fn,`RPC '${e}' ${h} timed out`),p(new he(J.DEADLINE_EXCEEDED,"Request time out"));break;case Ih.HTTP_ERROR:const A=y.getStatus();if(me(fn,`RPC '${e}' ${h} failed with status:`,A,"response text:",y.getResponseText()),A>0){let P=y.getResponseJson();Array.isArray(P)&&(P=P[0]);const F=P?.error;if(F&&F.status&&F.message){const Y=function(Z){const te=Z.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(te)>=0?te:J.UNKNOWN}(F.status);p(new he(Y,F.message))}else p(new he(J.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new he(J.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{me(fn,`RPC '${e}' ${h} completed.`)}});const b=JSON.stringify(o);me(fn,`RPC '${e}' ${h} sending request:`,o),y.send(n,"POST",b,s,15)})}T_(e,n,s){const o=Ap(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=YE(),m=QE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const b=c.join("");me(fn,`Creating RPC '${e}' stream ${o}: ${b}`,p);const T=h.createWebChannel(b,p);this.I_(T);let A=!1,P=!1;const F=new o2({Yo:k=>{P?me(fn,`Not sending because RPC '${e}' stream ${o} is closed:`,k):(A||(me(fn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),A=!0),me(fn,`RPC '${e}' stream ${o} sending:`,k),T.send(k))},Zo:()=>T.close()}),Y=(k,Z,te)=>{k.listen(Z,H=>{try{te(H)}catch(se){setTimeout(()=>{throw se},0)}})};return Y(T,pc.EventType.OPEN,()=>{P||(me(fn,`RPC '${e}' stream ${o} transport opened.`),F.o_())}),Y(T,pc.EventType.CLOSE,()=>{P||(P=!0,me(fn,`RPC '${e}' stream ${o} transport closed`),F.a_(),this.E_(T))}),Y(T,pc.EventType.ERROR,k=>{P||(P=!0,Qo(fn,`RPC '${e}' stream ${o} transport errored. Name:`,k.name,"Message:",k.message),F.a_(new he(J.UNAVAILABLE,"The operation could not be completed")))}),Y(T,pc.EventType.MESSAGE,k=>{if(!P){const Z=k.data[0];Qe(!!Z,16349);const te=Z,H=te?.error||te[0]?.error;if(H){me(fn,`RPC '${e}' stream ${o} received error:`,H);const se=H.status;let ae=function(w){const C=Pt[w];if(C!==void 0)return I1(C)}(se),ge=H.message;ae===void 0&&(ae=J.INTERNAL,ge="Unknown error status: "+se+" with message "+H.message),P=!0,F.a_(new he(ae,ge)),T.close()}else me(fn,`RPC '${e}' stream ${o} received:`,Z),F.u_(Z)}}),Y(m,KE.STAT_EVENT,k=>{k.stat===fp.PROXY?me(fn,`RPC '${e}' stream ${o} detected buffering proxy`):k.stat===fp.NOPROXY&&me(fn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{F.__()},0),F}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Km(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(r){return new dI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,n,s=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb="PersistentStream";class H1{constructor(e,n,s,o,c,h,m,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new F1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(Ai(n.toString()),Ai("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.D_===n&&this.G_(s,o)},s=>{e(()=>{const o=new he(J.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(o=>{s(()=>this.z_(o))}),this.stream.onMessage(o=>{s(()=>++this.F_==1?this.J_(o):this.onNext(o))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return me(vb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(me(vb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class c2 extends H1{constructor(e,n,s,o,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,h),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=pI(this.serializer,e),s=function(c){if(!("targetChange"in c))return Ce.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?Ce.min():h.readTime?Hr(h.readTime):Ce.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=xp(this.serializer),n.addTarget=function(c,h){let m;const p=h.target;if(m=vp(p)?{documents:vI(c,p)}:{query:_I(c,p).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=O1(c,h.resumeToken);const y=Ep(c,h.expectedCount);y!==null&&(m.expectedCount=y)}else if(h.snapshotVersion.compareTo(Ce.min())>0){m.readTime=Qh(c,h.snapshotVersion.toTimestamp());const y=Ep(c,h.expectedCount);y!==null&&(m.expectedCount=y)}return m}(this.serializer,e);const s=EI(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=xp(this.serializer),n.removeTarget=e,this.q_(n)}}class u2 extends H1{constructor(e,n,s,o,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,h),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=yI(e.writeResults,e.commitTime),s=Hr(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=xp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>gI(this.serializer,s))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{}class d2 extends h2{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new he(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Go(e,Tp(n,s),o,c,h)).catch(c=>{throw c.name==="FirebaseError"?(c.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(J.UNKNOWN,c.toString())})}Ho(e,n,s,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.connection.Ho(e,Tp(n,s),o,h,m,c)).catch(h=>{throw h.name==="FirebaseError"?(h.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new he(J.UNKNOWN,h.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class f2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ai(n),this.aa=!1):me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua="RemoteStore";class m2{constructor(e,n,s,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo(h=>{s.enqueueAndForget(async()=>{Ga(this)&&(me(Ua,"Restarting streams for network reachability change."),await async function(p){const y=De(p);y.Ea.add(4),await Gc(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Sd(y)}(this))})}),this.Ra=new f2(s,o)}}async function Sd(r){if(Ga(r))for(const e of r.da)await e(!0)}async function Gc(r){for(const e of r.da)await e(!1)}function G1(r,e){const n=De(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),dg(n)?hg(n):al(n).O_()&&ug(n,e))}function cg(r,e){const n=De(r),s=al(n);n.Ia.delete(e),s.O_()&&W1(n,e),n.Ia.size===0&&(s.O_()?s.L_():Ga(n)&&n.Ra.set("Unknown"))}function ug(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}al(r).Y_(e)}function W1(r,e){r.Va.Ue(e),al(r).Z_(e)}function hg(r){r.Va=new lI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),al(r).start(),r.Ra.ua()}function dg(r){return Ga(r)&&!al(r).x_()&&r.Ia.size>0}function Ga(r){return De(r).Ea.size===0}function K1(r){r.Va=void 0}async function p2(r){r.Ra.set("Online")}async function g2(r){r.Ia.forEach((e,n)=>{ug(r,e)})}async function y2(r,e){K1(r),dg(r)?(r.Ra.ha(e),hg(r)):r.Ra.set("Unknown")}async function v2(r,e,n){if(r.Ra.set("Online"),e instanceof N1&&e.state===2&&e.cause)try{await async function(o,c){const h=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.Va.removeTarget(m))}(r,e)}catch(s){me(Ua,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Xh(r,s)}else if(e instanceof kh?r.Va.Ze(e):e instanceof D1?r.Va.st(e):r.Va.tt(e),!n.isEqual(Ce.min()))try{const s=await q1(r.localStore);n.compareTo(s)>=0&&await function(c,h){const m=c.Va.Tt(h);return m.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const b=c.Ia.get(y);b&&c.Ia.set(y,b.withResumeToken(p.resumeToken,h))}}),m.targetMismatches.forEach((p,y)=>{const b=c.Ia.get(p);if(!b)return;c.Ia.set(p,b.withResumeToken(on.EMPTY_BYTE_STRING,b.snapshotVersion)),W1(c,p);const T=new xs(b.target,p,y,b.sequenceNumber);ug(c,T)}),c.remoteSyncer.applyRemoteEvent(m)}(r,n)}catch(s){me(Ua,"Failed to raise snapshot:",s),await Xh(r,s)}}async function Xh(r,e,n){if(!il(e))throw e;r.Ea.add(1),await Gc(r),r.Ra.set("Offline"),n||(n=()=>q1(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{me(Ua,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Sd(r)})}function Q1(r,e){return e().catch(n=>Xh(r,n,e))}async function xd(r){const e=De(r),n=Ps(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Yp;for(;_2(e);)try{const o=await e2(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,b2(e,o)}catch(o){await Xh(e,o)}Y1(e)&&X1(e)}function _2(r){return Ga(r)&&r.Ta.length<10}function b2(r,e){r.Ta.push(e);const n=Ps(r);n.O_()&&n.X_&&n.ea(e.mutations)}function Y1(r){return Ga(r)&&!Ps(r).x_()&&r.Ta.length>0}function X1(r){Ps(r).start()}async function E2(r){Ps(r).ra()}async function T2(r){const e=Ps(r);for(const n of r.Ta)e.ea(n.mutations)}async function S2(r,e,n){const s=r.Ta.shift(),o=ng.from(s,e,n);await Q1(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await xd(r)}async function x2(r,e){e&&Ps(r).X_&&await async function(s,o){if(function(h){return sI(h)&&h!==J.ABORTED}(o.code)){const c=s.Ta.shift();Ps(s).B_(),await Q1(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o)),await xd(s)}}(r,e),Y1(r)&&X1(r)}async function _b(r,e){const n=De(r);n.asyncQueue.verifyOperationInProgress(),me(Ua,"RemoteStore received new credentials");const s=Ga(n);n.Ea.add(3),await Gc(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Sd(n)}async function w2(r,e){const n=De(r);e?(n.Ea.delete(2),await Sd(n)):e||(n.Ea.add(2),await Gc(n),n.Ra.set("Unknown"))}function al(r){return r.ma||(r.ma=function(n,s,o){const c=De(n);return c.sa(),new c2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(r.datastore,r.asyncQueue,{Xo:p2.bind(null,r),t_:g2.bind(null,r),r_:y2.bind(null,r),H_:v2.bind(null,r)}),r.da.push(async e=>{e?(r.ma.B_(),dg(r)?hg(r):r.Ra.set("Unknown")):(await r.ma.stop(),K1(r))})),r.ma}function Ps(r){return r.fa||(r.fa=function(n,s,o){const c=De(n);return c.sa(),new u2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:E2.bind(null,r),r_:x2.bind(null,r),ta:T2.bind(null,r),na:S2.bind(null,r)}),r.da.push(async e=>{e?(r.fa.B_(),await xd(r)):(await r.fa.stop(),r.Ta.length>0&&(me(Ua,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))})),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,n,s,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new Ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,c){const h=Date.now()+s,m=new fg(e,n,h,o,c);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mg(r,e){if(Ai("AsyncQueue",`${e}: ${r}`),il(r))return new he(J.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{static emptySet(e){return new Fo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Ee.comparator(n.key,s.key):(n,s)=>Ee.comparator(n.key,s.key),this.keyedMap=gc(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Fo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Fo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(){this.ga=new yt(Ee.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class Jo{constructor(e,n,s,o,c,h,m,p,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,o,c){const h=[];return n.forEach(m=>{h.push({type:0,doc:m})}),new Jo(e,n,Fo.emptySet(n),h,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class R2{constructor(){this.queries=Eb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=De(n),c=o.queries;o.queries=Eb(),c.forEach((h,m)=>{for(const p of m.Sa)p.onError(s)})})(this,new he(J.ABORTED,"Firestore shutting down"))}}function Eb(){return new Ha(r=>y1(r),yd)}async function pg(r,e){const n=De(r);let s=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(s=2):(c=new A2,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const m=mg(h,`Initialization of query '${Lo(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&yg(n)}async function gg(r,e){const n=De(r),s=e.query;let o=3;const c=n.queries.get(s);if(c){const h=c.Sa.indexOf(e);h>=0&&(c.Sa.splice(h,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function C2(r,e){const n=De(r);let s=!1;for(const o of e){const c=o.query,h=n.queries.get(c);if(h){for(const m of h.Sa)m.Fa(o)&&(s=!0);h.wa=o}}s&&yg(n)}function I2(r,e,n){const s=De(r),o=s.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);s.queries.delete(e)}function yg(r){r.Ca.forEach(e=>{e.next()})}var Rp,Tb;(Tb=Rp||(Rp={})).Ma="default",Tb.Cache="cache";class vg{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Jo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Jo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Rp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e){this.key=e}}class Z1{constructor(e){this.key=e}}class D2{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=v1(e),this.tu=new Fo(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new bb,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,h=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((b,T)=>{const A=o.get(b),P=vd(this.query,T)?T:null,F=!!A&&this.mutatedKeys.has(A.key),Y=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let k=!1;A&&P?A.data.isEqual(P.data)?F!==Y&&(s.track({type:3,doc:P}),k=!0):this.su(A,P)||(s.track({type:2,doc:P}),k=!0,(p&&this.eu(P,p)>0||y&&this.eu(P,y)<0)&&(m=!0)):!A&&P?(s.track({type:0,doc:P}),k=!0):A&&!P&&(s.track({type:1,doc:A}),k=!0,(p||y)&&(m=!0)),k&&(P?(h=h.add(P),c=Y?c.add(b):c.delete(b)):(h=h.delete(b),c=c.delete(b)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const b=this.query.limitType==="F"?h.last():h.first();h=h.delete(b.key),c=c.delete(b.key),s.track({type:1,doc:b})}return{tu:h,iu:s,Cs:m,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort((b,T)=>function(P,F){const Y=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:k})}};return Y(P)-Y(F)}(b.type,T.type)||this.eu(b.doc,T.doc)),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,h.length!==0||y?{snapshot:new Jo(this.query,e.tu,c,h,e.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new bb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new Z1(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new $1(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=ze();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Jo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const _g="SyncEngine";class N2{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class O2{constructor(e){this.key=e,this.hu=!1}}class k2{constructor(e,n,s,o,c,h){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Ha(m=>y1(m),yd),this.Iu=new Map,this.Eu=new Set,this.du=new yt(Ee.comparator),this.Au=new Map,this.Ru=new sg,this.Vu={},this.mu=new Map,this.fu=Zo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function M2(r,e,n=!0){const s=iT(r);let o;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await J1(s,e,n,!0),o}async function P2(r,e){const n=iT(r);await J1(n,e,!0,!1)}async function J1(r,e,n,s){const o=await t2(r.localStore,Fr(e)),c=o.targetId,h=r.sharedClientState.addLocalQueryTarget(c,n);let m;return s&&(m=await j2(r,e,c,h==="current",o.resumeToken)),r.isPrimaryClient&&n&&G1(r.remoteStore,o),m}async function j2(r,e,n,s,o){r.pu=(T,A,P)=>async function(Y,k,Z,te){let H=k.view.ru(Z);H.Cs&&(H=await mb(Y.localStore,k.query,!1).then(({documents:R})=>k.view.ru(R,H)));const se=te&&te.targetChanges.get(k.targetId),ae=te&&te.targetMismatches.get(k.targetId)!=null,ge=k.view.applyChanges(H,Y.isPrimaryClient,se,ae);return xb(Y,k.targetId,ge.au),ge.snapshot}(r,T,A,P);const c=await mb(r.localStore,e,!0),h=new D2(e,c.Qs),m=h.ru(c.documents),p=Hc.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),y=h.applyChanges(m,r.isPrimaryClient,p);xb(r,n,y.au);const b=new N2(e,n,h);return r.Tu.set(e,b),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),y.snapshot}async function V2(r,e,n){const s=De(r),o=s.Tu.get(e),c=s.Iu.get(o.targetId);if(c.length>1)return s.Iu.set(o.targetId,c.filter(h=>!yd(h,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await wp(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&cg(s.remoteStore,o.targetId),Cp(s,o.targetId)}).catch(rl)):(Cp(s,o.targetId),await wp(s.localStore,o.targetId,!0))}async function U2(r,e){const n=De(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),cg(n.remoteStore,s.targetId))}async function L2(r,e,n){const s=W2(r);try{const o=await function(h,m){const p=De(h),y=dt.now(),b=m.reduce((P,F)=>P.add(F.key),ze());let T,A;return p.persistence.runTransaction("Locally write mutations","readwrite",P=>{let F=Ri(),Y=ze();return p.Ns.getEntries(P,b).next(k=>{F=k,F.forEach((Z,te)=>{te.isValidDocument()||(Y=Y.add(Z))})}).next(()=>p.localDocuments.getOverlayedDocuments(P,F)).next(k=>{T=k;const Z=[];for(const te of m){const H=eI(te,T.get(te.key).overlayedDocument);H!=null&&Z.push(new qs(te.key,H,c1(H.value.mapValue),kn.exists(!0)))}return p.mutationQueue.addMutationBatch(P,y,Z,m)}).next(k=>{A=k;const Z=k.applyToLocalDocumentSet(T,Y);return p.documentOverlayCache.saveOverlays(P,k.batchId,Z)})}).then(()=>({batchId:A.batchId,changes:b1(T)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(h,m,p){let y=h.Vu[h.currentUser.toKey()];y||(y=new yt(Le)),y=y.insert(m,p),h.Vu[h.currentUser.toKey()]=y}(s,o.batchId,n),await Wc(s,o.changes),await xd(s.remoteStore)}catch(o){const c=mg(o,"Failed to persist write");n.reject(c)}}async function eT(r,e){const n=De(r);try{const s=await ZI(n.localStore,e);e.targetChanges.forEach((o,c)=>{const h=n.Au.get(c);h&&(Qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Qe(h.hu,14607):o.removedDocuments.size>0&&(Qe(h.hu,42227),h.hu=!1))}),await Wc(n,s,e)}catch(s){await rl(s)}}function Sb(r,e,n){const s=De(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach((c,h)=>{const m=h.view.va(e);m.snapshot&&o.push(m.snapshot)}),function(h,m){const p=De(h);p.onlineState=m;let y=!1;p.queries.forEach((b,T)=>{for(const A of T.Sa)A.va(m)&&(y=!0)}),y&&yg(p)}(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function z2(r,e,n){const s=De(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),c=o&&o.key;if(c){let h=new yt(Ee.comparator);h=h.insert(c,pn.newNoDocument(c,Ce.min()));const m=ze().add(c),p=new Ed(Ce.min(),new Map,new yt(Le),h,m);await eT(s,p),s.du=s.du.remove(c),s.Au.delete(e),bg(s)}else await wp(s.localStore,e,!1).then(()=>Cp(s,e,n)).catch(rl)}async function B2(r,e){const n=De(r),s=e.batch.batchId;try{const o=await $I(n.localStore,e);nT(n,s,null),tT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Wc(n,o)}catch(o){await rl(o)}}async function q2(r,e,n){const s=De(r);try{const o=await function(h,m){const p=De(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let b;return p.mutationQueue.lookupMutationBatch(y,m).next(T=>(Qe(T!==null,37113),b=T.keys(),p.mutationQueue.removeMutationBatch(y,T))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,b,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b)).next(()=>p.localDocuments.getDocuments(y,b))})}(s.localStore,e);nT(s,e,n),tT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Wc(s,o)}catch(o){await rl(o)}}function tT(r,e){(r.mu.get(e)||[]).forEach(n=>{n.resolve()}),r.mu.delete(e)}function nT(r,e,n){const s=De(r);let o=s.Vu[s.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Cp(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach(s=>{r.Ru.containsKey(s)||rT(r,s)})}function rT(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(cg(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),bg(r))}function xb(r,e,n){for(const s of n)s instanceof $1?(r.Ru.addReference(s.key,e),F2(r,s)):s instanceof Z1?(me(_g,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||rT(r,s.key)):Ae(19791,{wu:s})}function F2(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(me(_g,"New document in limbo: "+n),r.Eu.add(s),bg(r))}function bg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new Ee(ct.fromString(e)),s=r.fu.next();r.Au.set(s,new O2(n)),r.du=r.du.insert(n,s),G1(r.remoteStore,new xs(Fr(gd(n.path)),s,"TargetPurposeLimboResolution",fd.ce))}}async function Wc(r,e,n){const s=De(r),o=[],c=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach((m,p)=>{h.push(s.pu(p,e,n).then(y=>{if((y||n)&&s.isPrimaryClient){const b=y?!y.fromCache:n?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,b?"current":"not-current")}if(y){o.push(y);const b=og.As(p.targetId,y);c.push(b)}}))}),await Promise.all(h),s.Pu.H_(o),await async function(p,y){const b=De(p);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>re.forEach(y,A=>re.forEach(A.Es,P=>b.persistence.referenceDelegate.addReference(T,A.targetId,P)).next(()=>re.forEach(A.ds,P=>b.persistence.referenceDelegate.removeReference(T,A.targetId,P)))))}catch(T){if(!il(T))throw T;me(lg,"Failed to update sequence numbers: "+T)}for(const T of y){const A=T.targetId;if(!T.fromCache){const P=b.Ms.get(A),F=P.snapshotVersion,Y=P.withLastLimboFreeSnapshotVersion(F);b.Ms=b.Ms.insert(A,Y)}}}(s.localStore,c))}async function H2(r,e){const n=De(r);if(!n.currentUser.isEqual(e)){me(_g,"User change. New user:",e.toKey());const s=await B1(n.localStore,e);n.currentUser=e,function(c,h){c.mu.forEach(m=>{m.forEach(p=>{p.reject(new he(J.CANCELLED,h))})}),c.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Wc(n,s.Ls)}}function G2(r,e){const n=De(r),s=n.Au.get(e);if(s&&s.hu)return ze().add(s.key);{let o=ze();const c=n.Iu.get(e);if(!c)return o;for(const h of c){const m=n.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function iT(r){const e=De(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=eT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=G2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=z2.bind(null,e),e.Pu.H_=C2.bind(null,e.eventManager),e.Pu.yu=I2.bind(null,e.eventManager),e}function W2(r){const e=De(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=B2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=q2.bind(null,e),e}class $h{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Td(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return XI(this.persistence,new KI,e.initialUser,this.serializer)}Cu(e){return new z1(ag.mi,this.serializer)}Du(e){return new r2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$h.provider={build:()=>new $h};class K2 extends $h{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Qe(this.persistence.referenceDelegate instanceof Yh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new OI(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new z1(s=>Yh.mi(s,n),this.serializer)}}class Ip{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Sb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=H2.bind(null,this.syncEngine),await w2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new R2}()}createDatastore(e){const n=Td(e.databaseInfo.databaseId),s=function(c){return new l2(c)}(e.databaseInfo);return function(c,h,m,p){return new d2(c,h,m,p)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,c,h,m){return new m2(s,o,c,h,m)}(this.localStore,this.datastore,e.asyncQueue,n=>Sb(this.syncEngine,n,0),function(){return yb.v()?new yb:new i2}())}createSyncEngine(e,n){return function(o,c,h,m,p,y,b){const T=new k2(o,c,h,m,p,y);return b&&(T.gu=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const s=De(n);me(Ua,"RemoteStore shutting down."),s.Ea.add(5),await Gc(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ip.provider={build:()=>new Ip};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ai("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="FirestoreClient";class Q2{constructor(e,n,s,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=mn.UNAUTHENTICATED,this.clientId=Qp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async h=>{me(js,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(me(js,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=mg(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Qm(r,e){r.asyncQueue.verifyOperationInProgress(),me(js,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await B1(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function wb(r,e){r.asyncQueue.verifyOperationInProgress();const n=await Y2(r);me(js,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener(s=>_b(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>_b(e.remoteStore,o)),r._onlineComponents=e}async function Y2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){me(js,"Using user provided OfflineComponentProvider");try{await Qm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;Qo("Error using user provided cache. Falling back to memory cache: "+n),await Qm(r,new $h)}}else me(js,"Using default OfflineComponentProvider"),await Qm(r,new K2(void 0));return r._offlineComponents}async function sT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(me(js,"Using user provided OnlineComponentProvider"),await wb(r,r._uninitializedComponentsProvider._online)):(me(js,"Using default OnlineComponentProvider"),await wb(r,new Ip))),r._onlineComponents}function X2(r){return sT(r).then(e=>e.syncEngine)}async function Zh(r){const e=await sT(r),n=e.eventManager;return n.onListen=M2.bind(null,e.syncEngine),n.onUnlisten=V2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=P2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=U2.bind(null,e.syncEngine),n}function $2(r,e,n={}){const s=new Ti;return r.asyncQueue.enqueueAndForget(async()=>function(c,h,m,p,y){const b=new Eg({next:A=>{b.Nu(),h.enqueueAndForget(()=>gg(c,T));const P=A.docs.has(m);!P&&A.fromCache?y.reject(new he(J.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&A.fromCache&&p&&p.source==="server"?y.reject(new he(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(A)},error:A=>y.reject(A)}),T=new vg(gd(m.path),b,{includeMetadataChanges:!0,qa:!0});return pg(c,T)}(await Zh(r),r.asyncQueue,e,n,s)),s.promise}function Z2(r,e,n={}){const s=new Ti;return r.asyncQueue.enqueueAndForget(async()=>function(c,h,m,p,y){const b=new Eg({next:A=>{b.Nu(),h.enqueueAndForget(()=>gg(c,T)),A.fromCache&&p.source==="server"?y.reject(new he(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(A)},error:A=>y.reject(A)}),T=new vg(m,b,{includeMetadataChanges:!0,qa:!0});return pg(c,T)}(await Zh(r),r.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="firestore.googleapis.com",Rb=!0;class Cb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oT,this.ssl=Rb}else this.host=e.host,this.ssl=e.ssl??Rb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=L1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<DI)throw new he(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aT(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wd{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new rC;switch(s.type){case"firstParty":return new oC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new he(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Ab.get(n);s&&(me("ComponentProvider","Removing Datastore"),Ab.delete(n),s.terminate())}(this),Promise.resolve()}}function J2(r,e,n,s={}){r=On(r,wd);const o=zs(e),c=r._getSettings(),h={...c,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${n}`;o&&(qp(`https://${m}`),Fp("Firestore",!0)),c.host!==oT&&c.host!==m&&Qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:m,ssl:o,emulatorOptions:s};if(!Pa(p,h)&&(r._setSettings(p),s.mockUserToken)){let y,b;if(typeof s.mockUserToken=="string")y=s.mockUserToken,b=mn.MOCK_USER;else{y=UE(s.mockUserToken,r._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new he(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new mn(T)}r._authCredentials=new iC(new $E(y,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Fs(this.firestore,e,this._query)}}class Et{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Et(this.firestore,e,this._key)}toJSON(){return{type:Et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(qc(n,Et._jsonSchema))return new Et(e,s||null,new Ee(ct.fromString(n.referencePath)))}}Et._jsonSchemaVersion="firestore/documentReference/1.0",Et._jsonSchema={type:Vt("string",Et._jsonSchemaVersion),referencePath:Vt("string")};class Is extends Fs{constructor(e,n,s){super(e,n,gd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new Ee(e))}withConverter(e){return new Is(this.firestore,e,this._path)}}function Mn(r,e,...n){if(r=ut(r),ZE("collection","path",e),r instanceof wd){const s=ct.fromString(e,...n);return B0(s),new Is(r,null,s)}{if(!(r instanceof Et||r instanceof Is))throw new he(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ct.fromString(e,...n));return B0(s),new Is(r.firestore,null,s)}}function yn(r,e,...n){if(r=ut(r),arguments.length===1&&(e=Qp.newId()),ZE("doc","path",e),r instanceof wd){const s=ct.fromString(e,...n);return z0(s),new Et(r,null,new Ee(s))}{if(!(r instanceof Et||r instanceof Is))throw new he(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ct.fromString(e,...n));return z0(s),new Et(r.firestore,r instanceof Is?r.converter:null,new Ee(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="AsyncQueue";class Db{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new F1(this,"async_queue_retry"),this._c=()=>{const s=Km();s&&me(Ib,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Km();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Km();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Ti;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!il(e))throw e;me(Ib,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,Ai("INTERNAL UNHANDLED ERROR: ",Nb(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=fg.createAndSchedule(this,e,n,s,c=>this.hc(c));return this.tc.push(o),o}uc(){this.nc&&Ae(47125,{Pc:Nb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Nb(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(r){return function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const c of s)if(c in o&&typeof o[c]=="function")return!0;return!1}(r,["next","error","complete"])}class Ci extends wd{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new Db,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Db(e),this._firestoreClient=void 0,await e}}}function eD(r,e){const n=typeof r=="object"?r:Wp(),s=typeof r=="string"?r:Hh,o=hd(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=PE("firestore");c&&J2(o,...c)}return o}function Kc(r){if(r._terminated)throw new he(J.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||tD(r),r._firestoreClient}function tD(r){const e=r._freezeSettings(),n=function(o,c,h,m){return new xC(o,c,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,aT(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new Q2(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this._byteString=e}static fromBase64String(e){try{return new or(on.fromBase64String(e))}catch(n){throw new he(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new or(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:or._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(qc(e,or._jsonSchema))return or.fromBase64String(e.bytes)}}or._jsonSchemaVersion="firestore/bytes/1.0",or._jsonSchema={type:Vt("string",or._jsonSchemaVersion),bytes:Vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gr._jsonSchemaVersion}}static fromJSON(e){if(qc(e,Gr._jsonSchema))return new Gr(e.latitude,e.longitude)}}Gr._jsonSchemaVersion="firestore/geoPoint/1.0",Gr._jsonSchema={type:Vt("string",Gr._jsonSchemaVersion),latitude:Vt("number"),longitude:Vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Wr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(qc(e,Wr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Wr(e.vectorValues);throw new he(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Wr._jsonSchemaVersion="firestore/vectorValue/1.0",Wr._jsonSchema={type:Vt("string",Wr._jsonSchemaVersion),vectorValues:Vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=/^__.*__$/;class rD{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new qs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fc(e,this.data,n,this.fieldTransforms)}}class lT{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new qs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function cT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:r})}}class Tg{constructor(e,n,s,o,c,h){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Tg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Jh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(cT(this.Ac)&&nD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class iD{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Td(e)}Cc(e,n,s,o=!1){return new Tg({Ac:e,methodName:n,Dc:s,path:sn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yc(r){const e=r._freezeSettings(),n=Td(r._databaseId);return new iD(r._databaseId,!!e.ignoreUndefinedProperties,n)}function Sg(r,e,n,s,o,c={}){const h=r.Cc(c.merge||c.mergeFields?2:0,e,n,o);wg("Data must be an object, but it was:",h,s);const m=dT(s,h);let p,y;if(c.merge)p=new Kn(h.fieldMask),y=h.fieldTransforms;else if(c.mergeFields){const b=[];for(const T of c.mergeFields){const A=Dp(e,T,n);if(!h.contains(A))throw new he(J.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);mT(b,A)||b.push(A)}p=new Kn(b),y=h.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,y=h.fieldTransforms;return new rD(new Nn(m),p,y)}class Rd extends Ad{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rd}}class xg extends Ad{_toFieldTransform(e){return new XC(e.path,new jc)}isEqual(e){return e instanceof xg}}function uT(r,e,n,s){const o=r.Cc(1,e,n);wg("Data must be an object, but it was:",o,s);const c=[],h=Nn.empty();Bs(s,(p,y)=>{const b=Ag(e,p,n);y=ut(y);const T=o.yc(b);if(y instanceof Rd)c.push(b);else{const A=Xc(y,T);A!=null&&(c.push(b),h.set(b,A))}});const m=new Kn(c);return new lT(h,m,o.fieldTransforms)}function hT(r,e,n,s,o,c){const h=r.Cc(1,e,n),m=[Dp(e,s,n)],p=[o];if(c.length%2!=0)throw new he(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<c.length;A+=2)m.push(Dp(e,c[A])),p.push(c[A+1]);const y=[],b=Nn.empty();for(let A=m.length-1;A>=0;--A)if(!mT(y,m[A])){const P=m[A];let F=p[A];F=ut(F);const Y=h.yc(P);if(F instanceof Rd)y.push(P);else{const k=Xc(F,Y);k!=null&&(y.push(P),b.set(P,k))}}const T=new Kn(y);return new lT(b,T,h.fieldTransforms)}function sD(r,e,n,s=!1){return Xc(n,r.Cc(s?4:3,e))}function Xc(r,e){if(fT(r=ut(r)))return wg("Unsupported field value:",e,r),dT(r,e);if(r instanceof Ad)return function(s,o){if(!cT(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,o){const c=[];let h=0;for(const m of s){let p=Xc(m,o.wc(h));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),h++}return{arrayValue:{values:c}}}(r,e)}return function(s,o){if((s=ut(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return KC(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=dt.fromDate(s);return{timestampValue:Qh(o.serializer,c)}}if(s instanceof dt){const c=new dt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Qh(o.serializer,c)}}if(s instanceof Gr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof or)return{bytesValue:O1(o.serializer,s._byteString)};if(s instanceof Et){const c=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(c))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:ig(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Wr)return function(h,m){return{mapValue:{fields:{[o1]:{stringValue:l1},[Gh]:{arrayValue:{values:h.toArray().map(y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return eg(m.serializer,y)})}}}}}}(s,o);throw o.Sc(`Unsupported field value: ${dd(s)}`)}(r,e)}function dT(r,e){const n={};return t1(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bs(r,(s,o)=>{const c=Xc(o,e.mc(s));c!=null&&(n[s]=c)}),{mapValue:{fields:n}}}function fT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof dt||r instanceof Gr||r instanceof or||r instanceof Et||r instanceof Ad||r instanceof Wr)}function wg(r,e,n){if(!fT(n)||!JE(n)){const s=dd(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function Dp(r,e,n){if((e=ut(e))instanceof Qc)return e._internalPath;if(typeof e=="string")return Ag(r,e);throw Jh("Field path arguments must be of type string or ",r,!1,void 0,n)}const aD=new RegExp("[~\\*/\\[\\]]");function Ag(r,e,n){if(e.search(aD)>=0)throw Jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Qc(...e.split("."))._internalPath}catch{throw Jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Jh(r,e,n,s,o){const c=s&&!s.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(c||h)&&(p+=" (found",c&&(p+=` in field ${s}`),h&&(p+=` in document ${o}`),p+=")"),new he(J.INVALID_ARGUMENT,m+r+p)}function mT(r,e){return r.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,n,s,o,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Cd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class oD extends pT{data(){return super.data()}}function Cd(r,e){return typeof e=="string"?Ag(r,e):e instanceof Qc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new he(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rg{}class yT extends Rg{}function Vs(r,e,...n){let s=[];e instanceof Rg&&s.push(e),s=s.concat(n),function(c){const h=c.filter(p=>p instanceof Cg).length,m=c.filter(p=>p instanceof Id).length;if(h>1||h>0&&m>0)throw new he(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class Id extends yT{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Id(e,n,s)}_apply(e){const n=this._parse(e);return vT(e._query,n),new Fs(e.firestore,e.converter,_p(e._query,n))}_parse(e){const n=Yc(e.firestore);return function(c,h,m,p,y,b,T){let A;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new he(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){Pb(T,b);const F=[];for(const Y of T)F.push(Mb(p,c,Y));A={arrayValue:{values:F}}}else A=Mb(p,c,T)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||Pb(T,b),A=sD(m,h,T,b==="in"||b==="not-in");return jt.create(y,b,A)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Xt(r,e,n){const s=e,o=Cd("where",r);return Id._create(o,s,n)}class Cg extends Rg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Cg(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Er.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,c){let h=o;const m=c.getFlattenedFilters();for(const p of m)vT(h,p),h=_p(h,p)}(e._query,n),new Fs(e.firestore,e.converter,_p(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ig extends yT{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ig(e,n)}_apply(e){const n=function(o,c,h){if(o.startAt!==null)throw new he(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Pc(c,h)}(e._query,this._field,this._direction);return new Fs(e.firestore,e.converter,function(o,c){const h=o.explicitOrderBy.concat([c]);return new sl(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,n))}}function kb(r,e="asc"){const n=e,s=Cd("orderBy",r);return Ig._create(s,n)}function Mb(r,e,n){if(typeof(n=ut(n))=="string"){if(n==="")throw new he(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!g1(e)&&n.indexOf("/")!==-1)throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(ct.fromString(n));if(!Ee.isDocumentKey(s))throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Y0(r,new Ee(s))}if(n instanceof Et)return Y0(r,n._key);throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dd(n)}.`)}function Pb(r,e){if(!Array.isArray(r)||r.length===0)throw new he(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vT(r,e){const n=function(o,c){for(const h of o)for(const m of h.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new he(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class lD{convertValue(e,n="none"){switch(Ms(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Bs(e,(o,c)=>{s[o]=this.convertValue(c,n)}),s}convertVectorValue(e){const n=e.fields?.[Gh].arrayValue?.values?.map(s=>Dt(s.doubleValue));return new Wr(n)}convertGeoPoint(e){return new Gr(Dt(e.latitude),Dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=pd(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Oc(e));default:return null}}convertTimestamp(e){const n=Os(e);return new dt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ct.fromString(e);Qe(U1(s),9688,{name:e});const o=new kc(s.get(1),s.get(3)),c=new Ee(s.popFirst(5));return o.isEqual(n)||Ai(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}class vc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Oa extends pT{constructor(e,n,s,o,c,h){super(e,n,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Mh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Cd("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Oa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Oa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Oa._jsonSchema={type:Vt("string",Oa._jsonSchemaVersion),bundleSource:Vt("string","DocumentSnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class Mh extends Oa{data(e={}){return super.data(e)}}class ka{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new vc(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Mh(this._firestore,this._userDataWriter,s.key,s,new vc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,c){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(m=>{const p=new Mh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new vc(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const p=new Mh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new vc(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,b=-1;return m.type!==0&&(y=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),b=h.indexOf(m.doc.key)),{type:cD(m.type),doc:p,oldIndex:y,newIndex:b}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ka._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Qp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach(c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function cD(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(r){r=On(r,Et);const e=On(r.firestore,Ci);return $2(Kc(e),r._key).then(n=>ET(e,r,n))}ka._jsonSchemaVersion="firestore/querySnapshot/1.0",ka._jsonSchema={type:Vt("string",ka._jsonSchemaVersion),bundleSource:Vt("string","QuerySnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class Ng extends lD{constructor(e){super(),this.firestore=e}convertBytes(e){return new or(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,n)}}function Us(r){r=On(r,Fs);const e=On(r.firestore,Ci),n=Kc(e),s=new Ng(e);return gT(r._query),Z2(n,r._query).then(o=>new ka(e,s,r,o))}function uD(r,e,n){r=On(r,Et);const s=On(r.firestore,Ci),o=Dg(r.converter,e,n);return Dd(s,[Sg(Yc(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,kn.none())])}function Ii(r,e,n,...s){r=On(r,Et);const o=On(r.firestore,Ci),c=Yc(o);let h;return h=typeof(e=ut(e))=="string"||e instanceof Qc?hT(c,"updateDoc",r._key,e,n,s):uT(c,"updateDoc",r._key,e),Dd(o,[h.toMutation(r._key,kn.exists(!0))])}function ed(r,e){const n=On(r.firestore,Ci),s=yn(r),o=Dg(r.converter,e);return Dd(n,[Sg(Yc(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,kn.exists(!1))]).then(()=>s)}function bT(r,...e){r=ut(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Ob(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Ob(e[s])){const p=e[s];e[s]=p.next?.bind(p),e[s+1]=p.error?.bind(p),e[s+2]=p.complete?.bind(p)}let c,h,m;if(r instanceof Et)h=On(r.firestore,Ci),m=gd(r._key.path),c={next:p=>{e[s]&&e[s](ET(h,r,p))},error:e[s+1],complete:e[s+2]};else{const p=On(r,Fs);h=On(p.firestore,Ci),m=p._query;const y=new Ng(h);c={next:b=>{e[s]&&e[s](new ka(h,y,p,b))},error:e[s+1],complete:e[s+2]},gT(r._query)}return function(y,b,T,A){const P=new Eg(A),F=new vg(b,P,T);return y.asyncQueue.enqueueAndForget(async()=>pg(await Zh(y),F)),()=>{P.Nu(),y.asyncQueue.enqueueAndForget(async()=>gg(await Zh(y),F))}}(Kc(h),m,o,c)}function Dd(r,e){return function(s,o){const c=new Ti;return s.asyncQueue.enqueueAndForget(async()=>L2(await X2(s),o,c)),c.promise}(Kc(r),e)}function ET(r,e,n){const s=n.docs.get(e._key),o=new Ng(r);return new Oa(r,o,e._key,s,new vc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Yc(e)}set(e,n,s){this._verifyNotCommitted();const o=Ym(e,this._firestore),c=Dg(o.converter,n,s),h=Sg(this._dataReader,"WriteBatch.set",o._key,c,o.converter!==null,s);return this._mutations.push(h.toMutation(o._key,kn.none())),this}update(e,n,s,...o){this._verifyNotCommitted();const c=Ym(e,this._firestore);let h;return h=typeof(n=ut(n))=="string"||n instanceof Qc?hT(this._dataReader,"WriteBatch.update",c._key,n,s,o):uT(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(h.toMutation(c._key,kn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ym(e,this._firestore);return this._mutations=this._mutations.concat(new tg(n._key,kn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new he(J.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ym(r,e){if((r=ut(r)).firestore!==e)throw new he(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function Si(){return new xg("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(r){return Kc(r=On(r,Ci)),new hD(r,e=>Dd(r,e))}(function(e,n=!0){(function(o){nl=o})(Fa),ja(new Ds("firestore",(s,{instanceIdentifier:o,options:c})=>{const h=s.getProvider("app").getImmediate(),m=new Ci(new sC(s.getProvider("auth-internal")),new lC(h,s.getProvider("app-check-internal")),function(y,b){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new he(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kc(y.options.projectId,b)}(h,o),h);return c={useFetchStreams:n,...c},m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),qr(j0,V0,e),qr(j0,V0,"esm2020")})();var dD="firebase",fD="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qr(dD,fD,"app");function TT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mD=TT,ST=new zc("auth","Firebase",TT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td=new Hp("@firebase/auth");function pD(r,...e){td.logLevel<=Ue.WARN&&td.warn(`Auth (${Fa}): ${r}`,...e)}function Ph(r,...e){td.logLevel<=Ue.ERROR&&td.error(`Auth (${Fa}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(r,...e){throw kg(r,...e)}function Kr(r,...e){return kg(r,...e)}function xT(r,e,n){const s={...mD(),[e]:n};return new zc("auth","Firebase",s).create(e,{appName:r.name})}function xi(r){return xT(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kg(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return ST.create(r,...e)}function we(r,e,...n){if(!r)throw kg(e,...n)}function bi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Ph(e),new Error(e)}function Di(r,e){r||bi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(){return typeof self<"u"&&self.location?.href||""}function gD(){return jb()==="http:"||jb()==="https:"}function jb(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gD()||jA()||"connection"in navigator)?navigator.onLine:!0}function vD(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,n){this.shortDelay=e,this.longDelay=n,Di(n>e,"Short delay should be less than long delay!"),this.isMobile=kA()||VA()}get(){return yD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(r,e){Di(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ED=new $c(3e4,6e4);function Hs(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Mi(r,e,n,s,o={}){return AT(r,o,async()=>{let c={},h={};s&&(e==="GET"?h=s:c={body:JSON.stringify(s)});const m=Bc({key:r.config.apiKey,...h}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:p,...c};return PA()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&zs(r.emulatorConfig.host)&&(y.credentials="include"),wT.fetch()(await RT(r,r.config.apiHost,n,m),y)})}async function AT(r,e,n){r._canInitEmulator=!1;const s={..._D,...e};try{const o=new SD(r),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await c.json();if("needConfirmation"in h)throw Eh(r,"account-exists-with-different-credential",h);if(c.ok&&!("errorMessage"in h))return h;{const m=c.ok?h.errorMessage:h.error.message,[p,y]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eh(r,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw Eh(r,"email-already-in-use",h);if(p==="USER_DISABLED")throw Eh(r,"user-disabled",h);const b=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw xT(r,b,y);Tr(r,b)}}catch(o){if(o instanceof Xr)throw o;Tr(r,"network-request-failed",{message:String(o)})}}async function Zc(r,e,n,s,o={}){const c=await Mi(r,e,n,s,o);return"mfaPendingCredential"in c&&Tr(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function RT(r,e,n,s){const o=`${e}${n}?${s}`,c=r,h=c.config.emulator?Mg(r.config,o):`${r.config.apiScheme}://${o}`;return bD.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(h).toString():h}function TD(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Kr(this.auth,"network-request-failed")),ED.get())})}}function Eh(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Kr(r,e,s);return o.customData._tokenResponse=n,o}function Vb(r){return r!==void 0&&r.enterprise!==void 0}class xD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return TD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function wD(r,e){return Mi(r,"GET","/v2/recaptchaConfig",Hs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AD(r,e){return Mi(r,"POST","/v1/accounts:delete",e)}async function nd(r,e){return Mi(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RD(r,e=!1){const n=ut(r),s=await n.getIdToken(e),o=Pg(s);we(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,h=c?.sign_in_provider;return{claims:o,token:s,authTime:xc(Xm(o.auth_time)),issuedAtTime:xc(Xm(o.iat)),expirationTime:xc(Xm(o.exp)),signInProvider:h||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Xm(r){return Number(r)*1e3}function Pg(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Ph("JWT malformed, contained fewer than 3 sections"),null;try{const o=kE(n);return o?JSON.parse(o):(Ph("Failed to decode base64 JWT payload"),null)}catch(o){return Ph("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Ub(r){const e=Pg(r);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Xr&&CD(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function CD({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xc(this.lastLoginAt),this.creationTime=xc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rd(r){const e=r.auth,n=await r.getIdToken(),s=await el(r,nd(e,{idToken:n}));we(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const c=o.providerUserInfo?.length?CT(o.providerUserInfo):[],h=ND(r.providerData,c),m=r.isAnonymous,p=!(r.email&&o.passwordHash)&&!h?.length,y=m?p:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Op(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,b)}async function DD(r){const e=ut(r);await rd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ND(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function CT(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OD(r,e){const n=await AT(r,{},async()=>{const s=Bc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=r.config,h=await RT(r,o,"/v1/token",`key=${c}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return r.emulatorConfig&&zs(r.emulatorConfig.host)&&(p.credentials="include"),wT.fetch()(h,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function kD(r,e){return Mi(r,"POST","/v2/accounts:revokeToken",Hs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ub(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){we(e.length!==0,"internal-error");const n=Ub(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:c}=await OD(e,n);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:c}=n,h=new Ho;return s&&(we(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(we(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),c&&(we(typeof c=="number","internal-error",{appName:e}),h.expirationTime=c),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ho,this.toJSON())}_performRefresh(){return bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(r,e){we(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class br{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new ID(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Op(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await el(this,this.stsTokenManager.getToken(this.auth,e));return we(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return RD(this,e)}reload(){return DD(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new br({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await rd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wn(this.auth.app))return Promise.reject(xi(this.auth));const e=await this.getIdToken();return await el(this,AD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,h=n.photoURL??void 0,m=n.tenantId??void 0,p=n._redirectEventId??void 0,y=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:T,emailVerified:A,isAnonymous:P,providerData:F,stsTokenManager:Y}=n;we(T&&Y,e,"internal-error");const k=Ho.fromJSON(this.name,Y);we(typeof T=="string",e,"internal-error"),gs(s,e.name),gs(o,e.name),we(typeof A=="boolean",e,"internal-error"),we(typeof P=="boolean",e,"internal-error"),gs(c,e.name),gs(h,e.name),gs(m,e.name),gs(p,e.name),gs(y,e.name),gs(b,e.name);const Z=new br({uid:T,auth:e,email:o,emailVerified:A,displayName:s,isAnonymous:P,photoURL:h,phoneNumber:c,tenantId:m,stsTokenManager:k,createdAt:y,lastLoginAt:b});return F&&Array.isArray(F)&&(Z.providerData=F.map(te=>({...te}))),p&&(Z._redirectEventId=p),Z}static async _fromIdTokenResponse(e,n,s=!1){const o=new Ho;o.updateFromServerResponse(n);const c=new br({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await rd(c),c}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];we(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?CT(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!c?.length,m=new Ho;m.updateFromIdToken(s);const p=new br({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Op(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb=new Map;function Ei(r){Di(r instanceof Function,"Expected a class definition");let e=Lb.get(r);return e?(Di(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Lb.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}IT.type="NONE";const zb=IT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(r,e,n){return`firebase:${r}:${e}:${n}`}class Go{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=jh(this.userKey,o.apiKey,c),this.fullPersistenceKey=jh("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await nd(this.auth,{idToken:e}).catch(()=>{});return n?br._fromGetAccountInfoResponse(this.auth,n,e):null}return br._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Go(Ei(zb),e,s);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||Ei(zb);const h=jh(s,e.config.apiKey,e.name);let m=null;for(const y of n)try{const b=await y._get(h);if(b){let T;if(typeof b=="string"){const A=await nd(e,{idToken:b}).catch(()=>{});if(!A)break;T=await br._fromGetAccountInfoResponse(e,A,b)}else T=br._fromJSON(e,b);y!==c&&(m=T),c=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new Go(c,e,s):(c=p[0],m&&await c._set(h,m.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(h)}catch{}})),new Go(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(PT(e))return"Blackberry";if(jT(e))return"Webos";if(NT(e))return"Safari";if((e.includes("chrome/")||OT(e))&&!e.includes("edge/"))return"Chrome";if(MT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function DT(r=gn()){return/firefox\//i.test(r)}function NT(r=gn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function OT(r=gn()){return/crios\//i.test(r)}function kT(r=gn()){return/iemobile/i.test(r)}function MT(r=gn()){return/android/i.test(r)}function PT(r=gn()){return/blackberry/i.test(r)}function jT(r=gn()){return/webos/i.test(r)}function jg(r=gn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function MD(r=gn()){return jg(r)&&!!window.navigator?.standalone}function PD(){return UA()&&document.documentMode===10}function VT(r=gn()){return jg(r)||MT(r)||jT(r)||PT(r)||/windows phone/i.test(r)||kT(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(r,e=[]){let n;switch(r){case"Browser":n=Bb(gn());break;case"Worker":n=`${Bb(gn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fa}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((h,m)=>{try{const p=e(c);h(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VD(r,e={}){return Mi(r,"GET","/v2/passwordPolicy",Hs(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=6;class LD{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??UD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qb(this),this.idTokenSubscription=new qb(this),this.beforeStateQueue=new jD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ST,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ei(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Go.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await nd(this,{idToken:e}),s=await br._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Wn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,h=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===h)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await rd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wn(this.app))return Promise.reject(xi(this));const n=e?ut(e):null;return n&&we(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wn(this.app)?Promise.reject(xi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wn(this.app)?Promise.reject(xi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ei(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VD(this),n=new LD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zc("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await kD(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ei(e)||this._popupRedirectResolver;we(n,this,"argument-error"),this.redirectPersistenceManager=await Go.create(this,[Ei(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(m,this,"internal-error"),m.then(()=>{h||c(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{h=!0,p()}}else{const p=e.addObserver(n);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=UT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&pD(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Wa(r){return ut(r)}class qb{constructor(e){this.auth=e,this.observer=null,this.addObserver=WA(n=>this.observer=n)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BD(r){Nd=r}function LT(r){return Nd.loadJS(r)}function qD(){return Nd.recaptchaEnterpriseScript}function FD(){return Nd.gapiScript}function HD(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class GD{constructor(){this.enterprise=new WD}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class WD{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const KD="recaptcha-enterprise",zT="NO_RECAPTCHA";class QD{constructor(e){this.type=KD,this.auth=Wa(e)}async verify(e="verify",n=!1){async function s(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(h,m)=>{wD(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new xD(p);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,h(y.siteKey)}}).catch(p=>{m(p)})})}function o(c,h,m){const p=window.grecaptcha;Vb(p)?p.enterprise.ready(()=>{p.enterprise.execute(c,{action:e}).then(y=>{h(y)}).catch(()=>{h(zT)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new GD().execute("siteKey",{action:"verify"}):new Promise((c,h)=>{s(this.auth).then(m=>{if(!n&&Vb(window.grecaptcha))o(m,c,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=qD();p.length!==0&&(p+=m),LT(p).then(()=>{o(m,c,h)}).catch(y=>{h(y)})}}).catch(m=>{h(m)})})}}async function Fb(r,e,n,s=!1,o=!1){const c=new QD(r);let h;if(o)h=zT;else try{h=await c.verify(n)}catch{h=await c.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:h}):Object.assign(m,{captchaResponse:h}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function kp(r,e,n,s,o){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Fb(r,e,n,n==="getOobCode");return s(r,c)}else return s(r,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Fb(r,e,n,n==="getOobCode");return s(r,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(r,e){const n=hd(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(Pa(c,e??{}))return o;Tr(o,"already-initialized")}return n.initialize({options:e})}function XD(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Ei);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function $D(r,e,n){const s=Wa(r);we(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,c=BT(e),{host:h,port:m}=ZD(e),p=m===null?"":`:${m}`,y={url:`${c}//${h}${p}/`},b=Object.freeze({host:h,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){we(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),we(Pa(y,s.config.emulator)&&Pa(b,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=b,s.settings.appVerificationDisabledForTesting=!0,zs(h)?(qp(`${c}//${h}${p}`),Fp("Auth",!0)):JD()}function BT(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function ZD(r){const e=BT(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:Hb(s.substr(c.length+1))}}else{const[c,h]=s.split(":");return{host:c,port:Hb(h)}}}function Hb(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function JD(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return bi("not implemented")}_getIdTokenResponse(e){return bi("not implemented")}_linkToIdToken(e,n){return bi("not implemented")}_getReauthenticationResolver(e){return bi("not implemented")}}async function eN(r,e){return Mi(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(r,e){return Zc(r,"POST","/v1/accounts:signInWithPassword",Hs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nN(r,e){return Zc(r,"POST","/v1/accounts:signInWithEmailLink",Hs(r,e))}async function rN(r,e){return Zc(r,"POST","/v1/accounts:signInWithEmailLink",Hs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc extends Vg{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Lc(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Lc(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kp(e,n,"signInWithPassword",tN);case"emailLink":return nN(e,{email:this._email,oobCode:this._password});default:Tr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kp(e,s,"signUpPassword",eN);case"emailLink":return rN(e,{idToken:n,email:this._email,oobCode:this._password});default:Tr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wo(r,e){return Zc(r,"POST","/v1/accounts:signInWithIdp",Hs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN="http://localhost";class La extends Vg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new La(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Tr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...c}=n;if(!s||!o)return null;const h=new La(s,o);return h.idToken=c.idToken||void 0,h.accessToken=c.accessToken||void 0,h.secret=c.secret,h.nonce=c.nonce,h.pendingToken=c.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return Wo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Wo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Wo(e,n)}buildRequest(){const e={requestUri:iN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Bc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function aN(r){const e=fc(mc(r)).link,n=e?fc(mc(e)).deep_link_id:null,s=fc(mc(r)).deep_link_id;return(s?fc(mc(s)).link:null)||s||n||e||r}class Ug{constructor(e){const n=fc(mc(e)),s=n.apiKey??null,o=n.oobCode??null,c=sN(n.mode??null);we(s&&o&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=aN(e);try{return new Ug(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(){this.providerId=ol.PROVIDER_ID}static credential(e,n){return Lc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Ug.parseLink(n);return we(s,"argument-error"),Lc._fromEmailAndCode(e,s.code,s.tenantId)}}ol.PROVIDER_ID="password";ol.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ol.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc extends qT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends Jc{constructor(){super("facebook.com")}static credential(e){return La._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vs.credential(e.oauthAccessToken)}catch{return null}}}vs.FACEBOOK_SIGN_IN_METHOD="facebook.com";vs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends Jc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return La._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return _s.credential(n,s)}catch{return null}}}_s.GOOGLE_SIGN_IN_METHOD="google.com";_s.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs extends Jc{constructor(){super("github.com")}static credential(e){return La._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bs.credential(e.oauthAccessToken)}catch{return null}}}bs.GITHUB_SIGN_IN_METHOD="github.com";bs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends Jc{constructor(){super("twitter.com")}static credential(e,n){return La._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Es.credential(n,s)}catch{return null}}}Es.TWITTER_SIGN_IN_METHOD="twitter.com";Es.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oN(r,e){return Zc(r,"POST","/v1/accounts:signUp",Hs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const c=await br._fromIdTokenResponse(e,s,o),h=Gb(s);return new za({user:c,providerId:h,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=Gb(s);return new za({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function Gb(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id extends Xr{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,id.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new id(e,n,s,o)}}function FT(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?id._fromErrorAndOperation(r,c,e,s):c})}async function lN(r,e,n=!1){const s=await el(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return za._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cN(r,e,n=!1){const{auth:s}=r;if(Wn(s.app))return Promise.reject(xi(s));const o="reauthenticate";try{const c=await el(r,FT(s,o,e,r),n);we(c.idToken,s,"internal-error");const h=Pg(c.idToken);we(h,s,"internal-error");const{sub:m}=h;return we(r.uid===m,s,"user-mismatch"),za._forOperation(r,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&Tr(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HT(r,e,n=!1){if(Wn(r.app))return Promise.reject(xi(r));const s="signIn",o=await FT(r,s,e),c=await za._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(c.user),c}async function uN(r,e){return HT(Wa(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GT(r){const e=Wa(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function hN(r,e,n){if(Wn(r.app))return Promise.reject(xi(r));const s=Wa(r),h=await kp(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oN).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&GT(r),p}),m=await za._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(m.user),m}function dN(r,e,n){return Wn(r.app)?Promise.reject(xi(r)):uN(ut(r),ol.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&GT(r),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fN(r,e){return Mi(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mN(r,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=ut(r),c={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},h=await el(s,fN(s.auth,c));s.displayName=h.displayName||null,s.photoURL=h.photoUrl||null;const m=s.providerData.find(({providerId:p})=>p==="password");m&&(m.displayName=s.displayName,m.photoURL=s.photoURL),await s._updateTokensIfNecessary(h)}function pN(r,e,n,s){return ut(r).onIdTokenChanged(e,n,s)}function gN(r,e,n){return ut(r).beforeAuthStateChanged(e,n)}function yN(r,e,n,s){return ut(r).onAuthStateChanged(e,n,s)}function Wb(r){return ut(r).signOut()}const sd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(sd,"1"),this.storage.removeItem(sd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=1e3,_N=10;class KT extends WT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,m,p)=>{this.notifyListeners(h,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!n&&this.localCache[s]===h||this.notifyListeners(s,h)},c=this.storage.getItem(s);PD()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,_N):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},vN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}KT.type="LOCAL";const bN=KT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT extends WT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}QT.type="SESSION";const YT=QT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Od(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:c}=n.data,h=this.handlersMap[o];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(h).map(async y=>y(n.origin,c)),p=await EN(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Od.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,h;return new Promise((m,p)=>{const y=Lg("",20);o.port1.start();const b=setTimeout(()=>{p(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(T){const A=T;if(A.data.eventId===y)switch(A.data.status){case"ack":clearTimeout(b),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(A.data.response);break;default:clearTimeout(b),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(){return window}function SN(r){Qr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(){return typeof Qr().WorkerGlobalScope<"u"&&typeof Qr().importScripts=="function"}async function xN(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wN(){return navigator?.serviceWorker?.controller||null}function AN(){return XT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="firebaseLocalStorageDb",RN=1,ad="firebaseLocalStorage",ZT="fbase_key";class eu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function kd(r,e){return r.transaction([ad],e?"readwrite":"readonly").objectStore(ad)}function CN(){const r=indexedDB.deleteDatabase($T);return new eu(r).toPromise()}function Mp(){const r=indexedDB.open($T,RN);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(ad,{keyPath:ZT})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(ad)?e(s):(s.close(),await CN(),e(await Mp()))})})}async function Kb(r,e,n){const s=kd(r,!0).put({[ZT]:e,value:n});return new eu(s).toPromise()}async function IN(r,e){const n=kd(r,!1).get(e),s=await new eu(n).toPromise();return s===void 0?null:s.value}function Qb(r,e){const n=kd(r,!0).delete(e);return new eu(n).toPromise()}const DN=800,NN=3;class JT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>NN)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return XT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Od._getInstance(AN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await xN(),!this.activeServiceWorker)return;this.sender=new TN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||wN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mp();return await Kb(e,sd,"1"),await Qb(e,sd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Kb(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>IN(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Qb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=kd(o,!1).getAll();return new eu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}JT.type="LOCAL";const ON=JT;new $c(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(r,e){return e?Ei(e):(we(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg extends Vg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Wo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Wo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function MN(r){return HT(r.auth,new zg(r),r.bypassAuthState)}function PN(r){const{auth:e,user:n}=r;return we(n,e,"internal-error"),cN(n,new zg(r),r.bypassAuthState)}async function jN(r){const{auth:e,user:n}=r;return we(n,e,"internal-error"),lN(n,new zg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,n,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:c,error:h,type:m}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MN;case"linkViaPopup":case"linkViaRedirect":return jN;case"reauthViaPopup":case"reauthViaRedirect":return PN;default:Tr(this.auth,"internal-error")}}resolve(e){Di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=new $c(2e3,1e4);class qo extends eS{constructor(e,n,s,o,c){super(e,n,o,c),this.provider=s,this.authWindow=null,this.pollId=null,qo.currentPopupAction&&qo.currentPopupAction.cancel(),qo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){Di(this.filter.length===1,"Popup operations only handle one event");const e=Lg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Kr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Kr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,VN.get())};e()}}qo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN="pendingRedirect",Vh=new Map;class LN extends eS{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Vh.get(this.auth._key());if(!e){try{const s=await zN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Vh.set(this.auth._key(),e)}return this.bypassAuthState||Vh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zN(r,e){const n=FN(e),s=qN(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function BN(r,e){Vh.set(r._key(),e)}function qN(r){return Ei(r._redirectPersistence)}function FN(r){return jh(UN,r.config.apiKey,r.name)}async function HN(r,e,n=!1){if(Wn(r.app))return Promise.reject(xi(r));const s=Wa(r),o=kN(s,e),h=await new LN(s,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=10*60*1e3;class WN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!KN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!tS(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Kr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=GN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yb(e))}saveEventToCache(e){this.cachedEventUids.add(Yb(e)),this.lastProcessedEventTime=Date.now()}}function Yb(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function tS({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function KN(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tS(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(r,e={}){return Mi(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XN=/^https?/;async function $N(r){if(r.config.emulator)return;const{authorizedDomains:e}=await QN(r);for(const n of e)try{if(ZN(n))return}catch{}Tr(r,"unauthorized-domain")}function ZN(r){const e=Np(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===s}if(!XN.test(n))return!1;if(YN.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN=new $c(3e4,6e4);function Xb(){const r=Qr().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function e4(r){return new Promise((e,n)=>{function s(){Xb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Xb(),n(Kr(r,"network-request-failed"))},timeout:JN.get()})}if(Qr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Qr().gapi?.load)s();else{const o=HD("iframefcb");return Qr()[o]=()=>{gapi.load?s():n(Kr(r,"network-request-failed"))},LT(`${FD()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw Uh=null,e})}let Uh=null;function t4(r){return Uh=Uh||e4(r),Uh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=new $c(5e3,15e3),r4="__/auth/iframe",i4="emulator/auth/iframe",s4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},a4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function o4(r){const e=r.config;we(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Mg(e,i4):`https://${r.config.authDomain}/${r4}`,s={apiKey:e.apiKey,appName:r.name,v:Fa},o=a4.get(r.config.apiHost);o&&(s.eid=o);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${Bc(s).slice(1)}`}async function l4(r){const e=await t4(r),n=Qr().gapi;return we(n,r,"internal-error"),e.open({where:document.body,url:o4(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:s4,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const h=Kr(r,"network-request-failed"),m=Qr().setTimeout(()=>{c(h)},n4.get());function p(){Qr().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{c(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},u4=500,h4=600,d4="_blank",f4="http://localhost";class $b{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function m4(r,e,n,s=u4,o=h4){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p={...c4,width:s.toString(),height:o.toString(),top:c,left:h},y=gn().toLowerCase();n&&(m=OT(y)?d4:n),DT(y)&&(e=e||f4,p.scrollbars="yes");const b=Object.entries(p).reduce((A,[P,F])=>`${A}${P}=${F},`,"");if(MD(y)&&m!=="_self")return p4(e||"",m),new $b(null);const T=window.open(e||"",m,b);we(T,r,"popup-blocked");try{T.focus()}catch{}return new $b(T)}function p4(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4="__/auth/handler",y4="emulator/auth/handler",v4=encodeURIComponent("fac");async function Zb(r,e,n,s,o,c){we(r.config.authDomain,r,"auth-domain-config-required"),we(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:Fa,eventId:o};if(e instanceof qT){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",GA(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,T]of Object.entries({}))h[b]=T}if(e instanceof Jc){const b=e.getScopes().filter(T=>T!=="");b.length>0&&(h.scopes=b.join(","))}r.tenantId&&(h.tid=r.tenantId);const m=h;for(const b of Object.keys(m))m[b]===void 0&&delete m[b];const p=await r._getAppCheckToken(),y=p?`#${v4}=${encodeURIComponent(p)}`:"";return`${_4(r)}?${Bc(m).slice(1)}${y}`}function _4({config:r}){return r.emulator?Mg(r,y4):`https://${r.authDomain}/${g4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="webStorageSupport";class b4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YT,this._completeRedirectFn=HN,this._overrideRedirectResult=BN}async _openPopup(e,n,s,o){Di(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await Zb(e,n,s,Np(),o);return m4(e,c,Lg())}async _openRedirect(e,n,s,o){await this._originValidation(e);const c=await Zb(e,n,s,Np(),o);return SN(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Di(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await l4(e),s=new WN(e);return n.register("authEvent",o=>(we(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($m,{type:$m},o=>{const c=o?.[0]?.[$m];c!==void 0&&n(!!c),Tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$N(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return VT()||NT()||jg()}}const E4=b4;var Jb="@firebase/auth",eE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function x4(r){ja(new Ds("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=s.options;we(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:h,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:UT(r)},y=new zD(s,o,c,p);return XD(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),ja(new Ds("auth-internal",e=>{const n=Wa(e.getProvider("auth").getImmediate());return(s=>new T4(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qr(Jb,eE,S4(r)),qr(Jb,eE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=5*60,A4=VE("authIdTokenMaxAge")||w4;let tE=null;const R4=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>A4)return;const o=n?.token;tE!==o&&(tE=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function C4(r=Wp()){const e=hd(r,"auth");if(e.isInitialized())return e.getImmediate();const n=YD(r,{popupRedirectResolver:E4,persistence:[ON,bN,YT]}),s=VE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const h=R4(c.toString());gN(n,h,()=>h(n.currentUser)),pN(n,m=>h(m))}}const o=ME("auth");return o&&$D(n,`http://${o}`),n}function I4(){return document.getElementsByTagName("head")?.[0]??document}BD({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const c=Kr("internal-error");c.customData=o,n(c)},s.type="text/javascript",s.charset="UTF-8",I4().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});x4("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="firebasestorage.googleapis.com",rS="storageBucket",D4=2*60*1e3,N4=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St extends Xr{constructor(e,n,s=0){super(Zm(e),`Firebase Storage: ${n} (${Zm(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,St.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Zm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Tt;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Tt||(Tt={}));function Zm(r){return"storage/"+r}function Bg(){const r="An unknown error occurred, please check the error payload for server response.";return new St(Tt.UNKNOWN,r)}function O4(r){return new St(Tt.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function k4(r){return new St(Tt.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function M4(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new St(Tt.UNAUTHENTICATED,r)}function P4(){return new St(Tt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function j4(r){return new St(Tt.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function V4(){return new St(Tt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function U4(){return new St(Tt.CANCELED,"User canceled the upload/download.")}function L4(r){return new St(Tt.INVALID_URL,"Invalid URL '"+r+"'.")}function z4(r){return new St(Tt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function B4(){return new St(Tt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+rS+"' property when initializing the app?")}function q4(){return new St(Tt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function F4(){return new St(Tt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function H4(r){return new St(Tt.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Pp(r){return new St(Tt.INVALID_ARGUMENT,r)}function iS(){return new St(Tt.APP_DELETED,"The Firebase app was deleted.")}function G4(r){return new St(Tt.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wc(r,e){return new St(Tt.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function dc(r){throw new St(Tt.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Qn.makeFromUrl(e,n)}catch{return new Qn(e,"")}if(s.path==="")return s;throw z4(e)}static makeFromUrl(e,n){let s=null;const o="([A-Za-z0-9.\\-_]+)";function c(se){se.path.charAt(se.path.length-1)==="/"&&(se.path_=se.path_.slice(0,-1))}const h="(/(.*))?$",m=new RegExp("^gs://"+o+h,"i"),p={bucket:1,path:3};function y(se){se.path_=decodeURIComponent(se.path)}const b="v[A-Za-z0-9_]+",T=n.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",P=new RegExp(`^https?://${T}/${b}/b/${o}/o${A}`,"i"),F={bucket:1,path:3},Y=n===nS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",Z=new RegExp(`^https?://${Y}/${o}/${k}`,"i"),H=[{regex:m,indices:p,postModify:c},{regex:P,indices:F,postModify:y},{regex:Z,indices:{bucket:1,path:2},postModify:y}];for(let se=0;se<H.length;se++){const ae=H[se],ge=ae.regex.exec(e);if(ge){const R=ge[ae.indices.bucket];let w=ge[ae.indices.path];w||(w=""),s=new Qn(R,w),ae.postModify(s);break}}if(s==null)throw L4(e);return s}}class W4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K4(r,e,n){let s=1,o=null,c=null,h=!1,m=0;function p(){return m===2}let y=!1;function b(...k){y||(y=!0,e.apply(null,k))}function T(k){o=setTimeout(()=>{o=null,r(P,p())},k)}function A(){c&&clearTimeout(c)}function P(k,...Z){if(y){A();return}if(k){A(),b.call(null,k,...Z);return}if(p()||h){A(),b.call(null,k,...Z);return}s<64&&(s*=2);let H;m===1?(m=2,H=0):H=(s+Math.random())*1e3,T(H)}let F=!1;function Y(k){F||(F=!0,A(),!y&&(o!==null?(k||(m=2),clearTimeout(o),T(0)):k||(m=1)))}return T(0),c=setTimeout(()=>{h=!0,Y(!0)},n),Y}function Q4(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y4(r){return r!==void 0}function X4(r){return typeof r=="object"&&!Array.isArray(r)}function qg(r){return typeof r=="string"||r instanceof String}function nE(r){return Fg()&&r instanceof Blob}function Fg(){return typeof Blob<"u"}function rE(r,e,n,s){if(s<e)throw Pp(`Invalid value for '${r}'. Expected ${e} or greater.`);if(s>n)throw Pp(`Invalid value for '${r}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(r,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${r}`}function sS(r){const e=encodeURIComponent;let n="?";for(const s in r)if(r.hasOwnProperty(s)){const o=e(s)+"="+e(r[s]);n=n+o+"&"}return n=n.slice(0,-1),n}var Ma;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Ma||(Ma={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(r,e){const n=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,c=e.indexOf(r)!==-1;return n||o||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e,n,s,o,c,h,m,p,y,b,T,A=!0,P=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=h,this.callback_=m,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=b,this.connectionFactory_=T,this.retry=A,this.isUsingEmulator=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,Y)=>{this.resolve_=F,this.reject_=Y,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new Th(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const h=m=>{const p=m.loaded,y=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,y)};this.progressCallback_!==null&&c.addUploadProgressListener(h),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(h),this.pendingConnection_=null;const m=c.getErrorCode()===Ma.NO_ERROR,p=c.getStatus();if(!m||$4(p,this.additionalRetryCodes_)&&this.retry){const b=c.getErrorCode()===Ma.ABORT;s(!1,new Th(!1,null,b));return}const y=this.successCodes_.indexOf(p)!==-1;s(!0,new Th(y,c))})},n=(s,o)=>{const c=this.resolve_,h=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(m,m.getResponse());Y4(p)?c(p):c()}catch(p){h(p)}else if(m!==null){const p=Bg();p.serverResponse=m.getErrorText(),this.errorCallback_?h(this.errorCallback_(m,p)):h(p)}else if(o.canceled){const p=this.appDelete_?iS():U4();h(p)}else{const p=V4();h(p)}};this.canceled_?n(!1,new Th(!1,null,!0)):this.backoffId_=K4(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Q4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Th{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function J4(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function eO(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function tO(r,e){e&&(r["X-Firebase-GMPID"]=e)}function nO(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function rO(r,e,n,s,o,c,h=!0,m=!1){const p=sS(r.urlParams),y=r.url+p,b=Object.assign({},r.headers);return tO(b,e),J4(b,n),eO(b,c),nO(b,s),new Z4(y,r.method,b,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,h,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function sO(...r){const e=iO();if(e!==void 0){const n=new e;for(let s=0;s<r.length;s++)n.append(r[s]);return n.getBlob()}else{if(Fg())return new Blob(r);throw new St(Tt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function aO(r,e,n){return r.webkitSlice?r.webkitSlice(e,n):r.mozSlice?r.mozSlice(e,n):r.slice?r.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(r){if(typeof atob>"u")throw H4("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Jm{constructor(e,n){this.data=e,this.contentType=n||null}}function lO(r,e){switch(r){case Br.RAW:return new Jm(aS(e));case Br.BASE64:case Br.BASE64URL:return new Jm(oS(r,e));case Br.DATA_URL:return new Jm(uO(e),hO(e))}throw Bg()}function aS(r){const e=[];for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<r.length-1&&(r.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const c=s,h=r.charCodeAt(++n);s=65536|(c&1023)<<10|h&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function cO(r){let e;try{e=decodeURIComponent(r)}catch{throw wc(Br.DATA_URL,"Malformed data URL.")}return aS(e)}function oS(r,e){switch(r){case Br.BASE64:{const o=e.indexOf("-")!==-1,c=e.indexOf("_")!==-1;if(o||c)throw wc(r,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Br.BASE64URL:{const o=e.indexOf("+")!==-1,c=e.indexOf("/")!==-1;if(o||c)throw wc(r,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=oO(e)}catch(o){throw o.message.includes("polyfill")?o:wc(r,"Invalid character found")}const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}class lS{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw wc(Br.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=dO(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function uO(r){const e=new lS(r);return e.base64?oS(Br.BASE64,e.rest):cO(e.rest)}function hO(r){return new lS(r).contentType}function dO(r,e){return r.length>=e.length?r.substring(r.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n){let s=0,o="";nE(e)?(this.data_=e,s=e.size,o=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,n){if(nE(this.data_)){const s=this.data_,o=aO(s,e,n);return o===null?null:new Ts(o)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new Ts(s,!0)}}static getBlob(...e){if(Fg()){const n=e.map(s=>s instanceof Ts?s.data_:s);return new Ts(sO.apply(null,n))}else{const n=e.map(h=>qg(h)?lO(Br.RAW,h).data:h.data_);let s=0;n.forEach(h=>{s+=h.byteLength});const o=new Uint8Array(s);let c=0;return n.forEach(h=>{for(let m=0;m<h.length;m++)o[c++]=h[m]}),new Ts(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(r){let e;try{e=JSON.parse(r)}catch{return null}return X4(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fO(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function mO(r,e){const n=e.split("/").filter(s=>s.length>0).join("/");return r.length===0?n:r+"/"+n}function uS(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(r,e){return e}class Sn{constructor(e,n,s,o){this.server=e,this.local=n||e,this.writable=!!s,this.xform=o||pO}}let Sh=null;function gO(r){return!qg(r)||r.length<2?r:uS(r)}function hS(){if(Sh)return Sh;const r=[];r.push(new Sn("bucket")),r.push(new Sn("generation")),r.push(new Sn("metageneration")),r.push(new Sn("name","fullPath",!0));function e(c,h){return gO(h)}const n=new Sn("name");n.xform=e,r.push(n);function s(c,h){return h!==void 0?Number(h):h}const o=new Sn("size");return o.xform=s,r.push(o),r.push(new Sn("timeCreated")),r.push(new Sn("updated")),r.push(new Sn("md5Hash",null,!0)),r.push(new Sn("cacheControl",null,!0)),r.push(new Sn("contentDisposition",null,!0)),r.push(new Sn("contentEncoding",null,!0)),r.push(new Sn("contentLanguage",null,!0)),r.push(new Sn("contentType",null,!0)),r.push(new Sn("metadata","customMetadata",!0)),Sh=r,Sh}function yO(r,e){function n(){const s=r.bucket,o=r.fullPath,c=new Qn(s,o);return e._makeStorageReference(c)}Object.defineProperty(r,"ref",{get:n})}function vO(r,e,n){const s={};s.type="file";const o=n.length;for(let c=0;c<o;c++){const h=n[c];s[h.local]=h.xform(s,e[h.server])}return yO(s,r),s}function dS(r,e,n){const s=cS(e);return s===null?null:vO(r,s,n)}function _O(r,e,n,s){const o=cS(e);if(o===null||!qg(o.downloadTokens))return null;const c=o.downloadTokens;if(c.length===0)return null;const h=encodeURIComponent;return c.split(",").map(y=>{const b=r.bucket,T=r.fullPath,A="/b/"+h(b)+"/o/"+h(T),P=Hg(A,n,s),F=sS({alt:"media",token:y});return P+F})[0]}function bO(r,e){const n={},s=e.length;for(let o=0;o<s;o++){const c=e[o];c.writable&&(n[c.server]=r[c.local])}return JSON.stringify(n)}class fS{constructor(e,n,s,o){this.url=e,this.method=n,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(r){if(!r)throw Bg()}function EO(r,e){function n(s,o){const c=dS(r,o,e);return mS(c!==null),c}return n}function TO(r,e){function n(s,o){const c=dS(r,o,e);return mS(c!==null),_O(c,o,r.host,r._protocol)}return n}function pS(r){function e(n,s){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=P4():o=M4():n.getStatus()===402?o=k4(r.bucket):n.getStatus()===403?o=j4(r.path):o=s,o.status=n.getStatus(),o.serverResponse=s.serverResponse,o}return e}function SO(r){const e=pS(r);function n(s,o){let c=e(s,o);return s.getStatus()===404&&(c=O4(r.path)),c.serverResponse=o.serverResponse,c}return n}function xO(r,e,n){const s=e.fullServerUrl(),o=Hg(s,r.host,r._protocol),c="GET",h=r.maxOperationRetryTime,m=new fS(o,c,TO(r,n),h);return m.errorHandler=SO(e),m}function wO(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}function AO(r,e,n){const s=Object.assign({},n);return s.fullPath=r.path,s.size=e.size(),s.contentType||(s.contentType=wO(null,e)),s}function RO(r,e,n,s,o){const c=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function m(){let H="";for(let se=0;se<2;se++)H=H+Math.random().toString().slice(2);return H}const p=m();h["Content-Type"]="multipart/related; boundary="+p;const y=AO(e,s,o),b=bO(y,n),T="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+b+`\r
--`+p+`\r
Content-Type: `+y.contentType+`\r
\r
`,A=`\r
--`+p+"--",P=Ts.getBlob(T,s,A);if(P===null)throw q4();const F={name:y.fullPath},Y=Hg(c,r.host,r._protocol),k="POST",Z=r.maxUploadRetryTime,te=new fS(Y,k,EO(r,n),Z);return te.urlParams=F,te.headers=h,te.body=P.uploadData(),te.errorHandler=pS(e),te}class CO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ma.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ma.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ma.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,o,c){if(this.sent_)throw dc("cannot .send() more than once");if(zs(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),c!==void 0)for(const h in c)c.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,c[h].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw dc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw dc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw dc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw dc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class IO extends CO{initXhr(){this.xhr_.responseType="text"}}function gS(){return new IO}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n){this._service=e,n instanceof Qn?this._location=n:this._location=Qn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ba(e,n)}get root(){const e=new Qn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return uS(this._location.path)}get storage(){return this._service}get parent(){const e=fO(this._location.path);if(e===null)return null;const n=new Qn(this._location.bucket,e);return new Ba(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw G4(e)}}function DO(r,e,n){r._throwIfRoot("uploadBytes");const s=RO(r.storage,r._location,hS(),new Ts(e,!0),n);return r.storage.makeRequestWithTokens(s,gS).then(o=>({metadata:o,ref:r}))}function NO(r){r._throwIfRoot("getDownloadURL");const e=xO(r.storage,r._location,hS());return r.storage.makeRequestWithTokens(e,gS).then(n=>{if(n===null)throw F4();return n})}function OO(r,e){const n=mO(r._location.path,e),s=new Qn(r._location.bucket,n);return new Ba(r.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(r){return/^[A-Za-z]+:\/\//.test(r)}function MO(r,e){return new Ba(r,e)}function yS(r,e){if(r instanceof Gg){const n=r;if(n._bucket==null)throw B4();const s=new Ba(n,n._bucket);return e!=null?yS(s,e):s}else return e!==void 0?OO(r,e):r}function PO(r,e){if(e&&kO(e)){if(r instanceof Gg)return MO(r,e);throw Pp("To use ref(service, url), the first argument must be a Storage instance.")}else return yS(r,e)}function iE(r,e){const n=e?.[rS];return n==null?null:Qn.makeFromBucketSpec(n,r)}function jO(r,e,n,s={}){r.host=`${e}:${n}`;const o=zs(e);o&&(qp(`https://${r.host}/b`),Fp("Storage",!0)),r._isUsingEmulator=!0,r._protocol=o?"https":"http";const{mockUserToken:c}=s;c&&(r._overrideAuthToken=typeof c=="string"?c:UE(c,r.app.options.projectId))}class Gg{constructor(e,n,s,o,c,h=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=h,this._bucket=null,this._host=nS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=D4,this._maxUploadRetryTime=N4,this._requests=new Set,o!=null?this._bucket=Qn.makeFromBucketSpec(o,this._host):this._bucket=iE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Qn.makeFromBucketSpec(this._url,e):this._bucket=iE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){rE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){rE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ba(this,e)}_makeRequest(e,n,s,o,c=!0){if(this._deleted)return new W4(iS());{const h=rO(e,this._appId,s,o,n,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,n){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,o).getPromise()}}const sE="@firebase/storage",aE="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="storage";function _S(r,e,n){return r=ut(r),DO(r,e,n)}function bS(r){return r=ut(r),NO(r)}function ES(r,e){return r=ut(r),PO(r,e)}function VO(r=Wp(),e){r=ut(r);const s=hd(r,vS).getImmediate({identifier:e}),o=PE("storage");return o&&UO(s,...o),s}function UO(r,e,n,s={}){jO(r,e,n,s)}function LO(r,{instanceIdentifier:e}){const n=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new Gg(n,s,o,e,Fa)}function zO(){ja(new Ds(vS,LO,"PUBLIC").setMultipleInstances(!0)),qr(sE,aE,""),qr(sE,aE,"esm2020")}zO();const BO={apiKey:"AIzaSyD-7jepN9PAOze4SNQJ4pgYThvfwNylMpE",authDomain:"velas-santamarta.firebaseapp.com",projectId:"velas-santamarta",storageBucket:"velas-santamarta.firebasestorage.app",messagingSenderId:"643690285491",appId:"1:643690285491:web:3bc9600444cf0972ace3c6",measurementId:"G-VW13682S10"},Wg=BE(BO),Ac=C4(Wg),Ge=eD(Wg),TS=VO(Wg);function an(r,...e){const[n,s]=j.useState([]),[o,c]=j.useState(!0);return j.useEffect(()=>{const h=e.length?Vs(Mn(Ge,r),...e):Mn(Ge,r),m=bT(h,p=>{s(p.docs.map(y=>({id:y.id,...y.data()}))),c(!1)});return()=>m()},[r]),{data:n,loading:o}}function SS({count:r,autoIntervalMs:e=3e3,pauseAfterMs:n=5e3}){const[s,o]=j.useState(0),[c,h]=j.useState(!1),m=j.useRef(!1),p=j.useRef(!1),y=j.useRef(null);return j.useEffect(()=>{r>0&&o(T=>Math.min(T,r-1))},[r]),j.useEffect(()=>{if(r<2)return;const T=setInterval(()=>{p.current||m.current||(m.current=!0,h(!0),setTimeout(()=>{o(A=>(A+1)%r),h(!1),m.current=!1},200))},e);return()=>{clearInterval(T),y.current&&clearTimeout(y.current)}},[r,e]),{idx:s,fading:c,goTo:T=>{m.current||(p.current=!0,y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{p.current=!1},n),m.current=!0,h(!0),setTimeout(()=>{o(T),h(!1),m.current=!1},200))}}}const qO=8,FO=3e3,HO=5e3,GO=()=>g.jsxs("div",{className:"hero-carousel-container",style:{minHeight:"380px",padding:"24px"},children:[g.jsx("div",{className:"hero-skeleton-block",style:{height:"210px",borderRadius:"8px",marginBottom:"16px"}}),g.jsx("div",{className:"hero-skeleton-block",style:{height:"14px",width:"64px",borderRadius:"20px",marginBottom:"12px"}}),g.jsx("div",{className:"hero-skeleton-block",style:{height:"18px",width:"72%",borderRadius:"4px",marginBottom:"8px"}}),g.jsx("div",{className:"hero-skeleton-block",style:{height:"16px",width:"38%",borderRadius:"4px"}})]}),WO=()=>g.jsxs("div",{className:"hero-carousel-container",style:{minHeight:"340px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"16px"},children:[g.jsx("span",{style:{fontSize:"5rem",filter:"drop-shadow(0 8px 20px rgba(201,107,43,0.6))"},children:""}),g.jsx("p",{style:{color:"rgba(255,255,255,0.45)",fontSize:"11px",fontWeight:600,letterSpacing:"0.14em",textTransform:"uppercase"},children:"Prximamente nuevos productos"})]}),KO=()=>{const{data:r,loading:e}=an("products",Xt("active","==",!0)),n=j.useMemo(()=>[...r].sort((b,T)=>(T.createdAt?.toMillis?.()??0)-(b.createdAt?.toMillis?.()??0)).slice(0,qO),[r]),s=ki(),{idx:o,fading:c,goTo:h}=SS({count:n.length,autoIntervalMs:FO,pauseAfterMs:HO});if(e)return g.jsx(GO,{});if(n.length===0)return g.jsx(WO,{});const m=n[Math.min(o,n.length-1)],p=m.images?.[0]??m.imageUrl??"",y=n.length;return g.jsxs("div",{className:"hero-carousel-container",children:[g.jsxs("div",{onClick:()=>s(`/producto/${m.id}`),style:{cursor:"pointer",opacity:c?0:1,transition:"opacity 0.2s ease",padding:"20px 20px 12px"},children:[g.jsx("div",{style:{width:"100%",aspectRatio:"4/3",borderRadius:"8px",overflow:"hidden",backgroundColor:"rgba(255,255,255,0.04)",marginBottom:"14px"},children:p?g.jsx("img",{src:p,alt:m.name,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}}):g.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"3.5rem"},children:""})}),g.jsx("span",{style:{backgroundColor:"var(--vsm-brand)",color:"#fff",fontSize:"10px",fontWeight:700,letterSpacing:"0.1em",textTransform:"uppercase",padding:"3px 10px",borderRadius:"20px",display:"inline-block"},children:m.categoryName}),g.jsx("p",{style:{color:"#fff",fontWeight:700,fontSize:"15px",marginTop:"10px",marginBottom:"4px",lineHeight:1.3},children:m.name}),g.jsxs("p",{style:{color:"var(--vsm-brand)",fontWeight:700,fontSize:"16px"},children:["$",m.price.toLocaleString("es-CO")]})]}),y>1&&g.jsxs(g.Fragment,{children:[g.jsx("button",{className:"hero-carousel-arrow hero-carousel-arrow-left",onClick:b=>{b.stopPropagation(),h((o-1+y)%y)},"aria-label":"Producto anterior",children:""}),g.jsx("button",{className:"hero-carousel-arrow hero-carousel-arrow-right",onClick:b=>{b.stopPropagation(),h((o+1)%y)},"aria-label":"Siguiente producto",children:""})]}),y>1&&g.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"6px",padding:"8px 20px 16px"},children:n.map((b,T)=>g.jsx("button",{onClick:A=>{A.stopPropagation(),h(T)},"aria-label":`Producto ${T+1}`,style:{width:"7px",height:"7px",borderRadius:"50%",border:"none",backgroundColor:T===o?"var(--vsm-brand)":"rgba(255,255,255,0.3)",cursor:"pointer",padding:0,transition:"background-color 0.2s ease"}},T))})]})},QO=()=>g.jsx("section",{style:{background:"linear-gradient(135deg, #1A0800 0%, #4A1E05 45%, #8B4513 80%, #C96B2B 100%)",minHeight:"520px",position:"relative"},className:"flex items-center",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-8 w-full grid grid-cols-1 lg:grid-cols-2 gap-12 items-center py-20",children:[g.jsxs("div",{children:[g.jsx("span",{style:{color:"#AEFF00",fontSize:"11px",fontWeight:700,letterSpacing:"0.15em",textTransform:"uppercase"},className:"block mb-5",children:" Ritual de bienestar"}),g.jsxs("h1",{style:{color:"#fff",fontSize:"clamp(2rem, 5vw, 3.5rem)",fontWeight:800,lineHeight:1.1,marginBottom:"1.25rem"},children:["Tu nuevo ritual diario",g.jsx("br",{}),"de bienestar "]}),g.jsx("p",{style:{color:"rgba(255,255,255,0.75)",fontSize:"15px",lineHeight:1.75,marginBottom:"2rem",maxWidth:"440px"},children:"Velas artesanales elaboradas a mano con cera natural en Santa Marta, Colombia. Cada aroma cuenta una historia del Caribe."}),g.jsxs("div",{className:"flex flex-wrap gap-4",children:[g.jsx(Sr,{to:"/catalogo",style:{backgroundColor:"var(--vsm-brand)",color:"#fff",borderRadius:"5px",padding:"12px 28px",fontSize:"13px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.07em",textDecoration:"none"},className:"hover:opacity-90 transition-opacity",children:"Comprar ahora"}),g.jsx("a",{href:"#nosotros",style:{color:"#fff",border:"1px solid rgba(255,255,255,0.5)",borderRadius:"5px",padding:"12px 28px",fontSize:"13px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.07em"},className:"hover:bg-white hover:text-black transition-all",children:"Ver coleccin"})]})]}),g.jsx(KO,{})]})}),YO=({products:r,autoIntervalMs:e=3e3,pauseAfterMs:n=5e3})=>{const s=ki(),o=r.length,{idx:c,fading:h,goTo:m}=SS({count:o,autoIntervalMs:e,pauseAfterMs:n});if(o===0)return g.jsx("div",{style:{aspectRatio:"4/3",backgroundColor:"#FBF6F0",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"3rem"},children:""});const p=r[Math.min(c,o-1)],y=p.images?.[0]??p.imageUrl??"";return g.jsxs("div",{style:{position:"relative",overflow:"hidden",backgroundColor:"#FBF6F0"},children:[g.jsx("div",{onClick:()=>s(`/producto/${p.id}`),style:{aspectRatio:"4/3",cursor:"pointer",opacity:h?0:1,transition:"opacity 0.2s ease"},children:y?g.jsx("img",{src:y,alt:p.name,loading:"lazy",style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}}):g.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"3.5rem"},children:""})}),o>1&&g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:b=>{b.stopPropagation(),m((c-1+o)%o)},"aria-label":"Imagen anterior",style:{position:"absolute",left:"8px",top:"50%",transform:"translateY(-50%)",width:"32px",height:"32px",borderRadius:"50%",border:"none",backgroundColor:"rgba(0,0,0,0.35)",color:"#fff",fontSize:"18px",lineHeight:1,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:""}),g.jsx("button",{onClick:b=>{b.stopPropagation(),m((c+1)%o)},"aria-label":"Siguiente imagen",style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",width:"32px",height:"32px",borderRadius:"50%",border:"none",backgroundColor:"rgba(0,0,0,0.35)",color:"#fff",fontSize:"18px",lineHeight:1,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:""})]}),o>1&&g.jsx("div",{style:{position:"absolute",bottom:"8px",left:0,right:0,display:"flex",justifyContent:"center",gap:"5px"},children:r.map((b,T)=>g.jsx("button",{onClick:A=>{A.stopPropagation(),m(T)},"aria-label":`Imagen ${T+1}`,style:{width:"6px",height:"6px",borderRadius:"50%",border:"none",backgroundColor:T===c?"var(--vsm-brand)":"rgba(0,0,0,0.25)",cursor:"pointer",padding:0,transition:"background-color 0.2s ease"}},T))})]})},XO=()=>g.jsxs("div",{style:{borderRadius:"12px",overflow:"hidden",boxShadow:"0 2px 12px rgba(0,0,0,0.08)",backgroundColor:"var(--vsm-white)",display:"flex",flexDirection:"column"},children:[g.jsx("div",{style:{aspectRatio:"4/3",backgroundColor:"var(--vsm-gray)",animation:"pulse 1.5s ease-in-out infinite"}}),g.jsxs("div",{style:{padding:"1.25rem",display:"flex",flexDirection:"column",gap:"10px"},children:[g.jsx("div",{style:{height:"18px",width:"55%",backgroundColor:"var(--vsm-gray)",borderRadius:"4px",animation:"pulse 1.5s ease-in-out infinite"}}),g.jsx("div",{style:{height:"13px",width:"90%",backgroundColor:"var(--vsm-gray)",borderRadius:"4px",animation:"pulse 1.5s ease-in-out infinite"}}),g.jsx("div",{style:{height:"13px",width:"70%",backgroundColor:"var(--vsm-gray)",borderRadius:"4px",animation:"pulse 1.5s ease-in-out infinite"}})]})]}),$O=({category:r,products:e})=>g.jsxs("div",{style:{borderRadius:"12px",overflow:"hidden",boxShadow:"0 2px 12px rgba(0,0,0,0.08)",backgroundColor:"var(--vsm-white)",display:"flex",flexDirection:"column",height:"100%"},children:[g.jsx(YO,{products:e,autoIntervalMs:5e3}),g.jsxs("div",{style:{padding:"1.25rem",display:"flex",flexDirection:"column",gap:"0.5rem",flex:1},children:[g.jsx("h3",{style:{fontWeight:700,fontSize:"1.05rem",color:"var(--vsm-black)",margin:0},children:r.name}),r.description&&g.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"13px",lineHeight:1.6,margin:0,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:r.description}),g.jsx(Sr,{to:`/catalogo?categoria=${r.id}`,style:{color:"var(--vsm-brand)",fontWeight:700,fontSize:"13px",textDecoration:"none",marginTop:"auto",paddingTop:"0.25rem"},children:"Ver productos "})]})]}),ZO=()=>{const{data:r,loading:e}=an("categories",Xt("active","==",!0)),{data:n,loading:s}=an("products",Xt("active","==",!0)),o=e||s,c=j.useMemo(()=>{const p=new Map;for(const y of n){if(!y.categoryId)continue;const b=p.get(y.categoryId)??[];b.push(y),p.set(y.categoryId,b)}return p},[n]),h=j.useMemo(()=>r.filter(p=>(c.get(p.id)?.length??0)>0),[r,c]),m=h.length>=3?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"grid grid-cols-1 md:grid-cols-2 gap-6";return g.jsx("section",{style:{backgroundColor:"var(--vsm-white)"},className:"py-20 px-8",children:g.jsxs("div",{className:"max-w-7xl mx-auto",children:[g.jsx("h2",{style:{fontWeight:800,fontSize:"1.6rem",color:"var(--vsm-black)",marginBottom:"2rem"},children:"Conoce nuestras Velas y otros productos"}),o?g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((p,y)=>g.jsx(XO,{},y))}):h.length===0?g.jsxs("div",{style:{textAlign:"center",padding:"3rem 0",color:"var(--vsm-gray-mid)"},children:[g.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),g.jsx("p",{style:{fontWeight:600},children:"Prximamente nuevos productos"})]}):g.jsx("div",{className:m,children:h.map(p=>g.jsx($O,{category:p,products:c.get(p.id)??[]},p.id))})]})})},Kg=r=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}).format(r),xS=({product:r})=>{const[e,n]=j.useState(!1),s=r.images?.length?r.images:r.imageUrl?[r.imageUrl]:[],o=s.length>=2;return g.jsxs("div",{style:{backgroundColor:"var(--vsm-white)",borderRadius:"6px",overflow:"hidden",boxShadow:"var(--vsm-shadow)"},children:[g.jsxs("div",{style:{position:"relative",aspectRatio:"1",backgroundColor:"var(--vsm-bg-warm)",overflow:"hidden",cursor:o?"pointer":"default"},onMouseEnter:()=>o&&n(!0),onMouseLeave:()=>n(!1),children:[r.stock===0&&g.jsx("span",{style:{position:"absolute",top:"8px",left:"8px",zIndex:2,backgroundColor:"var(--vsm-error)",color:"#fff",fontSize:"10px",fontWeight:700,padding:"3px 8px",textTransform:"uppercase",letterSpacing:"0.08em",borderRadius:"2px"},children:"Agotado"}),s.length>0?g.jsxs(g.Fragment,{children:[g.jsx("img",{src:s[0],alt:r.name,style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover",opacity:e?0:1,transition:"opacity 0.4s ease"}}),s[1]&&g.jsx("img",{src:s[1],alt:r.name,style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover",opacity:e?1:0,transition:"opacity 0.4s ease"}})]}):g.jsx("div",{className:"w-full h-full flex items-center justify-center text-6xl",children:""})]}),g.jsxs("div",{style:{padding:"1rem"},children:[g.jsx("h3",{style:{fontSize:"13px",fontWeight:600,marginBottom:"4px",color:"var(--vsm-black)"},children:r.name}),g.jsx("p",{style:{fontSize:"10px",color:"var(--vsm-gray-mid)",marginBottom:"8px",lineHeight:1.5,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:r.description}),g.jsx("p",{style:{fontSize:"16px",fontWeight:800,color:"var(--vsm-black)",marginBottom:"12px"},children:Kg(r.price)}),g.jsx(Sr,{to:`/producto/${r.id}`,style:{display:"block",textAlign:"center",backgroundColor:r.stock===0?"var(--vsm-gray-mid)":"var(--vsm-brand)",color:"#fff",fontSize:"11px",fontWeight:700,padding:"10px",textTransform:"uppercase",letterSpacing:"0.07em",borderRadius:"4px",textDecoration:"none",pointerEvents:r.stock===0?"none":"auto"},className:"hover:opacity-90 transition-opacity",children:r.stock===0?"Agotado":"Ver producto"})]})]})},JO=()=>g.jsxs("div",{style:{backgroundColor:"var(--vsm-white)",borderRadius:"6px",overflow:"hidden",boxShadow:"var(--vsm-shadow)"},children:[g.jsx("div",{style:{aspectRatio:"1",backgroundColor:"var(--vsm-gray)",animation:"pulse 1.5s ease-in-out infinite"}}),g.jsxs("div",{style:{padding:"1rem",display:"flex",flexDirection:"column",gap:"8px"},children:[g.jsx("div",{style:{height:"13px",backgroundColor:"var(--vsm-gray)",borderRadius:"3px",width:"70%",animation:"pulse 1.5s ease-in-out infinite"}}),g.jsx("div",{style:{height:"10px",backgroundColor:"var(--vsm-gray)",borderRadius:"3px",width:"90%",animation:"pulse 1.5s ease-in-out infinite"}}),g.jsx("div",{style:{height:"20px",backgroundColor:"var(--vsm-gray)",borderRadius:"3px",width:"45%",animation:"pulse 1.5s ease-in-out infinite"}})]})]}),ek=()=>{const{data:r,loading:e}=an("products"),n=r.filter(s=>s.active!==!1);return g.jsx("section",{style:{backgroundColor:"var(--vsm-bg)"},className:"py-20 px-8",children:g.jsxs("div",{className:"max-w-7xl mx-auto",children:[g.jsx("h2",{style:{fontWeight:800,fontSize:"1.6rem",color:"var(--vsm-black)",marginBottom:"1.75rem"},children:"Nuestros Productos"}),e?g.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-5",children:Array.from({length:6}).map((s,o)=>g.jsx(JO,{},o))}):n.length===0?g.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"14px"},children:"No hay productos disponibles an."}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-5",children:n.map(s=>g.jsx(xS,{product:s},s.id))}),g.jsx("div",{style:{textAlign:"center",marginTop:"2.5rem"},children:g.jsx(Sr,{to:"/catalogo",style:{color:"var(--vsm-brand)",fontWeight:700,fontSize:"13px",textDecoration:"underline",textUnderlineOffset:"4px"},children:"Ver todos los productos "})})]})]})})},tk=()=>g.jsxs("div",{style:{backgroundColor:"var(--vsm-white)",borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 12px rgba(0,0,0,0.08)"},children:[g.jsx("div",{style:{aspectRatio:"1",backgroundColor:"var(--vsm-gray)",animation:"pulse 1.5s ease-in-out infinite"}}),g.jsxs("div",{style:{padding:"0.75rem",display:"flex",flexDirection:"column",gap:"6px",alignItems:"center"},children:[g.jsx("div",{style:{height:"13px",width:"70%",backgroundColor:"var(--vsm-gray)",borderRadius:"3px",animation:"pulse 1.5s ease-in-out infinite"}}),g.jsx("div",{style:{height:"11px",width:"90%",backgroundColor:"var(--vsm-gray)",borderRadius:"3px",animation:"pulse 1.5s ease-in-out infinite"}})]})]}),nk=()=>{const{data:r,loading:e}=an("subcategories",Xt("active","==",!0)),{data:n,loading:s}=an("products",Xt("active","==",!0)),o=e||s,c=j.useMemo(()=>{const h=new Map;for(const m of n){if(!m.subcategoryId||h.has(m.subcategoryId))continue;const p=m.images?.[0]??m.imageUrl??"";p&&h.set(m.subcategoryId,p)}return h},[n]);return!o&&r.length===0?null:g.jsx("section",{style:{backgroundColor:"var(--vsm-bg)"},className:"py-20 px-8",children:g.jsxs("div",{className:"max-w-7xl mx-auto",children:[g.jsx("h2",{style:{fontWeight:800,fontSize:"1.6rem",textAlign:"center",color:"var(--vsm-black)",marginBottom:"1rem"},children:"Explora nuestras colecciones"}),g.jsx("p",{style:{color:"var(--vsm-gray-mid)",textAlign:"center",maxWidth:"650px",margin:"0 auto 2.5rem",lineHeight:1.8,fontSize:"14px"},children:"Encuentra la vela perfecta entre nuestras colecciones artesanales, elaboradas con cera natural e ingredientes seleccionados."}),o?g.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5",children:Array.from({length:4}).map((h,m)=>g.jsx(tk,{},m))}):g.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5",children:r.map(h=>{const m=c.get(h.id)??"";return g.jsxs(Sr,{to:`/catalogo?categoria=${h.categoryId}`,style:{backgroundColor:"var(--vsm-white)",borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 12px rgba(0,0,0,0.08)",textDecoration:"none"},className:"hover:shadow-md transition-shadow",children:[g.jsx("div",{style:{backgroundColor:"#FBF6F0",aspectRatio:"1",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"3rem",overflow:"hidden"},children:m?g.jsx("img",{src:m,alt:h.name,loading:"lazy",style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}}):""}),g.jsxs("div",{style:{padding:"0.75rem"},children:[g.jsx("p",{style:{fontWeight:700,fontSize:"13px",textAlign:"center",color:"var(--vsm-black)",marginBottom:h.description?"4px":0},children:h.name}),h.description&&g.jsx("p",{style:{fontSize:"11px",color:"var(--vsm-gray-mid)",textAlign:"center",lineHeight:1.5,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:h.description})]})]},h.id)})})]})})},rk=[{stars:5,text:'"Las velas ms hermosas que he tenido. El aroma a coco me transporta directamente al Caribe. Las recomiendo 100%!"',author:"Mara Martnez, Bogot"},{stars:5,text:'"Compr el pack de lavanda y sndalo para regalar y quedaron fascinados. La presentacin es preciosa y el aroma dura muchsimo."',author:"Andrs Gmez, Medelln"},{stars:5,text:'"Calidad artesanal increble. Se nota que estn hechas con amor y buenos materiales. Ya ped mi tercer pedido."',author:"Luca Herrera, Cali"}],ik=()=>g.jsx("section",{id:"nosotros",style:{backgroundColor:"var(--vsm-bg)"},className:"py-20 px-8",children:g.jsxs("div",{className:"max-w-7xl mx-auto",children:[g.jsx("h2",{style:{fontWeight:800,fontSize:"1.6rem",textAlign:"center",color:"var(--vsm-black)",marginBottom:"2.5rem"},children:"Lo que dicen nuestros clientes"}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:rk.map((r,e)=>g.jsxs("div",{style:{backgroundColor:"var(--vsm-white)",borderRadius:"var(--vsm-radius)",padding:"1.5rem",boxShadow:"var(--vsm-shadow-sm)"},children:[g.jsx("div",{style:{fontSize:"14px",color:"#F5A623",marginBottom:"0.75rem"},children:"".repeat(r.stars)}),g.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"14px",lineHeight:1.75,marginBottom:"1rem",fontStyle:"italic"},children:r.text}),g.jsxs("p",{style:{fontWeight:700,fontSize:"12px",color:"var(--vsm-black)"},children:[" ",r.author]})]},e))})]})}),sk=()=>g.jsxs("div",{className:"w-full",children:[g.jsx(QO,{}),g.jsx(ZO,{}),g.jsx(ek,{}),g.jsx(nk,{}),g.jsx(ik,{})]}),qt={width:"100%",padding:"10px 14px",border:"1px solid var(--vsm-gray)",borderRadius:"var(--vsm-radius-sm)",fontSize:"13px",fontFamily:"inherit",outline:"none",color:"var(--vsm-black)",backgroundColor:"var(--vsm-white)",transition:"border-color 0.2s"},Nt={fontSize:"13px",fontWeight:700,color:"var(--vsm-black)",display:"block",marginBottom:"6px"},Md={backgroundColor:"var(--vsm-error-bg)",border:"1px solid var(--vsm-error-border)",borderRadius:"var(--vsm-radius-sm)",padding:"10px 14px"},Pd={color:"var(--vsm-error)",fontSize:"13px",fontWeight:600},ak={backgroundColor:"var(--vsm-success-bg)",border:"1px solid var(--vsm-success-border)",borderRadius:"var(--vsm-radius-sm)",padding:"10px 14px"},ok={color:"var(--vsm-success)",fontSize:"13px",fontWeight:600},wS={backgroundColor:"var(--vsm-brand)",color:"#fff",border:"none",borderRadius:"var(--vsm-radius-sm)",padding:"12px",width:"100%",fontSize:"13px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.07em",cursor:"pointer",transition:"opacity 0.2s",fontFamily:"inherit"},st=r=>{r.currentTarget.style.borderColor="var(--vsm-brand)"},at=r=>{r.currentTarget.style.borderColor="var(--vsm-gray)"},lk=()=>{const[r,e]=_r.useState(""),[n,s]=_r.useState(""),[o,c]=_r.useState(null),[h,m]=_r.useState(!1),p=ki(),y=async b=>{b.preventDefault(),m(!0);try{await dN(Ac,r,n),c(null),p("/Admin")}catch{c("Correo o contrasea incorrectos. Por favor verifica tus datos."),s("")}finally{m(!1)}};return g.jsx("div",{style:{minHeight:"calc(100vh - 96px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},className:"w-full",children:g.jsxs("div",{style:{backgroundColor:"var(--vsm-white)",borderRadius:"var(--vsm-radius)",boxShadow:"var(--vsm-shadow-card)",padding:"2.5rem",width:"100%",maxWidth:"420px"},children:[g.jsx("h2",{style:{fontWeight:800,fontSize:"1.6rem",color:"var(--vsm-black)",marginBottom:"0.4rem"},children:"Acceder"}),g.jsxs("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"13px",marginBottom:"2rem"},children:["No tienes cuenta?"," ",g.jsx(Sr,{to:"/Register",style:{color:"var(--vsm-brand)",fontWeight:700,textDecoration:"underline",textUnderlineOffset:"3px"},children:"Regstrate aqu"})]}),g.jsxs("form",{onSubmit:y,noValidate:!0,children:[g.jsxs("div",{style:{marginBottom:"1.25rem"},children:[g.jsxs("label",{htmlFor:"email",style:Nt,children:["Nombre de usuario o correo electrnico"," ",g.jsx("span",{style:{color:"var(--vsm-error)"},children:"*"})]}),g.jsx("input",{type:"email",id:"email",value:r,onChange:b=>e(b.target.value),onFocus:st,onBlur:at,required:!0,style:qt})]}),g.jsxs("div",{style:{marginBottom:"1.25rem"},children:[g.jsxs("label",{htmlFor:"password",style:Nt,children:["Contrasea ",g.jsx("span",{style:{color:"var(--vsm-error)"},children:"*"})]}),g.jsx("input",{type:"password",id:"password",value:n,onChange:b=>s(b.target.value),onFocus:st,onBlur:at,required:!0,style:qt})]}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"1.5rem"},children:[g.jsx("input",{type:"checkbox",id:"remember",style:{width:"15px",height:"15px",accentColor:"var(--vsm-brand)",cursor:"pointer"}}),g.jsx("label",{htmlFor:"remember",style:{fontSize:"13px",color:"var(--vsm-gray-mid)",cursor:"pointer"},children:"Recurdame"})]}),o&&g.jsx("div",{style:{...Md,marginBottom:"1rem"},children:g.jsx("p",{style:Pd,children:o})}),g.jsx("button",{type:"submit",disabled:h,style:{...wS,cursor:h?"not-allowed":"pointer",opacity:h?.75:1},children:h?"Verificando...":"Acceso"}),g.jsx("p",{style:{textAlign:"center",marginTop:"1rem"},children:g.jsx("a",{href:"#",style:{color:"var(--vsm-gray-mid)",fontSize:"12px",textDecoration:"underline",textUnderlineOffset:"3px"},onClick:b=>b.preventDefault(),children:"Olvidaste la contrasea?"})})]})]})})},ck=()=>{const[r,e]=_r.useState(""),[n,s]=_r.useState(""),[o,c]=_r.useState(""),[h,m]=_r.useState(""),[p,y]=_r.useState(null),[b,T]=_r.useState(!1),A=ki(),P=async F=>{if(F.preventDefault(),r.trim().length===0){y("Ingresa tu nombre completo.");return}if(o!==h){y("Las contraseas no coinciden.");return}if(o.length<6){y("La contrasea debe tener al menos 6 caracteres.");return}T(!0);try{const Y=await hN(Ac,n,o);await mN(Y.user,{displayName:r.trim()}),y(null),A("/Login")}catch(Y){Y.code==="auth/email-already-in-use"?y("Este correo ya est registrado. Intenta iniciar sesin."):y("Error al crear la cuenta. Por favor intenta de nuevo."),c(""),m("")}finally{T(!1)}};return g.jsx("div",{style:{minHeight:"calc(100vh - 96px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},className:"w-full",children:g.jsxs("div",{style:{backgroundColor:"var(--vsm-white)",borderRadius:"var(--vsm-radius)",boxShadow:"var(--vsm-shadow-card)",padding:"2.5rem",width:"100%",maxWidth:"420px"},children:[g.jsx("h2",{style:{fontWeight:800,fontSize:"1.6rem",color:"var(--vsm-black)",marginBottom:"0.4rem"},children:"Crear cuenta"}),g.jsxs("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"13px",marginBottom:"2rem"},children:["Ya tienes cuenta?"," ",g.jsx(Sr,{to:"/Login",style:{color:"var(--vsm-brand)",fontWeight:700,textDecoration:"underline",textUnderlineOffset:"3px"},children:"Inicia sesin aqu"})]}),g.jsxs("form",{onSubmit:P,noValidate:!0,children:[g.jsxs("div",{style:{marginBottom:"1.25rem"},children:[g.jsxs("label",{htmlFor:"name",style:Nt,children:["Nombre completo ",g.jsx("span",{style:{color:"var(--vsm-error)"},children:"*"})]}),g.jsx("input",{type:"text",id:"name",value:r,onChange:F=>e(F.target.value),onFocus:st,onBlur:at,required:!0,style:qt})]}),g.jsxs("div",{style:{marginBottom:"1.25rem"},children:[g.jsxs("label",{htmlFor:"email",style:Nt,children:["Correo electrnico ",g.jsx("span",{style:{color:"var(--vsm-error)"},children:"*"})]}),g.jsx("input",{type:"email",id:"email",value:n,onChange:F=>s(F.target.value),onFocus:st,onBlur:at,required:!0,style:qt})]}),g.jsxs("div",{style:{marginBottom:"1.25rem"},children:[g.jsxs("label",{htmlFor:"password",style:Nt,children:["Contrasea ",g.jsx("span",{style:{color:"var(--vsm-error)"},children:"*"})]}),g.jsx("input",{type:"password",id:"password",value:o,onChange:F=>c(F.target.value),onFocus:st,onBlur:at,required:!0,style:qt}),g.jsx("p",{style:{fontSize:"11px",color:"var(--vsm-gray-mid)",marginTop:"5px"},children:"Mnimo 6 caracteres."})]}),g.jsxs("div",{style:{marginBottom:"1.5rem"},children:[g.jsxs("label",{htmlFor:"confirmPassword",style:Nt,children:["Confirmar contrasea ",g.jsx("span",{style:{color:"var(--vsm-error)"},children:"*"})]}),g.jsx("input",{type:"password",id:"confirmPassword",value:h,onChange:F=>m(F.target.value),onFocus:st,onBlur:at,required:!0,style:qt})]}),g.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px",marginBottom:"1.5rem"},children:[g.jsx("input",{type:"checkbox",id:"privacy",required:!0,style:{width:"15px",height:"15px",marginTop:"2px",accentColor:"var(--vsm-brand)",cursor:"pointer",flexShrink:0}}),g.jsxs("label",{htmlFor:"privacy",style:{fontSize:"12px",color:"var(--vsm-gray-mid)",cursor:"pointer",lineHeight:1.6},children:["He ledo y acepto la"," ",g.jsx("a",{href:"#",style:{color:"var(--vsm-brand)",textDecoration:"underline",textUnderlineOffset:"3px"},children:"Poltica de privacidad"})]})]}),p&&g.jsx("div",{style:{...Md,marginBottom:"1rem"},children:g.jsx("p",{style:Pd,children:p})}),g.jsx("button",{type:"submit",disabled:b,style:{...wS,cursor:b?"not-allowed":"pointer",opacity:b?.75:1},children:b?"Creando cuenta...":"Registrarme"})]})]})})},uk=5*60*1e3,oE=["mousemove","mousedown","keydown","scroll","touchstart","click"],AS=j.createContext({user:null,loading:!0,logout:async()=>{}}),hk=({children:r})=>{const[e,n]=j.useState(null),[s,o]=j.useState(!0),c=j.useRef(null),h=async()=>{c.current&&clearTimeout(c.current),await Wb(Ac)};return j.useEffect(()=>{const m=yN(Ac,p=>{n(p),o(!1)});return()=>m()},[]),j.useEffect(()=>{if(!e){c.current&&clearTimeout(c.current);return}const m=()=>{c.current&&clearTimeout(c.current),c.current=setTimeout(()=>Wb(Ac),uk)};return oE.forEach(p=>window.addEventListener(p,m,{passive:!0})),m(),()=>{oE.forEach(p=>window.removeEventListener(p,m)),c.current&&clearTimeout(c.current)}},[e]),g.jsx(AS.Provider,{value:{user:e,loading:s,logout:h},children:r})},Qg=()=>j.useContext(AS);function RS(){const[r,e]=j.useState(null),[n,s]=j.useState(!0);return j.useEffect(()=>{const o=bT(yn(Ge,"settings","general"),c=>{c.exists()?e(c.data()):e(null),s(!1)},()=>{e(null),s(!1)});return()=>o()},[]),{settings:r,loading:n}}const CS="/tiendaVirtual/assets/Logo-CuQzCToE.jpeg",dk=[{to:"/",text:"Inicio"},{to:"/catalogo",text:"+ Productos"},{to:"/#nosotros",text:"Nosotros"},{to:"/contacto",text:"Contacto"}],fk=()=>{const{user:r,logout:e}=Qg(),n=ki(),{settings:s,loading:o}=RS(),c=s?.logoUrl||CS,h=async()=>{await e(),n("/Login")};return g.jsx("header",{style:{position:"fixed",top:0,width:"100%",zIndex:40},children:g.jsxs("nav",{style:{backgroundColor:"var(--vsm-white)",borderBottom:"1px solid var(--vsm-gray)"},className:"flex justify-between items-center py-3 px-8",children:[g.jsxs(hc,{to:"/",className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[g.jsx("img",{src:c,alt:"Velas Santa Marta",style:{height:"38px",width:"auto",objectFit:"contain"}}),!o&&g.jsx("div",{children:s?.storeName?g.jsx("span",{style:{fontWeight:800,fontSize:"1rem",color:"#111",display:"block",lineHeight:1.2},children:s.storeName}):g.jsx(g.Fragment,{})})]}),g.jsx("ul",{className:"hidden md:flex items-center gap-8",children:dk.map(m=>g.jsx("li",{children:g.jsx(hc,{to:m.to,end:m.to==="/",style:({isActive:p})=>({color:"#111",fontWeight:p?700:600,fontSize:"13px",textDecoration:p?"underline":"none",textUnderlineOffset:"5px",textTransform:"uppercase",letterSpacing:"0.05em"}),className:"hover:opacity-60 transition-opacity",children:m.text})},m.to))}),g.jsx("div",{className:"flex items-center gap-4",children:r?g.jsxs(g.Fragment,{children:[g.jsx(hc,{to:"/Admin",style:{color:"#111",fontSize:"12px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em"},className:"hover:opacity-60 transition-opacity",children:"Admin"}),g.jsx("button",{onClick:h,style:{backgroundColor:"var(--vsm-black)",color:"#fff",fontSize:"11px",fontWeight:700,padding:"8px 16px",textTransform:"uppercase",letterSpacing:"0.05em",borderRadius:"4px",border:"none",cursor:"pointer",fontFamily:"inherit"},className:"hover:opacity-80 transition-opacity",children:"Cerrar sesin"})]}):g.jsxs(g.Fragment,{children:[g.jsx(hc,{to:"/Login",style:{color:"#111",fontSize:"12px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em"},className:"hover:opacity-60 transition-opacity",children:"Ingresar"}),g.jsx(hc,{to:"/Register",style:{backgroundColor:"var(--vsm-brand)",color:"#fff",fontSize:"11px",fontWeight:700,padding:"8px 16px",textTransform:"uppercase",letterSpacing:"0.05em",borderRadius:"4px"},className:"hover:opacity-90 transition-opacity",children:"Registro"})]})})]})})},mk=[{title:"Nuestras Polticas",links:[{label:"Privacidad",path:"/privacidad"},{label:"Trminos de uso",path:"/terminos"},{label:"Devoluciones",path:"/devoluciones"},{label:"Poltica de envo",path:"/envios"}]},{title:"Ms Informacin",links:[{label:"Contacto",path:"/contacto"},{label:"Nuestros aromas",path:"/aromas"},{label:"Cmo cuidar tu vela",path:"/cuidados"},{label:"Preguntas frecuentes",path:"/faq"}]}],pk=()=>g.jsxs("footer",{style:{backgroundColor:"var(--vsm-white)",borderTop:"1px solid var(--vsm-gray)"},className:"py-14",children:[g.jsxs("div",{className:"max-w-7xl mx-auto px-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-10",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[g.jsx("img",{src:CS,alt:"Velas Santa Marta",style:{height:"36px",width:"auto",objectFit:"contain"}}),g.jsxs("div",{children:[g.jsx("span",{style:{fontWeight:800,fontSize:"1rem",display:"block",lineHeight:1.1,color:"var(--vsm-black)"},children:"Velas"}),g.jsx("span",{style:{fontWeight:600,fontSize:"0.6rem",color:"var(--vsm-brand)",letterSpacing:"0.12em",textTransform:"uppercase"},children:"Santa Marta"})]})]}),g.jsx("div",{className:"flex gap-3 mt-4",children:[{label:"IG",href:"#"},{label:"TK",href:"#"},{label:"FB",href:"#"},{label:"YT",href:"#"}].map(r=>g.jsx("a",{href:r.href,style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"var(--vsm-brand)",color:"#fff",fontSize:"9px",fontWeight:800,display:"flex",alignItems:"center",justifyContent:"center",textDecoration:"none"},className:"hover:opacity-80 transition-opacity",children:r.label},r.label))})]}),g.jsxs("div",{children:[g.jsx("h3",{style:{fontWeight:800,fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.08em",marginBottom:"1rem",color:"var(--vsm-black)"},children:"Sobre Nosotros"}),g.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"13px",lineHeight:1.8},children:"Somos una pequea empresa artesanal nacida en Santa Marta, Colombia. Elaboramos velas a mano con cera natural e ingredientes del Caribe colombiano para crear experiencias nicas en tu hogar."})]}),mk.map(r=>g.jsxs("div",{children:[g.jsx("h3",{style:{fontWeight:800,fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.08em",marginBottom:"1rem",color:"var(--vsm-black)"},children:r.title}),g.jsx("ul",{style:{display:"flex",flexDirection:"column",gap:"0.6rem"},children:r.links.map(e=>g.jsx("li",{children:g.jsx(Sr,{to:e.path,style:{color:"var(--vsm-gray-mid)",fontSize:"13px",textDecoration:"none"},className:"hover:text-black transition-colors",children:e.label})},e.label))})]},r.title))]}),g.jsxs("div",{style:{borderTop:"1px solid var(--vsm-gray)",marginTop:"3rem",paddingTop:"1.5rem"},className:"max-w-7xl mx-auto px-8 flex flex-col md:flex-row justify-between items-center gap-2",children:[g.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"12px"},children:"Copyright  2025 Velas Santa Marta"}),g.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"12px"},children:"Santa Marta, Magdalena, Colombia"})]})]}),gk="96px",yk=({children:r,alignRight:e})=>{const s=Ls().pathname==="/";return g.jsx("div",{style:{marginTop:gk},className:`flex flex-col ${s?"":e?"items-end px-4":"items-center px-4"} w-full`,children:r})},vk=()=>g.jsxs("div",{className:"w-full",style:{maxWidth:"1200px",margin:"0 auto",padding:"2rem 1rem"},children:[g.jsx("div",{style:{width:"140px",height:"14px",backgroundColor:"var(--vsm-gray)",borderRadius:"4px",marginBottom:"2rem",animation:"pulse 1.5s ease-in-out infinite"}}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[3fr_2fr] gap-8 md:gap-12",children:[g.jsxs("div",{children:[g.jsx("div",{style:{aspectRatio:"1",backgroundColor:"var(--vsm-gray)",borderRadius:"12px",animation:"pulse 1.5s ease-in-out infinite"}}),g.jsx("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1rem"},children:[0,1,2].map(r=>g.jsx("div",{style:{width:"72px",height:"72px",backgroundColor:"var(--vsm-gray)",borderRadius:"var(--vsm-radius)",animation:"pulse 1.5s ease-in-out infinite"}},r))})]}),g.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[[{w:"80px",h:"24px",r:"20px"},{w:"75%",h:"36px",r:"6px"},{w:"45%",h:"32px",r:"6px"},{w:"100%",h:"80px",r:"6px"}].map((r,e)=>g.jsx("div",{style:{width:r.w,height:r.h,backgroundColor:"var(--vsm-gray)",borderRadius:r.r,animation:"pulse 1.5s ease-in-out infinite"}},e)),g.jsx("div",{style:{width:"100%",height:"50px",backgroundColor:"var(--vsm-gray)",borderRadius:"var(--vsm-radius)",marginTop:"0.5rem",animation:"pulse 1.5s ease-in-out infinite"}})]})]})]}),_k=()=>g.jsxs("div",{style:{maxWidth:"560px",margin:"5rem auto",padding:"2rem",textAlign:"center"},children:[g.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:800,color:"var(--vsm-black)",marginBottom:"0.75rem"},children:"Producto no encontrado"}),g.jsx("p",{style:{color:"var(--vsm-gray-mid)",marginBottom:"2rem",lineHeight:1.6},children:"El producto que buscas no existe o fue eliminado."}),g.jsx(Sr,{to:"/catalogo",style:{color:"var(--vsm-brand)",fontWeight:600,textDecoration:"underline",textUnderlineOffset:"3px"},children:"Volver al catalogo"})]}),bk=()=>{const{id:r}=Fw(),[e,n]=j.useState(null),[s,o]=j.useState([]),[c,h]=j.useState(!0),[m,p]=j.useState(!1),[y,b]=j.useState(0),[T,A]=j.useState(!1),[P,F]=j.useState(!1),[Y,k]=j.useState(1);if(j.useEffect(()=>{r&&(h(!0),p(!1),b(0),k(1),Promise.all([_T(yn(Ge,"products",r)),Us(Mn(Ge,"categories"))]).then(([ae,ge])=>{if(!ae.exists()){p(!0);return}n({id:ae.id,...ae.data()}),o(ge.docs.map(R=>({id:R.id,...R.data()})))}).catch(()=>p(!0)).finally(()=>h(!1)))},[r]),c)return g.jsx(vk,{});if(m||!e)return g.jsx(_k,{});const Z=e.images?.length?e.images:e.imageUrl?[e.imageUrl]:[],te=s.find(ae=>ae.id===e.categoryId)?.name??"",H=e.stock===0,se=ae=>{ae!==y&&(A(!0),setTimeout(()=>{b(ae),A(!1)},150))};return g.jsxs("div",{className:"w-full",style:{maxWidth:"1200px",margin:"0 auto",padding:"2rem 1rem"},children:[g.jsx(Sr,{to:"/catalogo",style:{display:"inline-flex",alignItems:"center",gap:"0.35rem",color:"var(--vsm-gray-mid)",textDecoration:"none",fontSize:"13px",fontWeight:500,marginBottom:"2rem"},children:" Volver al catalogo"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[3fr_2fr] gap-8 md:gap-12",children:[g.jsxs("div",{children:[g.jsx("div",{style:{borderRadius:"12px",overflow:"hidden",border:"1px solid var(--vsm-gray)",aspectRatio:"1",backgroundColor:"var(--vsm-bg-warm)",cursor:Z.length>0?"zoom-in":"default"},children:Z.length>0?g.jsx("img",{src:Z[y],alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover",display:"block",opacity:T?0:1,transform:P?"scale(1.08)":"scale(1)",transition:"opacity 0.15s ease, transform 0.35s ease"},onMouseEnter:()=>F(!0),onMouseLeave:()=>F(!1)}):g.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--vsm-gray-mid)",fontSize:"14px"},children:"Sin imagen"})}),Z.length>1&&g.jsx("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1rem",overflowX:"auto",paddingBottom:"4px"},children:Z.map((ae,ge)=>g.jsx("button",{onClick:()=>se(ge),style:{flexShrink:0,width:"72px",height:"72px",borderRadius:"var(--vsm-radius)",overflow:"hidden",border:`2px solid ${ge===y?"var(--vsm-brand)":"var(--vsm-gray)"}`,padding:0,cursor:"pointer",backgroundColor:"var(--vsm-bg-warm)",transition:"border-color 0.2s",outline:"none"},children:g.jsx("img",{src:ae,alt:`Vista ${ge+1}`,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}})},ge))})]}),g.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:[te&&g.jsx("span",{style:{display:"inline-block",alignSelf:"flex-start",backgroundColor:"var(--vsm-gray)",color:"var(--vsm-gray-mid)",padding:"0.3rem 0.9rem",borderRadius:"20px",fontSize:"11px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.06em"},children:te}),g.jsx("h1",{style:{fontSize:"1.75rem",fontWeight:800,color:"var(--vsm-black)",lineHeight:1.2,margin:0},children:e.name}),g.jsx("p",{style:{fontSize:"2rem",fontWeight:800,color:"var(--vsm-brand)",margin:0},children:Kg(e.price)}),g.jsx("p",{style:{fontSize:"14px",color:"var(--vsm-gray-mid)",lineHeight:1.8,margin:0},children:e.description}),e.aroma&&g.jsxs("div",{style:{padding:"0.875rem 1rem",backgroundColor:"#FFF7F0",borderLeft:"3px solid var(--vsm-brand)",borderRadius:"0 8px 8px 0"},children:[g.jsx("strong",{style:{display:"block",color:"var(--vsm-brand)",fontSize:"11px",textTransform:"uppercase",letterSpacing:"0.06em",marginBottom:"0.3rem"},children:"Aroma"}),g.jsx("span",{style:{color:"var(--vsm-black)",fontSize:"14px"},children:e.aroma})]}),g.jsx("p",{style:{fontSize:"13px",fontWeight:600,margin:0,color:H?"var(--vsm-error)":"var(--vsm-success)"},children:H?"Sin stock":`${e.stock} disponibles`}),!H&&g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[g.jsx("span",{style:{color:"var(--vsm-gray-mid)",fontSize:"13px",fontWeight:500},children:"Cantidad:"}),g.jsxs("div",{style:{display:"inline-flex",alignItems:"center",border:"1px solid var(--vsm-gray)",borderRadius:"var(--vsm-radius)",overflow:"hidden"},children:[g.jsx("button",{onClick:()=>k(ae=>Math.max(1,ae-1)),style:{width:"40px",height:"40px",border:"none",backgroundColor:"transparent",cursor:"pointer",fontSize:"1.1rem",fontWeight:600,color:"var(--vsm-black)"},children:""}),g.jsx("span",{style:{width:"40px",textAlign:"center",fontSize:"14px",fontWeight:700},children:Y}),g.jsx("button",{onClick:()=>k(ae=>Math.min(e.stock,ae+1)),style:{width:"40px",height:"40px",border:"none",backgroundColor:"transparent",cursor:"pointer",fontSize:"1.1rem",fontWeight:600,color:"var(--vsm-black)"},children:"+"})]})]}),g.jsx("button",{disabled:H,style:{padding:"14px 24px",backgroundColor:H?"var(--vsm-gray)":"var(--vsm-brand)",color:H?"var(--vsm-gray-mid)":"#fff",border:"none",borderRadius:"var(--vsm-radius)",fontSize:"14px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.07em",cursor:H?"not-allowed":"pointer",transition:"background 0.2s ease",fontFamily:"inherit"},children:H?"Agotado":"Agregar al carrito"}),g.jsx("p",{style:{textAlign:"center",color:"var(--vsm-gray-mid)",fontSize:"12px",margin:0},children:"Envio disponible a todo el pais"})]})]})]})},jd={padding:"6px 16px",borderRadius:"20px",border:"1px solid transparent",fontSize:"13px",fontWeight:600,cursor:"pointer",fontFamily:"inherit",transition:"background-color 0.15s, color 0.15s",whiteSpace:"nowrap"},lE={...jd,backgroundColor:"var(--vsm-brand)",color:"#fff",borderColor:"var(--vsm-brand)"},cE={...jd,backgroundColor:"var(--vsm-white)",color:"var(--vsm-gray-mid)",borderColor:"var(--vsm-gray)"},uE={...jd,padding:"4px 13px",fontSize:"12px",backgroundColor:"var(--vsm-brand)",color:"#fff",borderColor:"var(--vsm-brand)"},hE={...jd,padding:"4px 13px",fontSize:"12px",backgroundColor:"rgba(201,107,43,0.08)",color:"var(--vsm-brand)",borderColor:"rgba(201,107,43,0.3)"},Ek=()=>g.jsxs("div",{style:{backgroundColor:"var(--vsm-white)",borderRadius:"6px",overflow:"hidden",boxShadow:"var(--vsm-shadow)"},children:[g.jsx("div",{style:{aspectRatio:"1",backgroundColor:"var(--vsm-gray)",animation:"pulse 1.5s ease-in-out infinite"}}),g.jsxs("div",{style:{padding:"1rem",display:"flex",flexDirection:"column",gap:"8px"},children:[g.jsx("div",{style:{height:"13px",backgroundColor:"var(--vsm-gray)",borderRadius:"3px",width:"70%",animation:"pulse 1.5s ease-in-out infinite"}}),g.jsx("div",{style:{height:"10px",backgroundColor:"var(--vsm-gray)",borderRadius:"3px",width:"90%",animation:"pulse 1.5s ease-in-out infinite"}}),g.jsx("div",{style:{height:"20px",backgroundColor:"var(--vsm-gray)",borderRadius:"3px",width:"45%",animation:"pulse 1.5s ease-in-out infinite"}})]})]}),Tk=()=>{const{data:r,loading:e}=an("categories",Xt("active","==",!0)),{data:n,loading:s}=an("subcategories",Xt("active","==",!0)),{data:o,loading:c}=an("products",Xt("active","==",!0)),h=j.useMemo(()=>[...r].sort((H,se)=>(H.createdAt?.seconds??0)-(se.createdAt?.seconds??0)),[r]),m=j.useMemo(()=>[...n].sort((H,se)=>(H.createdAt?.seconds??0)-(se.createdAt?.seconds??0)),[n]),p=e||s||c,[y]=bA(),[b,T]=j.useState(y.get("categoria")),[A,P]=j.useState(null),F=j.useMemo(()=>b?m.filter(H=>H.categoryId===b):[],[m,b]),Y=j.useMemo(()=>new Set(h.map(H=>H.id)),[h]),k=j.useMemo(()=>new Set(m.map(H=>H.id)),[m]),Z=j.useMemo(()=>o.filter(H=>H.categoryId&&!Y.has(H.categoryId)||H.subcategoryId&&!k.has(H.subcategoryId)?!1:A?H.subcategoryId===A:b?H.categoryId===b:!0),[o,b,A,Y,k]),te=H=>{T(H),P(null)};return g.jsxs("div",{style:{maxWidth:"1280px",margin:"0 auto",padding:"2rem 1rem"},children:[g.jsx("h1",{style:{fontWeight:800,fontSize:"1.75rem",color:"var(--vsm-black)",marginBottom:"1.75rem"},children:"Catlogo de Velas"}),!p&&h.length>0&&g.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginBottom:"0.75rem"},children:[g.jsx("button",{style:b===null?lE:cE,onClick:()=>te(null),children:"Todos"}),h.map(H=>g.jsx("button",{style:b===H.id?lE:cE,onClick:()=>te(H.id),children:H.name},H.id))]}),!p&&F.length>0&&g.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem",marginBottom:"1.5rem",paddingLeft:"0.25rem"},children:[g.jsx("button",{style:A===null?uE:hE,onClick:()=>P(null),children:"Todo"}),F.map(H=>g.jsx("button",{style:A===H.id?uE:hE,onClick:()=>P(H.id),children:H.name},H.id))]}),p?g.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5",children:Array.from({length:8}).map((H,se)=>g.jsx(Ek,{},se))}):Z.length===0?g.jsxs("div",{style:{textAlign:"center",padding:"4rem 0",color:"var(--vsm-gray-mid)"},children:[g.jsx("p",{style:{fontSize:"1rem",fontWeight:600},children:"No hay productos disponibles en esta categora."}),b&&g.jsx("button",{onClick:()=>te(null),style:{marginTop:"1rem",color:"var(--vsm-brand)",background:"none",border:"none",cursor:"pointer",fontSize:"13px",fontWeight:700,textDecoration:"underline",fontFamily:"inherit"},children:"Ver todos los productos"})]}):g.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5",children:Z.map(H=>g.jsx(xS,{product:H},H.id))})]})},Vo=({children:r,delay:e=0})=>{const n=j.useRef(null),[s,o]=j.useState(!1);return j.useEffect(()=>{const c=n.current;if(!c)return;const h=new IntersectionObserver(([m])=>{m.isIntersecting&&(o(!0),h.disconnect())},{threshold:.1});return h.observe(c),()=>h.disconnect()},[]),g.jsx("div",{ref:n,style:{opacity:s?1:0,transform:s?"translateY(0)":"translateY(24px)",transition:`opacity 0.6s ease ${e}ms, transform 0.6s ease ${e}ms`},children:r})},ep=({icon:r,label:e,value:n,href:s})=>{const[o,c]=j.useState(!1),h=g.jsxs("div",{onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),style:{display:"flex",alignItems:"flex-start",gap:"1rem",backgroundColor:"var(--vsm-white)",borderRadius:"12px",padding:"1.25rem",boxShadow:o?"0 8px 24px rgba(201,107,43,0.15)":"0 2px 12px rgba(0,0,0,0.06)",transform:o?"translateY(-3px)":"translateY(0)",transition:"box-shadow 0.25s ease, transform 0.25s ease",cursor:s?"pointer":"default"},children:[g.jsx("span",{style:{fontSize:"1.4rem",width:"44px",height:"44px",borderRadius:"10px",backgroundColor:"rgba(201,107,43,0.1)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:r}),g.jsxs("div",{children:[g.jsx("p",{style:{fontSize:"11px",fontWeight:700,color:"var(--vsm-gray-mid)",textTransform:"uppercase",letterSpacing:"0.1em",marginBottom:"4px"},children:e}),g.jsx("p",{style:{fontSize:"14px",fontWeight:600,color:"var(--vsm-black)",lineHeight:1.5,margin:0},children:n||g.jsx("span",{style:{color:"var(--vsm-gray-mid)",fontStyle:"italic",fontWeight:400},children:"No configurado"})})]})]});return s?g.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none",display:"block"},children:h}):h},Sk=({phone:r})=>{const[e,n]=j.useState(!1),s=r.replace(/\D/g,""),o=s?`https://wa.me/${s}`:void 0;return g.jsxs("a",{href:o,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:"0.75rem",backgroundColor:e?"#1ea952":"#25D366",color:"#fff",padding:"0.9rem 1.75rem",borderRadius:"50px",textDecoration:"none",fontWeight:700,fontSize:"14px",fontFamily:"inherit",boxShadow:e?"0 8px 24px rgba(37,211,102,0.45)":"0 4px 14px rgba(37,211,102,0.3)",transform:e?"translateY(-2px)":"translateY(0)",transition:"all 0.25s ease",pointerEvents:o?"auto":"none",opacity:o?1:.5},onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[g.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Escrbenos por WhatsApp"]})},xk=({url:r})=>{const[e,n]=j.useState(!1);return r?g.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:"0.6rem",color:e?"#C13584":"var(--vsm-gray-mid)",textDecoration:"none",fontWeight:600,fontSize:"14px",transition:"color 0.25s ease"},onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[g.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})}),"Instagram"]}):null},tp=["Consulta sobre producto","Pedido personalizado","Envos y entregas","Otro"],xh={display:"block",fontSize:"12px",fontWeight:700,color:"var(--vsm-black)",marginBottom:"6px",textTransform:"uppercase",letterSpacing:"0.06em"},wh={width:"100%",padding:"0.75rem 1rem",borderRadius:"8px",border:"1.5px solid var(--vsm-gray)",fontSize:"14px",fontFamily:"inherit",color:"var(--vsm-black)",backgroundColor:"var(--vsm-white)",outline:"none",transition:"border-color 0.2s ease",boxSizing:"border-box"},Ah=r=>{r.currentTarget.style.borderColor="var(--vsm-brand)"},Rh=r=>{r.currentTarget.style.borderColor="var(--vsm-gray)"},wk=()=>{const[r,e]=j.useState({name:"",email:"",subject:tp[0],message:""}),[n,s]=j.useState({}),[o,c]=j.useState(!1),[h,m]=j.useState(!1),[p,y]=j.useState(null),b=(P,F)=>{e(Y=>({...Y,[P]:F})),n[P]&&s(Y=>({...Y,[P]:""}))},T=()=>{const P={};return r.name.trim()||(P.name="El nombre es requerido"),r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(P.email="Ingresa un email vlido"):P.email="El email es requerido",r.message.trim().length<10&&(P.message="El mensaje debe tener al menos 10 caracteres"),s(P),Object.keys(P).length===0},A=async P=>{if(P.preventDefault(),!!T()){c(!0),y(null);try{await ed(Mn(Ge,"messages"),{name:r.name.trim(),email:r.email.trim(),subject:r.subject,message:r.message.trim(),createdAt:Si(),read:!1}),m(!0),e({name:"",email:"",subject:tp[0],message:""})}catch{y("Hubo un problema al enviar el mensaje. Intenta de nuevo.")}finally{c(!1)}}};return h?g.jsxs("div",{className:"contact-success",children:[g.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),g.jsx("h4",{style:{fontWeight:800,fontSize:"1.2rem",color:"var(--vsm-black)",marginBottom:"0.5rem"},children:"Mensaje enviado!"}),g.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"14px",lineHeight:1.7,maxWidth:"320px",margin:"0 auto"},children:"Gracias por contactarnos. Te responderemos a la brevedad posible."}),g.jsx("button",{onClick:()=>m(!1),style:{marginTop:"1.5rem",backgroundColor:"var(--vsm-brand)",color:"#fff",border:"none",borderRadius:"8px",padding:"10px 24px",fontSize:"13px",fontWeight:700,cursor:"pointer",fontFamily:"inherit"},children:"Enviar otro mensaje"})]}):g.jsxs("form",{onSubmit:A,noValidate:!0,style:{display:"flex",flexDirection:"column",gap:"1.1rem"},children:[g.jsxs("div",{children:[g.jsx("label",{style:xh,children:"Nombre completo *"}),g.jsx("input",{type:"text",value:r.name,onChange:P=>b("name",P.target.value),placeholder:"Tu nombre",style:{...wh,borderColor:n.name?"#DC2626":"var(--vsm-gray)"},onFocus:Ah,onBlur:Rh}),n.name&&g.jsx("p",{style:{fontSize:"12px",color:"#DC2626",marginTop:"4px"},children:n.name})]}),g.jsxs("div",{children:[g.jsx("label",{style:xh,children:"Correo electrnico *"}),g.jsx("input",{type:"email",value:r.email,onChange:P=>b("email",P.target.value),placeholder:"tu@email.com",style:{...wh,borderColor:n.email?"#DC2626":"var(--vsm-gray)"},onFocus:Ah,onBlur:Rh}),n.email&&g.jsx("p",{style:{fontSize:"12px",color:"#DC2626",marginTop:"4px"},children:n.email})]}),g.jsxs("div",{children:[g.jsx("label",{style:xh,children:"Asunto"}),g.jsx("select",{value:r.subject,onChange:P=>b("subject",P.target.value),style:wh,onFocus:Ah,onBlur:Rh,children:tp.map(P=>g.jsx("option",{value:P,children:P},P))})]}),g.jsxs("div",{children:[g.jsx("label",{style:xh,children:"Mensaje *"}),g.jsx("textarea",{value:r.message,onChange:P=>b("message",P.target.value),placeholder:"Cuntanos en qu podemos ayudarte...",rows:5,style:{...wh,resize:"vertical",borderColor:n.message?"#DC2626":"var(--vsm-gray)"},onFocus:Ah,onBlur:Rh}),n.message&&g.jsx("p",{style:{fontSize:"12px",color:"#DC2626",marginTop:"4px"},children:n.message})]}),p&&g.jsx("div",{style:{backgroundColor:"#FEF2F2",border:"1px solid #FECACA",borderRadius:"8px",padding:"0.75rem 1rem"},children:g.jsx("p",{style:{color:"#DC2626",fontSize:"13px",margin:0},children:p})}),g.jsx("button",{type:"submit",disabled:o,style:{backgroundColor:"var(--vsm-brand)",color:"#fff",border:"none",borderRadius:"8px",padding:"14px",fontSize:"14px",fontWeight:700,cursor:o?"not-allowed":"pointer",opacity:o?.75:1,fontFamily:"inherit",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"opacity 0.2s ease"},children:o?g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"contact-spinner"}),"Enviando..."]}):"Enviar mensaje"})]})},Ak=()=>{const{settings:r}=RS();return g.jsxs("div",{children:[g.jsxs("section",{style:{background:"#1A1208",minHeight:"60vh",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden",padding:"9rem 2rem 6rem"},children:[g.jsx("div",{style:{position:"absolute",inset:0,background:"radial-gradient(ellipse 80% 60% at 50% 100%, rgba(200,115,42,0.35) 0%, transparent 70%)",pointerEvents:"none"}}),g.jsxs("div",{style:{textAlign:"center",position:"relative",zIndex:2},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"1rem",fontSize:"11px",fontWeight:400,letterSpacing:"0.3em",textTransform:"uppercase",color:"rgba(232,146,74,0.9)",marginBottom:"1.5rem"},children:[g.jsx("span",{style:{width:"48px",height:"1px",background:"#C8732A",opacity:.5,display:"block"}}),"Estamos aqu para ti",g.jsx("span",{style:{width:"48px",height:"1px",background:"#C8732A",opacity:.5,display:"block"}})]}),g.jsxs("h1",{style:{color:"#F5EFE4",fontSize:"clamp(3.5rem, 8vw, 6rem)",fontWeight:300,lineHeight:1,marginBottom:"1.5rem",letterSpacing:"-0.01em"},children:["",g.jsx("em",{style:{fontStyle:"italic",color:"rgba(232,146,74,0.95)"},children:"Hablamos"}),"?"]}),g.jsxs("p",{style:{color:"rgba(245,239,228,0.6)",fontSize:"15px",fontWeight:300,lineHeight:1.8,maxWidth:"420px",margin:"0 auto"},children:["Estamos en Santa Marta, Colombia.",g.jsx("br",{}),"Escrbenos y te respondemos pronto."]})]}),g.jsx("div",{style:{position:"absolute",bottom:"-10px",left:"50%",transform:"translateX(-50%)",fontSize:"2.5rem",lineHeight:1,filter:"drop-shadow(0 0 20px rgba(200,115,42,0.8))",opacity:.5},children:""})]}),g.jsx("section",{style:{backgroundColor:"var(--vsm-bg)",padding:"5rem 2rem"},children:g.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"3rem",alignItems:"start"},children:[g.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[g.jsxs(Vo,{delay:0,children:[g.jsx("h2",{style:{fontWeight:800,fontSize:"1.4rem",color:"var(--vsm-black)",marginBottom:"0.25rem"},children:"Informacin de contacto"}),g.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"14px",lineHeight:1.7,marginBottom:"0.75rem"},children:"Contctanos por cualquiera de estos medios o vistanos en nuestra ubicacin."})]}),g.jsx(Vo,{delay:80,children:g.jsx(ep,{icon:"",label:"Direccin",value:r?.address??""})}),g.jsx(Vo,{delay:140,children:g.jsx(ep,{icon:"",label:"Correo electrnico",value:r?.email??"",href:r?.email?`mailto:${r.email}`:void 0})}),g.jsx(Vo,{delay:200,children:g.jsx(ep,{icon:"",label:"Telfono / WhatsApp",value:r?.phone??""})}),g.jsx(Vo,{delay:260,children:g.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"1rem",marginTop:"0.5rem"},children:[g.jsx(Sk,{phone:r?.phone??""}),g.jsx(xk,{url:r?.social?.instagram??""})]})})]}),g.jsx(Vo,{delay:150,children:g.jsxs("div",{style:{backgroundColor:"var(--vsm-white)",borderRadius:"16px",padding:"2rem",boxShadow:"0 4px 24px rgba(0,0,0,0.08)"},children:[g.jsx("h3",{style:{fontWeight:800,fontSize:"1.25rem",color:"var(--vsm-black)",marginBottom:"1.5rem"},children:"Envanos un mensaje"}),g.jsx(wk,{})]})})]})}),g.jsxs("section",{style:{background:"linear-gradient(135deg, #1A0800 0%, #2D1200 100%)",padding:"4.5rem 2rem",textAlign:"center"},children:[g.jsx("p",{style:{color:"rgba(255,255,255,0.4)",fontSize:"11px",fontWeight:700,letterSpacing:"0.2em",textTransform:"uppercase",marginBottom:"1.25rem"},children:" Velas Santa Marta"}),g.jsx("blockquote",{style:{color:"#fff",fontSize:"clamp(1.25rem, 3vw, 2rem)",fontWeight:700,lineHeight:1.5,maxWidth:"600px",margin:"0 auto",fontStyle:"italic"},children:'"Cada vela cuenta una historia diferente"'}),g.jsx("p",{style:{color:"rgba(255,255,255,0.45)",fontSize:"13px",marginTop:"1rem"},children:"Hecha a mano con amor desde el Caribe colombiano"})]})]})},Rk=({products:r,categories:e})=>{const[n,s]=j.useState(!1),[o,c]=j.useState(new Set),[h,m]=j.useState(new Set),p=j.useMemo(()=>r.reduce((k,Z)=>k+(Z.stock??0),0),[r]),y=j.useMemo(()=>{const k=new Map;for(const Z of r){const te=Z.categoryId||"__none__";k.has(te)||k.set(te,[]),k.get(te).push(Z)}return k},[r]),b=j.useMemo(()=>{const k=new Map;for(const Z of r){const te=Z.categoryId||"__none__",H=Z.subcategoryId||"__none__";k.has(te)||k.set(te,new Map);const se=k.get(te);se.has(H)||se.set(H,[]),se.get(H).push(Z)}return k},[r]),T=k=>k.reduce((Z,te)=>Z+(te.stock??0),0),A=(k,Z)=>{Z(te=>{const H=new Set(te);return H.has(k)?H.delete(k):H.add(k),H})},P=j.useMemo(()=>{const k=[];for(const Z of e)y.has(Z.id)&&k.push({id:Z.id,name:Z.name});return y.has("__none__")&&k.push({id:"__none__",name:"Sin categora"}),k},[e,y]),F=k=>g.jsx("span",{style:{fontSize:"10px",color:"var(--vsm-gray-mid)",display:"inline-block",transform:k?"rotate(180deg)":"none",transition:"transform 0.2s",flexShrink:0},children:""}),Y=(k,Z)=>g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:`0.35rem 1.5rem 0.35rem ${Z}`},children:[g.jsx("span",{style:{fontSize:"12px",color:k.active===!1?"var(--vsm-gray-mid)":"var(--vsm-black)",flex:1,marginRight:"0.75rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontStyle:k.active===!1?"italic":"normal"},children:k.name}),g.jsxs("span",{style:{fontSize:"12px",fontWeight:700,color:k.stock===0?"var(--vsm-error)":"var(--vsm-gray-mid)",flexShrink:0},children:[k.stock," uds."]})]},k.id);return g.jsxs("div",{style:{backgroundColor:"var(--vsm-white)",borderRadius:"var(--vsm-radius)",borderTop:"3px solid var(--vsm-brand)",boxShadow:"var(--vsm-shadow-sm)",overflow:"hidden"},children:[g.jsxs("div",{onClick:()=>s(k=>!k),style:{padding:"1.25rem 1.5rem",cursor:"pointer",display:"flex",alignItems:"flex-start",justifyContent:"space-between",userSelect:"none"},children:[g.jsxs("div",{children:[g.jsx("p",{style:{fontSize:"13px",color:"var(--vsm-gray-mid)",fontWeight:600,marginBottom:"0.5rem"},children:"Stock Total"}),g.jsxs("p",{style:{fontSize:"2rem",fontWeight:800,color:"var(--vsm-brand)",lineHeight:1},children:[p,g.jsx("span",{style:{fontSize:"0.875rem",fontWeight:600,marginLeft:"0.35rem"},children:"uds."})]})]}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",marginTop:"0.2rem"},children:[g.jsx("span",{style:{fontSize:"11px",color:"var(--vsm-gray-mid)"},children:n?"Ocultar":"Ver detalle"}),F(n)]})]}),n&&g.jsx("div",{style:{borderTop:"1px solid var(--vsm-gray)",maxHeight:"400px",overflowY:"auto"},children:P.length===0?g.jsx("p",{style:{padding:"0.75rem 1.5rem",fontSize:"13px",color:"var(--vsm-gray-mid)"},children:"Sin productos"}):P.map(k=>{const Z=y.get(k.id)||[],te=T(Z),H=o.has(k.id),se=b.get(k.id)||new Map,ae=Z.some(w=>!!w.subcategoryId),ge=[];se.forEach((w,C)=>{if(C==="__none__")return;const U=w[0]?.subcategoryName||"Subcategora";ge.push({id:C,name:U,prods:w})});const R=se.get("__none__")||[];return R.length>0&&ae&&ge.push({id:`${k.id}__nosub`,name:"Sin subcategora",prods:R}),g.jsxs("div",{style:{borderBottom:"1px solid var(--vsm-gray)"},children:[g.jsxs("div",{onClick:()=>A(k.id,c),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.6rem 1.5rem",cursor:"pointer",userSelect:"none",backgroundColor:H?"rgba(201,107,43,0.05)":"transparent"},children:[g.jsx("span",{style:{fontSize:"13px",fontWeight:700,color:"var(--vsm-black)"},children:k.name}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[g.jsxs("span",{style:{fontSize:"13px",fontWeight:700,color:"var(--vsm-brand)"},children:[te," uds."]}),F(H)]})]}),H&&g.jsx("div",{children:ae?ge.map(w=>{const C=T(w.prods),U=h.has(w.id);return g.jsxs("div",{children:[g.jsxs("div",{onClick:()=>A(w.id,m),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.45rem 1.5rem 0.45rem 2.75rem",cursor:"pointer",userSelect:"none",backgroundColor:U?"rgba(201,107,43,0.08)":"rgba(201,107,43,0.03)"},children:[g.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:"var(--vsm-gray-mid)"},children:w.name}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[g.jsxs("span",{style:{fontSize:"12px",fontWeight:600,color:"var(--vsm-brand)"},children:[C," uds."]}),F(U)]})]}),U&&w.prods.map(M=>Y(M,"4rem"))]},w.id)}):Z.map(w=>Y(w,"2.75rem"))})]},k.id)})})]})},Ck=()=>{const{data:r,loading:e}=an("products"),{data:n,loading:s}=an("categories"),o=e||s,c=g.jsx("div",{style:{backgroundColor:"var(--vsm-gray)",borderRadius:"var(--vsm-radius)",height:"110px",animation:"pulse 1.5s ease-in-out infinite"}});if(o)return g.jsxs("div",{children:[g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[c,c]}),c]});const h=[{label:"Total Productos",value:r.length,color:"var(--vsm-brand)"},{label:"Total Categoras",value:n.length,color:"var(--vsm-brand)"}];return g.jsxs("div",{children:[g.jsx("h2",{style:{fontWeight:800,fontSize:"1.1rem",color:"var(--vsm-black)",marginBottom:"1.25rem"},children:"Dashboard"}),g.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:h.map(m=>g.jsxs("div",{style:{backgroundColor:"var(--vsm-white)",borderRadius:"var(--vsm-radius)",padding:"1.25rem 1.5rem",borderTop:`3px solid ${m.color}`,boxShadow:"var(--vsm-shadow-sm)"},children:[g.jsx("p",{style:{fontSize:"13px",color:"var(--vsm-gray-mid)",fontWeight:600,marginBottom:"0.5rem"},children:m.label}),g.jsx("p",{style:{fontSize:"2rem",fontWeight:800,color:m.color,lineHeight:1},children:m.value})]},m.label))}),g.jsx(Rk,{products:r,categories:n})]})},Rc=({isOpen:r,onClose:e,children:n,maxWidth:s="560px"})=>(j.useEffect(()=>{if(!r)return;document.body.style.overflow="hidden";const o=c=>{c.key==="Escape"&&e()};return window.addEventListener("keydown",o),()=>{document.body.style.overflow="",window.removeEventListener("keydown",o)}},[r,e]),r?g.jsx("div",{onClick:e,style:{position:"fixed",inset:0,zIndex:50,backgroundColor:"rgba(0,0,0,0.45)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},children:g.jsxs("div",{onClick:o=>o.stopPropagation(),style:{backgroundColor:"var(--vsm-white)",borderRadius:"var(--vsm-radius)",padding:"2rem",width:"100%",maxWidth:s,position:"relative",maxHeight:"90vh",overflowY:"auto"},children:[g.jsx("button",{onClick:e,"aria-label":"Cerrar",style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",cursor:"pointer",fontSize:"1.25rem",color:"var(--vsm-gray-mid)",lineHeight:1,padding:"4px"},children:""}),n]})}):null),IS=()=>()=>{document.dispatchEvent(new MouseEvent("click",{bubbles:!0}))},Ch=5,dE={name:"",description:"",price:"",stock:"",categoryId:"",subcategoryId:"",imageUrl:"",active:!0},fE={position:"absolute",top:-6,right:-6,width:20,height:20,borderRadius:"50%",backgroundColor:"var(--vsm-error)",color:"#fff",border:"none",cursor:"pointer",fontSize:"10px",fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"inherit",lineHeight:1,padding:0},Ik=({isOpen:r,onClose:e,product:n,categories:s,subcategories:o})=>{const c=IS(),[h,m]=j.useState(dE),[p,y]=j.useState([]),[b,T]=j.useState([]),[A,P]=j.useState(""),[F,Y]=j.useState(0),[k,Z]=j.useState(null),[te,H]=j.useState(!1);j.useEffect(()=>{if(r){m(n?{name:n.name,description:n.description,price:n.price,stock:n.stock,categoryId:n.categoryId,subcategoryId:n.subcategoryId??"",imageUrl:n.imageUrl,active:n.active!==!1}:dE);const ce=n?.images?.length?n.images:n?.imageUrl?[n.imageUrl]:[];y(ce),T([]),P(""),Y(ye=>ye+1),Z(null)}},[r,n]);const se=(ce,ye)=>m(K=>({...K,[ce]:ye})),ae=j.useMemo(()=>o.filter(ce=>ce.categoryId===h.categoryId&&ce.active),[o,h.categoryId]),ge=p.length+b.length,R=ge<Ch,w=()=>{const ce=A.trim();!ce||!R||(y(ye=>[...ye,ce]),P(""))},C=ce=>y(ye=>ye.filter((K,oe)=>oe!==ce)),U=ce=>T(ye=>ye.filter((K,oe)=>oe!==ce)),M=ce=>{c();const ye=Array.from(ce.target.files??[]);if(!ye.length)return;const K=Ch-ge;T(oe=>[...oe,...ye.slice(0,K)]),Y(oe=>oe+1)},O=async(ce,ye,K)=>{const oe=ce.name.split(".").pop(),fe=ES(TS,`products/${ye}/image-${Date.now()}-${K}.${oe}`);return await _S(fe,ce),bS(fe)},I=async ce=>{if(ce.preventDefault(),!h.name.trim()){Z("El nombre es obligatorio.");return}H(!0),Z(null);try{const ye=s.find(fe=>fe.id===h.categoryId),K=ae.find(fe=>fe.id===h.subcategoryId),oe={name:h.name.trim(),description:h.description.trim(),price:Number(h.price)||0,stock:Number(h.stock)||0,categoryId:h.categoryId,categoryName:ye?.name??"",subcategoryId:h.subcategoryId||null,subcategoryName:K?.name??null,active:h.active};if(n){const fe=[];for(let N=0;N<b.length;N++)try{fe.push(await O(b[N],n.id,N))}catch{console.warn("Upload failed for file",N)}const Ne=[...p,...fe];if(await Ii(yn(Ge,"products",n.id),{...oe,imageUrl:Ne[0]??"",images:Ne,updatedAt:Si()}),fe.length<b.length){Z("Producto guardado, pero algunas imgenes no pudieron subirse."),H(!1);return}}else{const fe=await ed(Mn(Ge,"products"),{...oe,imageUrl:p[0]??"",images:p,createdAt:Si(),updatedAt:Si()});if(b.length>0){const Ne=[];for(let N=0;N<b.length;N++)try{Ne.push(await O(b[N],fe.id,N))}catch{console.warn("Upload failed for file",N)}if(Ne.length>0){const N=[...p,...Ne];await Ii(yn(Ge,"products",fe.id),{imageUrl:N[0]??"",images:N})}if(Ne.length<b.length){Z("Producto creado, pero algunas imgenes no pudieron subirse."),H(!1);return}}}e()}catch(ye){console.error(ye),Z("Error al guardar. Intenta de nuevo.")}finally{H(!1)}};return g.jsxs(Rc,{isOpen:r,onClose:e,maxWidth:"560px",children:[g.jsx("h3",{style:{fontWeight:800,fontSize:"1.1rem",color:"var(--vsm-black)",marginBottom:"1.25rem"},children:n?"Editar producto":"Nuevo producto"}),g.jsx("form",{onSubmit:I,noValidate:!0,children:g.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[g.jsxs("div",{children:[g.jsxs("label",{style:Nt,children:["Nombre ",g.jsx("span",{style:{color:"var(--vsm-error)"},children:"*"})]}),g.jsx("input",{value:h.name,onChange:ce=>se("name",ce.target.value),style:qt,onFocus:st,onBlur:at})]}),g.jsxs("div",{children:[g.jsx("label",{style:Nt,children:"Descripcin"}),g.jsx("textarea",{value:h.description,onChange:ce=>se("description",ce.target.value),rows:3,style:{...qt,resize:"vertical"},onFocus:st,onBlur:at})]}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[g.jsxs("div",{children:[g.jsx("label",{style:Nt,children:"Precio (COP)"}),g.jsx("input",{type:"number",min:"0",value:h.price,placeholder:"0",onChange:ce=>se("price",ce.target.value===""?"":Number(ce.target.value)),style:qt,onFocus:st,onBlur:at})]}),g.jsxs("div",{children:[g.jsx("label",{style:Nt,children:"Stock"}),g.jsx("input",{type:"number",min:"0",value:h.stock,placeholder:"0",onChange:ce=>se("stock",ce.target.value===""?"":Number(ce.target.value)),style:qt,onFocus:st,onBlur:at})]})]}),g.jsxs("div",{children:[g.jsx("label",{style:Nt,children:"Categora"}),g.jsxs("select",{value:h.categoryId,onChange:ce=>{se("categoryId",ce.target.value),m(ye=>({...ye,categoryId:ce.target.value,subcategoryId:""}))},style:{...qt,cursor:"pointer"},onFocus:st,onBlur:at,children:[g.jsx("option",{value:"",children:"Sin categora"}),s.filter(ce=>ce.active).map(ce=>g.jsx("option",{value:ce.id,children:ce.name},ce.id))]})]}),ae.length>0&&g.jsxs("div",{children:[g.jsx("label",{style:Nt,children:"Subcategora"}),g.jsxs("select",{value:h.subcategoryId,onChange:ce=>se("subcategoryId",ce.target.value),style:{...qt,cursor:"pointer"},onFocus:st,onBlur:at,children:[g.jsx("option",{value:"",children:"Sin subcategora"}),ae.map(ce=>g.jsx("option",{value:ce.id,children:ce.name},ce.id))]})]}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.6rem"},children:[g.jsx("input",{id:"product-active",type:"checkbox",checked:h.active,onChange:ce=>m(ye=>({...ye,active:ce.target.checked})),style:{width:16,height:16,cursor:"pointer",accentColor:"var(--vsm-brand)"}}),g.jsx("label",{htmlFor:"product-active",style:{...Nt,margin:0,cursor:"pointer",fontWeight:600},children:"Producto activo (visible en el catlogo)"})]}),g.jsxs("div",{children:[g.jsxs("label",{style:Nt,children:["Imgenes"," ",g.jsxs("span",{style:{color:"var(--vsm-gray-mid)",fontWeight:400},children:["(",ge,"/",Ch,")  la primera es la principal"]})]}),ge>0&&g.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px",marginBottom:"0.75rem"},children:[p.map((ce,ye)=>g.jsxs("div",{style:{position:"relative",width:72,height:72,flexShrink:0},children:[g.jsx("img",{src:ce,alt:`Imagen ${ye+1}`,style:{width:72,height:72,objectFit:"cover",borderRadius:"var(--vsm-radius-sm)",border:ye===0?"2px solid var(--vsm-brand)":"1px solid var(--vsm-gray)"}}),ye===0&&g.jsx("span",{style:{position:"absolute",bottom:3,left:3,backgroundColor:"var(--vsm-brand)",color:"#fff",fontSize:"9px",fontWeight:700,padding:"1px 5px",borderRadius:"2px"},children:"Principal"}),g.jsx("button",{type:"button",onClick:()=>C(ye),style:fE,children:""})]},ye)),b.map((ce,ye)=>g.jsxs("div",{style:{position:"relative",width:72,height:72,flexShrink:0},children:[g.jsx("img",{src:URL.createObjectURL(ce),alt:ce.name,style:{width:72,height:72,objectFit:"cover",borderRadius:"var(--vsm-radius-sm)",border:"2px dashed var(--vsm-brand)"}}),g.jsx("span",{style:{position:"absolute",bottom:3,left:3,backgroundColor:"#F5A623",color:"#fff",fontSize:"9px",fontWeight:700,padding:"1px 5px",borderRadius:"2px"},children:"Por subir"}),g.jsx("button",{type:"button",onClick:()=>U(ye),style:fE,children:""})]},`p-${ye}`))]}),R&&g.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:[g.jsx("input",{value:A,onChange:ce=>P(ce.target.value),onKeyDown:ce=>{ce.key==="Enter"&&(ce.preventDefault(),w())},placeholder:"https://... pegar URL de imagen",style:{...qt,flex:1},onFocus:st,onBlur:at}),g.jsx("button",{type:"button",onClick:w,disabled:!A.trim(),style:{padding:"9px 14px",borderRadius:"var(--vsm-radius-sm)",border:"none",backgroundColor:A.trim()?"var(--vsm-brand)":"var(--vsm-gray)",color:"#fff",fontSize:"12px",fontWeight:700,cursor:A.trim()?"pointer":"not-allowed",fontFamily:"inherit",whiteSpace:"nowrap"},children:"+ URL"})]}),R&&g.jsxs("div",{children:[g.jsx("p",{style:{fontSize:"11px",color:"var(--vsm-gray-mid)",marginBottom:"4px"},children:"O subir archivo(s):"}),g.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:M,style:{fontSize:"13px",color:"var(--vsm-gray-mid)"}},F)]}),!R&&g.jsxs("p",{style:{fontSize:"12px",color:"var(--vsm-gray-mid)",marginTop:"4px"},children:["Mximo de ",Ch," imgenes alcanzado."]})]}),k&&g.jsx("div",{style:Md,children:g.jsx("p",{style:Pd,children:k})}),g.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end",paddingTop:"0.5rem"},children:[g.jsx("button",{type:"button",onClick:e,disabled:te,style:{padding:"9px 20px",borderRadius:"var(--vsm-radius-sm)",border:"1px solid var(--vsm-gray)",backgroundColor:"var(--vsm-white)",color:"var(--vsm-gray-mid)",fontSize:"13px",fontWeight:600,cursor:"pointer",fontFamily:"inherit"},children:"Cancelar"}),g.jsx("button",{type:"submit",disabled:te,style:{padding:"9px 20px",borderRadius:"var(--vsm-radius-sm)",border:"none",backgroundColor:"var(--vsm-brand)",color:"#fff",fontSize:"13px",fontWeight:700,cursor:te?"not-allowed":"pointer",opacity:te?.75:1,fontFamily:"inherit"},children:te?"Guardando...":"Guardar"})]})]})})]})};async function mE(r){const[e,n]=await Promise.all([Us(Vs(Mn(Ge,"subcategories"),Xt("categoryId","==",r),Xt("active","==",!0))),Us(Vs(Mn(Ge,"products"),Xt("categoryId","==",r),Xt("active","==",!0)))]);return{activeSubcategories:e.docs.map(s=>({id:s.id,...s.data()})),activeProducts:n.docs.map(s=>({id:s.id,...s.data()}))}}async function Dk(r){await Ii(yn(Ge,"categories",r),{active:!1})}async function pE(r,e){const n=Og(Ge);n.update(yn(Ge,"categories",r),{active:!e}),e&&(await Us(Vs(Mn(Ge,"subcategories"),Xt("categoryId","==",r)))).docs.forEach(o=>n.update(o.ref,{active:!1})),await n.commit()}async function Nk(r,e){const n=Og(Ge);n.update(yn(Ge,"categories",r),{name:e,updatedAt:Si()});const[s,o]=await Promise.all([Us(Vs(Mn(Ge,"subcategories"),Xt("categoryId","==",r))),Us(Vs(Mn(Ge,"products"),Xt("categoryId","==",r)))]);s.docs.forEach(c=>n.update(c.ref,{categoryName:e})),o.docs.forEach(c=>n.update(c.ref,{categoryName:e})),await n.commit()}async function Ok(r){return{activeProducts:(await Us(Vs(Mn(Ge,"products"),Xt("subcategoryId","==",r),Xt("active","==",!0)))).docs.map(n=>({id:n.id,...n.data()}))}}async function kk(r){await Ii(yn(Ge,"subcategories",r),{active:!1})}async function Mk(r,e){await Ii(yn(Ge,"subcategories",r),{active:!e})}async function Pk(r,e){const n=Og(Ge);n.update(yn(Ge,"subcategories",r),{name:e,updatedAt:Si()}),(await Us(Vs(Mn(Ge,"products"),Xt("subcategoryId","==",r)))).docs.forEach(o=>n.update(o.ref,{subcategoryName:e})),await n.commit()}const jp=({isOpen:r,onClose:e,onConfirm:n,title:s,message:o,loading:c})=>g.jsxs(Rc,{isOpen:r,onClose:e,maxWidth:"420px",children:[g.jsx("h3",{style:{fontWeight:800,fontSize:"1.1rem",color:"var(--vsm-black)",marginBottom:"0.75rem"},children:s}),g.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"14px",marginBottom:"1.5rem",lineHeight:1.6},children:o}),g.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[g.jsx("button",{onClick:e,disabled:c,style:{padding:"9px 20px",borderRadius:"var(--vsm-radius-sm)",border:"1px solid var(--vsm-gray)",backgroundColor:"var(--vsm-white)",color:"var(--vsm-gray-mid)",fontSize:"13px",fontWeight:600,cursor:c?"not-allowed":"pointer",fontFamily:"inherit"},children:"Cancelar"}),g.jsx("button",{onClick:n,disabled:c,style:{padding:"9px 20px",borderRadius:"var(--vsm-radius-sm)",border:"none",backgroundColor:"var(--vsm-error)",color:"#fff",fontSize:"13px",fontWeight:700,cursor:c?"not-allowed":"pointer",opacity:c?.75:1,fontFamily:"inherit"},children:c?"Eliminando...":"Eliminar"})]})]}),Vp=({active:r,onChange:e,disabled:n})=>g.jsx("button",{type:"button",onClick:e,disabled:n,"aria-label":r?"Desactivar":"Activar",style:{width:36,height:20,borderRadius:10,border:"none",backgroundColor:r?"var(--vsm-brand)":"var(--vsm-gray)",position:"relative",cursor:n?"not-allowed":"pointer",flexShrink:0,transition:"background-color 0.2s",opacity:n?.6:1,padding:0},children:g.jsx("span",{style:{position:"absolute",top:2,left:r?18:2,width:16,height:16,borderRadius:"50%",backgroundColor:"#fff",transition:"left 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.25)"}})}),ys={padding:"7px 10px",border:"1px solid var(--vsm-gray)",borderRadius:"var(--vsm-radius-sm)",fontSize:"13px",fontFamily:"inherit",outline:"none",flex:1,color:"var(--vsm-black)",backgroundColor:"var(--vsm-white)"},In={padding:"5px 12px",borderRadius:"4px",border:"none",fontSize:"12px",fontWeight:600,cursor:"pointer",fontFamily:"inherit",whiteSpace:"nowrap"},jk=()=>{const{data:r}=an("categories",kb("createdAt","asc")),{data:e}=an("subcategories",kb("createdAt","asc")),{data:n}=an("products"),s=j.useMemo(()=>{const X=new Map;for(const _e of e)X.has(_e.categoryId)||X.set(_e.categoryId,[]),X.get(_e.categoryId).push(_e);return X},[e]),o=j.useMemo(()=>{const X=new Map;for(const _e of e)_e.active&&X.set(_e.categoryId,(X.get(_e.categoryId)??0)+1);return X},[e]),c=j.useMemo(()=>{const X=new Map;for(const _e of n)_e.active!==!1&&X.set(_e.categoryId,(X.get(_e.categoryId)??0)+1);return X},[n]),h=j.useMemo(()=>{const X=new Map;for(const _e of n)_e.active!==!1&&_e.subcategoryId&&X.set(_e.subcategoryId,(X.get(_e.subcategoryId)??0)+1);return X},[n]),[m,p]=j.useState(""),[y,b]=j.useState(""),[T,A]=j.useState(null),[P,F]=j.useState(!1),Y=async()=>{const X=m.trim();if(!X){A("El nombre no puede estar vaco.");return}if(r.some(_e=>_e.name.toLowerCase()===X.toLowerCase())){A("Ya existe una categora con ese nombre.");return}F(!0),A(null);try{await ed(Mn(Ge,"categories"),{name:X,description:y.trim(),active:!0,createdAt:Si()}),p(""),b("")}catch{A("Error al agregar. Intenta de nuevo.")}finally{F(!1)}},[k,Z]=j.useState(null),[te,H]=j.useState(""),[se,ae]=j.useState(""),[ge,R]=j.useState(null),[w,C]=j.useState(!1),U=X=>{Z(X.id),H(X.name),ae(X.description??""),R(null)},M=async X=>{const _e=te.trim();if(!_e){R("El nombre no puede estar vaco.");return}if(r.some(Je=>Je.id!==X.id&&Je.name.toLowerCase()===_e.toLowerCase())){R("Ya existe una categora con ese nombre.");return}C(!0),R(null);try{_e!==X.name&&await Nk(X.id,_e),se.trim()!==(X.description??"")&&await Ii(yn(Ge,"categories",X.id),{description:se.trim()}),Z(null)}catch{R("Error al guardar.")}finally{C(!1)}},[O,I]=j.useState(null),[ce,ye]=j.useState(!1),[K,oe]=j.useState(null),fe=async X=>{const _e=await mE(X.id);_e.activeSubcategories.length>0||_e.activeProducts.length>0?oe({cat:X,subCount:_e.activeSubcategories.length,prodCount:_e.activeProducts.length}):I(X)},Ne=async()=>{if(O){ye(!0);try{await Dk(O.id),I(null)}catch{}finally{ye(!1)}}},[N,ie]=j.useState(null),[de,ue]=j.useState(null),ve=async X=>{if(X.active){const _e=await mE(X.id);if(_e.activeSubcategories.length>0||_e.activeProducts.length>0){ie({cat:X,subCount:_e.activeSubcategories.length,prodCount:_e.activeProducts.length});return}}ue(X.id);try{await pE(X.id,X.active)}catch{}finally{ue(null)}},Me=async()=>{if(!N)return;const{cat:X}=N;ie(null),ue(X.id);try{await pE(X.id,X.active)}catch{}finally{ue(null)}},[Se,Ut]=j.useState(null),[We,xn]=j.useState({}),[Pi,$r]=j.useState({}),[Zr,Pn]=j.useState({}),[lr,Ka]=j.useState({}),ji=async X=>{const _e=(We[X.id]??"").trim();if(!_e){Pn(Ye=>({...Ye,[X.id]:"El nombre no puede estar vaco."}));return}if((s.get(X.id)??[]).some(Ye=>Ye.name.toLowerCase()===_e.toLowerCase())){Pn(Ye=>({...Ye,[X.id]:"Ya existe una subcategora con ese nombre."}));return}Ka(Ye=>({...Ye,[X.id]:!0})),Pn(Ye=>({...Ye,[X.id]:""}));try{await ed(Mn(Ge,"subcategories"),{name:_e,description:(Pi[X.id]??"").trim(),categoryId:X.id,categoryName:X.name,active:!0,createdAt:Si()}),xn(Ye=>({...Ye,[X.id]:""})),$r(Ye=>({...Ye,[X.id]:""}))}catch{Pn(Ye=>({...Ye,[X.id]:"Error al agregar."}))}finally{Ka(Ye=>({...Ye,[X.id]:!1}))}},[ln,Vi]=j.useState(null),[vt,xt]=j.useState(""),[jn,Qa]=j.useState(""),[Ui,xr]=j.useState(null),[Yn,cr]=j.useState(!1),Ht=X=>{Vi(X.id),xt(X.name),Qa(X.description??""),xr(null)},vn=async X=>{const _e=vt.trim();if(!_e){xr("El nombre no puede estar vaco.");return}if((s.get(X.categoryId)??[]).some(Ye=>Ye.id!==X.id&&Ye.name.toLowerCase()===_e.toLowerCase())){xr("Ya existe una subcategora con ese nombre.");return}cr(!0),xr(null);try{_e!==X.name&&await Pk(X.id,_e),jn.trim()!==(X.description??"")&&await Ii(yn(Ge,"subcategories",X.id),{description:jn.trim()}),Vi(null)}catch{xr("Error al guardar.")}finally{cr(!1)}},[Ot,Gs]=j.useState(null),[Ya,Ws]=j.useState(!1),[$t,Xn]=j.useState(null),Vn=async X=>{const _e=await Ok(X.id);_e.activeProducts.length>0?Xn({sub:X,prodCount:_e.activeProducts.length}):Gs(X)},wn=async()=>{if(Ot){Ws(!0);try{await kk(Ot.id),Gs(null)}catch{}finally{Ws(!1)}}},[wr,Jr]=j.useState(null),Ks=async X=>{Jr(X.id);try{await Mk(X.id,X.active)}catch{}finally{Jr(null)}};return g.jsxs("div",{children:[g.jsx("h3",{style:{fontWeight:700,fontSize:"1rem",color:"var(--vsm-black)",marginBottom:"1.25rem"},children:"Categoras"}),g.jsxs("div",{style:{backgroundColor:"var(--vsm-bg)",borderRadius:"6px",padding:"1rem",marginBottom:"1.5rem",border:"1px solid var(--vsm-gray)"},children:[g.jsx("p",{style:{fontSize:"12px",fontWeight:700,color:"var(--vsm-gray-mid)",marginBottom:"0.6rem"},children:"Nueva categora"}),g.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[g.jsx("input",{value:m,onChange:X=>{p(X.target.value),A(null)},onKeyDown:X=>{X.key==="Enter"&&Y()},placeholder:"Nombre *",style:{...ys,minWidth:160},onFocus:st,onBlur:at}),g.jsx("input",{value:y,onChange:X=>b(X.target.value),placeholder:"Descripcin (opcional)",style:{...ys,minWidth:200},onFocus:st,onBlur:at}),g.jsx("button",{onClick:Y,disabled:P,style:{...In,backgroundColor:"var(--vsm-brand)",color:"#fff",padding:"7px 16px",opacity:P?.75:1,cursor:P?"not-allowed":"pointer"},children:P?"Agregando...":"Agregar"})]}),T&&g.jsx("p",{style:{color:"var(--vsm-error)",fontSize:"12px",marginTop:"0.4rem"},children:T})]}),r.length===0?g.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"13px"},children:"No hay categoras an."}):g.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:r.map(X=>{const _e=Se===X.id,Je=k===X.id,Ye=s.get(X.id)??[],Ar=Ye.length,Rr=o.get(X.id)??0,Qs=c.get(X.id)??0;return g.jsxs("div",{style:{border:"1px solid var(--vsm-gray)",borderRadius:"6px",overflow:"hidden",opacity:X.active?1:.65},children:[g.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.6rem",padding:"10px 12px",backgroundColor:"var(--vsm-white)"},children:Je?g.jsxs(g.Fragment,{children:[g.jsx("input",{value:te,onChange:Be=>{H(Be.target.value),R(null)},onKeyDown:Be=>{Be.key==="Enter"&&M(X)},style:{...ys,maxWidth:200},onFocus:st,onBlur:at,autoFocus:!0}),g.jsx("input",{value:se,onChange:Be=>ae(Be.target.value),placeholder:"Descripcin",style:{...ys,maxWidth:220},onFocus:st,onBlur:at}),ge&&g.jsx("span",{style:{color:"var(--vsm-error)",fontSize:"11px"},children:ge}),g.jsx("button",{onClick:()=>M(X),disabled:w,style:{...In,backgroundColor:"var(--vsm-brand)",color:"#fff",opacity:w?.75:1,cursor:w?"not-allowed":"pointer"},children:w?"...":"Guardar"}),g.jsx("button",{onClick:()=>Z(null),style:{...In,border:"1px solid var(--vsm-gray)",color:"var(--vsm-gray-mid)",backgroundColor:"transparent",cursor:"pointer"},children:"Cancelar"})]}):g.jsxs(g.Fragment,{children:[g.jsx("button",{type:"button",onClick:()=>Ut(_e?null:X.id),style:{background:"none",border:"none",cursor:"pointer",padding:"2px 4px",fontSize:"12px",color:"var(--vsm-gray-mid)"},title:_e?"Colapsar":"Expandir subcategoras",children:_e?"":""}),g.jsxs("div",{style:{flex:1,minWidth:0},children:[g.jsx("span",{style:{fontSize:"14px",fontWeight:600,color:"var(--vsm-black)"},children:X.name}),X.description&&g.jsx("span",{style:{fontSize:"11px",color:"var(--vsm-gray-mid)",marginLeft:"8px"},children:X.description})]}),g.jsxs("span",{style:{fontSize:"11px",color:"var(--vsm-gray-mid)",whiteSpace:"nowrap"},children:[Rr,"/",Ar," subs  ",Qs," prods"]}),g.jsx(Vp,{active:X.active,onChange:()=>ve(X),disabled:de===X.id}),g.jsx("button",{onClick:()=>U(X),style:{...In,border:"1px solid var(--vsm-gray)",color:"var(--vsm-gray-mid)",backgroundColor:"transparent",cursor:"pointer"},children:"Editar"}),g.jsx("button",{onClick:()=>fe(X),style:{...In,backgroundColor:"var(--vsm-error-bg)",color:"var(--vsm-error)",border:"1px solid var(--vsm-error-border)",cursor:"pointer"},children:"Eliminar"})]})}),_e&&g.jsxs("div",{style:{borderTop:"1px solid var(--vsm-gray)",backgroundColor:"var(--vsm-bg)",padding:"0.75rem 1rem"},children:[Ye.length===0?g.jsx("p",{style:{fontSize:"12px",color:"var(--vsm-gray-mid)",marginBottom:"0.75rem"},children:"Sin subcategoras."}):g.jsx("div",{style:{overflowX:"auto",marginBottom:"0.75rem"},children:g.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[g.jsx("thead",{children:g.jsx("tr",{style:{borderBottom:"1px solid var(--vsm-gray)"},children:["Nombre","Descripcin","Prods activos","Activo","Acciones"].map(Be=>g.jsx("th",{style:{textAlign:"left",padding:"5px 8px",fontWeight:700,color:"var(--vsm-gray-mid)",whiteSpace:"nowrap"},children:Be},Be))})}),g.jsx("tbody",{children:Ye.map(Be=>{const Zt=ln===Be.id,ll=h.get(Be.id)??0;return g.jsx("tr",{style:{borderBottom:"1px solid var(--vsm-gray)",opacity:Be.active?1:.6},children:Zt?g.jsx("td",{colSpan:5,style:{padding:"6px 8px"},children:g.jsxs("div",{style:{display:"flex",gap:"0.4rem",flexWrap:"wrap",alignItems:"center"},children:[g.jsx("input",{value:vt,onChange:cn=>{xt(cn.target.value),xr(null)},onKeyDown:cn=>{cn.key==="Enter"&&vn(Be)},placeholder:"Nombre",style:{...ys,maxWidth:180},onFocus:st,onBlur:at,autoFocus:!0}),g.jsx("input",{value:jn,onChange:cn=>Qa(cn.target.value),placeholder:"Descripcin",style:{...ys,maxWidth:200},onFocus:st,onBlur:at}),Ui&&g.jsx("span",{style:{color:"var(--vsm-error)",fontSize:"11px"},children:Ui}),g.jsx("button",{onClick:()=>vn(Be),disabled:Yn,style:{...In,backgroundColor:"var(--vsm-brand)",color:"#fff",opacity:Yn?.75:1,cursor:Yn?"not-allowed":"pointer"},children:Yn?"...":"Guardar"}),g.jsx("button",{onClick:()=>Vi(null),style:{...In,border:"1px solid var(--vsm-gray)",color:"var(--vsm-gray-mid)",backgroundColor:"transparent",cursor:"pointer"},children:"Cancelar"})]})}):g.jsxs(g.Fragment,{children:[g.jsx("td",{style:{padding:"6px 8px",fontWeight:600,color:"var(--vsm-black)"},children:Be.name}),g.jsx("td",{style:{padding:"6px 8px",color:"var(--vsm-gray-mid)"},children:Be.description??""}),g.jsx("td",{style:{padding:"6px 8px",color:"var(--vsm-gray-mid)"},children:ll}),g.jsx("td",{style:{padding:"6px 8px"},children:g.jsx(Vp,{active:Be.active,onChange:()=>Ks(Be),disabled:wr===Be.id})}),g.jsx("td",{style:{padding:"6px 8px"},children:g.jsxs("div",{style:{display:"flex",gap:"0.3rem"},children:[g.jsx("button",{onClick:()=>Ht(Be),style:{...In,border:"1px solid var(--vsm-gray)",color:"var(--vsm-gray-mid)",backgroundColor:"transparent",cursor:"pointer",padding:"3px 8px"},children:"Editar"}),g.jsx("button",{onClick:()=>Vn(Be),style:{...In,backgroundColor:"var(--vsm-error-bg)",color:"var(--vsm-error)",border:"1px solid var(--vsm-error-border)",cursor:"pointer",padding:"3px 8px"},children:"Eliminar"})]})})]})},Be.id)})})]})}),g.jsxs("div",{style:{borderTop:"1px dashed var(--vsm-gray)",paddingTop:"0.6rem"},children:[g.jsx("p",{style:{fontSize:"11px",fontWeight:700,color:"var(--vsm-gray-mid)",marginBottom:"0.4rem"},children:"Nueva subcategora"}),g.jsxs("div",{style:{display:"flex",gap:"0.4rem",flexWrap:"wrap"},children:[g.jsx("input",{value:We[X.id]??"",onChange:Be=>{xn(Zt=>({...Zt,[X.id]:Be.target.value})),Pn(Zt=>({...Zt,[X.id]:""}))},onKeyDown:Be=>{Be.key==="Enter"&&ji(X)},placeholder:"Nombre *",style:{...ys,maxWidth:180,fontSize:"12px",padding:"5px 8px"},onFocus:st,onBlur:at}),g.jsx("input",{value:Pi[X.id]??"",onChange:Be=>$r(Zt=>({...Zt,[X.id]:Be.target.value})),placeholder:"Descripcin (opcional)",style:{...ys,maxWidth:220,fontSize:"12px",padding:"5px 8px"},onFocus:st,onBlur:at}),g.jsx("button",{onClick:()=>ji(X),disabled:lr[X.id],style:{...In,backgroundColor:"var(--vsm-brand)",color:"#fff",padding:"5px 14px",fontSize:"12px",opacity:lr[X.id]?.75:1,cursor:lr[X.id]?"not-allowed":"pointer"},children:lr[X.id]?"...":"Agregar"})]}),Zr[X.id]&&g.jsx("p",{style:{color:"var(--vsm-error)",fontSize:"11px",marginTop:"0.3rem"},children:Zr[X.id]})]})]})]},X.id)})}),g.jsx(Rc,{isOpen:!!K,onClose:()=>oe(null),maxWidth:"420px",children:K&&g.jsxs("div",{children:[g.jsxs("h4",{style:{fontWeight:700,fontSize:"1rem",marginBottom:"0.75rem",color:"var(--vsm-black)"},children:['No se puede eliminar "',K.cat.name,'"']}),g.jsx("p",{style:{fontSize:"13px",color:"var(--vsm-gray-mid)",marginBottom:"0.5rem"},children:"Esta categora tiene dependencias activas:"}),g.jsxs("ul",{style:{fontSize:"13px",color:"var(--vsm-black)",paddingLeft:"1.25rem",marginBottom:"1rem"},children:[K.subCount>0&&g.jsxs("li",{children:[K.subCount," subcategora",K.subCount>1?"s":""," activa",K.subCount>1?"s":""]}),K.prodCount>0&&g.jsxs("li",{children:[K.prodCount," producto",K.prodCount>1?"s":""," activo",K.prodCount>1?"s":""]})]}),g.jsx("p",{style:{fontSize:"12px",color:"var(--vsm-gray-mid)"},children:"Desactiva o reasigna los productos y subcategoras antes de eliminar la categora."}),g.jsx("div",{style:{textAlign:"right",marginTop:"1.25rem"},children:g.jsx("button",{onClick:()=>oe(null),style:{...In,border:"1px solid var(--vsm-gray)",color:"var(--vsm-gray-mid)",backgroundColor:"transparent",cursor:"pointer",padding:"7px 18px"},children:"Entendido"})})]})}),g.jsx(jp,{isOpen:!!O,onClose:()=>I(null),onConfirm:Ne,title:"Eliminar categora",message:`Marcar "${O?.name}" como eliminada? Esta accin ocultar la categora del catlogo.`,loading:ce}),g.jsx(Rc,{isOpen:!!N,onClose:()=>ie(null),maxWidth:"420px",children:N&&g.jsxs("div",{children:[g.jsxs("h4",{style:{fontWeight:700,fontSize:"1rem",marginBottom:"0.75rem",color:"var(--vsm-black)"},children:['Desactivar "',N.cat.name,'"']}),g.jsx("p",{style:{fontSize:"13px",color:"var(--vsm-gray-mid)",marginBottom:"0.5rem"},children:"Al desactivar esta categora tambin se desactivarn:"}),g.jsxs("ul",{style:{fontSize:"13px",color:"var(--vsm-black)",paddingLeft:"1.25rem",marginBottom:"1rem"},children:[N.subCount>0&&g.jsxs("li",{children:[N.subCount," subcategora",N.subCount>1?"s":""," activa",N.subCount>1?"s":""]}),N.prodCount>0&&g.jsxs("li",{children:[N.prodCount," producto",N.prodCount>1?"s":""," activo",N.prodCount>1?"s":""," (no se desactivan automticamente)"]})]}),g.jsx("p",{style:{fontSize:"12px",color:"var(--vsm-gray-mid)",marginBottom:"1rem"},children:"Continuar?"}),g.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[g.jsx("button",{onClick:()=>ie(null),style:{...In,border:"1px solid var(--vsm-gray)",color:"var(--vsm-gray-mid)",backgroundColor:"transparent",cursor:"pointer",padding:"7px 18px"},children:"Cancelar"}),g.jsx("button",{onClick:Me,style:{...In,backgroundColor:"var(--vsm-brand)",color:"#fff",cursor:"pointer",padding:"7px 18px"},children:"Desactivar"})]})]})}),g.jsx(Rc,{isOpen:!!$t,onClose:()=>Xn(null),maxWidth:"400px",children:$t&&g.jsxs("div",{children:[g.jsxs("h4",{style:{fontWeight:700,fontSize:"1rem",marginBottom:"0.75rem",color:"var(--vsm-black)"},children:['No se puede eliminar "',$t.sub.name,'"']}),g.jsxs("p",{style:{fontSize:"13px",color:"var(--vsm-gray-mid)",marginBottom:"0.5rem"},children:["Esta subcategora tiene ",$t.prodCount," producto",$t.prodCount>1?"s":""," activo",$t.prodCount>1?"s":"","."]}),g.jsx("p",{style:{fontSize:"12px",color:"var(--vsm-gray-mid)"},children:"Desactiva o reasigna los productos antes de eliminar la subcategora."}),g.jsx("div",{style:{textAlign:"right",marginTop:"1.25rem"},children:g.jsx("button",{onClick:()=>Xn(null),style:{...In,border:"1px solid var(--vsm-gray)",color:"var(--vsm-gray-mid)",backgroundColor:"transparent",cursor:"pointer",padding:"7px 18px"},children:"Entendido"})})]})}),g.jsx(jp,{isOpen:!!Ot,onClose:()=>Gs(null),onConfirm:wn,title:"Eliminar subcategora",message:`Marcar "${Ot?.name}" como eliminada? Esta accin ocultar la subcategora del catlogo.`,loading:Ya})]})},np=10,Vk=()=>{const{data:r}=an("products"),{data:e}=an("categories"),{data:n}=an("subcategories"),[s,o]=j.useState("productos"),[c,h]=j.useState(1);j.useEffect(()=>{h(1)},[r]);const[m,p]=j.useState(!1),[y,b]=j.useState(),[T,A]=j.useState(null),[P,F]=j.useState(!1),[Y,k]=j.useState(null),Z=j.useMemo(()=>new Map(e.map(O=>[O.id,O.name])),[e]),te=j.useMemo(()=>new Map(n.map(O=>[O.id,O.name])),[n]),H=O=>Z.get(O)??"",se=O=>O?te.get(O)??"":"",ae=Math.max(1,Math.ceil(r.length/np)),ge=r.slice((c-1)*np,c*np),R=async()=>{if(T){F(!0);try{await Ii(yn(Ge,"products",T.id),{active:!1}),A(null)}catch{}finally{F(!1)}}},w=async O=>{k(O.id);try{await Ii(yn(Ge,"products",O.id),{active:O.active===!1})}catch{}finally{k(null)}},C=()=>{b(void 0),p(!0)},U=O=>{b(O),p(!0)},M=O=>({padding:"7px 18px",border:"none",borderBottom:O?"2px solid var(--vsm-brand)":"2px solid transparent",backgroundColor:"transparent",color:O?"var(--vsm-brand)":"var(--vsm-gray-mid)",fontWeight:O?700:600,fontSize:"13px",cursor:"pointer",fontFamily:"inherit"});return g.jsxs("div",{children:[g.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[g.jsx("h2",{style:{fontWeight:800,fontSize:"1.1rem",color:"var(--vsm-black)"},children:"Productos"}),s==="productos"&&g.jsx("button",{onClick:C,style:{backgroundColor:"var(--vsm-brand)",color:"#fff",border:"none",borderRadius:"5px",padding:"8px 18px",fontSize:"13px",fontWeight:700,cursor:"pointer",fontFamily:"inherit"},children:"+ Nuevo Producto"})]}),g.jsxs("div",{style:{borderBottom:"1px solid var(--vsm-gray)",marginBottom:"1.25rem",display:"flex"},children:[g.jsx("button",{style:M(s==="productos"),onClick:()=>o("productos"),children:"Productos"}),g.jsx("button",{style:M(s==="categorias"),onClick:()=>o("categorias"),children:"Categoras"})]}),s==="categorias"?g.jsx(jk,{}):g.jsxs(g.Fragment,{children:[r.length===0?g.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"13px"},children:"No hay productos an. Crea el primero."}):g.jsxs(g.Fragment,{children:[g.jsx("div",{style:{overflowX:"auto"},children:g.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[g.jsx("thead",{children:g.jsx("tr",{style:{borderBottom:"2px solid var(--vsm-gray)"},children:["Imagen","Nombre","Categora","Subcategora","Precio","Stock","Activo","Acciones"].map(O=>g.jsx("th",{style:{textAlign:"left",padding:"8px 10px",fontWeight:700,color:"var(--vsm-gray-mid)",whiteSpace:"nowrap"},children:O},O))})}),g.jsx("tbody",{children:ge.map(O=>{const I=O.active!==!1;return g.jsxs("tr",{style:{borderBottom:"1px solid var(--vsm-gray)",opacity:I?1:.55},children:[g.jsx("td",{style:{padding:"8px 10px"},children:O.imageUrl?g.jsx("img",{src:O.imageUrl,alt:O.name,style:{width:48,height:48,objectFit:"cover",borderRadius:"4px",border:"1px solid var(--vsm-gray)"}}):g.jsx("span",{style:{fontSize:"1.5rem"},children:""})}),g.jsx("td",{style:{padding:"8px 10px",fontWeight:600,color:"var(--vsm-black)"},children:O.name}),g.jsx("td",{style:{padding:"8px 10px",color:"var(--vsm-gray-mid)"},children:H(O.categoryId)}),g.jsx("td",{style:{padding:"8px 10px",color:"var(--vsm-gray-mid)"},children:se(O.subcategoryId)}),g.jsx("td",{style:{padding:"8px 10px",color:"var(--vsm-black)"},children:Kg(O.price)}),g.jsx("td",{style:{padding:"8px 10px",fontWeight:O.stock===0?700:400,color:O.stock===0?"var(--vsm-error)":"var(--vsm-black)"},children:O.stock}),g.jsx("td",{style:{padding:"8px 10px"},children:g.jsx(Vp,{active:I,onChange:()=>w(O),disabled:Y===O.id})}),g.jsx("td",{style:{padding:"8px 10px"},children:g.jsxs("div",{style:{display:"flex",gap:"0.4rem"},children:[g.jsx("button",{onClick:()=>U(O),style:gE("var(--vsm-gray)","var(--vsm-black)"),children:"Editar"}),g.jsx("button",{onClick:()=>A(O),style:gE("var(--vsm-error-bg)","var(--vsm-error)"),children:"Desactivar"})]})})]},O.id)})})]})}),ae>1&&g.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"1rem",alignItems:"center"},children:[g.jsx("button",{onClick:()=>h(O=>Math.max(1,O-1)),disabled:c===1,style:yE(c===1),children:" Ant"}),g.jsxs("span",{style:{fontSize:"12px",color:"var(--vsm-gray-mid)"},children:["Pg ",c," / ",ae]}),g.jsx("button",{onClick:()=>h(O=>Math.min(ae,O+1)),disabled:c===ae,style:yE(c===ae),children:"Sig "})]})]}),g.jsx(Ik,{isOpen:m,onClose:()=>p(!1),product:y,categories:e,subcategories:n}),g.jsx(jp,{isOpen:!!T,onClose:()=>A(null),onConfirm:R,title:"Desactivar producto",message:`"${T?.name}" dejar de aparecer en el catlogo. Puedes reactivarlo desde la columna Activo.`,loading:P})]})]})},gE=(r,e)=>({padding:"4px 10px",borderRadius:"4px",border:"none",backgroundColor:r,color:e,fontSize:"12px",fontWeight:600,cursor:"pointer",fontFamily:"inherit"}),yE=r=>({padding:"5px 12px",borderRadius:"4px",border:"1px solid var(--vsm-gray)",backgroundColor:r?"var(--vsm-gray)":"var(--vsm-white)",color:r?"var(--vsm-gray-mid)":"var(--vsm-black)",fontSize:"12px",fontWeight:600,cursor:r?"not-allowed":"pointer",fontFamily:"inherit"}),DS=yn(Ge,"settings","general");async function Uk(){const r=await _T(DS);return r.exists()?r.data():null}async function Lk(r){const e=r.name.split(".").pop(),n=ES(TS,`logos/store-logo.${e}`);return await _S(n,r),bS(n)}async function zk(r,e){await uD(DS,{...r,logoUrl:e,updatedAt:Si()},{merge:!0})}const vE={storeName:"",description:"",email:"",phone:"",address:"",social:{instagram:"",facebook:"",whatsapp:"",tiktok:""}},Bk=()=>{const r=IS(),[e,n]=j.useState(vE),[s,o]=j.useState(""),[c,h]=j.useState(null),[m,p]=j.useState(null),[y,b]=j.useState(0),[T,A]=j.useState(!1),[P,F]=j.useState(!0),[Y,k]=j.useState(!1),[Z,te]=j.useState(null);j.useEffect(()=>{Uk().then(R=>{R&&(n({storeName:R.storeName??"",description:R.description??"",email:R.email??"",phone:R.phone??"",address:R.address??"",social:R.social??vE.social}),o(R.logoUrl??"")),F(!1)}).catch(()=>F(!1))},[]);const H=(R,w)=>n(C=>({...C,[R]:w})),se=(R,w)=>n(C=>({...C,social:{...C.social,[R]:w}})),ae=R=>{r();const w=R.target.files?.[0];w&&(h(w),p(URL.createObjectURL(w)))},ge=async R=>{R.preventDefault(),A(!0),te(null),k(!1);try{let w=s;c&&(w=await Lk(c),o(w),h(null),p(null),b(C=>C+1)),await zk(e,w),k(!0),setTimeout(()=>k(!1),3e3)}catch{te("Error al guardar. Intenta de nuevo.")}finally{A(!1)}};return P?g.jsx("div",{style:{color:"var(--vsm-gray-mid)",fontSize:"13px"},children:"Cargando configuracin..."}):g.jsxs("div",{children:[g.jsx("h2",{style:{fontWeight:800,fontSize:"1.1rem",color:"var(--vsm-black)",marginBottom:"1.25rem"},children:"Configuracin de la tienda"}),g.jsx("form",{onSubmit:ge,noValidate:!0,children:g.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem",maxWidth:"540px"},children:[g.jsxs("div",{children:[g.jsx("label",{style:Nt,children:"Logo de la tienda"}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[(m||s)&&g.jsx("div",{style:{position:"relative",width:72,height:72},children:g.jsx("img",{src:m??s,alt:"Logo",style:{width:72,height:72,objectFit:"contain",borderRadius:"6px",border:"1px solid var(--vsm-gray)"}})}),g.jsx("input",{type:"file",accept:"image/*",onChange:ae,style:{fontSize:"13px",color:"var(--vsm-gray-mid)"}},y)]}),c&&g.jsxs("p",{style:{fontSize:"12px",color:"var(--vsm-gray-mid)"},children:["Nuevo logo: ",c.name]})]}),g.jsxs("div",{children:[g.jsx("label",{style:Nt,children:"Nombre de la tienda"}),g.jsx("input",{value:e.storeName,onChange:R=>H("storeName",R.target.value),style:qt,onFocus:st,onBlur:at})]}),g.jsxs("div",{children:[g.jsx("label",{style:Nt,children:"Descripcin"}),g.jsx("textarea",{value:e.description,onChange:R=>n(w=>({...w,description:R.target.value})),rows:3,style:{...qt,resize:"vertical"},onFocus:st,onBlur:at})]}),g.jsxs("div",{children:[g.jsx("label",{style:Nt,children:"Direccin"}),g.jsx("input",{value:e.address,onChange:R=>H("address",R.target.value),placeholder:"Ej: Calle 15 #3-45, Santa Marta",style:qt,onFocus:st,onBlur:at})]}),g.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[g.jsxs("div",{children:[g.jsx("label",{style:Nt,children:"Correo de contacto"}),g.jsx("input",{value:e.email,onChange:R=>H("email",R.target.value),type:"email",style:qt,onFocus:st,onBlur:at})]}),g.jsxs("div",{children:[g.jsx("label",{style:Nt,children:"Telfono / WhatsApp"}),g.jsx("input",{value:e.phone,onChange:R=>H("phone",R.target.value),style:qt,onFocus:st,onBlur:at})]})]}),g.jsxs("div",{children:[g.jsx("label",{style:{...Nt,marginBottom:"0.75rem"},children:"Redes sociales"}),g.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.6rem"},children:["instagram","facebook","whatsapp","tiktok"].map(R=>g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx("span",{style:{fontSize:"12px",width:80,color:"var(--vsm-gray-mid)",fontWeight:600,textTransform:"capitalize"},children:R}),g.jsx("input",{value:e.social[R],onChange:w=>se(R,w.target.value),placeholder:`URL de ${R}`,style:{...qt,flex:1},onFocus:st,onBlur:at})]},R))})]}),Z&&g.jsx("div",{style:Md,children:g.jsx("p",{style:Pd,children:Z})}),Y&&g.jsx("div",{style:ak,children:g.jsx("p",{style:ok,children:"Configuracin guardada correctamente."})}),g.jsx("button",{type:"submit",disabled:T,style:{alignSelf:"flex-start",backgroundColor:"var(--vsm-brand)",color:"#fff",border:"none",borderRadius:"var(--vsm-radius-sm)",padding:"10px 24px",fontSize:"13px",fontWeight:700,cursor:T?"not-allowed":"pointer",opacity:T?.75:1,fontFamily:"inherit"},children:T?"Guardando...":"Guardar cambios"})]})})]})},_E=[{id:"dashboard",label:"Dashboard"},{id:"productos",label:"Productos"},{id:"configuracion",label:"Configuracin"}],qk=()=>{const{user:r,logout:e}=Qg(),n=ki(),[s,o]=j.useState("dashboard"),c=async()=>{await e(),n("/Login")},h=r?.displayName??r?.email??"Admin",m=p=>({display:"block",width:"100%",textAlign:"left",padding:"10px 14px",borderRadius:"6px",border:"none",backgroundColor:s===p.id?"var(--vsm-brand)":"transparent",color:s===p.id?"#fff":"var(--vsm-gray-mid)",fontWeight:s===p.id?700:600,fontSize:"13px",cursor:"pointer",fontFamily:"inherit",transition:"background-color 0.15s, color 0.15s"});return g.jsxs("div",{style:{minHeight:"calc(100vh - 96px)",padding:"2rem 1rem"},className:"max-w-6xl w-full mx-auto",children:[g.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",paddingBottom:"1.25rem",borderBottom:"1px solid var(--vsm-gray)",flexWrap:"wrap",gap:"1rem"},children:[g.jsxs("div",{children:[g.jsx("h1",{style:{fontWeight:800,fontSize:"1.4rem",color:"var(--vsm-black)"},children:"Panel de Administracin"}),g.jsxs("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"13px",marginTop:"4px"},children:["Hola, ",g.jsx("strong",{style:{color:"var(--vsm-black)"},children:h})]})]}),g.jsx("button",{onClick:c,style:{backgroundColor:"var(--vsm-black)",color:"#fff",padding:"10px 20px",borderRadius:"5px",border:"none",fontSize:"12px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.07em",cursor:"pointer",fontFamily:"inherit",whiteSpace:"nowrap"},className:"hover:opacity-80 transition-opacity",children:"Cerrar sesin"})]}),g.jsxs("div",{style:{display:"flex",gap:"1.5rem",marginTop:"1.5rem",flexWrap:"wrap"},children:[g.jsx("nav",{className:"hidden md:flex",style:{flexDirection:"column",width:200,flexShrink:0,gap:"0.25rem"},children:_E.map(p=>g.jsx("button",{onClick:()=>o(p.id),style:m(p),children:p.label},p.id))}),g.jsx("nav",{className:"flex md:hidden",style:{width:"100%",borderBottom:"1px solid var(--vsm-gray)",paddingBottom:"0.5rem",gap:"0.25rem"},children:_E.map(p=>g.jsx("button",{onClick:()=>o(p.id),style:{flex:1,padding:"8px 4px",borderRadius:"5px",border:"none",backgroundColor:s===p.id?"var(--vsm-brand)":"transparent",color:s===p.id?"#fff":"var(--vsm-gray-mid)",fontWeight:s===p.id?700:600,fontSize:"12px",cursor:"pointer",fontFamily:"inherit"},children:p.label},p.id))}),g.jsxs("main",{style:{flex:1,minWidth:0},children:[s==="dashboard"&&g.jsx(Ck,{}),s==="productos"&&g.jsx(Vk,{}),s==="configuracion"&&g.jsx(Bk,{})]})]})]})},Fk=({children:r})=>{const{user:e,loading:n}=Qg();return n?g.jsx("p",{children:"cargando..."}):e?g.jsx(g.Fragment,{children:r}):g.jsx(iA,{to:"/Login"})};function Hk(){return g.jsxs(pA,{children:[g.jsx(fk,{}),g.jsx(yk,{children:g.jsxs(aA,{children:[g.jsx(_i,{path:"/",element:g.jsx(sk,{})}),g.jsx(_i,{path:"/catalogo",element:g.jsx(Tk,{})}),g.jsx(_i,{path:"/contacto",element:g.jsx(Ak,{})}),g.jsx(_i,{path:"/producto/:id",element:g.jsx(bk,{})}),g.jsx(_i,{path:"/Login",element:g.jsx(lk,{})}),g.jsx(_i,{path:"/Register",element:g.jsx(ck,{})}),g.jsx(_i,{path:"/Admin",element:g.jsx(Fk,{children:g.jsx(qk,{})})}),g.jsx(_i,{path:"*",element:g.jsx("p",{children:"Not Found"})})]})}),g.jsx(pk,{})]})}pw.createRoot(document.getElementById("root")).render(g.jsx(j.StrictMode,{children:g.jsx(hk,{children:g.jsx(Hk,{})})}));
