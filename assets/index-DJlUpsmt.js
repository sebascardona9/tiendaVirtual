function YA(r,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const u=Object.getOwnPropertyDescriptor(s,o);u&&Object.defineProperty(r,o,u.get?u:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function WA(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var xm={exports:{}},ou={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $_;function XA(){if($_)return ou;$_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:h,ref:o!==void 0?o:null,props:u}}return ou.Fragment=e,ou.jsx=n,ou.jsxs=n,ou}var Z_;function $A(){return Z_||(Z_=1,xm.exports=XA()),xm.exports}var v=$A(),Rm={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J_;function ZA(){if(J_)return Ne;J_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),S=Symbol.iterator;function w(D){return D===null||typeof D!="object"?null:(D=S&&D[S]||D["@@iterator"],typeof D=="function"?D:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,X={};function j(D,J,oe){this.props=D,this.context=J,this.refs=X,this.updater=oe||L}j.prototype.isReactComponent={},j.prototype.setState=function(D,J){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,J,"setState")},j.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function se(){}se.prototype=j.prototype;function W(D,J,oe){this.props=D,this.context=J,this.refs=X,this.updater=oe||L}var te=W.prototype=new se;te.constructor=W,B(te,j.prototype),te.isPureReactComponent=!0;var ue=Array.isArray,ae={H:null,A:null,T:null,S:null,V:null},pe=Object.prototype.hasOwnProperty;function O(D,J,oe,ce,ge,ke){return oe=ke.ref,{$$typeof:r,type:D,key:J,ref:oe!==void 0?oe:null,props:ke}}function R(D,J){return O(D.type,J,void 0,void 0,void 0,D.props)}function x(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function M(D){var J={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(oe){return J[oe]})}var k=/\/+/g;function N(D,J){return typeof D=="object"&&D!==null&&D.key!=null?M(""+D.key):J.toString(36)}function C(){}function qe(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(C,C):(D.status="pending",D.then(function(J){D.status==="pending"&&(D.status="fulfilled",D.value=J)},function(J){D.status==="pending"&&(D.status="rejected",D.reason=J)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function ze(D,J,oe,ce,ge){var ke=typeof D;(ke==="undefined"||ke==="boolean")&&(D=null);var be=!1;if(D===null)be=!0;else switch(ke){case"bigint":case"string":case"number":be=!0;break;case"object":switch(D.$$typeof){case r:case e:be=!0;break;case b:return be=D._init,ze(be(D._payload),J,oe,ce,ge)}}if(be)return ge=ge(D),be=ce===""?"."+N(D,0):ce,ue(ge)?(oe="",be!=null&&(oe=be.replace(k,"$&/")+"/"),ze(ge,J,oe,"",function(vn){return vn})):ge!=null&&(x(ge)&&(ge=R(ge,oe+(ge.key==null||D&&D.key===ge.key?"":(""+ge.key).replace(k,"$&/")+"/")+be)),J.push(ge)),1;be=0;var Pt=ce===""?".":ce+":";if(ue(D))for(var Ge=0;Ge<D.length;Ge++)ce=D[Ge],ke=Pt+N(ce,Ge),be+=ze(ce,J,oe,ke,ge);else if(Ge=w(D),typeof Ge=="function")for(D=Ge.call(D),Ge=0;!(ce=D.next()).done;)ce=ce.value,ke=Pt+N(ce,Ge++),be+=ze(ce,J,oe,ke,ge);else if(ke==="object"){if(typeof D.then=="function")return ze(qe(D),J,oe,ce,ge);throw J=String(D),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return be}function P(D,J,oe){if(D==null)return D;var ce=[],ge=0;return ze(D,ce,"","",function(ke){return J.call(oe,ke,ge++)}),ce}function ie(D){if(D._status===-1){var J=D._result;J=J(),J.then(function(oe){(D._status===0||D._status===-1)&&(D._status=1,D._result=oe)},function(oe){(D._status===0||D._status===-1)&&(D._status=2,D._result=oe)}),D._status===-1&&(D._status=0,D._result=J)}if(D._status===1)return D._result.default;throw D._result}var de=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function Re(){}return Ne.Children={map:P,forEach:function(D,J,oe){P(D,function(){J.apply(this,arguments)},oe)},count:function(D){var J=0;return P(D,function(){J++}),J},toArray:function(D){return P(D,function(J){return J})||[]},only:function(D){if(!x(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Ne.Component=j,Ne.Fragment=n,Ne.Profiler=o,Ne.PureComponent=W,Ne.StrictMode=s,Ne.Suspense=p,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ae,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(D){return ae.H.useMemoCache(D)}},Ne.cache=function(D){return function(){return D.apply(null,arguments)}},Ne.cloneElement=function(D,J,oe){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ce=B({},D.props),ge=D.key,ke=void 0;if(J!=null)for(be in J.ref!==void 0&&(ke=void 0),J.key!==void 0&&(ge=""+J.key),J)!pe.call(J,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&J.ref===void 0||(ce[be]=J[be]);var be=arguments.length-2;if(be===1)ce.children=oe;else if(1<be){for(var Pt=Array(be),Ge=0;Ge<be;Ge++)Pt[Ge]=arguments[Ge+2];ce.children=Pt}return O(D.type,ge,void 0,void 0,ke,ce)},Ne.createContext=function(D){return D={$$typeof:h,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:u,_context:D},D},Ne.createElement=function(D,J,oe){var ce,ge={},ke=null;if(J!=null)for(ce in J.key!==void 0&&(ke=""+J.key),J)pe.call(J,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(ge[ce]=J[ce]);var be=arguments.length-2;if(be===1)ge.children=oe;else if(1<be){for(var Pt=Array(be),Ge=0;Ge<be;Ge++)Pt[Ge]=arguments[Ge+2];ge.children=Pt}if(D&&D.defaultProps)for(ce in be=D.defaultProps,be)ge[ce]===void 0&&(ge[ce]=be[ce]);return O(D,ke,void 0,void 0,null,ge)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(D){return{$$typeof:m,render:D}},Ne.isValidElement=x,Ne.lazy=function(D){return{$$typeof:b,_payload:{_status:-1,_result:D},_init:ie}},Ne.memo=function(D,J){return{$$typeof:g,type:D,compare:J===void 0?null:J}},Ne.startTransition=function(D){var J=ae.T,oe={};ae.T=oe;try{var ce=D(),ge=ae.S;ge!==null&&ge(oe,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(Re,de)}catch(ke){de(ke)}finally{ae.T=J}},Ne.unstable_useCacheRefresh=function(){return ae.H.useCacheRefresh()},Ne.use=function(D){return ae.H.use(D)},Ne.useActionState=function(D,J,oe){return ae.H.useActionState(D,J,oe)},Ne.useCallback=function(D,J){return ae.H.useCallback(D,J)},Ne.useContext=function(D){return ae.H.useContext(D)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(D,J){return ae.H.useDeferredValue(D,J)},Ne.useEffect=function(D,J,oe){var ce=ae.H;if(typeof oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ce.useEffect(D,J)},Ne.useId=function(){return ae.H.useId()},Ne.useImperativeHandle=function(D,J,oe){return ae.H.useImperativeHandle(D,J,oe)},Ne.useInsertionEffect=function(D,J){return ae.H.useInsertionEffect(D,J)},Ne.useLayoutEffect=function(D,J){return ae.H.useLayoutEffect(D,J)},Ne.useMemo=function(D,J){return ae.H.useMemo(D,J)},Ne.useOptimistic=function(D,J){return ae.H.useOptimistic(D,J)},Ne.useReducer=function(D,J,oe){return ae.H.useReducer(D,J,oe)},Ne.useRef=function(D){return ae.H.useRef(D)},Ne.useState=function(D){return ae.H.useState(D)},Ne.useSyncExternalStore=function(D,J,oe){return ae.H.useSyncExternalStore(D,J,oe)},Ne.useTransition=function(){return ae.H.useTransition()},Ne.version="19.1.0",Ne}var e0;function Ip(){return e0||(e0=1,Rm.exports=ZA()),Rm.exports}var z=Ip();const pr=WA(z),JA=YA({__proto__:null,default:pr},[z]);var Cm={exports:{}},lu={},Im={exports:{}},Dm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0;function ew(){return t0||(t0=1,function(r){function e(P,ie){var de=P.length;P.push(ie);e:for(;0<de;){var Re=de-1>>>1,D=P[Re];if(0<o(D,ie))P[Re]=ie,P[de]=D,de=Re;else break e}}function n(P){return P.length===0?null:P[0]}function s(P){if(P.length===0)return null;var ie=P[0],de=P.pop();if(de!==ie){P[0]=de;e:for(var Re=0,D=P.length,J=D>>>1;Re<J;){var oe=2*(Re+1)-1,ce=P[oe],ge=oe+1,ke=P[ge];if(0>o(ce,de))ge<D&&0>o(ke,ce)?(P[Re]=ke,P[ge]=de,Re=ge):(P[Re]=ce,P[oe]=de,Re=oe);else if(ge<D&&0>o(ke,de))P[Re]=ke,P[ge]=de,Re=ge;else break e}}return ie}function o(P,ie){var de=P.sortIndex-ie.sortIndex;return de!==0?de:P.id-ie.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var p=[],g=[],b=1,S=null,w=3,L=!1,B=!1,X=!1,j=!1,se=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function ue(P){for(var ie=n(g);ie!==null;){if(ie.callback===null)s(g);else if(ie.startTime<=P)s(g),ie.sortIndex=ie.expirationTime,e(p,ie);else break;ie=n(g)}}function ae(P){if(X=!1,ue(P),!B)if(n(p)!==null)B=!0,pe||(pe=!0,N());else{var ie=n(g);ie!==null&&ze(ae,ie.startTime-P)}}var pe=!1,O=-1,R=5,x=-1;function M(){return j?!0:!(r.unstable_now()-x<R)}function k(){if(j=!1,pe){var P=r.unstable_now();x=P;var ie=!0;try{e:{B=!1,X&&(X=!1,W(O),O=-1),L=!0;var de=w;try{t:{for(ue(P),S=n(p);S!==null&&!(S.expirationTime>P&&M());){var Re=S.callback;if(typeof Re=="function"){S.callback=null,w=S.priorityLevel;var D=Re(S.expirationTime<=P);if(P=r.unstable_now(),typeof D=="function"){S.callback=D,ue(P),ie=!0;break t}S===n(p)&&s(p),ue(P)}else s(p);S=n(p)}if(S!==null)ie=!0;else{var J=n(g);J!==null&&ze(ae,J.startTime-P),ie=!1}}break e}finally{S=null,w=de,L=!1}ie=void 0}}finally{ie?N():pe=!1}}}var N;if(typeof te=="function")N=function(){te(k)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,qe=C.port2;C.port1.onmessage=k,N=function(){qe.postMessage(null)}}else N=function(){se(k,0)};function ze(P,ie){O=se(function(){P(r.unstable_now())},ie)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(P){P.callback=null},r.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<P?Math.floor(1e3/P):5},r.unstable_getCurrentPriorityLevel=function(){return w},r.unstable_next=function(P){switch(w){case 1:case 2:case 3:var ie=3;break;default:ie=w}var de=w;w=ie;try{return P()}finally{w=de}},r.unstable_requestPaint=function(){j=!0},r.unstable_runWithPriority=function(P,ie){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var de=w;w=P;try{return ie()}finally{w=de}},r.unstable_scheduleCallback=function(P,ie,de){var Re=r.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Re+de:Re):de=Re,P){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=de+D,P={id:b++,callback:ie,priorityLevel:P,startTime:de,expirationTime:D,sortIndex:-1},de>Re?(P.sortIndex=de,e(g,P),n(p)===null&&P===n(g)&&(X?(W(O),O=-1):X=!0,ze(ae,de-Re))):(P.sortIndex=D,e(p,P),B||L||(B=!0,pe||(pe=!0,N()))),P},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(P){var ie=w;return function(){var de=w;w=ie;try{return P.apply(this,arguments)}finally{w=de}}}}(Dm)),Dm}var n0;function tw(){return n0||(n0=1,Im.exports=ew()),Im.exports}var Nm={exports:{}},an={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r0;function nw(){if(r0)return an;r0=1;var r=Ip();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,b){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:p,containerInfo:g,implementation:b}}var h=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,an.createPortal=function(p,g){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,b)},an.flushSync=function(p){var g=h.T,b=s.p;try{if(h.T=null,s.p=2,p)return p()}finally{h.T=g,s.p=b,s.d.f()}},an.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},an.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},an.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var b=g.as,S=m(b,g.crossOrigin),w=typeof g.integrity=="string"?g.integrity:void 0,L=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;b==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:S,integrity:w,fetchPriority:L}):b==="script"&&s.d.X(p,{crossOrigin:S,integrity:w,fetchPriority:L,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},an.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var b=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},an.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var b=g.as,S=m(b,g.crossOrigin);s.d.L(p,b,{crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},an.preloadModule=function(p,g){if(typeof p=="string")if(g){var b=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},an.requestFormReset=function(p){s.d.r(p)},an.unstable_batchedUpdates=function(p,g){return p(g)},an.useFormState=function(p,g,b){return h.H.useFormState(p,g,b)},an.useFormStatus=function(){return h.H.useHostTransitionStatus()},an.version="19.1.0",an}var i0;function db(){if(i0)return Nm.exports;i0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Nm.exports=nw(),Nm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s0;function rw(){if(s0)return lu;s0=1;var r=tw(),e=Ip(),n=db();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function h(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function p(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return m(f),t;if(d===l)return m(f),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=d;else{for(var E=!1,T=f.child;T;){if(T===a){E=!0,a=f,l=d;break}if(T===l){E=!0,l=f,a=d;break}T=T.sibling}if(!E){for(T=d.child;T;){if(T===a){E=!0,a=d,l=f;break}if(T===l){E=!0,l=d,a=f;break}T=T.sibling}if(!E)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function g(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=g(t),i!==null)return i;t=t.sibling}return null}var b=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),se=Symbol.for("react.provider"),W=Symbol.for("react.consumer"),te=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function N(t){return t===null||typeof t!="object"?null:(t=k&&t[k]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function qe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case B:return"Fragment";case j:return"Profiler";case X:return"StrictMode";case ae:return"Suspense";case pe:return"SuspenseList";case x:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case L:return"Portal";case te:return(t.displayName||"Context")+".Provider";case W:return(t._context.displayName||"Context")+".Consumer";case ue:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case O:return i=t.displayName||null,i!==null?i:qe(t.type)||"Memo";case R:i=t._payload,t=t._init;try{return qe(t(i))}catch{}}return null}var ze=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},Re=[],D=-1;function J(t){return{current:t}}function oe(t){0>D||(t.current=Re[D],Re[D]=null,D--)}function ce(t,i){D++,Re[D]=t.current,t.current=i}var ge=J(null),ke=J(null),be=J(null),Pt=J(null);function Ge(t,i){switch(ce(be,i),ce(ke,t),ce(ge,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?w_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=w_(i),t=x_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}oe(ge),ce(ge,t)}function vn(){oe(ge),oe(ke),oe(be)}function Ci(t){t.memoizedState!==null&&ce(Pt,t);var i=ge.current,a=x_(i,t.type);i!==a&&(ce(ke,t),ce(ge,a))}function Qr(t){ke.current===t&&(oe(ge),oe(ke)),Pt.current===t&&(oe(Pt),nu._currentValue=de)}var Yr=Object.prototype.hasOwnProperty,Cn=r.unstable_scheduleCallback,ir=r.unstable_cancelCallback,Ha=r.unstable_shouldYield,Ii=r.unstable_requestPaint,nn=r.unstable_now,Di=r.unstable_getCurrentPriorityLevel,yt=r.unstable_ImmediatePriority,St=r.unstable_UserBlockingPriority,In=r.unstable_NormalPriority,Ga=r.unstable_LowPriority,Ni=r.unstable_IdlePriority,Er=r.log,Hn=r.unstable_setDisableYieldValue,sr=null,Bt=null;function fn(t){if(typeof Er=="function"&&Hn(t),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode(sr,t)}catch{}}var Dt=Math.clz32?Math.clz32:Bs,zs=Math.log,Ka=Math.LN2;function Bs(t){return t>>>=0,t===0?32:31-(zs(t)/Ka|0)|0}var Qt=256,Gn=4194304;function Dn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function _n(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var f=0,d=t.suspendedLanes,E=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?f=Dn(l):(E&=T,E!==0?f=Dn(E):a||(a=T&~t,a!==0&&(f=Dn(a))))):(T=l&~d,T!==0?f=Dn(T):E!==0?f=Dn(E):a||(a=l&~t,a!==0&&(f=Dn(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function br(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Wr(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fs(){var t=Qt;return Qt<<=1,(Qt&4194048)===0&&(Qt=256),t}function Y(){var t=Gn;return Gn<<=1,(Gn&62914560)===0&&(Gn=4194304),t}function ye(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Je(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function We(t,i,a,l,f,d){var E=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,I=t.expirationTimes,H=t.hiddenUpdates;for(a=E&~a;0<a;){var $=31-Dt(a),ne=1<<$;T[$]=0,I[$]=-1;var G=H[$];if(G!==null)for(H[$]=null,$=0;$<G.length;$++){var K=G[$];K!==null&&(K.lane&=-536870913)}a&=~ne}l!==0&&Tr(t,l,0),d!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=d&~(E&~i))}function Tr(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Dt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Sr(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-Dt(a),f=1<<l;f&i|t[l]&i&&(t[l]|=i),a&=~f}}function qs(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Te(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Yt(){var t=ie.p;return t!==0?t:(t=window.event,t===void 0?32:G_(t.type))}function al(t,i){var a=ie.p;try{return ie.p=t,i()}finally{ie.p=a}}var ht=Math.random().toString(36).slice(2),At="__reactFiber$"+ht,Wt="__reactProps$"+ht,Xr="__reactContainer$"+ht,Hs="__reactEvents$"+ht,Gs="__reactListeners$"+ht,Of="__reactHandles$"+ht,ar="__reactResources$"+ht,Oi="__reactMarker$"+ht;function Qa(t){delete t[At],delete t[Wt],delete t[Hs],delete t[Gs],delete t[Of]}function Ar(t){var i=t[At];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Xr]||a[At]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=D_(t);t!==null;){if(a=t[At])return a;t=D_(t)}return i}t=a,a=t.parentNode}return null}function wr(t){if(t=t[At]||t[Xr]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function ki(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function Mi(t){var i=t[ar];return i||(i=t[ar]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function wt(t){t[Oi]=!0}var ec=new Set,Ks={};function xr(t,i){Rr(t,i),Rr(t+"Capture",i)}function Rr(t,i){for(Ks[t]=i,t=0;t<i.length;t++)ec.add(i[t])}var Qs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cr={},Ya={};function kf(t){return Yr.call(Ya,t)?!0:Yr.call(Cr,t)?!1:Qs.test(t)?Ya[t]=!0:(Cr[t]=!0,!1)}function Ys(t,i,a){if(kf(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function Ws(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Kn(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}var Xs,Wa;function $r(t){if(Xs===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Xs=i&&i[1]||"",Wa=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xs+t+Wa}var Xa=!1;function $a(t,i){if(!t||Xa)return"";Xa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(K){var G=K}Reflect.construct(t,[],ne)}else{try{ne.call()}catch(K){G=K}t.call(ne.prototype)}}else{try{throw Error()}catch(K){G=K}(ne=t())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(K){if(K&&G&&typeof K.stack=="string")return[K.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),E=d[0],T=d[1];if(E&&T){var I=E.split(`
`),H=T.split(`
`);for(f=l=0;l<I.length&&!I[l].includes("DetermineComponentFrameRoot");)l++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(l===I.length||f===H.length)for(l=I.length-1,f=H.length-1;1<=l&&0<=f&&I[l]!==H[f];)f--;for(;1<=l&&0<=f;l--,f--)if(I[l]!==H[f]){if(l!==1||f!==1)do if(l--,f--,0>f||I[l]!==H[f]){var $=`
`+I[l].replace(" at new "," at ");return t.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",t.displayName)),$}while(1<=l&&0<=f);break}}}finally{Xa=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?$r(a):""}function Mf(t){switch(t.tag){case 26:case 27:case 5:return $r(t.type);case 16:return $r("Lazy");case 13:return $r("Suspense");case 19:return $r("SuspenseList");case 0:case 15:return $a(t.type,!1);case 11:return $a(t.type.render,!1);case 1:return $a(t.type,!0);case 31:return $r("Activity");default:return""}}function or(t){try{var i="";do i+=Mf(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function dt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Vi(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function $s(t){var i=Vi(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,d=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return f.call(this)},set:function(E){l=""+E,d.call(this,E)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Pi(t){t._valueTracker||(t._valueTracker=$s(t))}function et(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Vi(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function Zr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Zs=/[\n"\\]/g;function Ft(t){return t.replace(Zs,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ol(t,i,a,l,f,d,E,T){t.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.type=E:t.removeAttribute("type"),i!=null?E==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+dt(i)):t.value!==""+dt(i)&&(t.value=""+dt(i)):E!=="submit"&&E!=="reset"||t.removeAttribute("value"),i!=null?ul(t,E,dt(i)):a!=null?ul(t,E,dt(a)):l!=null&&t.removeAttribute("value"),f==null&&d!=null&&(t.defaultChecked=!!d),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+dt(T):t.removeAttribute("name")}function ll(t,i,a,l,f,d,E,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+dt(a):"",i=i!=null?""+dt(i):a,T||i===t.value||(t.value=i),t.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(t.name=E)}function ul(t,i,a){i==="number"&&Zr(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ui(t,i,a,l){if(t=t.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=i.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&l&&(t[a].defaultSelected=!0)}else{for(a=""+dt(a),i=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}i!==null||t[f].disabled||(i=t[f])}i!==null&&(i.selected=!0)}}function tc(t,i,a){if(i!=null&&(i=""+dt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+dt(a):""}function nc(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(ze(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=dt(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Qn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Jr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cl(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||Jr.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function hl(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&cl(t,f,l)}else for(var d in i)i.hasOwnProperty(d)&&cl(t,d,i[d])}function Za(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ic=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function lr(t){return ic.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var fl=null;function dl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Li=null,dn=null;function sc(t){var i=wr(t);if(i&&(t=i.stateNode)){var a=t[Wt]||null;e:switch(t=i.stateNode,i.type){case"input":if(ol(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ft(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var f=l[Wt]||null;if(!f)throw Error(s(90));ol(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&et(l)}break e;case"textarea":tc(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Ui(t,!!a.multiple,i,!1)}}}var Js=!1;function ea(t,i,a){if(Js)return t(i,a);Js=!0;try{var l=t(i);return l}finally{if(Js=!1,(Li!==null||dn!==null)&&(Yc(),Li&&(i=Li,t=dn,dn=Li=null,sc(i),t)))for(i=0;i<t.length;i++)sc(t[i])}}function ji(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Wt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ei=!1;if(mn)try{var zi={};Object.defineProperty(zi,"passive",{get:function(){ei=!0}}),window.addEventListener("test",zi,zi),window.removeEventListener("test",zi,zi)}catch{ei=!1}var Yn=null,st=null,Ja=null;function ac(){if(Ja)return Ja;var t,i=st,a=i.length,l,f="value"in Yn?Yn.value:Yn.textContent,d=f.length;for(t=0;t<a&&i[t]===f[t];t++);var E=a-t;for(l=1;l<=E&&i[a-l]===f[d-l];l++);return Ja=f.slice(t,1<l?1-l:void 0)}function ta(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function na(){return!0}function ml(){return!1}function Ut(t){function i(a,l,f,d,E){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=E,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?na:ml,this.isPropagationStopped=ml,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=na)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=na)},persist:function(){},isPersistent:na}),i}var rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ra=Ut(rn),ia=b({},rn,{view:0,detail:0}),sa=Ut(ia),eo,aa,Ir,oa=b({},ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ro,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ir&&(Ir&&t.type==="mousemove"?(eo=t.screenX-Ir.screenX,aa=t.screenY-Ir.screenY):aa=eo=0,Ir=t),eo)},movementY:function(t){return"movementY"in t?t.movementY:aa}}),la=Ut(oa),Vf=b({},oa,{dataTransfer:0}),oc=Ut(Vf),ua=b({},ia,{relatedTarget:0}),to=Ut(ua),lc=b({},rn,{animationName:0,elapsedTime:0,pseudoElement:0}),pl=Ut(lc),gl=b({},rn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),uc=Ut(gl),no=b({},rn,{data:0}),yl=Ut(no),cc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ti={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fc(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=hc[t])?!!i[t]:!1}function ro(){return fc}var dc=b({},ia,{key:function(t){if(t.key){var i=cc[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=ta(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ti[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ro,charCode:function(t){return t.type==="keypress"?ta(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ta(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),io=Ut(dc),pn=b({},oa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vl=Ut(pn),mc=b({},ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ro}),Bi=Ut(mc),c=b({},rn,{propertyName:0,elapsedTime:0,pseudoElement:0}),y=Ut(c),_=b({},oa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),A=Ut(_),q=b({},rn,{newState:0,oldState:0}),Q=Ut(q),le=[9,13,27,32],Ie=mn&&"CompositionEvent"in window,ut=null;mn&&"documentMode"in document&&(ut=document.documentMode);var Xe=mn&&"TextEvent"in window&&!ut,xt=mn&&(!Ie||ut&&8<ut&&11>=ut),Nn=" ",Dr=!1;function ur(t,i){switch(t){case"keyup":return le.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cr(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hr=!1;function _l(t,i){switch(t){case"compositionend":return cr(i);case"keypress":return i.which!==32?null:(Dr=!0,Nn);case"textInput":return t=i.data,t===Nn&&Dr?null:t;default:return null}}function b1(t,i){if(hr)return t==="compositionend"||!Ie&&ur(t,i)?(t=ac(),Ja=st=Yn=null,hr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return xt&&i.locale!=="ko"?null:i.data;default:return null}}var T1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jg(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!T1[t.type]:i==="textarea"}function zg(t,i,a,l){Li?dn?dn.push(l):dn=[l]:Li=l,i=eh(i,"onChange"),0<i.length&&(a=new ra("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var El=null,bl=null;function S1(t){E_(t,0)}function pc(t){var i=ki(t);if(et(i))return t}function Bg(t,i){if(t==="change")return i}var Fg=!1;if(mn){var Pf;if(mn){var Uf="oninput"in document;if(!Uf){var qg=document.createElement("div");qg.setAttribute("oninput","return;"),Uf=typeof qg.oninput=="function"}Pf=Uf}else Pf=!1;Fg=Pf&&(!document.documentMode||9<document.documentMode)}function Hg(){El&&(El.detachEvent("onpropertychange",Gg),bl=El=null)}function Gg(t){if(t.propertyName==="value"&&pc(bl)){var i=[];zg(i,bl,t,dl(t)),ea(S1,i)}}function A1(t,i,a){t==="focusin"?(Hg(),El=i,bl=a,El.attachEvent("onpropertychange",Gg)):t==="focusout"&&Hg()}function w1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pc(bl)}function x1(t,i){if(t==="click")return pc(i)}function R1(t,i){if(t==="input"||t==="change")return pc(i)}function C1(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var On=typeof Object.is=="function"?Object.is:C1;function Tl(t,i){if(On(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Yr.call(i,f)||!On(t[f],i[f]))return!1}return!0}function Kg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Qg(t,i){var a=Kg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Kg(a)}}function Yg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Yg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Wg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Zr(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Zr(t.document)}return i}function Lf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var I1=mn&&"documentMode"in document&&11>=document.documentMode,so=null,jf=null,Sl=null,zf=!1;function Xg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;zf||so==null||so!==Zr(l)||(l=so,"selectionStart"in l&&Lf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Sl&&Tl(Sl,l)||(Sl=l,l=eh(jf,"onSelect"),0<l.length&&(i=new ra("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=so)))}function ca(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var ao={animationend:ca("Animation","AnimationEnd"),animationiteration:ca("Animation","AnimationIteration"),animationstart:ca("Animation","AnimationStart"),transitionrun:ca("Transition","TransitionRun"),transitionstart:ca("Transition","TransitionStart"),transitioncancel:ca("Transition","TransitionCancel"),transitionend:ca("Transition","TransitionEnd")},Bf={},$g={};mn&&($g=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function ha(t){if(Bf[t])return Bf[t];if(!ao[t])return t;var i=ao[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in $g)return Bf[t]=i[a];return t}var Zg=ha("animationend"),Jg=ha("animationiteration"),ey=ha("animationstart"),D1=ha("transitionrun"),N1=ha("transitionstart"),O1=ha("transitioncancel"),ty=ha("transitionend"),ny=new Map,Ff="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ff.push("scrollEnd");function fr(t,i){ny.set(t,i),xr(i,[t])}var ry=new WeakMap;function Wn(t,i){if(typeof t=="object"&&t!==null){var a=ry.get(t);return a!==void 0?a:(i={value:t,source:i,stack:or(i)},ry.set(t,i),i)}return{value:t,source:i,stack:or(i)}}var Xn=[],oo=0,qf=0;function gc(){for(var t=oo,i=qf=oo=0;i<t;){var a=Xn[i];Xn[i++]=null;var l=Xn[i];Xn[i++]=null;var f=Xn[i];Xn[i++]=null;var d=Xn[i];if(Xn[i++]=null,l!==null&&f!==null){var E=l.pending;E===null?f.next=f:(f.next=E.next,E.next=f),l.pending=f}d!==0&&iy(a,f,d)}}function yc(t,i,a,l){Xn[oo++]=t,Xn[oo++]=i,Xn[oo++]=a,Xn[oo++]=l,qf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Hf(t,i,a,l){return yc(t,i,a,l),vc(t)}function lo(t,i){return yc(t,null,null,i),vc(t)}function iy(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(f=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,f&&i!==null&&(f=31-Dt(a),t=d.hiddenUpdates,l=t[f],l===null?t[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function vc(t){if(50<Yl)throw Yl=0,Xd=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var uo={};function k1(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(t,i,a,l){return new k1(t,i,a,l)}function Gf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ni(t,i){var a=t.alternate;return a===null?(a=kn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function sy(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function _c(t,i,a,l,f,d){var E=0;if(l=t,typeof t=="function")Gf(t)&&(E=1);else if(typeof t=="string")E=VA(t,a,ge.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case x:return t=kn(31,a,i,f),t.elementType=x,t.lanes=d,t;case B:return fa(a.children,f,d,i);case X:E=8,f|=24;break;case j:return t=kn(12,a,i,f|2),t.elementType=j,t.lanes=d,t;case ae:return t=kn(13,a,i,f),t.elementType=ae,t.lanes=d,t;case pe:return t=kn(19,a,i,f),t.elementType=pe,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case se:case te:E=10;break e;case W:E=9;break e;case ue:E=11;break e;case O:E=14;break e;case R:E=16,l=null;break e}E=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=kn(E,a,i,f),i.elementType=t,i.type=l,i.lanes=d,i}function fa(t,i,a,l){return t=kn(7,t,l,i),t.lanes=a,t}function Kf(t,i,a){return t=kn(6,t,null,i),t.lanes=a,t}function Qf(t,i,a){return i=kn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var co=[],ho=0,Ec=null,bc=0,$n=[],Zn=0,da=null,ri=1,ii="";function ma(t,i){co[ho++]=bc,co[ho++]=Ec,Ec=t,bc=i}function ay(t,i,a){$n[Zn++]=ri,$n[Zn++]=ii,$n[Zn++]=da,da=t;var l=ri;t=ii;var f=32-Dt(l)-1;l&=~(1<<f),a+=1;var d=32-Dt(i)+f;if(30<d){var E=f-f%5;d=(l&(1<<E)-1).toString(32),l>>=E,f-=E,ri=1<<32-Dt(i)+f|a<<f|l,ii=d+t}else ri=1<<d|a<<f|l,ii=t}function Yf(t){t.return!==null&&(ma(t,1),ay(t,1,0))}function Wf(t){for(;t===Ec;)Ec=co[--ho],co[ho]=null,bc=co[--ho],co[ho]=null;for(;t===da;)da=$n[--Zn],$n[Zn]=null,ii=$n[--Zn],$n[Zn]=null,ri=$n[--Zn],$n[Zn]=null}var gn=null,vt=null,Ke=!1,pa=null,Nr=!1,Xf=Error(s(519));function ga(t){var i=Error(s(418,""));throw xl(Wn(i,t)),Xf}function oy(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[At]=t,i[Wt]=l,a){case"dialog":Pe("cancel",i),Pe("close",i);break;case"iframe":case"object":case"embed":Pe("load",i);break;case"video":case"audio":for(a=0;a<Xl.length;a++)Pe(Xl[a],i);break;case"source":Pe("error",i);break;case"img":case"image":case"link":Pe("error",i),Pe("load",i);break;case"details":Pe("toggle",i);break;case"input":Pe("invalid",i),ll(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Pi(i);break;case"select":Pe("invalid",i);break;case"textarea":Pe("invalid",i),nc(i,l.value,l.defaultValue,l.children),Pi(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||A_(i.textContent,a)?(l.popover!=null&&(Pe("beforetoggle",i),Pe("toggle",i)),l.onScroll!=null&&Pe("scroll",i),l.onScrollEnd!=null&&Pe("scrollend",i),l.onClick!=null&&(i.onclick=th),i=!0):i=!1,i||ga(t)}function ly(t){for(gn=t.return;gn;)switch(gn.tag){case 5:case 13:Nr=!1;return;case 27:case 3:Nr=!0;return;default:gn=gn.return}}function Al(t){if(t!==gn)return!1;if(!Ke)return ly(t),Ke=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||fm(t.type,t.memoizedProps)),a=!a),a&&vt&&ga(t),ly(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){vt=mr(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}vt=null}}else i===27?(i=vt,rs(t.type)?(t=gm,gm=null,vt=t):vt=i):vt=gn?mr(t.stateNode.nextSibling):null;return!0}function wl(){vt=gn=null,Ke=!1}function uy(){var t=pa;return t!==null&&(Tn===null?Tn=t:Tn.push.apply(Tn,t),pa=null),t}function xl(t){pa===null?pa=[t]:pa.push(t)}var $f=J(null),ya=null,si=null;function Fi(t,i,a){ce($f,i._currentValue),i._currentValue=a}function ai(t){t._currentValue=$f.current,oe($f)}function Zf(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Jf(t,i,a,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var d=f.dependencies;if(d!==null){var E=f.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=f;for(var I=0;I<i.length;I++)if(T.context===i[I]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),Zf(d.return,a,t),l||(E=null);break e}d=T.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(s(341));E.lanes|=a,d=E.alternate,d!==null&&(d.lanes|=a),Zf(E,a,t),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===t){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function Rl(t,i,a,l){t=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var T=f.type;On(f.pendingProps.value,E.value)||(t!==null?t.push(T):t=[T])}}else if(f===Pt.current){if(E=f.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(nu):t=[nu])}f=f.return}t!==null&&Jf(i,t,a,l),i.flags|=262144}function Tc(t){for(t=t.firstContext;t!==null;){if(!On(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function va(t){ya=t,si=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function sn(t){return cy(ya,t)}function Sc(t,i){return ya===null&&va(t),cy(t,i)}function cy(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},si===null){if(t===null)throw Error(s(308));si=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else si=si.next=i;return a}var M1=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},V1=r.unstable_scheduleCallback,P1=r.unstable_NormalPriority,Lt={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ed(){return{controller:new M1,data:new Map,refCount:0}}function Cl(t){t.refCount--,t.refCount===0&&V1(P1,function(){t.controller.abort()})}var Il=null,td=0,fo=0,mo=null;function U1(t,i){if(Il===null){var a=Il=[];td=0,fo=rm(),mo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return td++,i.then(hy,hy),i}function hy(){if(--td===0&&Il!==null){mo!==null&&(mo.status="fulfilled");var t=Il;Il=null,fo=0,mo=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function L1(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var fy=P.S;P.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&U1(t,i),fy!==null&&fy(t,i)};var _a=J(null);function nd(){var t=_a.current;return t!==null?t:at.pooledCache}function Ac(t,i){i===null?ce(_a,_a.current):ce(_a,i.pool)}function dy(){var t=nd();return t===null?null:{parent:Lt._currentValue,pool:t}}var Dl=Error(s(460)),my=Error(s(474)),wc=Error(s(542)),rd={then:function(){}};function py(t){return t=t.status,t==="fulfilled"||t==="rejected"}function xc(){}function gy(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(xc,xc),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,vy(t),t;default:if(typeof i.status=="string")i.then(xc,xc);else{if(t=at,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,vy(t),t}throw Nl=i,Dl}}var Nl=null;function yy(){if(Nl===null)throw Error(s(459));var t=Nl;return Nl=null,t}function vy(t){if(t===Dl||t===wc)throw Error(s(483))}var qi=!1;function id(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sd(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Hi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Gi(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,($e&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=vc(t),iy(t,null,a),i}return yc(t,l,i,a),vc(t)}function Ol(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Sr(t,a)}}function ad(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=E:d=d.next=E,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var od=!1;function kl(){if(od){var t=mo;if(t!==null)throw t}}function Ml(t,i,a,l){od=!1;var f=t.updateQueue;qi=!1;var d=f.firstBaseUpdate,E=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var I=T,H=I.next;I.next=null,E===null?d=H:E.next=H,E=I;var $=t.alternate;$!==null&&($=$.updateQueue,T=$.lastBaseUpdate,T!==E&&(T===null?$.firstBaseUpdate=H:T.next=H,$.lastBaseUpdate=I))}if(d!==null){var ne=f.baseState;E=0,$=H=I=null,T=d;do{var G=T.lane&-536870913,K=G!==T.lane;if(K?(Be&G)===G:(l&G)===G){G!==0&&G===fo&&(od=!0),$!==null&&($=$.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var xe=t,Ee=T;G=i;var rt=a;switch(Ee.tag){case 1:if(xe=Ee.payload,typeof xe=="function"){ne=xe.call(rt,ne,G);break e}ne=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Ee.payload,G=typeof xe=="function"?xe.call(rt,ne,G):xe,G==null)break e;ne=b({},ne,G);break e;case 2:qi=!0}}G=T.callback,G!==null&&(t.flags|=64,K&&(t.flags|=8192),K=f.callbacks,K===null?f.callbacks=[G]:K.push(G))}else K={lane:G,tag:T.tag,payload:T.payload,callback:T.callback,next:null},$===null?(H=$=K,I=ne):$=$.next=K,E|=G;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;K=T,T=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);$===null&&(I=ne),f.baseState=I,f.firstBaseUpdate=H,f.lastBaseUpdate=$,d===null&&(f.shared.lanes=0),Ji|=E,t.lanes=E,t.memoizedState=ne}}function _y(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function Ey(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)_y(a[t],i)}var po=J(null),Rc=J(0);function by(t,i){t=di,ce(Rc,t),ce(po,i),di=t|i.baseLanes}function ld(){ce(Rc,di),ce(po,po.current)}function ud(){di=Rc.current,oe(po),oe(Rc)}var Ki=0,Oe=null,tt=null,Nt=null,Cc=!1,go=!1,Ea=!1,Ic=0,Vl=0,yo=null,j1=0;function Rt(){throw Error(s(321))}function cd(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!On(t[a],i[a]))return!1;return!0}function hd(t,i,a,l,f,d){return Ki=d,Oe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,P.H=t===null||t.memoizedState===null?iv:sv,Ea=!1,d=a(l,f),Ea=!1,go&&(d=Sy(i,a,l,f)),Ty(t),d}function Ty(t){P.H=Vc;var i=tt!==null&&tt.next!==null;if(Ki=0,Nt=tt=Oe=null,Cc=!1,Vl=0,yo=null,i)throw Error(s(300));t===null||qt||(t=t.dependencies,t!==null&&Tc(t)&&(qt=!0))}function Sy(t,i,a,l){Oe=t;var f=0;do{if(go&&(yo=null),Vl=0,go=!1,25<=f)throw Error(s(301));if(f+=1,Nt=tt=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}P.H=K1,d=i(a,l)}while(go);return d}function z1(){var t=P.H,i=t.useState()[0];return i=typeof i.then=="function"?Pl(i):i,t=t.useState()[0],(tt!==null?tt.memoizedState:null)!==t&&(Oe.flags|=1024),i}function fd(){var t=Ic!==0;return Ic=0,t}function dd(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function md(t){if(Cc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Cc=!1}Ki=0,Nt=tt=Oe=null,go=!1,Vl=Ic=0,yo=null}function En(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Oe.memoizedState=Nt=t:Nt=Nt.next=t,Nt}function Ot(){if(tt===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=tt.next;var i=Nt===null?Oe.memoizedState:Nt.next;if(i!==null)Nt=i,tt=t;else{if(t===null)throw Oe.alternate===null?Error(s(467)):Error(s(310));tt=t,t={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Nt===null?Oe.memoizedState=Nt=t:Nt=Nt.next=t}return Nt}function pd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pl(t){var i=Vl;return Vl+=1,yo===null&&(yo=[]),t=gy(yo,t,i),i=Oe,(Nt===null?i.memoizedState:Nt.next)===null&&(i=i.alternate,P.H=i===null||i.memoizedState===null?iv:sv),t}function Dc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Pl(t);if(t.$$typeof===te)return sn(t)}throw Error(s(438,String(t)))}function gd(t){var i=null,a=Oe.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Oe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=pd(),Oe.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=M;return i.index++,a}function oi(t,i){return typeof i=="function"?i(t):i}function Nc(t){var i=Ot();return yd(i,tt,t)}function yd(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=t.baseQueue,d=l.pending;if(d!==null){if(f!==null){var E=f.next;f.next=d.next,d.next=E}i.baseQueue=f=d,l.pending=null}if(d=t.baseState,f===null)t.memoizedState=d;else{i=f.next;var T=E=null,I=null,H=i,$=!1;do{var ne=H.lane&-536870913;if(ne!==H.lane?(Be&ne)===ne:(Ki&ne)===ne){var G=H.revertLane;if(G===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ne===fo&&($=!0);else if((Ki&G)===G){H=H.next,G===fo&&($=!0);continue}else ne={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},I===null?(T=I=ne,E=d):I=I.next=ne,Oe.lanes|=G,Ji|=G;ne=H.action,Ea&&a(d,ne),d=H.hasEagerState?H.eagerState:a(d,ne)}else G={lane:ne,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},I===null?(T=I=G,E=d):I=I.next=G,Oe.lanes|=ne,Ji|=ne;H=H.next}while(H!==null&&H!==i);if(I===null?E=d:I.next=T,!On(d,t.memoizedState)&&(qt=!0,$&&(a=mo,a!==null)))throw a;t.memoizedState=d,t.baseState=E,t.baseQueue=I,l.lastRenderedState=d}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function vd(t){var i=Ot(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var E=f=f.next;do d=t(d,E.action),E=E.next;while(E!==f);On(d,i.memoizedState)||(qt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Ay(t,i,a){var l=Oe,f=Ot(),d=Ke;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var E=!On((tt||f).memoizedState,a);E&&(f.memoizedState=a,qt=!0),f=f.queue;var T=Ry.bind(null,l,f,t);if(Ul(2048,8,T,[t]),f.getSnapshot!==i||E||Nt!==null&&Nt.memoizedState.tag&1){if(l.flags|=2048,vo(9,Oc(),xy.bind(null,l,f,a,i),null),at===null)throw Error(s(349));d||(Ki&124)!==0||wy(l,i,a)}return a}function wy(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Oe.updateQueue,i===null?(i=pd(),Oe.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function xy(t,i,a,l){i.value=a,i.getSnapshot=l,Cy(i)&&Iy(t)}function Ry(t,i,a){return a(function(){Cy(i)&&Iy(t)})}function Cy(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!On(t,a)}catch{return!0}}function Iy(t){var i=lo(t,2);i!==null&&Ln(i,t,2)}function _d(t){var i=En();if(typeof t=="function"){var a=t;if(t=a(),Ea){fn(!0);try{a()}finally{fn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:t},i}function Dy(t,i,a,l){return t.baseState=a,yd(t,tt,typeof l=="function"?l:oi)}function B1(t,i,a,l,f){if(Mc(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){d.listeners.push(E)}};P.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,Ny(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Ny(t,i){var a=i.action,l=i.payload,f=t.state;if(i.isTransition){var d=P.T,E={};P.T=E;try{var T=a(f,l),I=P.S;I!==null&&I(E,T),Oy(t,i,T)}catch(H){Ed(t,i,H)}finally{P.T=d}}else try{d=a(f,l),Oy(t,i,d)}catch(H){Ed(t,i,H)}}function Oy(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){ky(t,i,l)},function(l){return Ed(t,i,l)}):ky(t,i,a)}function ky(t,i,a){i.status="fulfilled",i.value=a,My(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Ny(t,a)))}function Ed(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,My(i),i=i.next;while(i!==l)}t.action=null}function My(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Vy(t,i){return i}function Py(t,i){if(Ke){var a=at.formState;if(a!==null){e:{var l=Oe;if(Ke){if(vt){t:{for(var f=vt,d=Nr;f.nodeType!==8;){if(!d){f=null;break t}if(f=mr(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){vt=mr(f.nextSibling),l=f.data==="F!";break e}}ga(l)}l=!1}l&&(i=a[0])}}return a=En(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vy,lastRenderedState:i},a.queue=l,a=tv.bind(null,Oe,l),l.dispatch=a,l=_d(!1),d=wd.bind(null,Oe,!1,l.queue),l=En(),f={state:i,dispatch:null,action:t,pending:null},l.queue=f,a=B1.bind(null,Oe,f,d,a),f.dispatch=a,l.memoizedState=t,[i,a,!1]}function Uy(t){var i=Ot();return Ly(i,tt,t)}function Ly(t,i,a){if(i=yd(t,i,Vy)[0],t=Nc(oi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Pl(i)}catch(E){throw E===Dl?wc:E}else l=i;i=Ot();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(Oe.flags|=2048,vo(9,Oc(),F1.bind(null,f,a),null)),[l,d,t]}function F1(t,i){t.action=i}function jy(t){var i=Ot(),a=tt;if(a!==null)return Ly(i,a,t);Ot(),i=i.memoizedState,a=Ot();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function vo(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Oe.updateQueue,i===null&&(i=pd(),Oe.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function Oc(){return{destroy:void 0,resource:void 0}}function zy(){return Ot().memoizedState}function kc(t,i,a,l){var f=En();l=l===void 0?null:l,Oe.flags|=t,f.memoizedState=vo(1|i,Oc(),a,l)}function Ul(t,i,a,l){var f=Ot();l=l===void 0?null:l;var d=f.memoizedState.inst;tt!==null&&l!==null&&cd(l,tt.memoizedState.deps)?f.memoizedState=vo(i,d,a,l):(Oe.flags|=t,f.memoizedState=vo(1|i,d,a,l))}function By(t,i){kc(8390656,8,t,i)}function Fy(t,i){Ul(2048,8,t,i)}function qy(t,i){return Ul(4,2,t,i)}function Hy(t,i){return Ul(4,4,t,i)}function Gy(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Ky(t,i,a){a=a!=null?a.concat([t]):null,Ul(4,4,Gy.bind(null,i,t),a)}function bd(){}function Qy(t,i){var a=Ot();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&cd(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function Yy(t,i){var a=Ot();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&cd(i,l[1]))return l[0];if(l=t(),Ea){fn(!0);try{t()}finally{fn(!1)}}return a.memoizedState=[l,i],l}function Td(t,i,a){return a===void 0||(Ki&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=$v(),Oe.lanes|=t,Ji|=t,a)}function Wy(t,i,a,l){return On(a,i)?a:po.current!==null?(t=Td(t,a,l),On(t,i)||(qt=!0),t):(Ki&42)===0?(qt=!0,t.memoizedState=a):(t=$v(),Oe.lanes|=t,Ji|=t,i)}function Xy(t,i,a,l,f){var d=ie.p;ie.p=d!==0&&8>d?d:8;var E=P.T,T={};P.T=T,wd(t,!1,i,a);try{var I=f(),H=P.S;if(H!==null&&H(T,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var $=L1(I,l);Ll(t,i,$,Un(t))}else Ll(t,i,l,Un(t))}catch(ne){Ll(t,i,{then:function(){},status:"rejected",reason:ne},Un())}finally{ie.p=d,P.T=E}}function q1(){}function Sd(t,i,a,l){if(t.tag!==5)throw Error(s(476));var f=$y(t).queue;Xy(t,f,i,de,a===null?q1:function(){return Zy(t),a(l)})}function $y(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:de},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Zy(t){var i=$y(t).next.queue;Ll(t,i,{},Un())}function Ad(){return sn(nu)}function Jy(){return Ot().memoizedState}function ev(){return Ot().memoizedState}function H1(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Un();t=Hi(a);var l=Gi(i,t,a);l!==null&&(Ln(l,i,a),Ol(l,i,a)),i={cache:ed()},t.payload=i;return}i=i.return}}function G1(t,i,a){var l=Un();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Mc(t)?nv(i,a):(a=Hf(t,i,a,l),a!==null&&(Ln(a,t,l),rv(a,i,l)))}function tv(t,i,a){var l=Un();Ll(t,i,a,l)}function Ll(t,i,a,l){var f={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Mc(t))nv(i,f);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var E=i.lastRenderedState,T=d(E,a);if(f.hasEagerState=!0,f.eagerState=T,On(T,E))return yc(t,i,f,0),at===null&&gc(),!1}catch{}finally{}if(a=Hf(t,i,f,l),a!==null)return Ln(a,t,l),rv(a,i,l),!0}return!1}function wd(t,i,a,l){if(l={lane:2,revertLane:rm(),action:l,hasEagerState:!1,eagerState:null,next:null},Mc(t)){if(i)throw Error(s(479))}else i=Hf(t,a,l,2),i!==null&&Ln(i,t,2)}function Mc(t){var i=t.alternate;return t===Oe||i!==null&&i===Oe}function nv(t,i){go=Cc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function rv(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Sr(t,a)}}var Vc={readContext:sn,use:Dc,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt},iv={readContext:sn,use:Dc,useCallback:function(t,i){return En().memoizedState=[t,i===void 0?null:i],t},useContext:sn,useEffect:By,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,kc(4194308,4,Gy.bind(null,i,t),a)},useLayoutEffect:function(t,i){return kc(4194308,4,t,i)},useInsertionEffect:function(t,i){kc(4,2,t,i)},useMemo:function(t,i){var a=En();i=i===void 0?null:i;var l=t();if(Ea){fn(!0);try{t()}finally{fn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=En();if(a!==void 0){var f=a(i);if(Ea){fn(!0);try{a(i)}finally{fn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=G1.bind(null,Oe,t),[l.memoizedState,t]},useRef:function(t){var i=En();return t={current:t},i.memoizedState=t},useState:function(t){t=_d(t);var i=t.queue,a=tv.bind(null,Oe,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:bd,useDeferredValue:function(t,i){var a=En();return Td(a,t,i)},useTransition:function(){var t=_d(!1);return t=Xy.bind(null,Oe,t.queue,!0,!1),En().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Oe,f=En();if(Ke){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),at===null)throw Error(s(349));(Be&124)!==0||wy(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,By(Ry.bind(null,l,d,t),[t]),l.flags|=2048,vo(9,Oc(),xy.bind(null,l,d,a,i),null),a},useId:function(){var t=En(),i=at.identifierPrefix;if(Ke){var a=ii,l=ri;a=(l&~(1<<32-Dt(l)-1)).toString(32)+a,i=""+i+"R"+a,a=Ic++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=j1++,i=""+i+"r"+a.toString(32)+"";return t.memoizedState=i},useHostTransitionStatus:Ad,useFormState:Py,useActionState:Py,useOptimistic:function(t){var i=En();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=wd.bind(null,Oe,!0,a),a.dispatch=i,[t,i]},useMemoCache:gd,useCacheRefresh:function(){return En().memoizedState=H1.bind(null,Oe)}},sv={readContext:sn,use:Dc,useCallback:Qy,useContext:sn,useEffect:Fy,useImperativeHandle:Ky,useInsertionEffect:qy,useLayoutEffect:Hy,useMemo:Yy,useReducer:Nc,useRef:zy,useState:function(){return Nc(oi)},useDebugValue:bd,useDeferredValue:function(t,i){var a=Ot();return Wy(a,tt.memoizedState,t,i)},useTransition:function(){var t=Nc(oi)[0],i=Ot().memoizedState;return[typeof t=="boolean"?t:Pl(t),i]},useSyncExternalStore:Ay,useId:Jy,useHostTransitionStatus:Ad,useFormState:Uy,useActionState:Uy,useOptimistic:function(t,i){var a=Ot();return Dy(a,tt,t,i)},useMemoCache:gd,useCacheRefresh:ev},K1={readContext:sn,use:Dc,useCallback:Qy,useContext:sn,useEffect:Fy,useImperativeHandle:Ky,useInsertionEffect:qy,useLayoutEffect:Hy,useMemo:Yy,useReducer:vd,useRef:zy,useState:function(){return vd(oi)},useDebugValue:bd,useDeferredValue:function(t,i){var a=Ot();return tt===null?Td(a,t,i):Wy(a,tt.memoizedState,t,i)},useTransition:function(){var t=vd(oi)[0],i=Ot().memoizedState;return[typeof t=="boolean"?t:Pl(t),i]},useSyncExternalStore:Ay,useId:Jy,useHostTransitionStatus:Ad,useFormState:jy,useActionState:jy,useOptimistic:function(t,i){var a=Ot();return tt!==null?Dy(a,tt,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:gd,useCacheRefresh:ev},_o=null,jl=0;function Pc(t){var i=jl;return jl+=1,_o===null&&(_o=[]),gy(_o,t,i)}function zl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Uc(t,i){throw i.$$typeof===S?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function av(t){var i=t._init;return i(t._payload)}function ov(t){function i(U,V){if(t){var F=U.deletions;F===null?(U.deletions=[V],U.flags|=16):F.push(V)}}function a(U,V){if(!t)return null;for(;V!==null;)i(U,V),V=V.sibling;return null}function l(U){for(var V=new Map;U!==null;)U.key!==null?V.set(U.key,U):V.set(U.index,U),U=U.sibling;return V}function f(U,V){return U=ni(U,V),U.index=0,U.sibling=null,U}function d(U,V,F){return U.index=F,t?(F=U.alternate,F!==null?(F=F.index,F<V?(U.flags|=67108866,V):F):(U.flags|=67108866,V)):(U.flags|=1048576,V)}function E(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function T(U,V,F,ee){return V===null||V.tag!==6?(V=Kf(F,U.mode,ee),V.return=U,V):(V=f(V,F),V.return=U,V)}function I(U,V,F,ee){var me=F.type;return me===B?$(U,V,F.props.children,ee,F.key):V!==null&&(V.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===R&&av(me)===V.type)?(V=f(V,F.props),zl(V,F),V.return=U,V):(V=_c(F.type,F.key,F.props,null,U.mode,ee),zl(V,F),V.return=U,V)}function H(U,V,F,ee){return V===null||V.tag!==4||V.stateNode.containerInfo!==F.containerInfo||V.stateNode.implementation!==F.implementation?(V=Qf(F,U.mode,ee),V.return=U,V):(V=f(V,F.children||[]),V.return=U,V)}function $(U,V,F,ee,me){return V===null||V.tag!==7?(V=fa(F,U.mode,ee,me),V.return=U,V):(V=f(V,F),V.return=U,V)}function ne(U,V,F){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Kf(""+V,U.mode,F),V.return=U,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case w:return F=_c(V.type,V.key,V.props,null,U.mode,F),zl(F,V),F.return=U,F;case L:return V=Qf(V,U.mode,F),V.return=U,V;case R:var ee=V._init;return V=ee(V._payload),ne(U,V,F)}if(ze(V)||N(V))return V=fa(V,U.mode,F,null),V.return=U,V;if(typeof V.then=="function")return ne(U,Pc(V),F);if(V.$$typeof===te)return ne(U,Sc(U,V),F);Uc(U,V)}return null}function G(U,V,F,ee){var me=V!==null?V.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return me!==null?null:T(U,V,""+F,ee);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case w:return F.key===me?I(U,V,F,ee):null;case L:return F.key===me?H(U,V,F,ee):null;case R:return me=F._init,F=me(F._payload),G(U,V,F,ee)}if(ze(F)||N(F))return me!==null?null:$(U,V,F,ee,null);if(typeof F.then=="function")return G(U,V,Pc(F),ee);if(F.$$typeof===te)return G(U,V,Sc(U,F),ee);Uc(U,F)}return null}function K(U,V,F,ee,me){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return U=U.get(F)||null,T(V,U,""+ee,me);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case w:return U=U.get(ee.key===null?F:ee.key)||null,I(V,U,ee,me);case L:return U=U.get(ee.key===null?F:ee.key)||null,H(V,U,ee,me);case R:var Me=ee._init;return ee=Me(ee._payload),K(U,V,F,ee,me)}if(ze(ee)||N(ee))return U=U.get(F)||null,$(V,U,ee,me,null);if(typeof ee.then=="function")return K(U,V,F,Pc(ee),me);if(ee.$$typeof===te)return K(U,V,F,Sc(V,ee),me);Uc(V,ee)}return null}function xe(U,V,F,ee){for(var me=null,Me=null,ve=V,Se=V=0,Gt=null;ve!==null&&Se<F.length;Se++){ve.index>Se?(Gt=ve,ve=null):Gt=ve.sibling;var He=G(U,ve,F[Se],ee);if(He===null){ve===null&&(ve=Gt);break}t&&ve&&He.alternate===null&&i(U,ve),V=d(He,V,Se),Me===null?me=He:Me.sibling=He,Me=He,ve=Gt}if(Se===F.length)return a(U,ve),Ke&&ma(U,Se),me;if(ve===null){for(;Se<F.length;Se++)ve=ne(U,F[Se],ee),ve!==null&&(V=d(ve,V,Se),Me===null?me=ve:Me.sibling=ve,Me=ve);return Ke&&ma(U,Se),me}for(ve=l(ve);Se<F.length;Se++)Gt=K(ve,U,Se,F[Se],ee),Gt!==null&&(t&&Gt.alternate!==null&&ve.delete(Gt.key===null?Se:Gt.key),V=d(Gt,V,Se),Me===null?me=Gt:Me.sibling=Gt,Me=Gt);return t&&ve.forEach(function(ls){return i(U,ls)}),Ke&&ma(U,Se),me}function Ee(U,V,F,ee){if(F==null)throw Error(s(151));for(var me=null,Me=null,ve=V,Se=V=0,Gt=null,He=F.next();ve!==null&&!He.done;Se++,He=F.next()){ve.index>Se?(Gt=ve,ve=null):Gt=ve.sibling;var ls=G(U,ve,He.value,ee);if(ls===null){ve===null&&(ve=Gt);break}t&&ve&&ls.alternate===null&&i(U,ve),V=d(ls,V,Se),Me===null?me=ls:Me.sibling=ls,Me=ls,ve=Gt}if(He.done)return a(U,ve),Ke&&ma(U,Se),me;if(ve===null){for(;!He.done;Se++,He=F.next())He=ne(U,He.value,ee),He!==null&&(V=d(He,V,Se),Me===null?me=He:Me.sibling=He,Me=He);return Ke&&ma(U,Se),me}for(ve=l(ve);!He.done;Se++,He=F.next())He=K(ve,U,Se,He.value,ee),He!==null&&(t&&He.alternate!==null&&ve.delete(He.key===null?Se:He.key),V=d(He,V,Se),Me===null?me=He:Me.sibling=He,Me=He);return t&&ve.forEach(function(QA){return i(U,QA)}),Ke&&ma(U,Se),me}function rt(U,V,F,ee){if(typeof F=="object"&&F!==null&&F.type===B&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case w:e:{for(var me=F.key;V!==null;){if(V.key===me){if(me=F.type,me===B){if(V.tag===7){a(U,V.sibling),ee=f(V,F.props.children),ee.return=U,U=ee;break e}}else if(V.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===R&&av(me)===V.type){a(U,V.sibling),ee=f(V,F.props),zl(ee,F),ee.return=U,U=ee;break e}a(U,V);break}else i(U,V);V=V.sibling}F.type===B?(ee=fa(F.props.children,U.mode,ee,F.key),ee.return=U,U=ee):(ee=_c(F.type,F.key,F.props,null,U.mode,ee),zl(ee,F),ee.return=U,U=ee)}return E(U);case L:e:{for(me=F.key;V!==null;){if(V.key===me)if(V.tag===4&&V.stateNode.containerInfo===F.containerInfo&&V.stateNode.implementation===F.implementation){a(U,V.sibling),ee=f(V,F.children||[]),ee.return=U,U=ee;break e}else{a(U,V);break}else i(U,V);V=V.sibling}ee=Qf(F,U.mode,ee),ee.return=U,U=ee}return E(U);case R:return me=F._init,F=me(F._payload),rt(U,V,F,ee)}if(ze(F))return xe(U,V,F,ee);if(N(F)){if(me=N(F),typeof me!="function")throw Error(s(150));return F=me.call(F),Ee(U,V,F,ee)}if(typeof F.then=="function")return rt(U,V,Pc(F),ee);if(F.$$typeof===te)return rt(U,V,Sc(U,F),ee);Uc(U,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,V!==null&&V.tag===6?(a(U,V.sibling),ee=f(V,F),ee.return=U,U=ee):(a(U,V),ee=Kf(F,U.mode,ee),ee.return=U,U=ee),E(U)):a(U,V)}return function(U,V,F,ee){try{jl=0;var me=rt(U,V,F,ee);return _o=null,me}catch(ve){if(ve===Dl||ve===wc)throw ve;var Me=kn(29,ve,null,U.mode);return Me.lanes=ee,Me.return=U,Me}finally{}}}var Eo=ov(!0),lv=ov(!1),Jn=J(null),Or=null;function Qi(t){var i=t.alternate;ce(jt,jt.current&1),ce(Jn,t),Or===null&&(i===null||po.current!==null||i.memoizedState!==null)&&(Or=t)}function uv(t){if(t.tag===22){if(ce(jt,jt.current),ce(Jn,t),Or===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(Or=t)}}else Yi()}function Yi(){ce(jt,jt.current),ce(Jn,Jn.current)}function li(t){oe(Jn),Or===t&&(Or=null),oe(jt)}var jt=J(0);function Lc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||pm(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function xd(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:b({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Rd={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=Un(),f=Hi(l);f.payload=i,a!=null&&(f.callback=a),i=Gi(t,f,l),i!==null&&(Ln(i,t,l),Ol(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=Un(),f=Hi(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Gi(t,f,l),i!==null&&(Ln(i,t,l),Ol(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Un(),l=Hi(a);l.tag=2,i!=null&&(l.callback=i),i=Gi(t,l,a),i!==null&&(Ln(i,t,a),Ol(i,t,a))}};function cv(t,i,a,l,f,d,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,E):i.prototype&&i.prototype.isPureReactComponent?!Tl(a,l)||!Tl(f,d):!0}function hv(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Rd.enqueueReplaceState(i,i.state,null)}function ba(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=b({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}var jc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function fv(t){jc(t)}function dv(t){console.error(t)}function mv(t){jc(t)}function zc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function pv(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Cd(t,i,a){return a=Hi(a),a.tag=3,a.payload={element:null},a.callback=function(){zc(t,i)},a}function gv(t){return t=Hi(t),t.tag=3,t}function yv(t,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;t.payload=function(){return f(d)},t.callback=function(){pv(i,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(t.callback=function(){pv(i,a,l),typeof f!="function"&&(es===null?es=new Set([this]):es.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function Q1(t,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Rl(i,a,f,!0),a=Jn.current,a!==null){switch(a.tag){case 13:return Or===null?Zd():a.alternate===null&&_t===0&&(_t=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===rd?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),em(t,l,f)),!1;case 22:return a.flags|=65536,l===rd?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),em(t,l,f)),!1}throw Error(s(435,a.tag))}return em(t,l,f),Zd(),!1}if(Ke)return i=Jn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Xf&&(t=Error(s(422),{cause:l}),xl(Wn(t,a)))):(l!==Xf&&(i=Error(s(423),{cause:l}),xl(Wn(i,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=Wn(l,a),f=Cd(t.stateNode,l,f),ad(t,f),_t!==4&&(_t=2)),!1;var d=Error(s(520),{cause:l});if(d=Wn(d,a),Ql===null?Ql=[d]:Ql.push(d),_t!==4&&(_t=2),i===null)return!0;l=Wn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=Cd(a.stateNode,l,t),ad(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(es===null||!es.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=gv(f),yv(f,t,a,l),ad(a,f),!1}a=a.return}while(a!==null);return!1}var vv=Error(s(461)),qt=!1;function Xt(t,i,a,l){i.child=t===null?lv(i,null,a,l):Eo(i,t.child,a,l)}function _v(t,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var E={};for(var T in l)T!=="ref"&&(E[T]=l[T])}else E=l;return va(i),l=hd(t,i,a,E,d,f),T=fd(),t!==null&&!qt?(dd(t,i,f),ui(t,i,f)):(Ke&&T&&Yf(i),i.flags|=1,Xt(t,i,l,f),i.child)}function Ev(t,i,a,l,f){if(t===null){var d=a.type;return typeof d=="function"&&!Gf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,bv(t,i,d,l,f)):(t=_c(a.type,null,l,i,i.mode,f),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!Pd(t,f)){var E=d.memoizedProps;if(a=a.compare,a=a!==null?a:Tl,a(E,l)&&t.ref===i.ref)return ui(t,i,f)}return i.flags|=1,t=ni(d,l),t.ref=i.ref,t.return=i,i.child=t}function bv(t,i,a,l,f){if(t!==null){var d=t.memoizedProps;if(Tl(d,l)&&t.ref===i.ref)if(qt=!1,i.pendingProps=l=d,Pd(t,f))(t.flags&131072)!==0&&(qt=!0);else return i.lanes=t.lanes,ui(t,i,f)}return Id(t,i,a,l,f)}function Tv(t,i,a){var l=i.pendingProps,f=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,t!==null){for(f=i.child=t.child,d=0;f!==null;)d=d|f.lanes|f.childLanes,f=f.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return Sv(t,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ac(i,d!==null?d.cachePool:null),d!==null?by(i,d):ld(),uv(i);else return i.lanes=i.childLanes=536870912,Sv(t,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(Ac(i,d.cachePool),by(i,d),Yi(),i.memoizedState=null):(t!==null&&Ac(i,null),ld(),Yi());return Xt(t,i,f,a),i.child}function Sv(t,i,a,l){var f=nd();return f=f===null?null:{parent:Lt._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},t!==null&&Ac(i,null),ld(),uv(i),t!==null&&Rl(t,i,l,!0),null}function Bc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Id(t,i,a,l,f){return va(i),a=hd(t,i,a,l,void 0,f),l=fd(),t!==null&&!qt?(dd(t,i,f),ui(t,i,f)):(Ke&&l&&Yf(i),i.flags|=1,Xt(t,i,a,f),i.child)}function Av(t,i,a,l,f,d){return va(i),i.updateQueue=null,a=Sy(i,l,a,f),Ty(t),l=fd(),t!==null&&!qt?(dd(t,i,d),ui(t,i,d)):(Ke&&l&&Yf(i),i.flags|=1,Xt(t,i,a,d),i.child)}function wv(t,i,a,l,f){if(va(i),i.stateNode===null){var d=uo,E=a.contextType;typeof E=="object"&&E!==null&&(d=sn(E)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Rd,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},id(i),E=a.contextType,d.context=typeof E=="object"&&E!==null?sn(E):uo,d.state=i.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(xd(i,a,E,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(E=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),E!==d.state&&Rd.enqueueReplaceState(d,d.state,null),Ml(i,l,d,f),kl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var T=i.memoizedProps,I=ba(a,T);d.props=I;var H=d.context,$=a.contextType;E=uo,typeof $=="object"&&$!==null&&(E=sn($));var ne=a.getDerivedStateFromProps;$=typeof ne=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,$||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||H!==E)&&hv(i,d,l,E),qi=!1;var G=i.memoizedState;d.state=G,Ml(i,l,d,f),kl(),H=i.memoizedState,T||G!==H||qi?(typeof ne=="function"&&(xd(i,a,ne,l),H=i.memoizedState),(I=qi||cv(i,a,I,l,G,H,E))?($||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=H),d.props=l,d.state=H,d.context=E,l=I):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,sd(t,i),E=i.memoizedProps,$=ba(a,E),d.props=$,ne=i.pendingProps,G=d.context,H=a.contextType,I=uo,typeof H=="object"&&H!==null&&(I=sn(H)),T=a.getDerivedStateFromProps,(H=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E!==ne||G!==I)&&hv(i,d,l,I),qi=!1,G=i.memoizedState,d.state=G,Ml(i,l,d,f),kl();var K=i.memoizedState;E!==ne||G!==K||qi||t!==null&&t.dependencies!==null&&Tc(t.dependencies)?(typeof T=="function"&&(xd(i,a,T,l),K=i.memoizedState),($=qi||cv(i,a,$,l,G,K,I)||t!==null&&t.dependencies!==null&&Tc(t.dependencies))?(H||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,K,I),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,K,I)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=K),d.props=l,d.state=K,d.context=I,l=$):(typeof d.componentDidUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,Bc(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=Eo(i,t.child,null,f),i.child=Eo(i,null,a,f)):Xt(t,i,a,f),i.memoizedState=d.state,t=i.child):t=ui(t,i,f),t}function xv(t,i,a,l){return wl(),i.flags|=256,Xt(t,i,a,l),i.child}var Dd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Nd(t){return{baseLanes:t,cachePool:dy()}}function Od(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=er),t}function Rv(t,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,E;if((E=d)||(E=t!==null&&t.memoizedState===null?!1:(jt.current&2)!==0),E&&(f=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,t===null){if(Ke){if(f?Qi(i):Yi(),Ke){var T=vt,I;if(I=T){e:{for(I=T,T=Nr;I.nodeType!==8;){if(!T){T=null;break e}if(I=mr(I.nextSibling),I===null){T=null;break e}}T=I}T!==null?(i.memoizedState={dehydrated:T,treeContext:da!==null?{id:ri,overflow:ii}:null,retryLane:536870912,hydrationErrors:null},I=kn(18,null,null,0),I.stateNode=T,I.return=i,i.child=I,gn=i,vt=null,I=!0):I=!1}I||ga(i)}if(T=i.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return pm(T)?i.lanes=32:i.lanes=536870912,null;li(i)}return T=l.children,l=l.fallback,f?(Yi(),f=i.mode,T=Fc({mode:"hidden",children:T},f),l=fa(l,f,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,f=i.child,f.memoizedState=Nd(a),f.childLanes=Od(t,E,a),i.memoizedState=Dd,l):(Qi(i),kd(i,T))}if(I=t.memoizedState,I!==null&&(T=I.dehydrated,T!==null)){if(d)i.flags&256?(Qi(i),i.flags&=-257,i=Md(t,i,a)):i.memoizedState!==null?(Yi(),i.child=t.child,i.flags|=128,i=null):(Yi(),f=l.fallback,T=i.mode,l=Fc({mode:"visible",children:l.children},T),f=fa(f,T,a,null),f.flags|=2,l.return=i,f.return=i,l.sibling=f,i.child=l,Eo(i,t.child,null,a),l=i.child,l.memoizedState=Nd(a),l.childLanes=Od(t,E,a),i.memoizedState=Dd,i=f);else if(Qi(i),pm(T)){if(E=T.nextSibling&&T.nextSibling.dataset,E)var H=E.dgst;E=H,l=Error(s(419)),l.stack="",l.digest=E,xl({value:l,source:null,stack:null}),i=Md(t,i,a)}else if(qt||Rl(t,i,a,!1),E=(a&t.childLanes)!==0,qt||E){if(E=at,E!==null&&(l=a&-a,l=(l&42)!==0?1:qs(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==I.retryLane))throw I.retryLane=l,lo(t,l),Ln(E,t,l),vv;T.data==="$?"||Zd(),i=Md(t,i,a)}else T.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=I.treeContext,vt=mr(T.nextSibling),gn=i,Ke=!0,pa=null,Nr=!1,t!==null&&($n[Zn++]=ri,$n[Zn++]=ii,$n[Zn++]=da,ri=t.id,ii=t.overflow,da=i),i=kd(i,l.children),i.flags|=4096);return i}return f?(Yi(),f=l.fallback,T=i.mode,I=t.child,H=I.sibling,l=ni(I,{mode:"hidden",children:l.children}),l.subtreeFlags=I.subtreeFlags&65011712,H!==null?f=ni(H,f):(f=fa(f,T,a,null),f.flags|=2),f.return=i,l.return=i,l.sibling=f,i.child=l,l=f,f=i.child,T=t.child.memoizedState,T===null?T=Nd(a):(I=T.cachePool,I!==null?(H=Lt._currentValue,I=I.parent!==H?{parent:H,pool:H}:I):I=dy(),T={baseLanes:T.baseLanes|a,cachePool:I}),f.memoizedState=T,f.childLanes=Od(t,E,a),i.memoizedState=Dd,l):(Qi(i),a=t.child,t=a.sibling,a=ni(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(E=i.deletions,E===null?(i.deletions=[t],i.flags|=16):E.push(t)),i.child=a,i.memoizedState=null,a)}function kd(t,i){return i=Fc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Fc(t,i){return t=kn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Md(t,i,a){return Eo(i,t.child,null,a),t=kd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Cv(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Zf(t.return,i,a)}function Vd(t,i,a,l,f){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=f)}function Iv(t,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;if(Xt(t,i,l.children,a),l=jt.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Cv(t,a,i);else if(t.tag===19)Cv(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ce(jt,l),f){case"forwards":for(a=i.child,f=null;a!==null;)t=a.alternate,t!==null&&Lc(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Vd(i,!1,f,a,d);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(t=f.alternate,t!==null&&Lc(t)===null){i.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}Vd(i,!0,a,null,d);break;case"together":Vd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ui(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Ji|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Rl(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=ni(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=ni(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Pd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Tc(t)))}function Y1(t,i,a){switch(i.tag){case 3:Ge(i,i.stateNode.containerInfo),Fi(i,Lt,t.memoizedState.cache),wl();break;case 27:case 5:Ci(i);break;case 4:Ge(i,i.stateNode.containerInfo);break;case 10:Fi(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Qi(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Rv(t,i,a):(Qi(i),t=ui(t,i,a),t!==null?t.sibling:null);Qi(i);break;case 19:var f=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Rl(t,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return Iv(t,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ce(jt,jt.current),l)break;return null;case 22:case 23:return i.lanes=0,Tv(t,i,a);case 24:Fi(i,Lt,t.memoizedState.cache)}return ui(t,i,a)}function Dv(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)qt=!0;else{if(!Pd(t,a)&&(i.flags&128)===0)return qt=!1,Y1(t,i,a);qt=(t.flags&131072)!==0}else qt=!1,Ke&&(i.flags&1048576)!==0&&ay(i,bc,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,f=l._init;if(l=f(l._payload),i.type=l,typeof l=="function")Gf(l)?(t=ba(l,t),i.tag=1,i=wv(null,i,l,t,a)):(i.tag=0,i=Id(null,i,l,t,a));else{if(l!=null){if(f=l.$$typeof,f===ue){i.tag=11,i=_v(null,i,l,t,a);break e}else if(f===O){i.tag=14,i=Ev(null,i,l,t,a);break e}}throw i=qe(l)||l,Error(s(306,i,""))}}return i;case 0:return Id(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=ba(l,i.pendingProps),wv(t,i,l,f,a);case 3:e:{if(Ge(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,sd(t,i),Ml(i,l,null,a);var E=i.memoizedState;if(l=E.cache,Fi(i,Lt,l),l!==d.cache&&Jf(i,[Lt],a,!0),kl(),l=E.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=xv(t,i,l,a);break e}else if(l!==f){f=Wn(Error(s(424)),i),xl(f),i=xv(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(vt=mr(t.firstChild),gn=i,Ke=!0,pa=null,Nr=!0,a=lv(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(wl(),l===f){i=ui(t,i,a);break e}Xt(t,i,l,a)}i=i.child}return i;case 26:return Bc(t,i),t===null?(a=M_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ke||(a=i.type,t=i.pendingProps,l=nh(be.current).createElement(a),l[At]=i,l[Wt]=t,Zt(l,a,t),wt(l),i.stateNode=l):i.memoizedState=M_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Ci(i),t===null&&Ke&&(l=i.stateNode=N_(i.type,i.pendingProps,be.current),gn=i,Nr=!0,f=vt,rs(i.type)?(gm=f,vt=mr(l.firstChild)):vt=f),Xt(t,i,i.pendingProps.children,a),Bc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Ke&&((f=l=vt)&&(l=TA(l,i.type,i.pendingProps,Nr),l!==null?(i.stateNode=l,gn=i,vt=mr(l.firstChild),Nr=!1,f=!0):f=!1),f||ga(i)),Ci(i),f=i.type,d=i.pendingProps,E=t!==null?t.memoizedProps:null,l=d.children,fm(f,d)?l=null:E!==null&&fm(f,E)&&(i.flags|=32),i.memoizedState!==null&&(f=hd(t,i,z1,null,null,a),nu._currentValue=f),Bc(t,i),Xt(t,i,l,a),i.child;case 6:return t===null&&Ke&&((t=a=vt)&&(a=SA(a,i.pendingProps,Nr),a!==null?(i.stateNode=a,gn=i,vt=null,t=!0):t=!1),t||ga(i)),null;case 13:return Rv(t,i,a);case 4:return Ge(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Eo(i,null,l,a):Xt(t,i,l,a),i.child;case 11:return _v(t,i,i.type,i.pendingProps,a);case 7:return Xt(t,i,i.pendingProps,a),i.child;case 8:return Xt(t,i,i.pendingProps.children,a),i.child;case 12:return Xt(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Fi(i,i.type,l.value),Xt(t,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,va(i),f=sn(f),l=l(f),i.flags|=1,Xt(t,i,l,a),i.child;case 14:return Ev(t,i,i.type,i.pendingProps,a);case 15:return bv(t,i,i.type,i.pendingProps,a);case 19:return Iv(t,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},t===null?(a=Fc(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=ni(t.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Tv(t,i,a);case 24:return va(i),l=sn(Lt),t===null?(f=nd(),f===null&&(f=at,d=ed(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},id(i),Fi(i,Lt,f)):((t.lanes&a)!==0&&(sd(t,i),Ml(i,null,null,a),kl()),f=t.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Fi(i,Lt,l)):(l=d.cache,Fi(i,Lt,l),l!==f.cache&&Jf(i,[Lt],a,!0))),Xt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ci(t){t.flags|=4}function Nv(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!j_(i)){if(i=Jn.current,i!==null&&((Be&4194048)===Be?Or!==null:(Be&62914560)!==Be&&(Be&536870912)===0||i!==Or))throw Nl=rd,my;t.flags|=8192}}function qc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Y():536870912,t.lanes|=i,Ao|=i)}function Bl(t,i){if(!Ke)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function mt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function W1(t,i,a){var l=i.pendingProps;switch(Wf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(i),null;case 1:return mt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ai(Lt),vn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Al(i)?ci(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,uy())),mt(i),null;case 26:return a=i.memoizedState,t===null?(ci(i),a!==null?(mt(i),Nv(i,a)):(mt(i),i.flags&=-16777217)):a?a!==t.memoizedState?(ci(i),mt(i),Nv(i,a)):(mt(i),i.flags&=-16777217):(t.memoizedProps!==l&&ci(i),mt(i),i.flags&=-16777217),null;case 27:Qr(i),a=be.current;var f=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ci(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return mt(i),null}t=ge.current,Al(i)?oy(i):(t=N_(f,l,a),i.stateNode=t,ci(i))}return mt(i),null;case 5:if(Qr(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ci(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return mt(i),null}if(t=ge.current,Al(i))oy(i);else{switch(f=nh(be.current),t){case 1:t=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?f.createElement(a,{is:l.is}):f.createElement(a)}}t[At]=i,t[Wt]=l;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)t.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=t;e:switch(Zt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&ci(i)}}return mt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&ci(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=be.current,Al(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,f=gn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[At]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||A_(t.nodeValue,a)),t||ga(i)}else t=nh(t).createTextNode(l),t[At]=i,i.stateNode=t}return mt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Al(i),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[At]=i}else wl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;mt(i),f=!1}else f=uy(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(li(i),i):(li(i),null)}if(li(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),qc(i,i.updateQueue),mt(i),null;case 4:return vn(),t===null&&om(i.stateNode.containerInfo),mt(i),null;case 10:return ai(i.type),mt(i),null;case 19:if(oe(jt),f=i.memoizedState,f===null)return mt(i),null;if(l=(i.flags&128)!==0,d=f.rendering,d===null)if(l)Bl(f,!1);else{if(_t!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=Lc(t),d!==null){for(i.flags|=128,Bl(f,!1),t=d.updateQueue,i.updateQueue=t,qc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)sy(a,t),a=a.sibling;return ce(jt,jt.current&1|2),i.child}t=t.sibling}f.tail!==null&&nn()>Kc&&(i.flags|=128,l=!0,Bl(f,!1),i.lanes=4194304)}else{if(!l)if(t=Lc(d),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,qc(i,t),Bl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!d.alternate&&!Ke)return mt(i),null}else 2*nn()-f.renderingStartTime>Kc&&a!==536870912&&(i.flags|=128,l=!0,Bl(f,!1),i.lanes=4194304);f.isBackwards?(d.sibling=i.child,i.child=d):(t=f.last,t!==null?t.sibling=d:i.child=d,f.last=d)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=nn(),i.sibling=null,t=jt.current,ce(jt,l?t&1|2:t&1),i):(mt(i),null);case 22:case 23:return li(i),ud(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(mt(i),i.subtreeFlags&6&&(i.flags|=8192)):mt(i),a=i.updateQueue,a!==null&&qc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&oe(_a),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ai(Lt),mt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function X1(t,i){switch(Wf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return ai(Lt),vn(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Qr(i),null;case 13:if(li(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));wl()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return oe(jt),null;case 4:return vn(),null;case 10:return ai(i.type),null;case 22:case 23:return li(i),ud(),t!==null&&oe(_a),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return ai(Lt),null;case 25:return null;default:return null}}function Ov(t,i){switch(Wf(i),i.tag){case 3:ai(Lt),vn();break;case 26:case 27:case 5:Qr(i);break;case 4:vn();break;case 13:li(i);break;case 19:oe(jt);break;case 10:ai(i.type);break;case 22:case 23:li(i),ud(),t!==null&&oe(_a);break;case 24:ai(Lt)}}function Fl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&t)===t){l=void 0;var d=a.create,E=a.inst;l=d(),E.destroy=l}a=a.next}while(a!==f)}}catch(T){it(i,i.return,T)}}function Wi(t,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&t)===t){var E=l.inst,T=E.destroy;if(T!==void 0){E.destroy=void 0,f=i;var I=a,H=T;try{H()}catch($){it(f,I,$)}}}l=l.next}while(l!==d)}}catch($){it(i,i.return,$)}}function kv(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Ey(i,a)}catch(l){it(t,t.return,l)}}}function Mv(t,i,a){a.props=ba(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){it(t,i,l)}}function ql(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(f){it(t,i,f)}}function kr(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){it(t,i,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){it(t,i,f)}else a.current=null}function Vv(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){it(t,t.return,f)}}function Ud(t,i,a){try{var l=t.stateNode;yA(l,t.type,a,i),l[Wt]=i}catch(f){it(t,t.return,f)}}function Pv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&rs(t.type)||t.tag===4}function Ld(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Pv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&rs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jd(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=th));else if(l!==4&&(l===27&&rs(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(jd(t,i,a),t=t.sibling;t!==null;)jd(t,i,a),t=t.sibling}function Hc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&rs(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Hc(t,i,a),t=t.sibling;t!==null;)Hc(t,i,a),t=t.sibling}function Uv(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Zt(i,l,a),i[At]=t,i[Wt]=a}catch(d){it(t,t.return,d)}}var hi=!1,Ct=!1,zd=!1,Lv=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function $1(t,i){if(t=t.containerInfo,cm=lh,t=Wg(t),Lf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var E=0,T=-1,I=-1,H=0,$=0,ne=t,G=null;t:for(;;){for(var K;ne!==a||f!==0&&ne.nodeType!==3||(T=E+f),ne!==d||l!==0&&ne.nodeType!==3||(I=E+l),ne.nodeType===3&&(E+=ne.nodeValue.length),(K=ne.firstChild)!==null;)G=ne,ne=K;for(;;){if(ne===t)break t;if(G===a&&++H===f&&(T=E),G===d&&++$===l&&(I=E),(K=ne.nextSibling)!==null)break;ne=G,G=ne.parentNode}ne=K}a=T===-1||I===-1?null:{start:T,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(hm={focusedElem:t,selectionRange:a},lh=!1,Ht=i;Ht!==null;)if(i=Ht,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,Ht=t;else for(;Ht!==null;){switch(i=Ht,d=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var xe=ba(a.type,f,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(xe,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ee){it(a,a.return,Ee)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)mm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":mm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Ht=t;break}Ht=i.return}}function jv(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Xi(t,a),l&4&&Fl(5,a);break;case 1:if(Xi(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(E){it(a,a.return,E)}else{var f=ba(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(f,i,t.__reactInternalSnapshotBeforeUpdate)}catch(E){it(a,a.return,E)}}l&64&&kv(a),l&512&&ql(a,a.return);break;case 3:if(Xi(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Ey(t,i)}catch(E){it(a,a.return,E)}}break;case 27:i===null&&l&4&&Uv(a);case 26:case 5:Xi(t,a),i===null&&l&4&&Vv(a),l&512&&ql(a,a.return);break;case 12:Xi(t,a);break;case 13:Xi(t,a),l&4&&Fv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=aA.bind(null,a),AA(t,a))));break;case 22:if(l=a.memoizedState!==null||hi,!l){i=i!==null&&i.memoizedState!==null||Ct,f=hi;var d=Ct;hi=l,(Ct=i)&&!d?$i(t,a,(a.subtreeFlags&8772)!==0):Xi(t,a),hi=f,Ct=d}break;case 30:break;default:Xi(t,a)}}function zv(t){var i=t.alternate;i!==null&&(t.alternate=null,zv(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Qa(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ft=null,bn=!1;function fi(t,i,a){for(a=a.child;a!==null;)Bv(t,i,a),a=a.sibling}function Bv(t,i,a){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(sr,a)}catch{}switch(a.tag){case 26:Ct||kr(a,i),fi(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ct||kr(a,i);var l=ft,f=bn;rs(a.type)&&(ft=a.stateNode,bn=!1),fi(t,i,a),Zl(a.stateNode),ft=l,bn=f;break;case 5:Ct||kr(a,i);case 6:if(l=ft,f=bn,ft=null,fi(t,i,a),ft=l,bn=f,ft!==null)if(bn)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(a.stateNode)}catch(d){it(a,i,d)}else try{ft.removeChild(a.stateNode)}catch(d){it(a,i,d)}break;case 18:ft!==null&&(bn?(t=ft,I_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),au(t)):I_(ft,a.stateNode));break;case 4:l=ft,f=bn,ft=a.stateNode.containerInfo,bn=!0,fi(t,i,a),ft=l,bn=f;break;case 0:case 11:case 14:case 15:Ct||Wi(2,a,i),Ct||Wi(4,a,i),fi(t,i,a);break;case 1:Ct||(kr(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Mv(a,i,l)),fi(t,i,a);break;case 21:fi(t,i,a);break;case 22:Ct=(l=Ct)||a.memoizedState!==null,fi(t,i,a),Ct=l;break;default:fi(t,i,a)}}function Fv(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{au(t)}catch(a){it(i,i.return,a)}}function Z1(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Lv),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Lv),i;default:throw Error(s(435,t.tag))}}function Bd(t,i){var a=Z1(t);i.forEach(function(l){var f=oA.bind(null,t,l);a.has(l)||(a.add(l),l.then(f,f))})}function Mn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=t,E=i,T=E;e:for(;T!==null;){switch(T.tag){case 27:if(rs(T.type)){ft=T.stateNode,bn=!1;break e}break;case 5:ft=T.stateNode,bn=!1;break e;case 3:case 4:ft=T.stateNode.containerInfo,bn=!0;break e}T=T.return}if(ft===null)throw Error(s(160));Bv(d,E,f),ft=null,bn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)qv(i,t),i=i.sibling}var dr=null;function qv(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Mn(i,t),Vn(t),l&4&&(Wi(3,t,t.return),Fl(3,t),Wi(5,t,t.return));break;case 1:Mn(i,t),Vn(t),l&512&&(Ct||a===null||kr(a,a.return)),l&64&&hi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=dr;if(Mn(i,t),Vn(t),l&512&&(Ct||a===null||kr(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Oi]||d[At]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Zt(d,l,a),d[At]=t,wt(d),l=d;break e;case"link":var E=U_("link","href",f).get(l+(a.href||""));if(E){for(var T=0;T<E.length;T++)if(d=E[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(T,1);break t}}d=f.createElement(l),Zt(d,l,a),f.head.appendChild(d);break;case"meta":if(E=U_("meta","content",f).get(l+(a.content||""))){for(T=0;T<E.length;T++)if(d=E[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(T,1);break t}}d=f.createElement(l),Zt(d,l,a),f.head.appendChild(d);break;default:throw Error(s(468,l))}d[At]=t,wt(d),l=d}t.stateNode=l}else L_(f,t.type,t.stateNode);else t.stateNode=P_(f,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?L_(f,t.type,t.stateNode):P_(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Ud(t,t.memoizedProps,a.memoizedProps)}break;case 27:Mn(i,t),Vn(t),l&512&&(Ct||a===null||kr(a,a.return)),a!==null&&l&4&&Ud(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Mn(i,t),Vn(t),l&512&&(Ct||a===null||kr(a,a.return)),t.flags&32){f=t.stateNode;try{Qn(f,"")}catch(K){it(t,t.return,K)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,Ud(t,f,a!==null?a.memoizedProps:f)),l&1024&&(zd=!0);break;case 6:if(Mn(i,t),Vn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(K){it(t,t.return,K)}}break;case 3:if(sh=null,f=dr,dr=rh(i.containerInfo),Mn(i,t),dr=f,Vn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{au(i.containerInfo)}catch(K){it(t,t.return,K)}zd&&(zd=!1,Hv(t));break;case 4:l=dr,dr=rh(t.stateNode.containerInfo),Mn(i,t),Vn(t),dr=l;break;case 12:Mn(i,t),Vn(t);break;case 13:Mn(i,t),Vn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Qd=nn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Bd(t,l)));break;case 22:f=t.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,H=hi,$=Ct;if(hi=H||f,Ct=$||I,Mn(i,t),Ct=$,hi=H,Vn(t),l&8192)e:for(i=t.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||I||hi||Ct||Ta(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){I=a=i;try{if(d=I.stateNode,f)E=d.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{T=I.stateNode;var ne=I.memoizedProps.style,G=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;T.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(K){it(I,I.return,K)}}}else if(i.tag===6){if(a===null){I=i;try{I.stateNode.nodeValue=f?"":I.memoizedProps}catch(K){it(I,I.return,K)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Bd(t,a))));break;case 19:Mn(i,t),Vn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Bd(t,l)));break;case 30:break;case 21:break;default:Mn(i,t),Vn(t)}}function Vn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(Pv(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,d=Ld(t);Hc(t,d,f);break;case 5:var E=a.stateNode;a.flags&32&&(Qn(E,""),a.flags&=-33);var T=Ld(t);Hc(t,T,E);break;case 3:case 4:var I=a.stateNode.containerInfo,H=Ld(t);jd(t,H,I);break;default:throw Error(s(161))}}catch($){it(t,t.return,$)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Hv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Hv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Xi(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)jv(t,i.alternate,i),i=i.sibling}function Ta(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Wi(4,i,i.return),Ta(i);break;case 1:kr(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Mv(i,i.return,a),Ta(i);break;case 27:Zl(i.stateNode);case 26:case 5:kr(i,i.return),Ta(i);break;case 22:i.memoizedState===null&&Ta(i);break;case 30:Ta(i);break;default:Ta(i)}t=t.sibling}}function $i(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=t,d=i,E=d.flags;switch(d.tag){case 0:case 11:case 15:$i(f,d,a),Fl(4,d);break;case 1:if($i(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){it(l,l.return,H)}if(l=d,f=l.updateQueue,f!==null){var T=l.stateNode;try{var I=f.shared.hiddenCallbacks;if(I!==null)for(f.shared.hiddenCallbacks=null,f=0;f<I.length;f++)_y(I[f],T)}catch(H){it(l,l.return,H)}}a&&E&64&&kv(d),ql(d,d.return);break;case 27:Uv(d);case 26:case 5:$i(f,d,a),a&&l===null&&E&4&&Vv(d),ql(d,d.return);break;case 12:$i(f,d,a);break;case 13:$i(f,d,a),a&&E&4&&Fv(f,d);break;case 22:d.memoizedState===null&&$i(f,d,a),ql(d,d.return);break;case 30:break;default:$i(f,d,a)}i=i.sibling}}function Fd(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Cl(a))}function qd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Cl(t))}function Mr(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Gv(t,i,a,l),i=i.sibling}function Gv(t,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Mr(t,i,a,l),f&2048&&Fl(9,i);break;case 1:Mr(t,i,a,l);break;case 3:Mr(t,i,a,l),f&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Cl(t)));break;case 12:if(f&2048){Mr(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,E=d.id,T=d.onPostCommit;typeof T=="function"&&T(E,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(I){it(i,i.return,I)}}else Mr(t,i,a,l);break;case 13:Mr(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,E=i.alternate,i.memoizedState!==null?d._visibility&2?Mr(t,i,a,l):Hl(t,i):d._visibility&2?Mr(t,i,a,l):(d._visibility|=2,bo(t,i,a,l,(i.subtreeFlags&10256)!==0)),f&2048&&Fd(E,i);break;case 24:Mr(t,i,a,l),f&2048&&qd(i.alternate,i);break;default:Mr(t,i,a,l)}}function bo(t,i,a,l,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=t,E=i,T=a,I=l,H=E.flags;switch(E.tag){case 0:case 11:case 15:bo(d,E,T,I,f),Fl(8,E);break;case 23:break;case 22:var $=E.stateNode;E.memoizedState!==null?$._visibility&2?bo(d,E,T,I,f):Hl(d,E):($._visibility|=2,bo(d,E,T,I,f)),f&&H&2048&&Fd(E.alternate,E);break;case 24:bo(d,E,T,I,f),f&&H&2048&&qd(E.alternate,E);break;default:bo(d,E,T,I,f)}i=i.sibling}}function Hl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,f=l.flags;switch(l.tag){case 22:Hl(a,l),f&2048&&Fd(l.alternate,l);break;case 24:Hl(a,l),f&2048&&qd(l.alternate,l);break;default:Hl(a,l)}i=i.sibling}}var Gl=8192;function To(t){if(t.subtreeFlags&Gl)for(t=t.child;t!==null;)Kv(t),t=t.sibling}function Kv(t){switch(t.tag){case 26:To(t),t.flags&Gl&&t.memoizedState!==null&&UA(dr,t.memoizedState,t.memoizedProps);break;case 5:To(t);break;case 3:case 4:var i=dr;dr=rh(t.stateNode.containerInfo),To(t),dr=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Gl,Gl=16777216,To(t),Gl=i):To(t));break;default:To(t)}}function Qv(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Kl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ht=l,Wv(l,t)}Qv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Yv(t),t=t.sibling}function Yv(t){switch(t.tag){case 0:case 11:case 15:Kl(t),t.flags&2048&&Wi(9,t,t.return);break;case 3:Kl(t);break;case 12:Kl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Gc(t)):Kl(t);break;default:Kl(t)}}function Gc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ht=l,Wv(l,t)}Qv(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Wi(8,i,i.return),Gc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Gc(i));break;default:Gc(i)}t=t.sibling}}function Wv(t,i){for(;Ht!==null;){var a=Ht;switch(a.tag){case 0:case 11:case 15:Wi(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Cl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ht=l;else e:for(a=t;Ht!==null;){l=Ht;var f=l.sibling,d=l.return;if(zv(l),l===a){Ht=null;break e}if(f!==null){f.return=d,Ht=f;break e}Ht=d}}}var J1={getCacheForType:function(t){var i=sn(Lt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},eA=typeof WeakMap=="function"?WeakMap:Map,$e=0,at=null,Ve=null,Be=0,Ze=0,Pn=null,Zi=!1,So=!1,Hd=!1,di=0,_t=0,Ji=0,Sa=0,Gd=0,er=0,Ao=0,Ql=null,Tn=null,Kd=!1,Qd=0,Kc=1/0,Qc=null,es=null,$t=0,ts=null,wo=null,xo=0,Yd=0,Wd=null,Xv=null,Yl=0,Xd=null;function Un(){if(($e&2)!==0&&Be!==0)return Be&-Be;if(P.T!==null){var t=fo;return t!==0?t:rm()}return Yt()}function $v(){er===0&&(er=(Be&536870912)===0||Ke?Fs():536870912);var t=Jn.current;return t!==null&&(t.flags|=32),er}function Ln(t,i,a){(t===at&&(Ze===2||Ze===9)||t.cancelPendingCommit!==null)&&(Ro(t,0),ns(t,Be,er,!1)),Je(t,a),(($e&2)===0||t!==at)&&(t===at&&(($e&2)===0&&(Sa|=a),_t===4&&ns(t,Be,er,!1)),Vr(t))}function Zv(t,i,a){if(($e&6)!==0)throw Error(s(327));var l=!a&&(i&124)===0&&(i&t.expiredLanes)===0||br(t,i),f=l?rA(t,i):Jd(t,i,!0),d=l;do{if(f===0){So&&!l&&ns(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!tA(a)){f=Jd(t,i,!1),d=!1;continue}if(f===2){if(d=i,t.errorRecoveryDisabledLanes&d)var E=0;else E=t.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var T=t;f=Ql;var I=T.current.memoizedState.isDehydrated;if(I&&(Ro(T,E).flags|=256),E=Jd(T,E,!1),E!==2){if(Hd&&!I){T.errorRecoveryDisabledLanes|=d,Sa|=d,f=4;break e}d=Tn,Tn=f,d!==null&&(Tn===null?Tn=d:Tn.push.apply(Tn,d))}f=E}if(d=!1,f!==2)continue}}if(f===1){Ro(t,0),ns(t,i,0,!0);break}e:{switch(l=t,d=f,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:ns(l,i,er,!Zi);break e;case 2:Tn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=Qd+300-nn(),10<f)){if(ns(l,i,er,!Zi),_n(l,0,!0)!==0)break e;l.timeoutHandle=R_(Jv.bind(null,l,a,Tn,Qc,Kd,i,er,Sa,Ao,Zi,d,2,-0,0),f);break e}Jv(l,a,Tn,Qc,Kd,i,er,Sa,Ao,Zi,d,0,-0,0)}}break}while(!0);Vr(t)}function Jv(t,i,a,l,f,d,E,T,I,H,$,ne,G,K){if(t.timeoutHandle=-1,ne=i.subtreeFlags,(ne&8192||(ne&16785408)===16785408)&&(tu={stylesheets:null,count:0,unsuspend:PA},Kv(i),ne=LA(),ne!==null)){t.cancelPendingCommit=ne(a_.bind(null,t,i,d,a,l,f,E,T,I,$,1,G,K)),ns(t,d,E,!H);return}a_(t,i,d,a,l,f,E,T,I)}function tA(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!On(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ns(t,i,a,l){i&=~Gd,i&=~Sa,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var f=i;0<f;){var d=31-Dt(f),E=1<<d;l[d]=-1,f&=~E}a!==0&&Tr(t,a,i)}function Yc(){return($e&6)===0?(Wl(0),!1):!0}function $d(){if(Ve!==null){if(Ze===0)var t=Ve.return;else t=Ve,si=ya=null,md(t),_o=null,jl=0,t=Ve;for(;t!==null;)Ov(t.alternate,t),t=t.return;Ve=null}}function Ro(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,_A(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),$d(),at=t,Ve=a=ni(t.current,null),Be=i,Ze=0,Pn=null,Zi=!1,So=br(t,i),Hd=!1,Ao=er=Gd=Sa=Ji=_t=0,Tn=Ql=null,Kd=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var f=31-Dt(l),d=1<<f;i|=t[f],l&=~d}return di=i,gc(),a}function e_(t,i){Oe=null,P.H=Vc,i===Dl||i===wc?(i=yy(),Ze=3):i===my?(i=yy(),Ze=4):Ze=i===vv?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Pn=i,Ve===null&&(_t=1,zc(t,Wn(i,t.current)))}function t_(){var t=P.H;return P.H=Vc,t===null?Vc:t}function n_(){var t=P.A;return P.A=J1,t}function Zd(){_t=4,Zi||(Be&4194048)!==Be&&Jn.current!==null||(So=!0),(Ji&134217727)===0&&(Sa&134217727)===0||at===null||ns(at,Be,er,!1)}function Jd(t,i,a){var l=$e;$e|=2;var f=t_(),d=n_();(at!==t||Be!==i)&&(Qc=null,Ro(t,i)),i=!1;var E=_t;e:do try{if(Ze!==0&&Ve!==null){var T=Ve,I=Pn;switch(Ze){case 8:$d(),E=6;break e;case 3:case 2:case 9:case 6:Jn.current===null&&(i=!0);var H=Ze;if(Ze=0,Pn=null,Co(t,T,I,H),a&&So){E=0;break e}break;default:H=Ze,Ze=0,Pn=null,Co(t,T,I,H)}}nA(),E=_t;break}catch($){e_(t,$)}while(!0);return i&&t.shellSuspendCounter++,si=ya=null,$e=l,P.H=f,P.A=d,Ve===null&&(at=null,Be=0,gc()),E}function nA(){for(;Ve!==null;)r_(Ve)}function rA(t,i){var a=$e;$e|=2;var l=t_(),f=n_();at!==t||Be!==i?(Qc=null,Kc=nn()+500,Ro(t,i)):So=br(t,i);e:do try{if(Ze!==0&&Ve!==null){i=Ve;var d=Pn;t:switch(Ze){case 1:Ze=0,Pn=null,Co(t,i,d,1);break;case 2:case 9:if(py(d)){Ze=0,Pn=null,i_(i);break}i=function(){Ze!==2&&Ze!==9||at!==t||(Ze=7),Vr(t)},d.then(i,i);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:py(d)?(Ze=0,Pn=null,i_(i)):(Ze=0,Pn=null,Co(t,i,d,7));break;case 5:var E=null;switch(Ve.tag){case 26:E=Ve.memoizedState;case 5:case 27:var T=Ve;if(!E||j_(E)){Ze=0,Pn=null;var I=T.sibling;if(I!==null)Ve=I;else{var H=T.return;H!==null?(Ve=H,Wc(H)):Ve=null}break t}}Ze=0,Pn=null,Co(t,i,d,5);break;case 6:Ze=0,Pn=null,Co(t,i,d,6);break;case 8:$d(),_t=6;break e;default:throw Error(s(462))}}iA();break}catch($){e_(t,$)}while(!0);return si=ya=null,P.H=l,P.A=f,$e=a,Ve!==null?0:(at=null,Be=0,gc(),_t)}function iA(){for(;Ve!==null&&!Ha();)r_(Ve)}function r_(t){var i=Dv(t.alternate,t,di);t.memoizedProps=t.pendingProps,i===null?Wc(t):Ve=i}function i_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Av(a,i,i.pendingProps,i.type,void 0,Be);break;case 11:i=Av(a,i,i.pendingProps,i.type.render,i.ref,Be);break;case 5:md(i);default:Ov(a,i),i=Ve=sy(i,di),i=Dv(a,i,di)}t.memoizedProps=t.pendingProps,i===null?Wc(t):Ve=i}function Co(t,i,a,l){si=ya=null,md(i),_o=null,jl=0;var f=i.return;try{if(Q1(t,f,i,a,Be)){_t=1,zc(t,Wn(a,t.current)),Ve=null;return}}catch(d){if(f!==null)throw Ve=f,d;_t=1,zc(t,Wn(a,t.current)),Ve=null;return}i.flags&32768?(Ke||l===1?t=!0:So||(Be&536870912)!==0?t=!1:(Zi=t=!0,(l===2||l===9||l===3||l===6)&&(l=Jn.current,l!==null&&l.tag===13&&(l.flags|=16384))),s_(i,t)):Wc(i)}function Wc(t){var i=t;do{if((i.flags&32768)!==0){s_(i,Zi);return}t=i.return;var a=W1(i.alternate,i,di);if(a!==null){Ve=a;return}if(i=i.sibling,i!==null){Ve=i;return}Ve=i=t}while(i!==null);_t===0&&(_t=5)}function s_(t,i){do{var a=X1(t.alternate,t);if(a!==null){a.flags&=32767,Ve=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ve=t;return}Ve=t=a}while(t!==null);_t=6,Ve=null}function a_(t,i,a,l,f,d,E,T,I){t.cancelPendingCommit=null;do Xc();while($t!==0);if(($e&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=qf,We(t,a,d,E,T,I),t===at&&(Ve=at=null,Be=0),wo=i,ts=t,xo=a,Yd=d,Wd=f,Xv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,lA(In,function(){return h_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=P.T,P.T=null,f=ie.p,ie.p=2,E=$e,$e|=4;try{$1(t,i,a)}finally{$e=E,ie.p=f,P.T=l}}$t=1,o_(),l_(),u_()}}function o_(){if($t===1){$t=0;var t=ts,i=wo,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=P.T,P.T=null;var l=ie.p;ie.p=2;var f=$e;$e|=4;try{qv(i,t);var d=hm,E=Wg(t.containerInfo),T=d.focusedElem,I=d.selectionRange;if(E!==T&&T&&T.ownerDocument&&Yg(T.ownerDocument.documentElement,T)){if(I!==null&&Lf(T)){var H=I.start,$=I.end;if($===void 0&&($=H),"selectionStart"in T)T.selectionStart=H,T.selectionEnd=Math.min($,T.value.length);else{var ne=T.ownerDocument||document,G=ne&&ne.defaultView||window;if(G.getSelection){var K=G.getSelection(),xe=T.textContent.length,Ee=Math.min(I.start,xe),rt=I.end===void 0?Ee:Math.min(I.end,xe);!K.extend&&Ee>rt&&(E=rt,rt=Ee,Ee=E);var U=Qg(T,Ee),V=Qg(T,rt);if(U&&V&&(K.rangeCount!==1||K.anchorNode!==U.node||K.anchorOffset!==U.offset||K.focusNode!==V.node||K.focusOffset!==V.offset)){var F=ne.createRange();F.setStart(U.node,U.offset),K.removeAllRanges(),Ee>rt?(K.addRange(F),K.extend(V.node,V.offset)):(F.setEnd(V.node,V.offset),K.addRange(F))}}}}for(ne=[],K=T;K=K.parentNode;)K.nodeType===1&&ne.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ne.length;T++){var ee=ne[T];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}lh=!!cm,hm=cm=null}finally{$e=f,ie.p=l,P.T=a}}t.current=i,$t=2}}function l_(){if($t===2){$t=0;var t=ts,i=wo,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=P.T,P.T=null;var l=ie.p;ie.p=2;var f=$e;$e|=4;try{jv(t,i.alternate,i)}finally{$e=f,ie.p=l,P.T=a}}$t=3}}function u_(){if($t===4||$t===3){$t=0,Ii();var t=ts,i=wo,a=xo,l=Xv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?$t=5:($t=0,wo=ts=null,c_(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(es=null),Te(a),i=i.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(sr,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=P.T,f=ie.p,ie.p=2,P.T=null;try{for(var d=t.onRecoverableError,E=0;E<l.length;E++){var T=l[E];d(T.value,{componentStack:T.stack})}}finally{P.T=i,ie.p=f}}(xo&3)!==0&&Xc(),Vr(t),f=t.pendingLanes,(a&4194090)!==0&&(f&42)!==0?t===Xd?Yl++:(Yl=0,Xd=t):Yl=0,Wl(0)}}function c_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Cl(i)))}function Xc(t){return o_(),l_(),u_(),h_()}function h_(){if($t!==5)return!1;var t=ts,i=Yd;Yd=0;var a=Te(xo),l=P.T,f=ie.p;try{ie.p=32>a?32:a,P.T=null,a=Wd,Wd=null;var d=ts,E=xo;if($t=0,wo=ts=null,xo=0,($e&6)!==0)throw Error(s(331));var T=$e;if($e|=4,Yv(d.current),Gv(d,d.current,E,a),$e=T,Wl(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(sr,d)}catch{}return!0}finally{ie.p=f,P.T=l,c_(t,i)}}function f_(t,i,a){i=Wn(a,i),i=Cd(t.stateNode,i,2),t=Gi(t,i,2),t!==null&&(Je(t,2),Vr(t))}function it(t,i,a){if(t.tag===3)f_(t,t,a);else for(;i!==null;){if(i.tag===3){f_(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(es===null||!es.has(l))){t=Wn(a,t),a=gv(2),l=Gi(i,a,2),l!==null&&(yv(a,l,i,t),Je(l,2),Vr(l));break}}i=i.return}}function em(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new eA;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(Hd=!0,f.add(a),t=sA.bind(null,t,i,a),i.then(t,t))}function sA(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,at===t&&(Be&a)===a&&(_t===4||_t===3&&(Be&62914560)===Be&&300>nn()-Qd?($e&2)===0&&Ro(t,0):Gd|=a,Ao===Be&&(Ao=0)),Vr(t)}function d_(t,i){i===0&&(i=Y()),t=lo(t,i),t!==null&&(Je(t,i),Vr(t))}function aA(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),d_(t,a)}function oA(t,i){var a=0;switch(t.tag){case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),d_(t,a)}function lA(t,i){return Cn(t,i)}var $c=null,Io=null,tm=!1,Zc=!1,nm=!1,Aa=0;function Vr(t){t!==Io&&t.next===null&&(Io===null?$c=Io=t:Io=Io.next=t),Zc=!0,tm||(tm=!0,cA())}function Wl(t,i){if(!nm&&Zc){nm=!0;do for(var a=!1,l=$c;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var E=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-Dt(42|t)+1)-1,d&=f&~(E&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,y_(l,d))}else d=Be,d=_n(l,l===at?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||br(l,d)||(a=!0,y_(l,d));l=l.next}while(a);nm=!1}}function uA(){m_()}function m_(){Zc=tm=!1;var t=0;Aa!==0&&(vA()&&(t=Aa),Aa=0);for(var i=nn(),a=null,l=$c;l!==null;){var f=l.next,d=p_(l,i);d===0?(l.next=null,a===null?$c=f:a.next=f,f===null&&(Io=a)):(a=l,(t!==0||(d&3)!==0)&&(Zc=!0)),l=f}Wl(t)}function p_(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var E=31-Dt(d),T=1<<E,I=f[E];I===-1?((T&a)===0||(T&l)!==0)&&(f[E]=Wr(T,i)):I<=i&&(t.expiredLanes|=T),d&=~T}if(i=at,a=Be,a=_n(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(Ze===2||Ze===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ir(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||br(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&ir(l),Te(a)){case 2:case 8:a=St;break;case 32:a=In;break;case 268435456:a=Ni;break;default:a=In}return l=g_.bind(null,t),a=Cn(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&ir(l),t.callbackPriority=2,t.callbackNode=null,2}function g_(t,i){if($t!==0&&$t!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Xc()&&t.callbackNode!==a)return null;var l=Be;return l=_n(t,t===at?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Zv(t,l,i),p_(t,nn()),t.callbackNode!=null&&t.callbackNode===a?g_.bind(null,t):null)}function y_(t,i){if(Xc())return null;Zv(t,i,!0)}function cA(){EA(function(){($e&6)!==0?Cn(yt,uA):m_()})}function rm(){return Aa===0&&(Aa=Fs()),Aa}function v_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:lr(""+t)}function __(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function hA(t,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=v_((f[Wt]||null).action),E=l.submitter;E&&(i=(i=E[Wt]||null)?v_(i.formAction):E.getAttribute("formAction"),i!==null&&(d=i,E=null));var T=new ra("action","action",null,l,f);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Aa!==0){var I=E?__(f,E):new FormData(f);Sd(a,{pending:!0,data:I,method:f.method,action:d},null,I)}}else typeof d=="function"&&(T.preventDefault(),I=E?__(f,E):new FormData(f),Sd(a,{pending:!0,data:I,method:f.method,action:d},d,I))},currentTarget:f}]})}}for(var im=0;im<Ff.length;im++){var sm=Ff[im],fA=sm.toLowerCase(),dA=sm[0].toUpperCase()+sm.slice(1);fr(fA,"on"+dA)}fr(Zg,"onAnimationEnd"),fr(Jg,"onAnimationIteration"),fr(ey,"onAnimationStart"),fr("dblclick","onDoubleClick"),fr("focusin","onFocus"),fr("focusout","onBlur"),fr(D1,"onTransitionRun"),fr(N1,"onTransitionStart"),fr(O1,"onTransitionCancel"),fr(ty,"onTransitionEnd"),Rr("onMouseEnter",["mouseout","mouseover"]),Rr("onMouseLeave",["mouseout","mouseover"]),Rr("onPointerEnter",["pointerout","pointerover"]),Rr("onPointerLeave",["pointerout","pointerover"]),xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xr("onBeforeInput",["compositionend","keypress","textInput","paste"]),xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xl));function E_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],f=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var E=l.length-1;0<=E;E--){var T=l[E],I=T.instance,H=T.currentTarget;if(T=T.listener,I!==d&&f.isPropagationStopped())break e;d=T,f.currentTarget=H;try{d(f)}catch($){jc($)}f.currentTarget=null,d=I}else for(E=0;E<l.length;E++){if(T=l[E],I=T.instance,H=T.currentTarget,T=T.listener,I!==d&&f.isPropagationStopped())break e;d=T,f.currentTarget=H;try{d(f)}catch($){jc($)}f.currentTarget=null,d=I}}}}function Pe(t,i){var a=i[Hs];a===void 0&&(a=i[Hs]=new Set);var l=t+"__bubble";a.has(l)||(b_(i,t,2,!1),a.add(l))}function am(t,i,a){var l=0;i&&(l|=4),b_(a,t,l,i)}var Jc="_reactListening"+Math.random().toString(36).slice(2);function om(t){if(!t[Jc]){t[Jc]=!0,ec.forEach(function(a){a!=="selectionchange"&&(mA.has(a)||am(a,!1,t),am(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Jc]||(i[Jc]=!0,am("selectionchange",!1,i))}}function b_(t,i,a,l){switch(G_(i)){case 2:var f=BA;break;case 8:f=FA;break;default:f=bm}a=f.bind(null,i,a,t),f=void 0,!ei||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(i,a,{capture:!0,passive:f}):t.addEventListener(i,a,!0):f!==void 0?t.addEventListener(i,a,{passive:f}):t.addEventListener(i,a,!1)}function lm(t,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var T=l.stateNode.containerInfo;if(T===f)break;if(E===4)for(E=l.return;E!==null;){var I=E.tag;if((I===3||I===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;T!==null;){if(E=Ar(T),E===null)return;if(I=E.tag,I===5||I===6||I===26||I===27){l=d=E;continue e}T=T.parentNode}}l=l.return}ea(function(){var H=d,$=dl(a),ne=[];e:{var G=ny.get(t);if(G!==void 0){var K=ra,xe=t;switch(t){case"keypress":if(ta(a)===0)break e;case"keydown":case"keyup":K=io;break;case"focusin":xe="focus",K=to;break;case"focusout":xe="blur",K=to;break;case"beforeblur":case"afterblur":K=to;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=la;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=oc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Bi;break;case Zg:case Jg:case ey:K=pl;break;case ty:K=y;break;case"scroll":case"scrollend":K=sa;break;case"wheel":K=A;break;case"copy":case"cut":case"paste":K=uc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=vl;break;case"toggle":case"beforetoggle":K=Q}var Ee=(i&4)!==0,rt=!Ee&&(t==="scroll"||t==="scrollend"),U=Ee?G!==null?G+"Capture":null:G;Ee=[];for(var V=H,F;V!==null;){var ee=V;if(F=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||F===null||U===null||(ee=ji(V,U),ee!=null&&Ee.push($l(V,ee,F))),rt)break;V=V.return}0<Ee.length&&(G=new K(G,xe,null,a,$),ne.push({event:G,listeners:Ee}))}}if((i&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",K=t==="mouseout"||t==="pointerout",G&&a!==fl&&(xe=a.relatedTarget||a.fromElement)&&(Ar(xe)||xe[Xr]))break e;if((K||G)&&(G=$.window===$?$:(G=$.ownerDocument)?G.defaultView||G.parentWindow:window,K?(xe=a.relatedTarget||a.toElement,K=H,xe=xe?Ar(xe):null,xe!==null&&(rt=u(xe),Ee=xe.tag,xe!==rt||Ee!==5&&Ee!==27&&Ee!==6)&&(xe=null)):(K=null,xe=H),K!==xe)){if(Ee=la,ee="onMouseLeave",U="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(Ee=vl,ee="onPointerLeave",U="onPointerEnter",V="pointer"),rt=K==null?G:ki(K),F=xe==null?G:ki(xe),G=new Ee(ee,V+"leave",K,a,$),G.target=rt,G.relatedTarget=F,ee=null,Ar($)===H&&(Ee=new Ee(U,V+"enter",xe,a,$),Ee.target=F,Ee.relatedTarget=rt,ee=Ee),rt=ee,K&&xe)t:{for(Ee=K,U=xe,V=0,F=Ee;F;F=Do(F))V++;for(F=0,ee=U;ee;ee=Do(ee))F++;for(;0<V-F;)Ee=Do(Ee),V--;for(;0<F-V;)U=Do(U),F--;for(;V--;){if(Ee===U||U!==null&&Ee===U.alternate)break t;Ee=Do(Ee),U=Do(U)}Ee=null}else Ee=null;K!==null&&T_(ne,G,K,Ee,!1),xe!==null&&rt!==null&&T_(ne,rt,xe,Ee,!0)}}e:{if(G=H?ki(H):window,K=G.nodeName&&G.nodeName.toLowerCase(),K==="select"||K==="input"&&G.type==="file")var me=Bg;else if(jg(G))if(Fg)me=R1;else{me=w1;var Me=A1}else K=G.nodeName,!K||K.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?H&&Za(H.elementType)&&(me=Bg):me=x1;if(me&&(me=me(t,H))){zg(ne,me,a,$);break e}Me&&Me(t,G,H),t==="focusout"&&H&&G.type==="number"&&H.memoizedProps.value!=null&&ul(G,"number",G.value)}switch(Me=H?ki(H):window,t){case"focusin":(jg(Me)||Me.contentEditable==="true")&&(so=Me,jf=H,Sl=null);break;case"focusout":Sl=jf=so=null;break;case"mousedown":zf=!0;break;case"contextmenu":case"mouseup":case"dragend":zf=!1,Xg(ne,a,$);break;case"selectionchange":if(I1)break;case"keydown":case"keyup":Xg(ne,a,$)}var ve;if(Ie)e:{switch(t){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else hr?ur(t,a)&&(Se="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(xt&&a.locale!=="ko"&&(hr||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&hr&&(ve=ac()):(Yn=$,st="value"in Yn?Yn.value:Yn.textContent,hr=!0)),Me=eh(H,Se),0<Me.length&&(Se=new yl(Se,t,null,a,$),ne.push({event:Se,listeners:Me}),ve?Se.data=ve:(ve=cr(a),ve!==null&&(Se.data=ve)))),(ve=Xe?_l(t,a):b1(t,a))&&(Se=eh(H,"onBeforeInput"),0<Se.length&&(Me=new yl("onBeforeInput","beforeinput",null,a,$),ne.push({event:Me,listeners:Se}),Me.data=ve)),hA(ne,t,H,a,$)}E_(ne,i)})}function $l(t,i,a){return{instance:t,listener:i,currentTarget:a}}function eh(t,i){for(var a=i+"Capture",l=[];t!==null;){var f=t,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=ji(t,a),f!=null&&l.unshift($l(t,f,d)),f=ji(t,i),f!=null&&l.push($l(t,f,d))),t.tag===3)return l;t=t.return}return[]}function Do(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function T_(t,i,a,l,f){for(var d=i._reactName,E=[];a!==null&&a!==l;){var T=a,I=T.alternate,H=T.stateNode;if(T=T.tag,I!==null&&I===l)break;T!==5&&T!==26&&T!==27||H===null||(I=H,f?(H=ji(a,d),H!=null&&E.unshift($l(a,H,I))):f||(H=ji(a,d),H!=null&&E.push($l(a,H,I)))),a=a.return}E.length!==0&&t.push({event:i,listeners:E})}var pA=/\r\n?/g,gA=/\u0000|\uFFFD/g;function S_(t){return(typeof t=="string"?t:""+t).replace(pA,`
`).replace(gA,"")}function A_(t,i){return i=S_(i),S_(t)===i}function th(){}function nt(t,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Qn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Qn(t,""+l);break;case"className":Ws(t,"class",l);break;case"tabIndex":Ws(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ws(t,a,l);break;case"style":hl(t,l,d);break;case"data":if(i!=="object"){Ws(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=lr(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&nt(t,i,"name",f.name,f,null),nt(t,i,"formEncType",f.formEncType,f,null),nt(t,i,"formMethod",f.formMethod,f,null),nt(t,i,"formTarget",f.formTarget,f,null)):(nt(t,i,"encType",f.encType,f,null),nt(t,i,"method",f.method,f,null),nt(t,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=lr(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=th);break;case"onScroll":l!=null&&Pe("scroll",t);break;case"onScrollEnd":l!=null&&Pe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=lr(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Pe("beforetoggle",t),Pe("toggle",t),Ys(t,"popover",l);break;case"xlinkActuate":Kn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Kn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Kn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Kn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Kn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Kn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Kn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Kn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Kn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ys(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=rc.get(a)||a,Ys(t,a,l))}}function um(t,i,a,l,f,d){switch(a){case"style":hl(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Qn(t,l):(typeof l=="number"||typeof l=="bigint")&&Qn(t,""+l);break;case"onScroll":l!=null&&Pe("scroll",t);break;case"onScrollEnd":l!=null&&Pe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=th);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ks.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=t[Wt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,f);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ys(t,a,l)}}}function Zt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",t),Pe("load",t);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var E=a[d];if(E!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:nt(t,i,d,E,a,null)}}f&&nt(t,i,"srcSet",a.srcSet,a,null),l&&nt(t,i,"src",a.src,a,null);return;case"input":Pe("invalid",t);var T=d=E=f=null,I=null,H=null;for(l in a)if(a.hasOwnProperty(l)){var $=a[l];if($!=null)switch(l){case"name":f=$;break;case"type":E=$;break;case"checked":I=$;break;case"defaultChecked":H=$;break;case"value":d=$;break;case"defaultValue":T=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,i));break;default:nt(t,i,l,$,a,null)}}ll(t,d,T,I,H,E,f,!1),Pi(t);return;case"select":Pe("invalid",t),l=E=d=null;for(f in a)if(a.hasOwnProperty(f)&&(T=a[f],T!=null))switch(f){case"value":d=T;break;case"defaultValue":E=T;break;case"multiple":l=T;default:nt(t,i,f,T,a,null)}i=d,a=E,t.multiple=!!l,i!=null?Ui(t,!!l,i,!1):a!=null&&Ui(t,!!l,a,!0);return;case"textarea":Pe("invalid",t),d=f=l=null;for(E in a)if(a.hasOwnProperty(E)&&(T=a[E],T!=null))switch(E){case"value":l=T;break;case"defaultValue":f=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:nt(t,i,E,T,a,null)}nc(t,l,f,d),Pi(t);return;case"option":for(I in a)if(a.hasOwnProperty(I)&&(l=a[I],l!=null))switch(I){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:nt(t,i,I,l,a,null)}return;case"dialog":Pe("beforetoggle",t),Pe("toggle",t),Pe("cancel",t),Pe("close",t);break;case"iframe":case"object":Pe("load",t);break;case"video":case"audio":for(l=0;l<Xl.length;l++)Pe(Xl[l],t);break;case"image":Pe("error",t),Pe("load",t);break;case"details":Pe("toggle",t);break;case"embed":case"source":case"link":Pe("error",t),Pe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in a)if(a.hasOwnProperty(H)&&(l=a[H],l!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:nt(t,i,H,l,a,null)}return;default:if(Za(i)){for($ in a)a.hasOwnProperty($)&&(l=a[$],l!==void 0&&um(t,i,$,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&nt(t,i,T,l,a,null))}function yA(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,E=null,T=null,I=null,H=null,$=null;for(K in a){var ne=a[K];if(a.hasOwnProperty(K)&&ne!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":I=ne;default:l.hasOwnProperty(K)||nt(t,i,K,null,l,ne)}}for(var G in l){var K=l[G];if(ne=a[G],l.hasOwnProperty(G)&&(K!=null||ne!=null))switch(G){case"type":d=K;break;case"name":f=K;break;case"checked":H=K;break;case"defaultChecked":$=K;break;case"value":E=K;break;case"defaultValue":T=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,i));break;default:K!==ne&&nt(t,i,G,K,l,ne)}}ol(t,E,T,I,H,$,d,f);return;case"select":K=E=T=G=null;for(d in a)if(I=a[d],a.hasOwnProperty(d)&&I!=null)switch(d){case"value":break;case"multiple":K=I;default:l.hasOwnProperty(d)||nt(t,i,d,null,l,I)}for(f in l)if(d=l[f],I=a[f],l.hasOwnProperty(f)&&(d!=null||I!=null))switch(f){case"value":G=d;break;case"defaultValue":T=d;break;case"multiple":E=d;default:d!==I&&nt(t,i,f,d,l,I)}i=T,a=E,l=K,G!=null?Ui(t,!!a,G,!1):!!l!=!!a&&(i!=null?Ui(t,!!a,i,!0):Ui(t,!!a,a?[]:"",!1));return;case"textarea":K=G=null;for(T in a)if(f=a[T],a.hasOwnProperty(T)&&f!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:nt(t,i,T,null,l,f)}for(E in l)if(f=l[E],d=a[E],l.hasOwnProperty(E)&&(f!=null||d!=null))switch(E){case"value":G=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==d&&nt(t,i,E,f,l,d)}tc(t,G,K);return;case"option":for(var xe in a)if(G=a[xe],a.hasOwnProperty(xe)&&G!=null&&!l.hasOwnProperty(xe))switch(xe){case"selected":t.selected=!1;break;default:nt(t,i,xe,null,l,G)}for(I in l)if(G=l[I],K=a[I],l.hasOwnProperty(I)&&G!==K&&(G!=null||K!=null))switch(I){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:nt(t,i,I,G,l,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in a)G=a[Ee],a.hasOwnProperty(Ee)&&G!=null&&!l.hasOwnProperty(Ee)&&nt(t,i,Ee,null,l,G);for(H in l)if(G=l[H],K=a[H],l.hasOwnProperty(H)&&G!==K&&(G!=null||K!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:nt(t,i,H,G,l,K)}return;default:if(Za(i)){for(var rt in a)G=a[rt],a.hasOwnProperty(rt)&&G!==void 0&&!l.hasOwnProperty(rt)&&um(t,i,rt,void 0,l,G);for($ in l)G=l[$],K=a[$],!l.hasOwnProperty($)||G===K||G===void 0&&K===void 0||um(t,i,$,G,l,K);return}}for(var U in a)G=a[U],a.hasOwnProperty(U)&&G!=null&&!l.hasOwnProperty(U)&&nt(t,i,U,null,l,G);for(ne in l)G=l[ne],K=a[ne],!l.hasOwnProperty(ne)||G===K||G==null&&K==null||nt(t,i,ne,G,l,K)}var cm=null,hm=null;function nh(t){return t.nodeType===9?t:t.ownerDocument}function w_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function x_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function fm(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var dm=null;function vA(){var t=window.event;return t&&t.type==="popstate"?t===dm?!1:(dm=t,!0):(dm=null,!1)}var R_=typeof setTimeout=="function"?setTimeout:void 0,_A=typeof clearTimeout=="function"?clearTimeout:void 0,C_=typeof Promise=="function"?Promise:void 0,EA=typeof queueMicrotask=="function"?queueMicrotask:typeof C_<"u"?function(t){return C_.resolve(null).then(t).catch(bA)}:R_;function bA(t){setTimeout(function(){throw t})}function rs(t){return t==="head"}function I_(t,i){var a=i,l=0,f=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var E=t.ownerDocument;if(a&1&&Zl(E.documentElement),a&2&&Zl(E.body),a&4)for(a=E.head,Zl(a),E=a.firstChild;E;){var T=E.nextSibling,I=E.nodeName;E[Oi]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=T}}if(f===0){t.removeChild(d),au(i);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);au(i)}function mm(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":mm(a),Qa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function TA(t,i,a,l){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Oi])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=mr(t.nextSibling),t===null)break}return null}function SA(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=mr(t.nextSibling),t===null))return null;return t}function pm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function AA(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function mr(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var gm=null;function D_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function N_(t,i,a){switch(i=nh(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Zl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Qa(t)}var tr=new Map,O_=new Set;function rh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var mi=ie.d;ie.d={f:wA,r:xA,D:RA,C:CA,L:IA,m:DA,X:OA,S:NA,M:kA};function wA(){var t=mi.f(),i=Yc();return t||i}function xA(t){var i=wr(t);i!==null&&i.tag===5&&i.type==="form"?Zy(i):mi.r(t)}var No=typeof document>"u"?null:document;function k_(t,i,a){var l=No;if(l&&typeof i=="string"&&i){var f=Ft(i);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),O_.has(f)||(O_.add(f),t={rel:t,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Zt(i,"link",t),wt(i),l.head.appendChild(i)))}}function RA(t){mi.D(t),k_("dns-prefetch",t,null)}function CA(t,i){mi.C(t,i),k_("preconnect",t,i)}function IA(t,i,a){mi.L(t,i,a);var l=No;if(l&&t&&i){var f='link[rel="preload"][as="'+Ft(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Ft(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Ft(a.imageSizes)+'"]')):f+='[href="'+Ft(t)+'"]';var d=f;switch(i){case"style":d=Oo(t);break;case"script":d=ko(t)}tr.has(d)||(t=b({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),tr.set(d,t),l.querySelector(f)!==null||i==="style"&&l.querySelector(Jl(d))||i==="script"&&l.querySelector(eu(d))||(i=l.createElement("link"),Zt(i,"link",t),wt(i),l.head.appendChild(i)))}}function DA(t,i){mi.m(t,i);var a=No;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Ft(l)+'"][href="'+Ft(t)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=ko(t)}if(!tr.has(d)&&(t=b({rel:"modulepreload",href:t},i),tr.set(d,t),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(eu(d)))return}l=a.createElement("link"),Zt(l,"link",t),wt(l),a.head.appendChild(l)}}}function NA(t,i,a){mi.S(t,i,a);var l=No;if(l&&t){var f=Mi(l).hoistableStyles,d=Oo(t);i=i||"default";var E=f.get(d);if(!E){var T={loading:0,preload:null};if(E=l.querySelector(Jl(d)))T.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":i},a),(a=tr.get(d))&&ym(t,a);var I=E=l.createElement("link");wt(I),Zt(I,"link",t),I._p=new Promise(function(H,$){I.onload=H,I.onerror=$}),I.addEventListener("load",function(){T.loading|=1}),I.addEventListener("error",function(){T.loading|=2}),T.loading|=4,ih(E,i,l)}E={type:"stylesheet",instance:E,count:1,state:T},f.set(d,E)}}}function OA(t,i){mi.X(t,i);var a=No;if(a&&t){var l=Mi(a).hoistableScripts,f=ko(t),d=l.get(f);d||(d=a.querySelector(eu(f)),d||(t=b({src:t,async:!0},i),(i=tr.get(f))&&vm(t,i),d=a.createElement("script"),wt(d),Zt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function kA(t,i){mi.M(t,i);var a=No;if(a&&t){var l=Mi(a).hoistableScripts,f=ko(t),d=l.get(f);d||(d=a.querySelector(eu(f)),d||(t=b({src:t,async:!0,type:"module"},i),(i=tr.get(f))&&vm(t,i),d=a.createElement("script"),wt(d),Zt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function M_(t,i,a,l){var f=(f=be.current)?rh(f):null;if(!f)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Oo(a.href),a=Mi(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Oo(a.href);var d=Mi(f).hoistableStyles,E=d.get(t);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,E),(d=f.querySelector(Jl(t)))&&!d._p&&(E.instance=d,E.state.loading=5),tr.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},tr.set(t,a),d||MA(f,t,a,E.state))),i&&l===null)throw Error(s(528,""));return E}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ko(a),a=Mi(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Oo(t){return'href="'+Ft(t)+'"'}function Jl(t){return'link[rel="stylesheet"]['+t+"]"}function V_(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function MA(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Zt(i,"link",a),wt(i),t.head.appendChild(i))}function ko(t){return'[src="'+Ft(t)+'"]'}function eu(t){return"script[async]"+t}function P_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+Ft(a.href)+'"]');if(l)return i.instance=l,wt(l),l;var f=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),wt(l),Zt(l,"style",f),ih(l,a.precedence,t),i.instance=l;case"stylesheet":f=Oo(a.href);var d=t.querySelector(Jl(f));if(d)return i.state.loading|=4,i.instance=d,wt(d),d;l=V_(a),(f=tr.get(f))&&ym(l,f),d=(t.ownerDocument||t).createElement("link"),wt(d);var E=d;return E._p=new Promise(function(T,I){E.onload=T,E.onerror=I}),Zt(d,"link",l),i.state.loading|=4,ih(d,a.precedence,t),i.instance=d;case"script":return d=ko(a.src),(f=t.querySelector(eu(d)))?(i.instance=f,wt(f),f):(l=a,(f=tr.get(d))&&(l=b({},a),vm(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),wt(f),Zt(f,"link",l),t.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,ih(l,a.precedence,t));return i.instance}function ih(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,E=0;E<l.length;E++){var T=l[E];if(T.dataset.precedence===i)d=T;else if(d!==f)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function ym(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function vm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var sh=null;function U_(t,i,a){if(sh===null){var l=new Map,f=sh=new Map;f.set(a,l)}else f=sh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var d=a[f];if(!(d[Oi]||d[At]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var E=d.getAttribute(i)||"";E=t+E;var T=l.get(E);T?T.push(d):l.set(E,[d])}}return l}function L_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function VA(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function j_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var tu=null;function PA(){}function UA(t,i,a){if(tu===null)throw Error(s(475));var l=tu;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Oo(a.href),d=t.querySelector(Jl(f));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=ah.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=d,wt(d);return}d=t.ownerDocument||t,a=V_(a),(f=tr.get(f))&&ym(a,f),d=d.createElement("link"),wt(d);var E=d;E._p=new Promise(function(T,I){E.onload=T,E.onerror=I}),Zt(d,"link",a),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=ah.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function LA(){if(tu===null)throw Error(s(475));var t=tu;return t.stylesheets&&t.count===0&&_m(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&_m(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function ah(){if(this.count--,this.count===0){if(this.stylesheets)_m(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var oh=null;function _m(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,oh=new Map,i.forEach(jA,t),oh=null,ah.call(t))}function jA(t,i){if(!(i.state.loading&4)){var a=oh.get(t);if(a)var l=a.get(null);else{a=new Map,oh.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var E=f[d];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}f=i.instance,E=f.getAttribute("data-precedence"),d=a.get(E)||l,d===l&&a.set(null,f),a.set(E,f),this.count++,l=ah.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),i.state.loading|=4}}var nu={$$typeof:te,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function zA(t,i,a,l,f,d,E,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ye(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ye(0),this.hiddenUpdates=ye(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function z_(t,i,a,l,f,d,E,T,I,H,$,ne){return t=new zA(t,i,a,E,T,I,H,ne),i=1,d===!0&&(i|=24),d=kn(3,null,null,i),t.current=d,d.stateNode=t,i=ed(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},id(d),t}function B_(t){return t?(t=uo,t):uo}function F_(t,i,a,l,f,d){f=B_(f),l.context===null?l.context=f:l.pendingContext=f,l=Hi(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Gi(t,l,i),a!==null&&(Ln(a,t,i),Ol(a,t,i))}function q_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Em(t,i){q_(t,i),(t=t.alternate)&&q_(t,i)}function H_(t){if(t.tag===13){var i=lo(t,67108864);i!==null&&Ln(i,t,67108864),Em(t,67108864)}}var lh=!0;function BA(t,i,a,l){var f=P.T;P.T=null;var d=ie.p;try{ie.p=2,bm(t,i,a,l)}finally{ie.p=d,P.T=f}}function FA(t,i,a,l){var f=P.T;P.T=null;var d=ie.p;try{ie.p=8,bm(t,i,a,l)}finally{ie.p=d,P.T=f}}function bm(t,i,a,l){if(lh){var f=Tm(l);if(f===null)lm(t,i,l,uh,a),K_(t,l);else if(HA(f,t,i,a,l))l.stopPropagation();else if(K_(t,l),i&4&&-1<qA.indexOf(t)){for(;f!==null;){var d=wr(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var E=Dn(d.pendingLanes);if(E!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;E;){var I=1<<31-Dt(E);T.entanglements[1]|=I,E&=~I}Vr(d),($e&6)===0&&(Kc=nn()+500,Wl(0))}}break;case 13:T=lo(d,2),T!==null&&Ln(T,d,2),Yc(),Em(d,2)}if(d=Tm(l),d===null&&lm(t,i,l,uh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else lm(t,i,l,null,a)}}function Tm(t){return t=dl(t),Sm(t)}var uh=null;function Sm(t){if(uh=null,t=Ar(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=h(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return uh=t,null}function G_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Di()){case yt:return 2;case St:return 8;case In:case Ga:return 32;case Ni:return 268435456;default:return 32}default:return 32}}var Am=!1,is=null,ss=null,as=null,ru=new Map,iu=new Map,os=[],qA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function K_(t,i){switch(t){case"focusin":case"focusout":is=null;break;case"dragenter":case"dragleave":ss=null;break;case"mouseover":case"mouseout":as=null;break;case"pointerover":case"pointerout":ru.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":iu.delete(i.pointerId)}}function su(t,i,a,l,f,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=wr(i),i!==null&&H_(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),t)}function HA(t,i,a,l,f){switch(i){case"focusin":return is=su(is,t,i,a,l,f),!0;case"dragenter":return ss=su(ss,t,i,a,l,f),!0;case"mouseover":return as=su(as,t,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return ru.set(d,su(ru.get(d)||null,t,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,iu.set(d,su(iu.get(d)||null,t,i,a,l,f)),!0}return!1}function Q_(t){var i=Ar(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=h(a),i!==null){t.blockedOn=i,al(t.priority,function(){if(a.tag===13){var l=Un();l=qs(l);var f=lo(a,l);f!==null&&Ln(f,a,l),Em(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ch(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Tm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);fl=l,a.target.dispatchEvent(l),fl=null}else return i=wr(a),i!==null&&H_(i),t.blockedOn=a,!1;i.shift()}return!0}function Y_(t,i,a){ch(t)&&a.delete(i)}function GA(){Am=!1,is!==null&&ch(is)&&(is=null),ss!==null&&ch(ss)&&(ss=null),as!==null&&ch(as)&&(as=null),ru.forEach(Y_),iu.forEach(Y_)}function hh(t,i){t.blockedOn===i&&(t.blockedOn=null,Am||(Am=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,GA)))}var fh=null;function W_(t){fh!==t&&(fh=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){fh===t&&(fh=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],f=t[i+2];if(typeof l!="function"){if(Sm(l||a)===null)continue;break}var d=wr(a);d!==null&&(t.splice(i,3),i-=3,Sd(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function au(t){function i(I){return hh(I,t)}is!==null&&hh(is,t),ss!==null&&hh(ss,t),as!==null&&hh(as,t),ru.forEach(i),iu.forEach(i);for(var a=0;a<os.length;a++){var l=os[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<os.length&&(a=os[0],a.blockedOn===null);)Q_(a),a.blockedOn===null&&os.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],E=f[Wt]||null;if(typeof d=="function")E||W_(a);else if(E){var T=null;if(d&&d.hasAttribute("formAction")){if(f=d,E=d[Wt]||null)T=E.formAction;else if(Sm(f)!==null)continue}else T=E.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),W_(a)}}}function wm(t){this._internalRoot=t}dh.prototype.render=wm.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=Un();F_(a,l,t,i,null,null)},dh.prototype.unmount=wm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;F_(t.current,2,null,t,null,null),Yc(),i[Xr]=null}};function dh(t){this._internalRoot=t}dh.prototype.unstable_scheduleHydration=function(t){if(t){var i=Yt();t={blockedOn:null,target:t,priority:i};for(var a=0;a<os.length&&i!==0&&i<os[a].priority;a++);os.splice(a,0,t),a===0&&Q_(t)}};var X_=e.version;if(X_!=="19.1.0")throw Error(s(527,X_,"19.1.0"));ie.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(i),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var KA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mh.isDisabled&&mh.supportsFiber)try{sr=mh.inject(KA),Bt=mh}catch{}}return lu.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",f=fv,d=dv,E=mv,T=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(T=i.unstable_transitionCallbacks)),i=z_(t,1,!1,null,null,a,l,f,d,E,T,null),t[Xr]=i.current,om(t),new wm(i)},lu.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,f="",d=fv,E=dv,T=mv,I=null,H=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(I=a.unstable_transitionCallbacks),a.formState!==void 0&&(H=a.formState)),i=z_(t,1,!0,i,a??null,l,f,d,E,T,I,H),i.context=B_(null),a=i.current,l=Un(),l=qs(l),f=Hi(l),f.callback=null,Gi(a,f,l),a=l,i.current.lanes=a,Je(i,a),Vr(i),t[Xr]=i.current,om(t),new dh(i)},lu.version="19.1.0",lu}var a0;function iw(){if(a0)return Cm.exports;a0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Cm.exports=rw(),Cm.exports}var sw=iw();db();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ru(){return Ru=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Ru.apply(this,arguments)}var vs;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(vs||(vs={}));const o0="popstate";function aw(r){r===void 0&&(r={});function e(o,u){let{pathname:h="/",search:m="",hash:p=""}=La(o.location.hash.substr(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Wm("",{pathname:h,search:m,hash:p},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(o,u){let h=o.document.querySelector("base"),m="";if(h&&h.getAttribute("href")){let p=o.location.href,g=p.indexOf("#");m=g===-1?p:p.slice(0,g)}return m+"#"+(typeof u=="string"?u:Ph(u))}function s(o,u){Dp(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(u)+")")}return lw(e,n,s,r)}function pt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Dp(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ow(){return Math.random().toString(36).substr(2,8)}function l0(r,e){return{usr:r.state,key:r.key,idx:e}}function Wm(r,e,n,s){return n===void 0&&(n=null),Ru({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?La(e):e,{state:n,key:e&&e.key||s||ow()})}function Ph(r){let{pathname:e="/",search:n="",hash:s=""}=r;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function La(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substr(n),r=r.substr(0,n));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function lw(r,e,n,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:u=!1}=s,h=o.history,m=vs.Pop,p=null,g=b();g==null&&(g=0,h.replaceState(Ru({},h.state,{idx:g}),""));function b(){return(h.state||{idx:null}).idx}function S(){m=vs.Pop;let j=b(),se=j==null?null:j-g;g=j,p&&p({action:m,location:X.location,delta:se})}function w(j,se){m=vs.Push;let W=Wm(X.location,j,se);n&&n(W,j),g=b()+1;let te=l0(W,g),ue=X.createHref(W);try{h.pushState(te,"",ue)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;o.location.assign(ue)}u&&p&&p({action:m,location:X.location,delta:1})}function L(j,se){m=vs.Replace;let W=Wm(X.location,j,se);n&&n(W,j),g=b();let te=l0(W,g),ue=X.createHref(W);h.replaceState(te,"",ue),u&&p&&p({action:m,location:X.location,delta:0})}function B(j){let se=o.location.origin!=="null"?o.location.origin:o.location.href,W=typeof j=="string"?j:Ph(j);return W=W.replace(/ $/,"%20"),pt(se,"No window.location.(origin|href) available to create URL for href: "+W),new URL(W,se)}let X={get action(){return m},get location(){return r(o,h)},listen(j){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(o0,S),p=j,()=>{o.removeEventListener(o0,S),p=null}},createHref(j){return e(o,j)},createURL:B,encodeLocation(j){let se=B(j);return{pathname:se.pathname,search:se.search,hash:se.hash}},push:w,replace:L,go(j){return h.go(j)}};return X}var u0;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(u0||(u0={}));function uw(r,e,n){return n===void 0&&(n="/"),cw(r,e,n)}function cw(r,e,n,s){let o=typeof e=="string"?La(e):e,u=Ho(o.pathname||"/",n);if(u==null)return null;let h=mb(r);hw(h);let m=null;for(let p=0;m==null&&p<h.length;++p){let g=Tw(u);m=Ew(h[p],g)}return m}function mb(r,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let o=(u,h,m)=>{let p={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};p.relativePath.startsWith("/")&&(pt(p.relativePath.startsWith(s),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(s.length));let g=Es([s,p.relativePath]),b=n.concat(p);u.children&&u.children.length>0&&(pt(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),mb(u.children,e,b,g)),!(u.path==null&&!u.index)&&e.push({path:g,score:vw(g,u.index),routesMeta:b})};return r.forEach((u,h)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))o(u,h);else for(let p of pb(u.path))o(u,h,p)}),e}function pb(r){let e=r.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let h=pb(s.join("/")),m=[];return m.push(...h.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...h),m.map(p=>r.startsWith("/")&&p===""?"/":p)}function hw(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:_w(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const fw=/^:[\w-]+$/,dw=3,mw=2,pw=1,gw=10,yw=-2,c0=r=>r==="*";function vw(r,e){let n=r.split("/"),s=n.length;return n.some(c0)&&(s+=yw),e&&(s+=mw),n.filter(o=>!c0(o)).reduce((o,u)=>o+(fw.test(u)?dw:u===""?pw:gw),s)}function _w(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function Ew(r,e,n){let{routesMeta:s}=r,o={},u="/",h=[];for(let m=0;m<s.length;++m){let p=s[m],g=m===s.length-1,b=u==="/"?e:e.slice(u.length)||"/",S=Xm({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},b),w=p.route;if(!S)return null;Object.assign(o,S.params),h.push({params:o,pathname:Es([u,S.pathname]),pathnameBase:xw(Es([u,S.pathnameBase])),route:w}),S.pathnameBase!=="/"&&(u=Es([u,S.pathnameBase]))}return h}function Xm(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,s]=bw(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((g,b,S)=>{let{paramName:w,isOptional:L}=b;if(w==="*"){let X=m[S]||"";h=u.slice(0,u.length-X.length).replace(/(.)\/+$/,"$1")}const B=m[S];return L&&!B?g[w]=void 0:g[w]=(B||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:h,pattern:r}}function bw(r,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Dp(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function Tw(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Dp(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Ho(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}function Sw(r,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:o=""}=typeof r=="string"?La(r):r;return{pathname:n?n.startsWith("/")?n:Aw(n,e):e,search:Rw(s),hash:Cw(o)}}function Aw(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Om(r,e,n,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ww(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Np(r,e){let n=ww(r);return e?n.map((s,o)=>o===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Op(r,e,n,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=La(r):(o=Ru({},r),pt(!o.pathname||!o.pathname.includes("?"),Om("?","pathname","search",o)),pt(!o.pathname||!o.pathname.includes("#"),Om("#","pathname","hash",o)),pt(!o.search||!o.search.includes("#"),Om("#","search","hash",o)));let u=r===""||o.pathname==="",h=u?"/":o.pathname,m;if(h==null)m=n;else{let S=e.length-1;if(!s&&h.startsWith("..")){let w=h.split("/");for(;w[0]==="..";)w.shift(),S-=1;o.pathname=w.join("/")}m=S>=0?e[S]:"/"}let p=Sw(o,m),g=h&&h!=="/"&&h.endsWith("/"),b=(u||h===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||b)&&(p.pathname+="/"),p}const Es=r=>r.join("/").replace(/\/\/+/g,"/"),xw=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Rw=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Cw=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Iw(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const gb=["post","put","patch","delete"];new Set(gb);const Dw=["get",...gb];new Set(Dw);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cu(){return Cu=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Cu.apply(this,arguments)}const rf=z.createContext(null),yb=z.createContext(null),wi=z.createContext(null),sf=z.createContext(null),xi=z.createContext({outlet:null,matches:[],isDataRoute:!1}),vb=z.createContext(null);function Nw(r,e){let{relative:n}=e===void 0?{}:e;Zo()||pt(!1);let{basename:s,navigator:o}=z.useContext(wi),{hash:u,pathname:h,search:m}=af(r,{relative:n}),p=h;return s!=="/"&&(p=h==="/"?s:Es([s,h])),o.createHref({pathname:p,search:m,hash:u})}function Zo(){return z.useContext(sf)!=null}function ja(){return Zo()||pt(!1),z.useContext(sf).location}function _b(r){z.useContext(wi).static||z.useLayoutEffect(r)}function Jo(){let{isDataRoute:r}=z.useContext(xi);return r?Gw():Ow()}function Ow(){Zo()||pt(!1);let r=z.useContext(rf),{basename:e,future:n,navigator:s}=z.useContext(wi),{matches:o}=z.useContext(xi),{pathname:u}=ja(),h=JSON.stringify(Np(o,n.v7_relativeSplatPath)),m=z.useRef(!1);return _b(()=>{m.current=!0}),z.useCallback(function(g,b){if(b===void 0&&(b={}),!m.current)return;if(typeof g=="number"){s.go(g);return}let S=Op(g,JSON.parse(h),u,b.relative==="path");r==null&&e!=="/"&&(S.pathname=S.pathname==="/"?e:Es([e,S.pathname])),(b.replace?s.replace:s.push)(S,b.state,b)},[e,s,h,u,r])}function kw(){let{matches:r}=z.useContext(xi),e=r[r.length-1];return e?e.params:{}}function af(r,e){let{relative:n}=e===void 0?{}:e,{future:s}=z.useContext(wi),{matches:o}=z.useContext(xi),{pathname:u}=ja(),h=JSON.stringify(Np(o,s.v7_relativeSplatPath));return z.useMemo(()=>Op(r,JSON.parse(h),u,n==="path"),[r,h,u,n])}function Mw(r,e){return Vw(r,e)}function Vw(r,e,n,s){Zo()||pt(!1);let{navigator:o}=z.useContext(wi),{matches:u}=z.useContext(xi),h=u[u.length-1],m=h?h.params:{};h&&h.pathname;let p=h?h.pathnameBase:"/";h&&h.route;let g=ja(),b;if(e){var S;let j=typeof e=="string"?La(e):e;p==="/"||(S=j.pathname)!=null&&S.startsWith(p)||pt(!1),b=j}else b=g;let w=b.pathname||"/",L=w;if(p!=="/"){let j=p.replace(/^\//,"").split("/");L="/"+w.replace(/^\//,"").split("/").slice(j.length).join("/")}let B=uw(r,{pathname:L}),X=zw(B&&B.map(j=>Object.assign({},j,{params:Object.assign({},m,j.params),pathname:Es([p,o.encodeLocation?o.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?p:Es([p,o.encodeLocation?o.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),u,n,s);return e&&X?z.createElement(sf.Provider,{value:{location:Cu({pathname:"/",search:"",hash:"",state:null,key:"default"},b),navigationType:vs.Pop}},X):X}function Pw(){let r=Hw(),e=Iw(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),n?z.createElement("pre",{style:o},n):null,null)}const Uw=z.createElement(Pw,null);class Lw extends z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?z.createElement(xi.Provider,{value:this.props.routeContext},z.createElement(vb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function jw(r){let{routeContext:e,match:n,children:s}=r,o=z.useContext(rf);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),z.createElement(xi.Provider,{value:e},s)}function zw(r,e,n,s){var o;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),r==null){var u;if(!n)return null;if(n.errors)r=n.matches;else if((u=s)!=null&&u.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let h=r,m=(o=n)==null?void 0:o.errors;if(m!=null){let b=h.findIndex(S=>S.route.id&&m?.[S.route.id]!==void 0);b>=0||pt(!1),h=h.slice(0,Math.min(h.length,b+1))}let p=!1,g=-1;if(n&&s&&s.v7_partialHydration)for(let b=0;b<h.length;b++){let S=h[b];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(g=b),S.route.id){let{loaderData:w,errors:L}=n,B=S.route.loader&&w[S.route.id]===void 0&&(!L||L[S.route.id]===void 0);if(S.route.lazy||B){p=!0,g>=0?h=h.slice(0,g+1):h=[h[0]];break}}}return h.reduceRight((b,S,w)=>{let L,B=!1,X=null,j=null;n&&(L=m&&S.route.id?m[S.route.id]:void 0,X=S.route.errorElement||Uw,p&&(g<0&&w===0?(Kw("route-fallback"),B=!0,j=null):g===w&&(B=!0,j=S.route.hydrateFallbackElement||null)));let se=e.concat(h.slice(0,w+1)),W=()=>{let te;return L?te=X:B?te=j:S.route.Component?te=z.createElement(S.route.Component,null):S.route.element?te=S.route.element:te=b,z.createElement(jw,{match:S,routeContext:{outlet:b,matches:se,isDataRoute:n!=null},children:te})};return n&&(S.route.ErrorBoundary||S.route.errorElement||w===0)?z.createElement(Lw,{location:n.location,revalidation:n.revalidation,component:X,error:L,children:W(),routeContext:{outlet:null,matches:se,isDataRoute:!0}}):W()},null)}var Eb=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(Eb||{}),bb=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(bb||{});function Bw(r){let e=z.useContext(rf);return e||pt(!1),e}function Fw(r){let e=z.useContext(yb);return e||pt(!1),e}function qw(r){let e=z.useContext(xi);return e||pt(!1),e}function Tb(r){let e=qw(),n=e.matches[e.matches.length-1];return n.route.id||pt(!1),n.route.id}function Hw(){var r;let e=z.useContext(vb),n=Fw(),s=Tb();return e!==void 0?e:(r=n.errors)==null?void 0:r[s]}function Gw(){let{router:r}=Bw(Eb.UseNavigateStable),e=Tb(bb.UseNavigateStable),n=z.useRef(!1);return _b(()=>{n.current=!0}),z.useCallback(function(o,u){u===void 0&&(u={}),n.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,Cu({fromRouteId:e},u)))},[r,e])}const h0={};function Kw(r,e,n){h0[r]||(h0[r]=!0)}function Qw(r,e){r?.v7_startTransition,r?.v7_relativeSplatPath}function Yw(r){let{to:e,replace:n,state:s,relative:o}=r;Zo()||pt(!1);let{future:u,static:h}=z.useContext(wi),{matches:m}=z.useContext(xi),{pathname:p}=ja(),g=Jo(),b=Op(e,Np(m,u.v7_relativeSplatPath),p,o==="path"),S=JSON.stringify(b);return z.useEffect(()=>g(JSON.parse(S),{replace:n,state:s,relative:o}),[g,S,o,n,s]),null}function fs(r){pt(!1)}function Ww(r){let{basename:e="/",children:n=null,location:s,navigationType:o=vs.Pop,navigator:u,static:h=!1,future:m}=r;Zo()&&pt(!1);let p=e.replace(/^\/*/,"/"),g=z.useMemo(()=>({basename:p,navigator:u,static:h,future:Cu({v7_relativeSplatPath:!1},m)}),[p,m,u,h]);typeof s=="string"&&(s=La(s));let{pathname:b="/",search:S="",hash:w="",state:L=null,key:B="default"}=s,X=z.useMemo(()=>{let j=Ho(b,p);return j==null?null:{location:{pathname:j,search:S,hash:w,state:L,key:B},navigationType:o}},[p,b,S,w,L,B,o]);return X==null?null:z.createElement(wi.Provider,{value:g},z.createElement(sf.Provider,{children:n,value:X}))}function Xw(r){let{children:e,location:n}=r;return Mw($m(e),n)}new Promise(()=>{});function $m(r,e){e===void 0&&(e=[]);let n=[];return z.Children.forEach(r,(s,o)=>{if(!z.isValidElement(s))return;let u=[...e,o];if(s.type===z.Fragment){n.push.apply(n,$m(s.props.children,u));return}s.type!==fs&&pt(!1),!s.props.index||!s.props.children||pt(!1);let h={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=$m(s.props.children,u)),n.push(h)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uh(){return Uh=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Uh.apply(this,arguments)}function Sb(r,e){if(r==null)return{};var n={},s=Object.keys(r),o,u;for(u=0;u<s.length;u++)o=s[u],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}function $w(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Zw(r,e){return r.button===0&&(!e||e==="_self")&&!$w(r)}const Jw=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ex=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],tx="6";try{window.__reactRouterVersion=tx}catch{}const nx=z.createContext({isTransitioning:!1}),rx="startTransition",f0=JA[rx];function ix(r){let{basename:e,children:n,future:s,window:o}=r,u=z.useRef();u.current==null&&(u.current=aw({window:o,v5Compat:!0}));let h=u.current,[m,p]=z.useState({action:h.action,location:h.location}),{v7_startTransition:g}=s||{},b=z.useCallback(S=>{g&&f0?f0(()=>p(S)):p(S)},[p,g]);return z.useLayoutEffect(()=>h.listen(b),[h,b]),z.useEffect(()=>Qw(s),[s]),z.createElement(Ww,{basename:e,children:n,location:m.location,navigationType:m.action,navigator:h,future:s})}const sx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ax=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_r=z.forwardRef(function(e,n){let{onClick:s,relative:o,reloadDocument:u,replace:h,state:m,target:p,to:g,preventScrollReset:b,viewTransition:S}=e,w=Sb(e,Jw),{basename:L}=z.useContext(wi),B,X=!1;if(typeof g=="string"&&ax.test(g)&&(B=g,sx))try{let te=new URL(window.location.href),ue=g.startsWith("//")?new URL(te.protocol+g):new URL(g),ae=Ho(ue.pathname,L);ue.origin===te.origin&&ae!=null?g=ae+ue.search+ue.hash:X=!0}catch{}let j=Nw(g,{relative:o}),se=lx(g,{replace:h,state:m,target:p,preventScrollReset:b,relative:o,viewTransition:S});function W(te){s&&s(te),te.defaultPrevented||se(te)}return z.createElement("a",Uh({},w,{href:B||j,onClick:X||u?s:W,ref:n,target:p}))}),uu=z.forwardRef(function(e,n){let{"aria-current":s="page",caseSensitive:o=!1,className:u="",end:h=!1,style:m,to:p,viewTransition:g,children:b}=e,S=Sb(e,ex),w=af(p,{relative:S.relative}),L=ja(),B=z.useContext(yb),{navigator:X,basename:j}=z.useContext(wi),se=B!=null&&ux(w)&&g===!0,W=X.encodeLocation?X.encodeLocation(w).pathname:w.pathname,te=L.pathname,ue=B&&B.navigation&&B.navigation.location?B.navigation.location.pathname:null;o||(te=te.toLowerCase(),ue=ue?ue.toLowerCase():null,W=W.toLowerCase()),ue&&j&&(ue=Ho(ue,j)||ue);const ae=W!=="/"&&W.endsWith("/")?W.length-1:W.length;let pe=te===W||!h&&te.startsWith(W)&&te.charAt(ae)==="/",O=ue!=null&&(ue===W||!h&&ue.startsWith(W)&&ue.charAt(W.length)==="/"),R={isActive:pe,isPending:O,isTransitioning:se},x=pe?s:void 0,M;typeof u=="function"?M=u(R):M=[u,pe?"active":null,O?"pending":null,se?"transitioning":null].filter(Boolean).join(" ");let k=typeof m=="function"?m(R):m;return z.createElement(_r,Uh({},S,{"aria-current":x,className:M,ref:n,style:k,to:p,viewTransition:g}),typeof b=="function"?b(R):b)});var Zm;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Zm||(Zm={}));var d0;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(d0||(d0={}));function ox(r){let e=z.useContext(rf);return e||pt(!1),e}function lx(r,e){let{target:n,replace:s,state:o,preventScrollReset:u,relative:h,viewTransition:m}=e===void 0?{}:e,p=Jo(),g=ja(),b=af(r,{relative:h});return z.useCallback(S=>{if(Zw(S,n)){S.preventDefault();let w=s!==void 0?s:Ph(g)===Ph(b);p(r,{replace:w,state:o,preventScrollReset:u,relative:h,viewTransition:m})}},[g,p,b,s,o,n,r,u,h,m])}function ux(r,e){e===void 0&&(e={});let n=z.useContext(nx);n==null&&pt(!1);let{basename:s}=ox(Zm.useViewTransitionState),o=af(r,{relative:e.relative});if(!n.isTransitioning)return!1;let u=Ho(n.currentLocation.pathname,s)||n.currentLocation.pathname,h=Ho(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Xm(o.pathname,h)!=null||Xm(o.pathname,u)!=null}const cx=()=>v.jsx("section",{style:{background:"linear-gradient(135deg, #1A0800 0%, #4A1E05 45%, #8B4513 80%, #C96B2B 100%)",minHeight:"520px",position:"relative"},className:"flex items-center",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-8 w-full grid grid-cols-1 lg:grid-cols-2 gap-12 items-center py-20",children:[v.jsxs("div",{children:[v.jsx("span",{style:{color:"#AEFF00",fontSize:"11px",fontWeight:700,letterSpacing:"0.15em",textTransform:"uppercase"},className:"block mb-5",children:" Ritual de bienestar"}),v.jsxs("h1",{style:{color:"#fff",fontSize:"clamp(2rem, 5vw, 3.5rem)",fontWeight:800,lineHeight:1.1,marginBottom:"1.25rem"},children:["Tu nuevo ritual diario",v.jsx("br",{}),"de bienestar "]}),v.jsx("p",{style:{color:"rgba(255,255,255,0.75)",fontSize:"15px",lineHeight:1.75,marginBottom:"2rem",maxWidth:"440px"},children:"Velas artesanales elaboradas a mano con cera natural en Santa Marta, Colombia. Cada aroma cuenta una historia del Caribe."}),v.jsxs("div",{className:"flex flex-wrap gap-4",children:[v.jsx(_r,{to:"/juguetes",style:{backgroundColor:"var(--vsm-brand)",color:"#fff",borderRadius:"5px",padding:"12px 28px",fontSize:"13px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.07em",textDecoration:"none"},className:"hover:opacity-90 transition-opacity",children:"Comprar ahora"}),v.jsx("a",{href:"#nosotros",style:{color:"#fff",border:"1px solid rgba(255,255,255,0.5)",borderRadius:"5px",padding:"12px 28px",fontSize:"13px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.07em"},className:"hover:bg-white hover:text-black transition-all",children:"Ver coleccin"})]})]}),v.jsxs("div",{style:{backgroundColor:"rgba(255,255,255,0.06)",border:"1px solid rgba(255,255,255,0.12)",borderRadius:"8px",minHeight:"340px"},className:"hidden lg:flex items-center justify-center flex-col gap-4",children:[v.jsx("span",{style:{fontSize:"6rem",filter:"drop-shadow(0 8px 20px rgba(201,107,43,0.6))"},children:""}),v.jsx("p",{style:{color:"rgba(255,255,255,0.5)",fontSize:"11px",fontWeight:600,letterSpacing:"0.15em",textTransform:"uppercase"},children:"Coleccin Santa Marta"})]})]})}),hx=[{icon:"",title:"Velas Aromticas",desc:"Elaboradas con cera de soya 100% natural y aceites esenciales puros. Cada vela llena tu espacio con aromas nicos inspirados en el Caribe colombiano: coco, mar, flores tropicales y especias."},{icon:"",title:"Velas Decorativas",desc:"Diseos artesanales nicos que combinan belleza y aroma. Cada pieza es moldeada y terminada a mano, convirtindose en un objeto decorativo que tambin perfuma tu hogar."}],fx=()=>v.jsx("section",{style:{backgroundColor:"var(--vsm-white)"},className:"py-20 px-8",children:v.jsxs("div",{className:"max-w-7xl mx-auto",children:[v.jsx("h2",{style:{fontWeight:800,fontSize:"1.6rem",color:"var(--vsm-black)",marginBottom:"2rem"},children:"Conoce nuestras Velas y otros productos"}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:hx.map(r=>v.jsxs("div",{style:{backgroundColor:"#FBF6F0",borderRadius:"8px",padding:"2rem",borderLeft:"3px solid var(--vsm-brand)"},children:[v.jsx("div",{style:{fontSize:"3.5rem",marginBottom:"1rem"},children:r.icon}),v.jsx("h3",{style:{fontWeight:700,fontSize:"1.1rem",marginBottom:"0.75rem",color:"var(--vsm-black)"},children:r.title}),v.jsx("p",{style:{color:"var(--vsm-gray-mid)",lineHeight:1.8,fontSize:"14px",marginBottom:"1.25rem"},children:r.desc}),v.jsx(_r,{to:"/juguetes",style:{color:"var(--vsm-brand)",fontWeight:700,fontSize:"13px",textDecoration:"underline",textUnderlineOffset:"4px"},children:"Ver productos "})]},r.title))})]})}),dx=()=>{};var m0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},mx=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],h=r[n++],m=r[n++],p=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=r[n++],h=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},wb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],h=o+1<r.length,m=h?r[o+1]:0,p=o+2<r.length,g=p?r[o+2]:0,b=u>>2,S=(u&3)<<4|m>>4;let w=(m&15)<<2|g>>6,L=g&63;p||(L=64,h||(w=64)),s.push(n[b],n[S],n[w],n[L])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Ab(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):mx(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const g=o<r.length?n[r.charAt(o)]:64;++o;const S=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||g==null||S==null)throw new px;const w=u<<2|m>>4;if(s.push(w),g!==64){const L=m<<4&240|g>>2;if(s.push(L),S!==64){const B=g<<6&192|S;s.push(B)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class px extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gx=function(r){const e=Ab(r);return wb.encodeByteArray(e,!0)},Lh=function(r){return gx(r).replace(/\./g,"")},xb=function(r){try{return wb.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx=()=>yx().__FIREBASE_DEFAULTS__,_x=()=>{if(typeof process>"u"||typeof m0>"u")return;const r=m0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Ex=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&xb(r[1]);return e&&JSON.parse(e)},of=()=>{try{return dx()||vx()||_x()||Ex()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Rb=r=>of()?.emulatorHosts?.[r],Cb=r=>{const e=Rb(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Ib=()=>of()?.config,Db=r=>of()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function kp(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Lh(JSON.stringify(n)),Lh(JSON.stringify(h)),""].join(".")}const vu={};function Tx(){const r={prod:[],emulator:[]};for(const e of Object.keys(vu))vu[e]?r.emulator.push(e):r.prod.push(e);return r}function Sx(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let p0=!1;function Mp(r,e){if(typeof window>"u"||typeof document>"u"||!Vs(window.location.host)||vu[r]===e||vu[r]||p0)return;vu[r]=e;function n(w){return`__firebase__banner__${w}`}const s="__firebase__banner",u=Tx().prod.length>0;function h(){const w=document.getElementById(s);w&&w.remove()}function m(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function p(w,L){w.setAttribute("width","24"),w.setAttribute("id",L),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function g(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{p0=!0,h()},w}function b(w,L){w.setAttribute("id",L),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function S(){const w=Sx(s),L=n("text"),B=document.getElementById(L)||document.createElement("span"),X=n("learnmore"),j=document.getElementById(X)||document.createElement("a"),se=n("preprendIcon"),W=document.getElementById(se)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const te=w.element;m(te),b(j,X);const ue=g();p(W,se),te.append(W,B,j,ue),document.body.appendChild(te)}u?(B.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ax(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function wx(){const r=of()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Rx(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Cx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ix(){const r=cn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Dx(){return!wx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Nx(){try{return typeof indexedDB=="object"}catch{return!1}}function Ox(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="FirebaseError";class Kr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=kx,Object.setPrototypeOf(this,Kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ju.prototype.create)}}class ju{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?Mx(u,s):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Kr(o,m,s)}}function Mx(r,e){return r.replace(Vx,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const Vx=/\{\$([^}]+)}/g;function Px(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Na(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],h=e[o];if(g0(u)&&g0(h)){if(!Na(u,h))return!1}else if(u!==h)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function g0(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function fu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function du(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function Ux(r,e){const n=new Lx(r,e);return n.subscribe.bind(n)}class Lx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");jx(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=km),o.error===void 0&&(o.error=km),o.complete===void 0&&(o.complete=km);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jx(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function km(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(r){return r&&r._delegate?r._delegate:r}class xs{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new bx;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Fx(e))try{this.getOrInitializeService({instanceIdentifier:xa})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=xa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xa){return this.instances.has(e)}getOptions(e=xa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&h.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Bx(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=xa){return this.component?this.component.multipleInstances?e:xa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Bx(r){return r===xa?void 0:r}function Fx(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ue||(Ue={}));const Hx={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},Gx=Ue.INFO,Kx={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},Qx=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=Kx[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vp{constructor(e){this.name=e,this._logLevel=Gx,this._logHandler=Qx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Hx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const Yx=(r,e)=>e.some(n=>r instanceof n);let y0,v0;function Wx(){return y0||(y0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Xx(){return v0||(v0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ob=new WeakMap,Jm=new WeakMap,kb=new WeakMap,Mm=new WeakMap,Pp=new WeakMap;function $x(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",h)},u=()=>{n(bs(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&Ob.set(n,r)}).catch(()=>{}),Pp.set(e,r),e}function Zx(r){if(Jm.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",h),r.removeEventListener("abort",h)},u=()=>{n(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",h),r.addEventListener("abort",h)});Jm.set(r,e)}let ep={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Jm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||kb.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bs(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Jx(r){ep=r(ep)}function eR(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Vm(this),e,...n);return kb.set(s,e.sort?e.sort():[e]),bs(s)}:Xx().includes(r)?function(...e){return r.apply(Vm(this),e),bs(Ob.get(this))}:function(...e){return bs(r.apply(Vm(this),e))}}function tR(r){return typeof r=="function"?eR(r):(r instanceof IDBTransaction&&Zx(r),Yx(r,Wx())?new Proxy(r,ep):r)}function bs(r){if(r instanceof IDBRequest)return $x(r);if(Mm.has(r))return Mm.get(r);const e=tR(r);return e!==r&&(Mm.set(r,e),Pp.set(e,r)),e}const Vm=r=>Pp.get(r);function nR(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const h=indexedDB.open(r,e),m=bs(h);return s&&h.addEventListener("upgradeneeded",p=>{s(bs(h.result),p.oldVersion,p.newVersion,bs(h.transaction),p)}),n&&h.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const rR=["get","getKey","getAll","getAllKeys","count"],iR=["put","add","delete","clear"],Pm=new Map;function _0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Pm.get(e))return Pm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=iR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||rR.includes(n)))return;const u=async function(h,...m){const p=this.transaction(h,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return Pm.set(e,u),u}Jx(r=>({...r,get:(e,n,s)=>_0(e,n)||r.get(e,n,s),has:(e,n)=>!!_0(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(aR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function aR(r){return r.getComponent()?.type==="VERSION"}const tp="@firebase/app",E0="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i=new Vp("@firebase/app"),oR="@firebase/app-compat",lR="@firebase/analytics-compat",uR="@firebase/analytics",cR="@firebase/app-check-compat",hR="@firebase/app-check",fR="@firebase/auth",dR="@firebase/auth-compat",mR="@firebase/database",pR="@firebase/data-connect",gR="@firebase/database-compat",yR="@firebase/functions",vR="@firebase/functions-compat",_R="@firebase/installations",ER="@firebase/installations-compat",bR="@firebase/messaging",TR="@firebase/messaging-compat",SR="@firebase/performance",AR="@firebase/performance-compat",wR="@firebase/remote-config",xR="@firebase/remote-config-compat",RR="@firebase/storage",CR="@firebase/storage-compat",IR="@firebase/firestore",DR="@firebase/ai",NR="@firebase/firestore-compat",OR="firebase",kR="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="[DEFAULT]",MR={[tp]:"fire-core",[oR]:"fire-core-compat",[uR]:"fire-analytics",[lR]:"fire-analytics-compat",[hR]:"fire-app-check",[cR]:"fire-app-check-compat",[fR]:"fire-auth",[dR]:"fire-auth-compat",[mR]:"fire-rtdb",[pR]:"fire-data-connect",[gR]:"fire-rtdb-compat",[yR]:"fire-fn",[vR]:"fire-fn-compat",[_R]:"fire-iid",[ER]:"fire-iid-compat",[bR]:"fire-fcm",[TR]:"fire-fcm-compat",[SR]:"fire-perf",[AR]:"fire-perf-compat",[wR]:"fire-rc",[xR]:"fire-rc-compat",[RR]:"fire-gcs",[CR]:"fire-gcs-compat",[IR]:"fire-fst",[NR]:"fire-fst-compat",[DR]:"fire-vertex","fire-js":"fire-js",[OR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh=new Map,VR=new Map,rp=new Map;function b0(r,e){try{r.container.addComponent(e)}catch(n){_i.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function Oa(r){const e=r.name;if(rp.has(e))return _i.debug(`There were multiple attempts to register component ${e}.`),!1;rp.set(e,r);for(const n of jh.values())b0(n,r);for(const n of VR.values())b0(n,r);return!0}function lf(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function jn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ts=new ju("app","Firebase",PR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ts.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za=kR;function Mb(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:np,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Ts.create("bad-app-name",{appName:String(o)});if(n||(n=Ib()),!n)throw Ts.create("no-options");const u=jh.get(o);if(u){if(Na(n,u.options)&&Na(s,u.config))return u;throw Ts.create("duplicate-app",{appName:o})}const h=new qx(o);for(const p of rp.values())h.addComponent(p);const m=new UR(n,s,h);return jh.set(o,m),m}function Up(r=np){const e=jh.get(r);if(!e&&r===np&&Ib())return Mb();if(!e)throw Ts.create("no-app",{appName:r});return e}function Lr(r,e,n){let s=MR[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_i.warn(h.join(" "));return}Oa(new xs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR="firebase-heartbeat-database",jR=1,Iu="firebase-heartbeat-store";let Um=null;function Vb(){return Um||(Um=nR(LR,jR,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Iu)}catch(n){console.warn(n)}}}}).catch(r=>{throw Ts.create("idb-open",{originalErrorMessage:r.message})})),Um}async function zR(r){try{const n=(await Vb()).transaction(Iu),s=await n.objectStore(Iu).get(Pb(r));return await n.done,s}catch(e){if(e instanceof Kr)_i.warn(e.message);else{const n=Ts.create("idb-get",{originalErrorMessage:e?.message});_i.warn(n.message)}}}async function T0(r,e){try{const s=(await Vb()).transaction(Iu,"readwrite");await s.objectStore(Iu).put(e,Pb(r)),await s.done}catch(n){if(n instanceof Kr)_i.warn(n.message);else{const s=Ts.create("idb-set",{originalErrorMessage:n?.message});_i.warn(s.message)}}}function Pb(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=1024,FR=30;class qR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new GR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=S0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>FR){const o=KR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){_i.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=S0(),{heartbeatsToSend:n,unsentEntries:s}=HR(this._heartbeatsCache.heartbeats),o=Lh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return _i.warn(e),""}}}function S0(){return new Date().toISOString().substring(0,10)}function HR(r,e=BR){const n=[];let s=r.slice();for(const o of r){const u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),A0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),A0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class GR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Nx()?Ox().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return T0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return T0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function A0(r){return Lh(JSON.stringify({version:2,heartbeats:r})).length}function KR(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(r){Oa(new xs("platform-logger",e=>new sR(e),"PRIVATE")),Oa(new xs("heartbeat",e=>new qR(e),"PRIVATE")),Lr(tp,E0,r),Lr(tp,E0,"esm2020"),Lr("fire-js","")}QR("");var w0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ss,Ub;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,R){function x(){}x.prototype=R.prototype,O.F=R.prototype,O.prototype=new x,O.prototype.constructor=O,O.D=function(M,k,N){for(var C=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)C[qe-2]=arguments[qe];return R.prototype[k].apply(M,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,R,x){x||(x=0);const M=Array(16);if(typeof R=="string")for(var k=0;k<16;++k)M[k]=R.charCodeAt(x++)|R.charCodeAt(x++)<<8|R.charCodeAt(x++)<<16|R.charCodeAt(x++)<<24;else for(k=0;k<16;++k)M[k]=R[x++]|R[x++]<<8|R[x++]<<16|R[x++]<<24;R=O.g[0],x=O.g[1],k=O.g[2];let N=O.g[3],C;C=R+(N^x&(k^N))+M[0]+3614090360&4294967295,R=x+(C<<7&4294967295|C>>>25),C=N+(k^R&(x^k))+M[1]+3905402710&4294967295,N=R+(C<<12&4294967295|C>>>20),C=k+(x^N&(R^x))+M[2]+606105819&4294967295,k=N+(C<<17&4294967295|C>>>15),C=x+(R^k&(N^R))+M[3]+3250441966&4294967295,x=k+(C<<22&4294967295|C>>>10),C=R+(N^x&(k^N))+M[4]+4118548399&4294967295,R=x+(C<<7&4294967295|C>>>25),C=N+(k^R&(x^k))+M[5]+1200080426&4294967295,N=R+(C<<12&4294967295|C>>>20),C=k+(x^N&(R^x))+M[6]+2821735955&4294967295,k=N+(C<<17&4294967295|C>>>15),C=x+(R^k&(N^R))+M[7]+4249261313&4294967295,x=k+(C<<22&4294967295|C>>>10),C=R+(N^x&(k^N))+M[8]+1770035416&4294967295,R=x+(C<<7&4294967295|C>>>25),C=N+(k^R&(x^k))+M[9]+2336552879&4294967295,N=R+(C<<12&4294967295|C>>>20),C=k+(x^N&(R^x))+M[10]+4294925233&4294967295,k=N+(C<<17&4294967295|C>>>15),C=x+(R^k&(N^R))+M[11]+2304563134&4294967295,x=k+(C<<22&4294967295|C>>>10),C=R+(N^x&(k^N))+M[12]+1804603682&4294967295,R=x+(C<<7&4294967295|C>>>25),C=N+(k^R&(x^k))+M[13]+4254626195&4294967295,N=R+(C<<12&4294967295|C>>>20),C=k+(x^N&(R^x))+M[14]+2792965006&4294967295,k=N+(C<<17&4294967295|C>>>15),C=x+(R^k&(N^R))+M[15]+1236535329&4294967295,x=k+(C<<22&4294967295|C>>>10),C=R+(k^N&(x^k))+M[1]+4129170786&4294967295,R=x+(C<<5&4294967295|C>>>27),C=N+(x^k&(R^x))+M[6]+3225465664&4294967295,N=R+(C<<9&4294967295|C>>>23),C=k+(R^x&(N^R))+M[11]+643717713&4294967295,k=N+(C<<14&4294967295|C>>>18),C=x+(N^R&(k^N))+M[0]+3921069994&4294967295,x=k+(C<<20&4294967295|C>>>12),C=R+(k^N&(x^k))+M[5]+3593408605&4294967295,R=x+(C<<5&4294967295|C>>>27),C=N+(x^k&(R^x))+M[10]+38016083&4294967295,N=R+(C<<9&4294967295|C>>>23),C=k+(R^x&(N^R))+M[15]+3634488961&4294967295,k=N+(C<<14&4294967295|C>>>18),C=x+(N^R&(k^N))+M[4]+3889429448&4294967295,x=k+(C<<20&4294967295|C>>>12),C=R+(k^N&(x^k))+M[9]+568446438&4294967295,R=x+(C<<5&4294967295|C>>>27),C=N+(x^k&(R^x))+M[14]+3275163606&4294967295,N=R+(C<<9&4294967295|C>>>23),C=k+(R^x&(N^R))+M[3]+4107603335&4294967295,k=N+(C<<14&4294967295|C>>>18),C=x+(N^R&(k^N))+M[8]+1163531501&4294967295,x=k+(C<<20&4294967295|C>>>12),C=R+(k^N&(x^k))+M[13]+2850285829&4294967295,R=x+(C<<5&4294967295|C>>>27),C=N+(x^k&(R^x))+M[2]+4243563512&4294967295,N=R+(C<<9&4294967295|C>>>23),C=k+(R^x&(N^R))+M[7]+1735328473&4294967295,k=N+(C<<14&4294967295|C>>>18),C=x+(N^R&(k^N))+M[12]+2368359562&4294967295,x=k+(C<<20&4294967295|C>>>12),C=R+(x^k^N)+M[5]+4294588738&4294967295,R=x+(C<<4&4294967295|C>>>28),C=N+(R^x^k)+M[8]+2272392833&4294967295,N=R+(C<<11&4294967295|C>>>21),C=k+(N^R^x)+M[11]+1839030562&4294967295,k=N+(C<<16&4294967295|C>>>16),C=x+(k^N^R)+M[14]+4259657740&4294967295,x=k+(C<<23&4294967295|C>>>9),C=R+(x^k^N)+M[1]+2763975236&4294967295,R=x+(C<<4&4294967295|C>>>28),C=N+(R^x^k)+M[4]+1272893353&4294967295,N=R+(C<<11&4294967295|C>>>21),C=k+(N^R^x)+M[7]+4139469664&4294967295,k=N+(C<<16&4294967295|C>>>16),C=x+(k^N^R)+M[10]+3200236656&4294967295,x=k+(C<<23&4294967295|C>>>9),C=R+(x^k^N)+M[13]+681279174&4294967295,R=x+(C<<4&4294967295|C>>>28),C=N+(R^x^k)+M[0]+3936430074&4294967295,N=R+(C<<11&4294967295|C>>>21),C=k+(N^R^x)+M[3]+3572445317&4294967295,k=N+(C<<16&4294967295|C>>>16),C=x+(k^N^R)+M[6]+76029189&4294967295,x=k+(C<<23&4294967295|C>>>9),C=R+(x^k^N)+M[9]+3654602809&4294967295,R=x+(C<<4&4294967295|C>>>28),C=N+(R^x^k)+M[12]+3873151461&4294967295,N=R+(C<<11&4294967295|C>>>21),C=k+(N^R^x)+M[15]+530742520&4294967295,k=N+(C<<16&4294967295|C>>>16),C=x+(k^N^R)+M[2]+3299628645&4294967295,x=k+(C<<23&4294967295|C>>>9),C=R+(k^(x|~N))+M[0]+4096336452&4294967295,R=x+(C<<6&4294967295|C>>>26),C=N+(x^(R|~k))+M[7]+1126891415&4294967295,N=R+(C<<10&4294967295|C>>>22),C=k+(R^(N|~x))+M[14]+2878612391&4294967295,k=N+(C<<15&4294967295|C>>>17),C=x+(N^(k|~R))+M[5]+4237533241&4294967295,x=k+(C<<21&4294967295|C>>>11),C=R+(k^(x|~N))+M[12]+1700485571&4294967295,R=x+(C<<6&4294967295|C>>>26),C=N+(x^(R|~k))+M[3]+2399980690&4294967295,N=R+(C<<10&4294967295|C>>>22),C=k+(R^(N|~x))+M[10]+4293915773&4294967295,k=N+(C<<15&4294967295|C>>>17),C=x+(N^(k|~R))+M[1]+2240044497&4294967295,x=k+(C<<21&4294967295|C>>>11),C=R+(k^(x|~N))+M[8]+1873313359&4294967295,R=x+(C<<6&4294967295|C>>>26),C=N+(x^(R|~k))+M[15]+4264355552&4294967295,N=R+(C<<10&4294967295|C>>>22),C=k+(R^(N|~x))+M[6]+2734768916&4294967295,k=N+(C<<15&4294967295|C>>>17),C=x+(N^(k|~R))+M[13]+1309151649&4294967295,x=k+(C<<21&4294967295|C>>>11),C=R+(k^(x|~N))+M[4]+4149444226&4294967295,R=x+(C<<6&4294967295|C>>>26),C=N+(x^(R|~k))+M[11]+3174756917&4294967295,N=R+(C<<10&4294967295|C>>>22),C=k+(R^(N|~x))+M[2]+718787259&4294967295,k=N+(C<<15&4294967295|C>>>17),C=x+(N^(k|~R))+M[9]+3951481745&4294967295,O.g[0]=O.g[0]+R&4294967295,O.g[1]=O.g[1]+(k+(C<<21&4294967295|C>>>11))&4294967295,O.g[2]=O.g[2]+k&4294967295,O.g[3]=O.g[3]+N&4294967295}s.prototype.v=function(O,R){R===void 0&&(R=O.length);const x=R-this.blockSize,M=this.C;let k=this.h,N=0;for(;N<R;){if(k==0)for(;N<=x;)o(this,O,N),N+=this.blockSize;if(typeof O=="string"){for(;N<R;)if(M[k++]=O.charCodeAt(N++),k==this.blockSize){o(this,M),k=0;break}}else for(;N<R;)if(M[k++]=O[N++],k==this.blockSize){o(this,M),k=0;break}}this.h=k,this.o+=R},s.prototype.A=function(){var O=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);O[0]=128;for(var R=1;R<O.length-8;++R)O[R]=0;R=this.o*8;for(var x=O.length-8;x<O.length;++x)O[x]=R&255,R/=256;for(this.v(O),O=Array(16),R=0,x=0;x<4;++x)for(let M=0;M<32;M+=8)O[R++]=this.g[x]>>>M&255;return O};function u(O,R){var x=m;return Object.prototype.hasOwnProperty.call(x,O)?x[O]:x[O]=R(O)}function h(O,R){this.h=R;const x=[];let M=!0;for(let k=O.length-1;k>=0;k--){const N=O[k]|0;M&&N==R||(x[k]=N,M=!1)}this.g=x}var m={};function p(O){return-128<=O&&O<128?u(O,function(R){return new h([R|0],R<0?-1:0)}):new h([O|0],O<0?-1:0)}function g(O){if(isNaN(O)||!isFinite(O))return S;if(O<0)return j(g(-O));const R=[];let x=1;for(let M=0;O>=x;M++)R[M]=O/x|0,x*=4294967296;return new h(R,0)}function b(O,R){if(O.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(O.charAt(0)=="-")return j(b(O.substring(1),R));if(O.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=g(Math.pow(R,8));let M=S;for(let N=0;N<O.length;N+=8){var k=Math.min(8,O.length-N);const C=parseInt(O.substring(N,N+k),R);k<8?(k=g(Math.pow(R,k)),M=M.j(k).add(g(C))):(M=M.j(x),M=M.add(g(C)))}return M}var S=p(0),w=p(1),L=p(16777216);r=h.prototype,r.m=function(){if(X(this))return-j(this).m();let O=0,R=1;for(let x=0;x<this.g.length;x++){const M=this.i(x);O+=(M>=0?M:4294967296+M)*R,R*=4294967296}return O},r.toString=function(O){if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(B(this))return"0";if(X(this))return"-"+j(this).toString(O);const R=g(Math.pow(O,6));var x=this;let M="";for(;;){const k=ue(x,R).g;x=se(x,k.j(R));let N=((x.g.length>0?x.g[0]:x.h)>>>0).toString(O);if(x=k,B(x))return N+M;for(;N.length<6;)N="0"+N;M=N+M}},r.i=function(O){return O<0?0:O<this.g.length?this.g[O]:this.h};function B(O){if(O.h!=0)return!1;for(let R=0;R<O.g.length;R++)if(O.g[R]!=0)return!1;return!0}function X(O){return O.h==-1}r.l=function(O){return O=se(this,O),X(O)?-1:B(O)?0:1};function j(O){const R=O.g.length,x=[];for(let M=0;M<R;M++)x[M]=~O.g[M];return new h(x,~O.h).add(w)}r.abs=function(){return X(this)?j(this):this},r.add=function(O){const R=Math.max(this.g.length,O.g.length),x=[];let M=0;for(let k=0;k<=R;k++){let N=M+(this.i(k)&65535)+(O.i(k)&65535),C=(N>>>16)+(this.i(k)>>>16)+(O.i(k)>>>16);M=C>>>16,N&=65535,C&=65535,x[k]=C<<16|N}return new h(x,x[x.length-1]&-2147483648?-1:0)};function se(O,R){return O.add(j(R))}r.j=function(O){if(B(this)||B(O))return S;if(X(this))return X(O)?j(this).j(j(O)):j(j(this).j(O));if(X(O))return j(this.j(j(O)));if(this.l(L)<0&&O.l(L)<0)return g(this.m()*O.m());const R=this.g.length+O.g.length,x=[];for(var M=0;M<2*R;M++)x[M]=0;for(M=0;M<this.g.length;M++)for(let k=0;k<O.g.length;k++){const N=this.i(M)>>>16,C=this.i(M)&65535,qe=O.i(k)>>>16,ze=O.i(k)&65535;x[2*M+2*k]+=C*ze,W(x,2*M+2*k),x[2*M+2*k+1]+=N*ze,W(x,2*M+2*k+1),x[2*M+2*k+1]+=C*qe,W(x,2*M+2*k+1),x[2*M+2*k+2]+=N*qe,W(x,2*M+2*k+2)}for(O=0;O<R;O++)x[O]=x[2*O+1]<<16|x[2*O];for(O=R;O<2*R;O++)x[O]=0;return new h(x,0)};function W(O,R){for(;(O[R]&65535)!=O[R];)O[R+1]+=O[R]>>>16,O[R]&=65535,R++}function te(O,R){this.g=O,this.h=R}function ue(O,R){if(B(R))throw Error("division by zero");if(B(O))return new te(S,S);if(X(O))return R=ue(j(O),R),new te(j(R.g),j(R.h));if(X(R))return R=ue(O,j(R)),new te(j(R.g),R.h);if(O.g.length>30){if(X(O)||X(R))throw Error("slowDivide_ only works with positive integers.");for(var x=w,M=R;M.l(O)<=0;)x=ae(x),M=ae(M);var k=pe(x,1),N=pe(M,1);for(M=pe(M,2),x=pe(x,2);!B(M);){var C=N.add(M);C.l(O)<=0&&(k=k.add(x),N=C),M=pe(M,1),x=pe(x,1)}return R=se(O,k.j(R)),new te(k,R)}for(k=S;O.l(R)>=0;){for(x=Math.max(1,Math.floor(O.m()/R.m())),M=Math.ceil(Math.log(x)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),N=g(x),C=N.j(R);X(C)||C.l(O)>0;)x-=M,N=g(x),C=N.j(R);B(N)&&(N=w),k=k.add(N),O=se(O,C)}return new te(k,O)}r.B=function(O){return ue(this,O).h},r.and=function(O){const R=Math.max(this.g.length,O.g.length),x=[];for(let M=0;M<R;M++)x[M]=this.i(M)&O.i(M);return new h(x,this.h&O.h)},r.or=function(O){const R=Math.max(this.g.length,O.g.length),x=[];for(let M=0;M<R;M++)x[M]=this.i(M)|O.i(M);return new h(x,this.h|O.h)},r.xor=function(O){const R=Math.max(this.g.length,O.g.length),x=[];for(let M=0;M<R;M++)x[M]=this.i(M)^O.i(M);return new h(x,this.h^O.h)};function ae(O){const R=O.g.length+1,x=[];for(let M=0;M<R;M++)x[M]=O.i(M)<<1|O.i(M-1)>>>31;return new h(x,O.h)}function pe(O,R){const x=R>>5;R%=32;const M=O.g.length-x,k=[];for(let N=0;N<M;N++)k[N]=R>0?O.i(N+x)>>>R|O.i(N+x+1)<<32-R:O.i(N+x);return new h(k,O.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Ub=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=g,h.fromString=b,Ss=h}).apply(typeof w0<"u"?w0:typeof self<"u"?self:typeof window<"u"?window:{});var ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lb,mu,jb,xh,ip,zb,Bb,Fb;(function(){var r,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ph=="object"&&ph];for(var y=0;y<c.length;++y){var _=c[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var _=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var q=c[A];if(!(q in _))break e;_=_[q]}c=c[c.length-1],A=_[c],y=y(A),y!=A&&y!=null&&e(_,c,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(y){var _=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&_.push([A,y[A]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function m(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function p(c,y,_){return c.call.apply(c.bind,arguments)}function g(c,y,_){return g=p,g.apply(null,arguments)}function b(c,y){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function S(c,y){function _(){}_.prototype=y.prototype,c.Z=y.prototype,c.prototype=new _,c.prototype.constructor=c,c.Ob=function(A,q,Q){for(var le=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)le[Ie-2]=arguments[Ie];return y.prototype[q].apply(A,le)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function L(c){const y=c.length;if(y>0){const _=Array(y);for(let A=0;A<y;A++)_[A]=c[A];return _}return[]}function B(c,y){for(let A=1;A<arguments.length;A++){const q=arguments[A];var _=typeof q;if(_=_!="object"?_:q?Array.isArray(q)?"array":_:"null",_=="array"||_=="object"&&typeof q.length=="number"){_=c.length||0;const Q=q.length||0;c.length=_+Q;for(let le=0;le<Q;le++)c[_+le]=q[le]}else c.push(q)}}class X{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function j(c){h.setTimeout(()=>{throw c},0)}function se(){var c=O;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class W{constructor(){this.h=this.g=null}add(y,_){const A=te.get();A.set(y,_),this.h?this.h.next=A:this.g=A,this.h=A}}var te=new X(()=>new ue,c=>c.reset());class ue{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,pe=!1,O=new W,R=()=>{const c=Promise.resolve(void 0);ae=()=>{c.then(x)}};function x(){for(var c;c=se();){try{c.h.call(c.g)}catch(_){j(_)}var y=te;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}pe=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};h.addEventListener("test",_,y),h.removeEventListener("test",_,y)}catch{}return c}();function C(c){return/^[\s\xa0]*$/.test(c)}function qe(c,y){k.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}S(qe,k),qe.prototype.init=function(c,y){const _=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(_=="mouseover"?y=c.fromElement:_=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&qe.Z.h.call(this)},qe.prototype.h=function(){qe.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ze="closure_listenable_"+(Math.random()*1e6|0),P=0;function ie(c,y,_,A,q){this.listener=c,this.proxy=null,this.src=y,this.type=_,this.capture=!!A,this.ha=q,this.key=++P,this.da=this.fa=!1}function de(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Re(c,y,_){for(const A in c)y.call(_,c[A],A,c)}function D(c,y){for(const _ in c)y.call(void 0,c[_],_,c)}function J(c){const y={};for(const _ in c)y[_]=c[_];return y}const oe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(c,y){let _,A;for(let q=1;q<arguments.length;q++){A=arguments[q];for(_ in A)c[_]=A[_];for(let Q=0;Q<oe.length;Q++)_=oe[Q],Object.prototype.hasOwnProperty.call(A,_)&&(c[_]=A[_])}}function ge(c){this.src=c,this.g={},this.h=0}ge.prototype.add=function(c,y,_,A,q){const Q=c.toString();c=this.g[Q],c||(c=this.g[Q]=[],this.h++);const le=be(c,y,A,q);return le>-1?(y=c[le],_||(y.fa=!1)):(y=new ie(y,this.src,Q,!!A,q),y.fa=_,c.push(y)),y};function ke(c,y){const _=y.type;if(_ in c.g){var A=c.g[_],q=Array.prototype.indexOf.call(A,y,void 0),Q;(Q=q>=0)&&Array.prototype.splice.call(A,q,1),Q&&(de(y),c.g[_].length==0&&(delete c.g[_],c.h--))}}function be(c,y,_,A){for(let q=0;q<c.length;++q){const Q=c[q];if(!Q.da&&Q.listener==y&&Q.capture==!!_&&Q.ha==A)return q}return-1}var Pt="closure_lm_"+(Math.random()*1e6|0),Ge={};function vn(c,y,_,A,q){if(Array.isArray(y)){for(let Q=0;Q<y.length;Q++)vn(c,y[Q],_,A,q);return null}return _=Di(_),c&&c[ze]?c.J(y,_,m(A)?!!A.capture:!1,q):Ci(c,y,_,!1,A,q)}function Ci(c,y,_,A,q,Q){if(!y)throw Error("Invalid event type");const le=m(q)?!!q.capture:!!q;let Ie=Ii(c);if(Ie||(c[Pt]=Ie=new ge(c)),_=Ie.add(y,_,A,le,Q),_.proxy)return _;if(A=Qr(),_.proxy=A,A.src=c,A.listener=_,c.addEventListener)N||(q=le),q===void 0&&(q=!1),c.addEventListener(y.toString(),A,q);else if(c.attachEvent)c.attachEvent(ir(y.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Qr(){function c(_){return y.call(c.src,c.listener,_)}const y=Ha;return c}function Yr(c,y,_,A,q){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)Yr(c,y[Q],_,A,q);else A=m(A)?!!A.capture:!!A,_=Di(_),c&&c[ze]?(c=c.i,Q=String(y).toString(),Q in c.g&&(y=c.g[Q],_=be(y,_,A,q),_>-1&&(de(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete c.g[Q],c.h--)))):c&&(c=Ii(c))&&(y=c.g[y.toString()],c=-1,y&&(c=be(y,_,A,q)),(_=c>-1?y[c]:null)&&Cn(_))}function Cn(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[ze])ke(y.i,c);else{var _=c.type,A=c.proxy;y.removeEventListener?y.removeEventListener(_,A,c.capture):y.detachEvent?y.detachEvent(ir(_),A):y.addListener&&y.removeListener&&y.removeListener(A),(_=Ii(y))?(ke(_,c),_.h==0&&(_.src=null,y[Pt]=null)):de(c)}}}function ir(c){return c in Ge?Ge[c]:Ge[c]="on"+c}function Ha(c,y){if(c.da)c=!0;else{y=new qe(y,this);const _=c.listener,A=c.ha||c.src;c.fa&&Cn(c),c=_.call(A,y)}return c}function Ii(c){return c=c[Pt],c instanceof ge?c:null}var nn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Di(c){return typeof c=="function"?c:(c[nn]||(c[nn]=function(y){return c.handleEvent(y)}),c[nn])}function yt(){M.call(this),this.i=new ge(this),this.M=this,this.G=null}S(yt,M),yt.prototype[ze]=!0,yt.prototype.removeEventListener=function(c,y,_,A){Yr(this,c,y,_,A)};function St(c,y){var _,A=c.G;if(A)for(_=[];A;A=A.G)_.push(A);if(c=c.M,A=y.type||y,typeof y=="string")y=new k(y,c);else if(y instanceof k)y.target=y.target||c;else{var q=y;y=new k(A,c),ce(y,q)}q=!0;let Q,le;if(_)for(le=_.length-1;le>=0;le--)Q=y.g=_[le],q=In(Q,A,!0,y)&&q;if(Q=y.g=c,q=In(Q,A,!0,y)&&q,q=In(Q,A,!1,y)&&q,_)for(le=0;le<_.length;le++)Q=y.g=_[le],q=In(Q,A,!1,y)&&q}yt.prototype.N=function(){if(yt.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const _=c.g[y];for(let A=0;A<_.length;A++)de(_[A]);delete c.g[y],c.h--}}this.G=null},yt.prototype.J=function(c,y,_,A){return this.i.add(String(c),y,!1,_,A)},yt.prototype.K=function(c,y,_,A){return this.i.add(String(c),y,!0,_,A)};function In(c,y,_,A){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let q=!0;for(let Q=0;Q<y.length;++Q){const le=y[Q];if(le&&!le.da&&le.capture==_){const Ie=le.listener,ut=le.ha||le.src;le.fa&&ke(c.i,le),q=Ie.call(ut,A)!==!1&&q}}return q&&!A.defaultPrevented}function Ga(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:h.setTimeout(c,y||0)}function Ni(c){c.g=Ga(()=>{c.g=null,c.i&&(c.i=!1,Ni(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Er extends M{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Ni(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hn(c){M.call(this),this.h=c,this.g={}}S(Hn,M);var sr=[];function Bt(c){Re(c.g,function(y,_){this.g.hasOwnProperty(_)&&Cn(y)},c),c.g={}}Hn.prototype.N=function(){Hn.Z.N.call(this),Bt(this)},Hn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fn=h.JSON.stringify,Dt=h.JSON.parse,zs=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function Ka(){}function Bs(){}var Qt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Gn(){k.call(this,"d")}S(Gn,k);function Dn(){k.call(this,"c")}S(Dn,k);var _n={},br=null;function Wr(){return br=br||new yt}_n.Ia="serverreachability";function Fs(c){k.call(this,_n.Ia,c)}S(Fs,k);function Y(c){const y=Wr();St(y,new Fs(y))}_n.STAT_EVENT="statevent";function ye(c,y){k.call(this,_n.STAT_EVENT,c),this.stat=y}S(ye,k);function Je(c){const y=Wr();St(y,new ye(y,c))}_n.Ja="timingevent";function We(c,y){k.call(this,_n.Ja,c),this.size=y}S(We,k);function Tr(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},y)}function Sr(){this.g=!0}Sr.prototype.ua=function(){this.g=!1};function qs(c,y,_,A,q,Q){c.info(function(){if(c.g)if(Q){var le="",Ie=Q.split("&");for(let Xe=0;Xe<Ie.length;Xe++){var ut=Ie[Xe].split("=");if(ut.length>1){const xt=ut[0];ut=ut[1];const Nn=xt.split("_");le=Nn.length>=2&&Nn[1]=="type"?le+(xt+"="+ut+"&"):le+(xt+"=redacted&")}}}else le=null;else le=Q;return"XMLHTTP REQ ("+A+") [attempt "+q+"]: "+y+`
`+_+`
`+le})}function Te(c,y,_,A,q,Q,le){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+q+"]: "+y+`
`+_+`
`+Q+" "+le})}function Yt(c,y,_,A){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+ht(c,_)+(A?" "+A:"")})}function al(c,y){c.info(function(){return"TIMEOUT: "+y})}Sr.prototype.info=function(){};function ht(c,y){if(!c.g)return y;if(!y)return null;try{const Q=JSON.parse(y);if(Q){for(c=0;c<Q.length;c++)if(Array.isArray(Q[c])){var _=Q[c];if(!(_.length<2)){var A=_[1];if(Array.isArray(A)&&!(A.length<1)){var q=A[0];if(q!="noop"&&q!="stop"&&q!="close")for(let le=1;le<A.length;le++)A[le]=""}}}}return fn(Q)}catch{return y}}var At={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Wt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Xr;function Hs(){}S(Hs,Ka),Hs.prototype.g=function(){return new XMLHttpRequest},Xr=new Hs;function Gs(c){return encodeURIComponent(String(c))}function Of(c){var y=1;c=c.split(":");const _=[];for(;y>0&&c.length;)_.push(c.shift()),y--;return c.length&&_.push(c.join(":")),_}function ar(c,y,_,A){this.j=c,this.i=y,this.l=_,this.S=A||1,this.V=new Hn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Oi}function Oi(){this.i=null,this.g="",this.h=!1}var Qa={},Ar={};function wr(c,y,_){c.M=1,c.A=Zr(dt(y)),c.u=_,c.R=!0,ki(c,null)}function ki(c,y){c.F=Date.now(),Ks(c),c.B=dt(c.A);var _=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),rc(_.i,"t",A),c.C=0,_=c.j.L,c.h=new Oi,c.g=ro(c.j,_?y:null,!c.u),c.P>0&&(c.O=new Er(g(c.Y,c,c.g),c.P)),y=c.V,_=c.g,A=c.ba;var q="readystatechange";Array.isArray(q)||(q&&(sr[0]=q.toString()),q=sr);for(let Q=0;Q<q.length;Q++){const le=vn(_,q[Q],A||y.handleEvent,!1,y.h||y);if(!le)break;y.g[le.key]=le}y=c.J?J(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),Y(),qs(c.i,c.v,c.B,c.l,c.S,c.u)}ar.prototype.ba=function(c){c=c.target;const y=this.O;y&&rn(c)==3?y.j():this.Y(c)},ar.prototype.Y=function(c){try{if(c==this.g)e:{const Ie=rn(this.g),ut=this.g.ya(),Xe=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||ra(this.g)))){this.K||Ie!=4||ut==7||(ut==8||Xe<=0?Y(3):Y(2)),Rr(this);var y=this.g.ca();this.X=y;var _=Mi(this);if(this.o=y==200,Te(this.i,this.v,this.B,this.l,this.S,Ie,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,q=this.g;if((A=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(A)){var Q=A;break t}}Q=null}if(c=Q)Yt(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ya(this,c);else{this.o=!1,this.m=3,Je(12),Cr(this),Qs(this);break e}}if(this.R){c=!0;let xt;for(;!this.K&&this.C<_.length;)if(xt=ec(this,_),xt==Ar){Ie==4&&(this.m=4,Je(14),c=!1),Yt(this.i,this.l,null,"[Incomplete Response]");break}else if(xt==Qa){this.m=4,Je(15),Yt(this.i,this.l,_,"[Invalid Chunk]"),c=!1;break}else Yt(this.i,this.l,xt,null),Ya(this,xt);if(wt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||_.length!=0||this.h.h||(this.m=1,Je(16),c=!1),this.o=this.o&&c,!c)Yt(this.i,this.l,_,"[Invalid Chunked Response]"),Cr(this),Qs(this);else if(_.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),gl(le),le.P=!0,Je(11))}}else Yt(this.i,this.l,_,null),Ya(this,_);Ie==4&&Cr(this),this.o&&!this.K&&(Ie==4?yl(this.j,this):(this.o=!1,Ks(this)))}else ia(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,Je(12)):(this.m=0,Je(13)),Cr(this),Qs(this)}}}catch{}finally{}};function Mi(c){if(!wt(c))return c.g.la();const y=ra(c.g);if(y==="")return"";let _="";const A=y.length,q=rn(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Cr(c),Qs(c),"";c.h.i=new h.TextDecoder}for(let Q=0;Q<A;Q++)c.h.h=!0,_+=c.h.i.decode(y[Q],{stream:!(q&&Q==A-1)});return y.length=0,c.h.g+=_,c.C=0,c.h.g}function wt(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function ec(c,y){var _=c.C,A=y.indexOf(`
`,_);return A==-1?Ar:(_=Number(y.substring(_,A)),isNaN(_)?Qa:(A+=1,A+_>y.length?Ar:(y=y.slice(A,A+_),c.C=A+_,y)))}ar.prototype.cancel=function(){this.K=!0,Cr(this)};function Ks(c){c.T=Date.now()+c.H,xr(c,c.H)}function xr(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Tr(g(c.aa,c),y)}function Rr(c){c.D&&(h.clearTimeout(c.D),c.D=null)}ar.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(al(this.i,this.B),this.M!=2&&(Y(),Je(17)),Cr(this),this.m=2,Qs(this)):xr(this,this.T-c)};function Qs(c){c.j.I==0||c.K||yl(c.j,c)}function Cr(c){Rr(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,Bt(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function Ya(c,y){try{var _=c.j;if(_.I!=0&&(_.g==c||Xs(_.h,c))){if(!c.L&&Xs(_.h,c)&&_.I==3){try{var A=_.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var q=A;if(q[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<c.F)no(_),Ir(_);else break e;pl(_),Je(18)}}else _.xa=q[1],0<_.xa-_.K&&q[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Tr(g(_.Va,_),6e3));Kn(_.h)<=1&&_.ta&&(_.ta=void 0)}else ti(_,11)}else if((c.L||_.g==c)&&no(_),!C(y))for(q=_.Ba.g.parse(y),y=0;y<q.length;y++){let Xe=q[y];const xt=Xe[0];if(!(xt<=_.K))if(_.K=xt,Xe=Xe[1],_.I==2)if(Xe[0]=="c"){_.M=Xe[1],_.ba=Xe[2];const Nn=Xe[3];Nn!=null&&(_.ka=Nn,_.j.info("VER="+_.ka));const Dr=Xe[4];Dr!=null&&(_.za=Dr,_.j.info("SVER="+_.za));const ur=Xe[5];ur!=null&&typeof ur=="number"&&ur>0&&(A=1.5*ur,_.O=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const cr=c.g;if(cr){const hr=cr.g?cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hr){var Q=A.h;Q.g||hr.indexOf("spdy")==-1&&hr.indexOf("quic")==-1&&hr.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Wa(Q,Q.h),Q.h=null))}if(A.G){const _l=cr.g?cr.g.getResponseHeader("X-HTTP-Session-Id"):null;_l&&(A.wa=_l,et(A.J,A.G,_l))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-c.F,_.j.info("Handshake RTT: "+_.T+"ms")),A=_;var le=c;if(A.na=fc(A,A.L?A.ba:null,A.W),le.L){$r(A.h,le);var Ie=le,ut=A.O;ut&&(Ie.H=ut),Ie.D&&(Rr(Ie),Ks(Ie)),A.g=le}else lc(A);_.i.length>0&&la(_)}else Xe[0]!="stop"&&Xe[0]!="close"||ti(_,7);else _.I==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?ti(_,7):aa(_):Xe[0]!="noop"&&_.l&&_.l.qa(Xe),_.A=0)}}Y(4)}catch{}}var kf=class{constructor(c,y){this.g=c,this.map=y}};function Ys(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ws(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Kn(c){return c.h?1:c.g?c.g.size:0}function Xs(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Wa(c,y){c.g?c.g.add(y):c.h=y}function $r(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Ys.prototype.cancel=function(){if(this.i=Xa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Xa(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const _ of c.g.values())y=y.concat(_.G);return y}return L(c.i)}var $a=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mf(c,y){if(c){c=c.split("&");for(let _=0;_<c.length;_++){const A=c[_].indexOf("=");let q,Q=null;A>=0?(q=c[_].substring(0,A),Q=c[_].substring(A+1)):q=c[_],y(q,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function or(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof or?(this.l=c.l,Vi(this,c.j),this.o=c.o,this.g=c.g,$s(this,c.u),this.h=c.h,Pi(this,ic(c.i)),this.m=c.m):c&&(y=String(c).match($a))?(this.l=!1,Vi(this,y[1]||"",!0),this.o=Zs(y[2]||""),this.g=Zs(y[3]||"",!0),$s(this,y[4]),this.h=Zs(y[5]||"",!0),Pi(this,y[6]||"",!0),this.m=Zs(y[7]||"")):(this.l=!1,this.i=new Qn(null,this.l))}or.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(Ft(y,ll,!0),":");var _=this.g;return(_||y=="file")&&(c.push("//"),(y=this.o)&&c.push(Ft(y,ll,!0),"@"),c.push(Gs(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&c.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(Ft(_,_.charAt(0)=="/"?Ui:ul,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",Ft(_,nc)),c.join("")},or.prototype.resolve=function(c){const y=dt(this);let _=!!c.j;_?Vi(y,c.j):_=!!c.o,_?y.o=c.o:_=!!c.g,_?y.g=c.g:_=c.u!=null;var A=c.h;if(_)$s(y,c.u);else if(_=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var q=y.h.lastIndexOf("/");q!=-1&&(A=y.h.slice(0,q+1)+A)}if(q=A,q==".."||q==".")A="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){A=q.lastIndexOf("/",0)==0,q=q.split("/");const Q=[];for(let le=0;le<q.length;){const Ie=q[le++];Ie=="."?A&&le==q.length&&Q.push(""):Ie==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),A&&le==q.length&&Q.push("")):(Q.push(Ie),A=!0)}A=Q.join("/")}else A=q}return _?y.h=A:_=c.i.toString()!=="",_?Pi(y,ic(c.i)):_=!!c.m,_&&(y.m=c.m),y};function dt(c){return new or(c)}function Vi(c,y,_){c.j=_?Zs(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function $s(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Pi(c,y,_){y instanceof Qn?(c.i=y,fl(c.i,c.l)):(_||(y=Ft(y,tc)),c.i=new Qn(y,c.l))}function et(c,y,_){c.i.set(y,_)}function Zr(c){return et(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Zs(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ft(c,y,_){return typeof c=="string"?(c=encodeURI(c).replace(y,ol),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ol(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ll=/[#\/\?@]/g,ul=/[#\?:]/g,Ui=/[#\?]/g,tc=/[#\?@]/g,nc=/#/g;function Qn(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Jr(c){c.g||(c.g=new Map,c.h=0,c.i&&Mf(c.i,function(y,_){c.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}r=Qn.prototype,r.add=function(c,y){Jr(this),this.i=null,c=lr(this,c);let _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(y),this.h+=1,this};function cl(c,y){Jr(c),y=lr(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function hl(c,y){return Jr(c),y=lr(c,y),c.g.has(y)}r.forEach=function(c,y){Jr(this),this.g.forEach(function(_,A){_.forEach(function(q){c.call(y,q,A,this)},this)},this)};function Za(c,y){Jr(c);let _=[];if(typeof y=="string")hl(c,y)&&(_=_.concat(c.g.get(lr(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)_=_.concat(c[y]);return _}r.set=function(c,y){return Jr(this),this.i=null,c=lr(this,c),hl(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},r.get=function(c,y){return c?(c=Za(this,c),c.length>0?String(c[0]):y):y};function rc(c,y,_){cl(c,y),_.length>0&&(c.i=null,c.g.set(lr(c,y),L(_)),c.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var _=y[A];const q=Gs(_);_=Za(this,_);for(let Q=0;Q<_.length;Q++){let le=q;_[Q]!==""&&(le+="="+Gs(_[Q])),c.push(le)}}return this.i=c.join("&")};function ic(c){const y=new Qn;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function lr(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function fl(c,y){y&&!c.j&&(Jr(c),c.i=null,c.g.forEach(function(_,A){const q=A.toLowerCase();A!=q&&(cl(this,A),rc(this,q,_))},c)),c.j=y}function dl(c,y){const _=new Sr;if(h.Image){const A=new Image;A.onload=b(dn,_,"TestLoadImage: loaded",!0,y,A),A.onerror=b(dn,_,"TestLoadImage: error",!1,y,A),A.onabort=b(dn,_,"TestLoadImage: abort",!1,y,A),A.ontimeout=b(dn,_,"TestLoadImage: timeout",!1,y,A),h.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else y(!1)}function Li(c,y){const _=new Sr,A=new AbortController,q=setTimeout(()=>{A.abort(),dn(_,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:A.signal}).then(Q=>{clearTimeout(q),Q.ok?dn(_,"TestPingServer: ok",!0,y):dn(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),dn(_,"TestPingServer: error",!1,y)})}function dn(c,y,_,A,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),A(_)}catch{}}function sc(){this.g=new zs}function Js(c){this.i=c.Sb||null,this.h=c.ab||!1}S(Js,Ka),Js.prototype.g=function(){return new ea(this.i,this.h)};function ea(c,y){yt.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(ea,yt),r=ea.prototype,r.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,ei(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||h).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,mn(this)),this.readyState=0},r.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ei(this)),this.g&&(this.readyState=3,ei(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ji(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function ji(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}r.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?mn(this):ei(this),this.readyState==3&&ji(this)}},r.Oa=function(c){this.g&&(this.response=this.responseText=c,mn(this))},r.Na=function(c){this.g&&(this.response=c,mn(this))},r.ga=function(){this.g&&mn(this)};function mn(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ei(c)}r.setRequestHeader=function(c,y){this.A.append(c,y)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=y.next();return c.join(`\r
`)};function ei(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ea.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function zi(c){let y="";return Re(c,function(_,A){y+=A,y+=":",y+=_,y+=`\r
`}),y}function Yn(c,y,_){e:{for(A in _){var A=!1;break e}A=!0}A||(_=zi(_),typeof c=="string"?_!=null&&Gs(_):et(c,y,_))}function st(c){yt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(st,yt);var Ja=/^https?$/i,ac=["POST","PUT"];r=st.prototype,r.Fa=function(c){this.H=c},r.ea=function(c,y,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Xr.g(),this.g.onreadystatechange=w(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(Q){ta(this,Q);return}if(c=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var q in A)_.set(q,A[q]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Q of A.keys())_.set(Q,A.get(Q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(Q=>Q.toLowerCase()=="content-type"),q=h.FormData&&c instanceof h.FormData,!(Array.prototype.indexOf.call(ac,y,void 0)>=0)||A||q||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,le]of _)this.g.setRequestHeader(Q,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(Q){ta(this,Q)}};function ta(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,na(c),Ut(c)}function na(c){c.A||(c.A=!0,St(c,"complete"),St(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,St(this,"complete"),St(this,"abort"),Ut(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ut(this,!0)),st.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?ml(this):this.Xa())},r.Xa=function(){ml(this)};function ml(c){if(c.h&&typeof u<"u"){if(c.v&&rn(c)==4)setTimeout(c.Ca.bind(c),0);else if(St(c,"readystatechange"),rn(c)==4){c.h=!1;try{const Q=c.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var A;if(A=Q===0){let le=String(c.D).match($a)[1]||null;!le&&h.self&&h.self.location&&(le=h.self.location.protocol.slice(0,-1)),A=!Ja.test(le?le.toLowerCase():"")}_=A}if(_)St(c,"complete"),St(c,"success");else{c.o=6;try{var q=rn(c)>2?c.g.statusText:""}catch{q=""}c.l=q+" ["+c.ca()+"]",na(c)}}finally{Ut(c)}}}}function Ut(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const _=c.g;c.g=null,y||St(c,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function rn(c){return c.g?c.g.readyState:0}r.ca=function(){try{return rn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Dt(y)}};function ra(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ia(c){const y={};c=(c.g&&rn(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(C(c[A]))continue;var _=Of(c[A]);const q=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Q=y[q]||[];y[q]=Q,Q.push(_)}D(y,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function sa(c,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||y}function eo(c){this.za=0,this.i=[],this.j=new Sr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=sa("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=sa("baseRetryDelayMs",5e3,c),this.Za=sa("retryDelaySeedMs",1e4,c),this.Ta=sa("forwardChannelMaxRetries",2,c),this.va=sa("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Ys(c&&c.concurrentRequestLimit),this.Ba=new sc,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=eo.prototype,r.ka=8,r.I=1,r.connect=function(c,y,_,A){Je(0),this.W=c,this.H=y||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.J=fc(this,null,this.W),la(this)};function aa(c){if(oa(c),c.I==3){var y=c.V++,_=dt(c.J);if(et(_,"SID",c.M),et(_,"RID",y),et(_,"TYPE","terminate"),ua(c,_),y=new ar(c,c.j,y),y.M=2,y.A=Zr(dt(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=y.A,_=!0),_||(y.g=ro(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ks(y)}hc(c)}function Ir(c){c.g&&(gl(c),c.g.cancel(),c.g=null)}function oa(c){Ir(c),c.v&&(h.clearTimeout(c.v),c.v=null),no(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&h.clearTimeout(c.m),c.m=null)}function la(c){if(!Ws(c.h)&&!c.m){c.m=!0;var y=c.Ea;ae||R(),pe||(ae(),pe=!0),O.add(y,c),c.D=0}}function Vf(c,y){return Kn(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Tr(g(c.Ea,c,y),cc(c,c.D)),c.D++,!0)}r.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const q=new ar(this,this.j,c);let Q=this.o;if(this.U&&(Q?(Q=J(Q),ce(Q,this.U)):Q=this.U),this.u!==null||this.R||(q.J=Q,Q=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=to(this,q,y),_=dt(this.J),et(_,"RID",c),et(_,"CVER",22),this.G&&et(_,"X-HTTP-Session-Id",this.G),ua(this,_),Q&&(this.R?y="headers="+Gs(zi(Q))+"&"+y:this.u&&Yn(_,this.u,Q)),Wa(this.h,q),this.Ra&&et(_,"TYPE","init"),this.S?(et(_,"$req",y),et(_,"SID","null"),q.U=!0,wr(q,_,null)):wr(q,_,y),this.I=2}}else this.I==3&&(c?oc(this,c):this.i.length==0||Ws(this.h)||oc(this))};function oc(c,y){var _;y?_=y.l:_=c.V++;const A=dt(c.J);et(A,"SID",c.M),et(A,"RID",_),et(A,"AID",c.K),ua(c,A),c.u&&c.o&&Yn(A,c.u,c.o),_=new ar(c,c.j,_,c.D+1),c.u===null&&(_.J=c.o),y&&(c.i=y.G.concat(c.i)),y=to(c,_,1e3),_.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Wa(c.h,_),wr(_,A,y)}function ua(c,y){c.H&&Re(c.H,function(_,A){et(y,A,_)}),c.l&&Re({},function(_,A){et(y,A,_)})}function to(c,y,_){_=Math.min(c.i.length,_);const A=c.l?g(c.l.Ka,c.l,c):null;e:{var q=c.i;let Ie=-1;for(;;){const ut=["count="+_];Ie==-1?_>0?(Ie=q[0].g,ut.push("ofs="+Ie)):Ie=0:ut.push("ofs="+Ie);let Xe=!0;for(let xt=0;xt<_;xt++){var Q=q[xt].g;const Nn=q[xt].map;if(Q-=Ie,Q<0)Ie=Math.max(0,q[xt].g-100),Xe=!1;else try{Q="req"+Q+"_"||"";try{var le=Nn instanceof Map?Nn:Object.entries(Nn);for(const[Dr,ur]of le){let cr=ur;m(ur)&&(cr=fn(ur)),ut.push(Q+Dr+"="+encodeURIComponent(cr))}}catch(Dr){throw ut.push(Q+"type="+encodeURIComponent("_badmap")),Dr}}catch{A&&A(Nn)}}if(Xe){le=ut.join("&");break e}}le=void 0}return c=c.i.splice(0,_),y.G=c,le}function lc(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;ae||R(),pe||(ae(),pe=!0),O.add(y,c),c.A=0}}function pl(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Tr(g(c.Da,c),cc(c,c.A)),c.A++,!0)}r.Da=function(){if(this.v=null,uc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Tr(g(this.Wa,this),c)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Je(10),Ir(this),uc(this))};function gl(c){c.B!=null&&(h.clearTimeout(c.B),c.B=null)}function uc(c){c.g=new ar(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=dt(c.na);et(y,"RID","rpc"),et(y,"SID",c.M),et(y,"AID",c.K),et(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&et(y,"TO",c.ia),et(y,"TYPE","xmlhttp"),ua(c,y),c.u&&c.o&&Yn(y,c.u,c.o),c.O&&(c.g.H=c.O);var _=c.g;c=c.ba,_.M=1,_.A=Zr(dt(y)),_.u=null,_.R=!0,ki(_,c)}r.Va=function(){this.C!=null&&(this.C=null,Ir(this),pl(this),Je(19))};function no(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function yl(c,y){var _=null;if(c.g==y){no(c),gl(c),c.g=null;var A=2}else if(Xs(c.h,y))_=y.G,$r(c.h,y),A=1;else return;if(c.I!=0){if(y.o)if(A==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var q=c.D;A=Wr(),St(A,new We(A,_)),la(c)}else lc(c);else if(q=y.m,q==3||q==0&&y.X>0||!(A==1&&Vf(c,y)||A==2&&pl(c)))switch(_&&_.length>0&&(y=c.h,y.i=y.i.concat(_)),q){case 1:ti(c,5);break;case 4:ti(c,10);break;case 3:ti(c,6);break;default:ti(c,2)}}}function cc(c,y){let _=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(_*=2),_*y}function ti(c,y){if(c.j.info("Error code "+y),y==2){var _=g(c.bb,c),A=c.Ua;const q=!A;A=new or(A||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Vi(A,"https"),Zr(A),q?dl(A.toString(),_):Li(A.toString(),_)}else Je(2);c.I=0,c.l&&c.l.pa(y),hc(c),oa(c)}r.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Je(2)):(this.j.info("Failed to ping google.com"),Je(1))};function hc(c){if(c.I=0,c.ja=[],c.l){const y=Xa(c.h);(y.length!=0||c.i.length!=0)&&(B(c.ja,y),B(c.ja,c.i),c.h.i.length=0,L(c.i),c.i.length=0),c.l.oa()}}function fc(c,y,_){var A=_ instanceof or?dt(_):new or(_);if(A.g!="")y&&(A.g=y+"."+A.g),$s(A,A.u);else{var q=h.location;A=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;const Q=new or(null);A&&Vi(Q,A),y&&(Q.g=y),q&&$s(Q,q),_&&(Q.h=_),A=Q}return _=c.G,y=c.wa,_&&y&&et(A,_,y),et(A,"VER",c.ka),ua(c,A),A}function ro(c,y,_){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new st(new Js({ab:_})):new st(c.ma),y.Fa(c.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function dc(){}r=dc.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function io(){}io.prototype.g=function(c,y){return new pn(c,y)};function pn(c,y){yt.call(this),this.g=new eo(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!C(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!C(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Bi(this)}S(pn,yt),pn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){aa(this.g)},pn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.v&&(_={},_.__data__=fn(c),c=_);y.i.push(new kf(y.Ya++,c)),y.I==3&&la(y)},pn.prototype.N=function(){this.g.l=null,delete this.j,aa(this.g),delete this.g,pn.Z.N.call(this)};function vl(c){Gn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const _ in y){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}S(vl,Gn);function mc(){Dn.call(this),this.status=1}S(mc,Dn);function Bi(c){this.g=c}S(Bi,dc),Bi.prototype.ra=function(){St(this.g,"a")},Bi.prototype.qa=function(c){St(this.g,new vl(c))},Bi.prototype.pa=function(c){St(this.g,new mc)},Bi.prototype.oa=function(){St(this.g,"b")},io.prototype.createWebChannel=io.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,Fb=function(){return new io},Bb=function(){return Wr()},zb=_n,ip={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},At.NO_ERROR=0,At.TIMEOUT=8,At.HTTP_ERROR=6,xh=At,Wt.COMPLETE="complete",jb=Wt,Bs.EventType=Qt,Qt.OPEN="a",Qt.CLOSE="b",Qt.ERROR="c",Qt.MESSAGE="d",yt.prototype.listen=yt.prototype.J,mu=Bs,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,Lb=st}).apply(typeof ph<"u"?ph:typeof self<"u"?self:typeof window<"u"?window:{});const x0="@firebase/firestore",R0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let el="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka=new Vp("@firebase/firestore");function Vo(){return ka.logLevel}function fe(r,...e){if(ka.logLevel<=Ue.DEBUG){const n=e.map(Lp);ka.debug(`Firestore (${el}): ${r}`,...n)}}function Ei(r,...e){if(ka.logLevel<=Ue.ERROR){const n=e.map(Lp);ka.error(`Firestore (${el}): ${r}`,...n)}}function Go(r,...e){if(ka.logLevel<=Ue.WARN){const n=e.map(Lp);ka.warn(`Firestore (${el}): ${r}`,...n)}}function Lp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,qb(r,s,n)}function qb(r,e,n){let s=`FIRESTORE (${el}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ei(s),new Error(s)}function Ye(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||qb(e,o,s)}function De(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Kr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ln.UNAUTHENTICATED))}shutdown(){}}class WR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class XR{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ye(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new yi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new yi,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},m=p=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new yi)}},0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ye(typeof s.accessToken=="string",31837,{l:s}),new Hb(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string",2055,{h:e}),new ln(e)}}class $R{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ZR{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new $R(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class C0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ye(this.o===void 0,3512);const s=u=>{u.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,fe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new C0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new C0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=eC(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Le(r,e){return r<e?-1:r>e?1:0}function sp(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const o=r.charAt(s),u=e.charAt(s);if(o!==u)return Lm(o)===Lm(u)?Le(o,u):Lm(o)?1:-1}return Le(r.length,e.length)}const tC=55296,nC=57343;function Lm(r){const e=r.charCodeAt(0);return e>=tC&&e<=nC}function Ko(r,e,n){return r.length===e.length&&r.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="__name__";class Pr{constructor(e,n,s){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&we(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Pr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Pr?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=Pr.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Le(e.length,n.length)}static compareSegments(e,n){const s=Pr.isNumericId(e),o=Pr.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Pr.extractNumericId(e).compare(Pr.extractNumericId(n)):sp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ss.fromString(e.substring(4,e.length-2))}}class ot extends Pr{construct(e,n,s){return new ot(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new he(Z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new ot(n)}static emptyPath(){return new ot([])}}const rC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends Pr{construct(e,n,s){return new en(e,n,s)}static isValidIdentifier(e){return rC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===I0}static keyField(){return new en([I0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new he(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new he(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new he(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(s+=m,o++):(u(),o++)}if(u(),h)throw new he(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(n)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(ot.fromString(e))}static fromName(e){return new _e(ot.fromString(e).popFirst(5))}static empty(){return new _e(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(r,e,n){if(!n)throw new he(Z.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function iC(r,e,n,s){if(e===!0&&s===!0)throw new he(Z.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function D0(r){if(!_e.isDocumentKey(r))throw new he(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function N0(r){if(_e.isDocumentKey(r))throw new he(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Kb(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function uf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":we(12329,{type:typeof r})}function xn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new he(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=uf(r);throw new he(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(r,e){const n={typeString:r};return e&&(n.value=e),n}function Bu(r,e){if(!Kb(r))throw new he(Z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new he(Z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=-62135596800,k0=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*k0);return new ct(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<O0)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/k0}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Bu(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-O0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:Vt("string",ct._jsonSchemaVersion),seconds:Vt("number"),nanoseconds:Vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new ct(0,0))}static max(){return new Ce(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du=-1;function sC(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ce.fromTimestamp(s===1e9?new ct(n+1,0):new ct(n,s));return new Rs(o,_e.empty(),e)}function aC(r){return new Rs(r.readTime,r.key,Du)}class Rs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Rs(Ce.min(),_e.empty(),Du)}static max(){return new Rs(Ce.max(),_e.empty(),Du)}}function oC(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=_e.comparator(r.documentKey,e.documentKey),n!==0?n:Le(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl(r){if(r.code!==Z.FAILED_PRECONDITION||r.message!==lC)throw r;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):re.reject(n)}static resolve(e){return new re((n,s)=>{n(e)})}static reject(e){return new re((n,s)=>{s(e)})}static waitFor(e){return new re((n,s)=>{let o=0,u=0,h=!1;e.forEach(m=>{++o,m.next(()=>{++u,h&&u===o&&n()},p=>s(p))}),h=!0,u===o&&n()})}static or(e){let n=re.resolve(!1);for(const s of e)n=n.next(o=>o?re.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(e,n){return new re((s,o)=>{const u=e.length,h=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next(b=>{h[g]=b,++m,m===u&&s(h)},b=>o(b))}})}static doWhile(e,n){return new re((s,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):s()};u()})}}function cC(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function nl(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}cf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp=-1;function hf(r){return r==null}function zh(r){return r===0&&1/r==-1/0}function hC(r){return typeof r=="number"&&Number.isInteger(r)&&!zh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="";function fC(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=M0(e)),e=dC(r.get(n),e);return M0(e)}function dC(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case Qb:n+="";break;default:n+=u}}return n}function M0(r){return r+Qb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function Ps(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function Yb(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n){this.comparator=e,this.root=n||Jt.EMPTY}insert(e,n){return new gt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gh(this.root,e,this.comparator,!1)}getReverseIterator(){return new gh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gh(this.root,e,this.comparator,!0)}}class gh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jt{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Jt.RED,this.left=o??Jt.EMPTY,this.right=u??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Jt(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Jt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new Jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new P0(this.data.getIterator())}getIteratorFrom(e){return new P0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new zt(this.comparator);return n.data=e,n}}class P0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new zn([])}unionWith(e){let n=new zt(en.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new zn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ko(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Wb("Invalid base64 string: "+u):u}}(e);return new tn(n)}static fromUint8Array(e){const n=function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u}(e);return new tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const mC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cs(r){if(Ye(!!r,39018),typeof r=="string"){let e=0;const n=mC.exec(r);if(Ye(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:It(r.seconds),nanos:It(r.nanos)}}function It(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Is(r){return typeof r=="string"?tn.fromBase64String(r):tn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="server_timestamp",$b="__type__",Zb="__previous_value__",Jb="__local_write_time__";function Bp(r){return(r?.mapValue?.fields||{})[$b]?.stringValue===Xb}function ff(r){const e=r.mapValue.fields[Zb];return Bp(e)?ff(e):e}function Nu(r){const e=Cs(r.mapValue.fields[Jb].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,n,s,o,u,h,m,p,g,b){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=b}}const Bh="(default)";class Ou{constructor(e,n){this.projectId=e,this.database=n||Bh}static empty(){return new Ou("","")}get isDefaultDatabase(){return this.database===Bh}isEqual(e){return e instanceof Ou&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="__type__",gC="__max__",yh={mapValue:{}},tT="__vector__",Fh="value";function Ds(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Bp(r)?4:vC(r)?9007199254740991:yC(r)?10:11:we(28295,{value:r})}function Gr(r,e){if(r===e)return!0;const n=Ds(r);if(n!==Ds(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Nu(r).isEqual(Nu(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=Cs(o.timestampValue),m=Cs(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,u){return Is(o.bytesValue).isEqual(Is(u.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,u){return It(o.geoPointValue.latitude)===It(u.geoPointValue.latitude)&&It(o.geoPointValue.longitude)===It(u.geoPointValue.longitude)}(r,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return It(o.integerValue)===It(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=It(o.doubleValue),m=It(u.doubleValue);return h===m?zh(h)===zh(m):isNaN(h)&&isNaN(m)}return!1}(r,e);case 9:return Ko(r.arrayValue.values||[],e.arrayValue.values||[],Gr);case 10:case 11:return function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(V0(h)!==V0(m))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(m[p]===void 0||!Gr(h[p],m[p])))return!1;return!0}(r,e);default:return we(52216,{left:r})}}function ku(r,e){return(r.values||[]).find(n=>Gr(n,e))!==void 0}function Qo(r,e){if(r===e)return 0;const n=Ds(r),s=Ds(e);if(n!==s)return Le(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(r.booleanValue,e.booleanValue);case 2:return function(u,h){const m=It(u.integerValue||u.doubleValue),p=It(h.integerValue||h.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(r,e);case 3:return U0(r.timestampValue,e.timestampValue);case 4:return U0(Nu(r),Nu(e));case 5:return sp(r.stringValue,e.stringValue);case 6:return function(u,h){const m=Is(u),p=Is(h);return m.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(u,h){const m=u.split("/"),p=h.split("/");for(let g=0;g<m.length&&g<p.length;g++){const b=Le(m[g],p[g]);if(b!==0)return b}return Le(m.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(u,h){const m=Le(It(u.latitude),It(h.latitude));return m!==0?m:Le(It(u.longitude),It(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return L0(r.arrayValue,e.arrayValue);case 10:return function(u,h){const m=u.fields||{},p=h.fields||{},g=m[Fh]?.arrayValue,b=p[Fh]?.arrayValue,S=Le(g?.values?.length||0,b?.values?.length||0);return S!==0?S:L0(g,b)}(r.mapValue,e.mapValue);case 11:return function(u,h){if(u===yh.mapValue&&h===yh.mapValue)return 0;if(u===yh.mapValue)return 1;if(h===yh.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=h.fields||{},b=Object.keys(g);p.sort(),b.sort();for(let S=0;S<p.length&&S<b.length;++S){const w=sp(p[S],b[S]);if(w!==0)return w;const L=Qo(m[p[S]],g[b[S]]);if(L!==0)return L}return Le(p.length,b.length)}(r.mapValue,e.mapValue);default:throw we(23264,{he:n})}}function U0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Le(r,e);const n=Cs(r),s=Cs(e),o=Le(n.seconds,s.seconds);return o!==0?o:Le(n.nanos,s.nanos)}function L0(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Qo(n[o],s[o]);if(u)return u}return Le(n.length,s.length)}function Yo(r){return ap(r)}function ap(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=Cs(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return Is(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return _e.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=ap(u);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const h of s)u?u=!1:o+=",",o+=`${h}:${ap(n.fields[h])}`;return o+"}"}(r.mapValue):we(61005,{value:r})}function Rh(r){switch(Ds(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ff(r);return e?16+Rh(e):16;case 5:return 2*r.stringValue.length;case 6:return Is(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+Rh(u),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return Ps(s.fields,(u,h)=>{o+=u.length+Rh(h)}),o}(r.mapValue);default:throw we(13486,{value:r})}}function j0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function op(r){return!!r&&"integerValue"in r}function Fp(r){return!!r&&"arrayValue"in r}function z0(r){return!!r&&"nullValue"in r}function B0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Ch(r){return!!r&&"mapValue"in r}function yC(r){return(r?.mapValue?.fields||{})[eT]?.stringValue===tT}function _u(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ps(r.mapValue.fields,(n,s)=>e.mapValue.fields[n]=_u(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_u(r.arrayValue.values[n]);return e}return{...r}}function vC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===gC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Ch(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_u(n)}setAll(e){let n=en.emptyPath(),s={},o=[];e.forEach((h,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}h?s[m.lastSegment()]=_u(h):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());Ch(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Gr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Ch(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Ps(n,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new wn(_u(this.value))}}function nT(r){const e=[];return Ps(r.fields,(n,s)=>{const o=new en([n]);if(Ch(s)){const u=nT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)}),new zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n,s,o,u,h,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(e){return new un(e,0,Ce.min(),Ce.min(),Ce.min(),wn.empty(),0)}static newFoundDocument(e,n,s,o){return new un(e,1,n,Ce.min(),s,o,0)}static newNoDocument(e,n){return new un(e,2,n,Ce.min(),Ce.min(),wn.empty(),0)}static newUnknownDocument(e,n){return new un(e,3,n,Ce.min(),Ce.min(),wn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n){this.position=e,this.inclusive=n}}function F0(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],h=r.position[o];if(u.field.isKeyField()?s=_e.comparator(_e.fromName(h.referenceValue),n.key):s=Qo(h,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function q0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Gr(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n="asc"){this.field=e,this.dir=n}}function _C(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{}class Mt extends rT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new bC(e,n,s):n==="array-contains"?new AC(e,s):n==="in"?new wC(e,s):n==="not-in"?new xC(e,s):n==="array-contains-any"?new RC(e,s):new Mt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new TC(e,s):new SC(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Qo(n,this.value)):n!==null&&Ds(this.value)===Ds(n)&&this.matchesComparison(Qo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yr extends rT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new yr(e,n)}matches(e){return iT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function iT(r){return r.op==="and"}function sT(r){return EC(r)&&iT(r)}function EC(r){for(const e of r.filters)if(e instanceof yr)return!1;return!0}function lp(r){if(r instanceof Mt)return r.field.canonicalString()+r.op.toString()+Yo(r.value);if(sT(r))return r.filters.map(e=>lp(e)).join(",");{const e=r.filters.map(n=>lp(n)).join(",");return`${r.op}(${e})`}}function aT(r,e){return r instanceof Mt?function(s,o){return o instanceof Mt&&s.op===o.op&&s.field.isEqual(o.field)&&Gr(s.value,o.value)}(r,e):r instanceof yr?function(s,o){return o instanceof yr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,h,m)=>u&&aT(h,o.filters[m]),!0):!1}(r,e):void we(19439)}function oT(r){return r instanceof Mt?function(n){return`${n.field.canonicalString()} ${n.op} ${Yo(n.value)}`}(r):r instanceof yr?function(n){return n.op.toString()+" {"+n.getFilters().map(oT).join(" ,")+"}"}(r):"Filter"}class bC extends Mt{constructor(e,n,s){super(e,n,s),this.key=_e.fromName(s.referenceValue)}matches(e){const n=_e.comparator(e.key,this.key);return this.matchesComparison(n)}}class TC extends Mt{constructor(e,n){super(e,"in",n),this.keys=lT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class SC extends Mt{constructor(e,n){super(e,"not-in",n),this.keys=lT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function lT(r,e){return(e.arrayValue?.values||[]).map(n=>_e.fromName(n.referenceValue))}class AC extends Mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fp(n)&&ku(n.arrayValue,this.value)}}class wC extends Mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ku(this.value.arrayValue,n)}}class xC extends Mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ku(this.value.arrayValue,n)}}class RC extends Mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>ku(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,n=null,s=[],o=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.Te=null}}function H0(r,e=null,n=[],s=[],o=null,u=null,h=null){return new CC(r,e,n,s,o,u,h)}function qp(r){const e=De(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>lp(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),hf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Yo(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Yo(s)).join(",")),e.Te=n}return e.Te}function Hp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!_C(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!aT(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!q0(r.startAt,e.startAt)&&q0(r.endAt,e.endAt)}function up(r){return _e.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n=null,s=[],o=[],u=null,h="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function IC(r,e,n,s,o,u,h,m){return new rl(r,e,n,s,o,u,h,m)}function df(r){return new rl(r)}function G0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function uT(r){return r.collectionGroup!==null}function Eu(r){const e=De(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new zt(en.comparator);return h.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Mu(u,s))}),n.has(en.keyField().canonicalString())||e.Ie.push(new Mu(en.keyField(),s))}return e.Ie}function jr(r){const e=De(r);return e.Ee||(e.Ee=DC(e,Eu(r))),e.Ee}function DC(r,e){if(r.limitType==="F")return H0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Mu(o.field,u)});const n=r.endAt?new qh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new qh(r.startAt.position,r.startAt.inclusive):null;return H0(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function cp(r,e){const n=r.filters.concat([e]);return new rl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function hp(r,e,n){return new rl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function mf(r,e){return Hp(jr(r),jr(e))&&r.limitType===e.limitType}function cT(r){return`${qp(jr(r))}|lt:${r.limitType}`}function Po(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>oT(o)).join(", ")}]`),hf(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>Yo(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>Yo(o)).join(",")),`Target(${s})`}(jr(r))}; limitType=${r.limitType})`}function pf(r,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):_e.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(r,e)&&function(s,o){for(const u of Eu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(h,m,p){const g=F0(h,m,p);return h.inclusive?g<=0:g<0}(s.startAt,Eu(s),o)||s.endAt&&!function(h,m,p){const g=F0(h,m,p);return h.inclusive?g>=0:g>0}(s.endAt,Eu(s),o))}(r,e)}function NC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function hT(r){return(e,n)=>{let s=!1;for(const o of Eu(r)){const u=OC(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function OC(r,e,n){const s=r.field.isKeyField()?_e.comparator(e.key,n.key):function(u,h,m){const p=h.data.field(u),g=m.data.field(u);return p!==null&&g!==null?Qo(p,g):we(42886)}(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return we(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ps(this.inner,(n,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return Yb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=new gt(_e.comparator);function bi(){return kC}const fT=new gt(_e.comparator);function pu(...r){let e=fT;for(const n of r)e=e.insert(n.key,n);return e}function dT(r){let e=fT;return r.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Ra(){return bu()}function mT(){return bu()}function bu(){return new Ba(r=>r.toString(),(r,e)=>r.isEqual(e))}const MC=new gt(_e.comparator),VC=new zt(_e.comparator);function je(...r){let e=VC;for(const n of r)e=e.add(n);return e}const PC=new zt(Le);function UC(){return PC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zh(e)?"-0":e}}function pT(r){return{integerValue:""+r}}function LC(r,e){return hC(e)?pT(e):Gp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(){this._=void 0}}function jC(r,e,n){return r instanceof Vu?function(o,u){const h={fields:{[$b]:{stringValue:Xb},[Jb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Bp(u)&&(u=ff(u)),u&&(h.fields[Zb]=u),{mapValue:h}}(n,e):r instanceof Pu?yT(r,e):r instanceof Uu?vT(r,e):function(o,u){const h=gT(o,u),m=K0(h)+K0(o.Ae);return op(h)&&op(o.Ae)?pT(m):Gp(o.serializer,m)}(r,e)}function zC(r,e,n){return r instanceof Pu?yT(r,e):r instanceof Uu?vT(r,e):n}function gT(r,e){return r instanceof Hh?function(s){return op(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class Vu extends gf{}class Pu extends gf{constructor(e){super(),this.elements=e}}function yT(r,e){const n=_T(e);for(const s of r.elements)n.some(o=>Gr(o,s))||n.push(s);return{arrayValue:{values:n}}}class Uu extends gf{constructor(e){super(),this.elements=e}}function vT(r,e){let n=_T(e);for(const s of r.elements)n=n.filter(o=>!Gr(o,s));return{arrayValue:{values:n}}}class Hh extends gf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function K0(r){return It(r.integerValue||r.doubleValue)}function _T(r){return Fp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n){this.field=e,this.transform=n}}function FC(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof Pu&&o instanceof Pu||s instanceof Uu&&o instanceof Uu?Ko(s.elements,o.elements,Gr):s instanceof Hh&&o instanceof Hh?Gr(s.Ae,o.Ae):s instanceof Vu&&o instanceof Vu}(r.transform,e.transform)}class qC{constructor(e,n){this.version=e,this.transformResults=n}}class Rn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Rn}static exists(e){return new Rn(void 0,e)}static updateTime(e){return new Rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ih(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class yf{}function ET(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Kp(r.key,Rn.none()):new Fu(r.key,r.data,Rn.none());{const n=r.data,s=wn.empty();let o=new zt(en.comparator);for(let u of e.fields)if(!o.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?s.delete(u):s.set(u,h),o=o.add(u)}return new Us(r.key,s,new zn(o.toArray()),Rn.none())}}function HC(r,e,n){r instanceof Fu?function(o,u,h){const m=o.value.clone(),p=Y0(o.fieldTransforms,u,h.transformResults);m.setAll(p),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(r,e,n):r instanceof Us?function(o,u,h){if(!Ih(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=Y0(o.fieldTransforms,u,h.transformResults),p=u.data;p.setAll(bT(o)),p.setAll(m),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(r,e,n):function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,n)}function Tu(r,e,n,s){return r instanceof Fu?function(u,h,m,p){if(!Ih(u.precondition,h))return m;const g=u.value.clone(),b=W0(u.fieldTransforms,p,h);return g.setAll(b),h.convertToFoundDocument(h.version,g).setHasLocalMutations(),null}(r,e,n,s):r instanceof Us?function(u,h,m,p){if(!Ih(u.precondition,h))return m;const g=W0(u.fieldTransforms,p,h),b=h.data;return b.setAll(bT(u)),b.setAll(g),h.convertToFoundDocument(h.version,b).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(S=>S.field))}(r,e,n,s):function(u,h,m){return Ih(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m}(r,e,n)}function GC(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=gT(s.transform,o||null);u!=null&&(n===null&&(n=wn.empty()),n.set(s.field,u))}return n||null}function Q0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Ko(s,o,(u,h)=>FC(u,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Fu extends yf{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Us extends yf{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function bT(r){const e=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}}),e}function Y0(r,e,n){const s=new Map;Ye(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const u=r[o],h=u.transform,m=e.data.field(u.field);s.set(u.field,zC(h,m,n[o]))}return s}function W0(r,e,n){const s=new Map;for(const o of r){const u=o.transform,h=n.data.field(o.field);s.set(o.field,jC(u,h,e))}return s}class Kp extends yf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KC extends yf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&HC(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Tu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Tu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=mT();return this.mutations.forEach(o=>{const u=e.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=n.has(o.key)?null:m;const p=ET(h,m);p!==null&&s.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(Ce.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),je())}isEqual(e){return this.batchId===e.batchId&&Ko(this.mutations,e.mutations,(n,s)=>Q0(n,s))&&Ko(this.baseMutations,e.baseMutations,(n,s)=>Q0(n,s))}}class Qp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Ye(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=function(){return MC}();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,s[h].version);return new Qp(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,Fe;function XC(r){switch(r){case Z.OK:return we(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return we(15467,{code:r})}}function TT(r){if(r===void 0)return Ei("GRPC error has no .code"),Z.UNKNOWN;switch(r){case kt.OK:return Z.OK;case kt.CANCELLED:return Z.CANCELLED;case kt.UNKNOWN:return Z.UNKNOWN;case kt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case kt.INTERNAL:return Z.INTERNAL;case kt.UNAVAILABLE:return Z.UNAVAILABLE;case kt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case kt.NOT_FOUND:return Z.NOT_FOUND;case kt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case kt.ABORTED:return Z.ABORTED;case kt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case kt.DATA_LOSS:return Z.DATA_LOSS;default:return we(39323,{code:r})}}(Fe=kt||(kt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=new Ss([4294967295,4294967295],0);function X0(r){const e=$C().encode(r),n=new Ub;return n.update(e),new Uint8Array(n.digest())}function $0(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ss([n,s],0),new Ss([o,u],0)]}class Yp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new gu(`Invalid padding: ${n}`);if(s<0)throw new gu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new gu(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new gu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ss.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(Ss.fromNumber(s)));return o.compare(ZC)===1&&(o=new Ss([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=X0(e),[s,o]=$0(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);if(!this.we(h))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new Yp(u,o,n);return s.forEach(m=>h.insert(m)),h}insert(e){if(this.ge===0)return;const n=X0(e),[s,o]=$0(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);this.Se(h)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class gu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,qu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new vf(Ce.min(),o,new gt(Le),bi(),je())}}class qu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new qu(s,n,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class ST{constructor(e,n){this.targetId=e,this.Ce=n}}class AT{constructor(e,n,s=tn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class Z0{constructor(){this.ve=0,this.Fe=J0(),this.Me=tn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=je(),n=je(),s=je();return this.Fe.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:we(38017,{changeType:u})}}),new qu(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=J0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ye(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class JC{constructor(e){this.Ge=e,this.ze=new Map,this.je=bi(),this.Je=vh(),this.He=vh(),this.Ye=new gt(Le)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:we(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,o)=>{this.rt(o)&&n(o)})}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(up(u))if(s===0){const h=new _e(u.path);this.et(n,h,un.newNoDocument(h,Ce.min()))}else Ye(s===1,20013,{expectedCount:s});else{const h=this._t(n);if(h!==s){const m=this.ut(e),p=m?this.ct(m,e,h):1;if(p!==0){this.it(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,g)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let h,m;try{h=Is(s).toUint8Array()}catch(p){if(p instanceof Wb)return Go("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Yp(h,o,u)}catch(p){return Go(p instanceof gu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)}),o}Tt(e){const n=new Map;this.ze.forEach((u,h)=>{const m=this.ot(h);if(m){if(u.current&&up(m.target)){const p=new _e(m.target.path);this.It(p).has(h)||this.Et(h,p)||this.et(h,p,un.newNoDocument(p,e))}u.Be&&(n.set(h,u.ke()),u.qe())}});let s=je();this.He.forEach((u,h)=>{let m=!0;h.forEachWhile(p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.je.forEach((u,h)=>h.setReadTime(e));const o=new vf(e,n,this.Ye,this.je,s);return this.je=bi(),this.Je=vh(),this.He=vh(),this.Ye=new gt(Le),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Z0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new zt(Le),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new zt(Le),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||fe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Z0),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function vh(){return new gt(_e.comparator)}function J0(){return new gt(_e.comparator)}const eI={asc:"ASCENDING",desc:"DESCENDING"},tI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nI={and:"AND",or:"OR"};class rI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function fp(r,e){return r.useProto3Json||hf(e)?e:{value:e}}function Gh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wT(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function iI(r,e){return Gh(r,e.toTimestamp())}function zr(r){return Ye(!!r,49232),Ce.fromTimestamp(function(n){const s=Cs(n);return new ct(s.seconds,s.nanos)}(r))}function Wp(r,e){return dp(r,e).canonicalString()}function dp(r,e){const n=function(o){return new ot(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?n:n.child(e)}function xT(r){const e=ot.fromString(r);return Ye(NT(e),10190,{key:e.toString()}),e}function mp(r,e){return Wp(r.databaseId,e.path)}function jm(r,e){const n=xT(e);if(n.get(1)!==r.databaseId.projectId)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new _e(CT(n))}function RT(r,e){return Wp(r.databaseId,e)}function sI(r){const e=xT(r);return e.length===4?ot.emptyPath():CT(e)}function pp(r){return new ot(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function CT(r){return Ye(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function eE(r,e,n){return{name:mp(r,e),fields:n.value.mapValue.fields}}function aI(r,e){let n;if("targetChange"in e){e.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:we(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(g,b){return g.useProto3Json?(Ye(b===void 0||typeof b=="string",58123),tn.fromBase64String(b||"")):(Ye(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),tn.fromUint8Array(b||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(g){const b=g.code===void 0?Z.UNKNOWN:TT(g.code);return new he(b,g.message||"")}(h);n=new AT(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=jm(r,s.document.name),u=zr(s.document.updateTime),h=s.document.createTime?zr(s.document.createTime):Ce.min(),m=new wn({mapValue:{fields:s.document.fields}}),p=un.newFoundDocument(o,u,h,m),g=s.targetIds||[],b=s.removedTargetIds||[];n=new Dh(g,b,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=jm(r,s.document),u=s.readTime?zr(s.readTime):Ce.min(),h=un.newNoDocument(o,u),m=s.removedTargetIds||[];n=new Dh([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=jm(r,s.document),u=s.removedTargetIds||[];n=new Dh([],u,o,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,h=new WC(o,u),m=s.targetId;n=new ST(m,h)}}return n}function oI(r,e){let n;if(e instanceof Fu)n={update:eE(r,e.key,e.value)};else if(e instanceof Kp)n={delete:mp(r,e.key)};else if(e instanceof Us)n={update:eE(r,e.key,e.data),updateMask:gI(e.fieldMask)};else{if(!(e instanceof KC))return we(16599,{Vt:e.type});n={verify:mp(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,h){const m=h.transform;if(m instanceof Vu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Pu)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Uu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Hh)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw we(20930,{transform:h.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:iI(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:we(27497)}(r,e.precondition)),n}function lI(r,e){return r&&r.length>0?(Ye(e!==void 0,14353),r.map(n=>function(o,u){let h=o.updateTime?zr(o.updateTime):zr(u);return h.isEqual(Ce.min())&&(h=zr(u)),new qC(h,o.transformResults||[])}(n,e))):[]}function uI(r,e){return{documents:[RT(r,e.path)]}}function cI(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=RT(r,o);const u=function(g){if(g.length!==0)return DT(yr.create(g,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const h=function(g){if(g.length!==0)return g.map(b=>function(w){return{field:Uo(w.field),direction:dI(w.dir)}}(b))}(e.orderBy);h&&(n.structuredQuery.orderBy=h);const m=fp(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ft:n,parent:o}}function hI(r){let e=sI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Ye(s===1,65062);const b=n.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let u=[];n.where&&(u=function(S){const w=IT(S);return w instanceof yr&&sT(w)?w.getFilters():[w]}(n.where));let h=[];n.orderBy&&(h=function(S){return S.map(w=>function(B){return new Mu(Lo(B.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(B.direction))}(w))}(n.orderBy));let m=null;n.limit&&(m=function(S){let w;return w=typeof S=="object"?S.value:S,hf(w)?null:w}(n.limit));let p=null;n.startAt&&(p=function(S){const w=!!S.before,L=S.values||[];return new qh(L,w)}(n.startAt));let g=null;return n.endAt&&(g=function(S){const w=!S.before,L=S.values||[];return new qh(L,w)}(n.endAt)),IC(e,o,h,u,m,"F",p,g)}function fI(r,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function IT(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Lo(n.unaryFilter.field);return Mt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Lo(n.unaryFilter.field);return Mt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Lo(n.unaryFilter.field);return Mt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Lo(n.unaryFilter.field);return Mt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}}(r):r.fieldFilter!==void 0?function(n){return Mt.create(Lo(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return yr.create(n.compositeFilter.filters.map(s=>IT(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we(1026)}}(n.compositeFilter.op))}(r):we(30097,{filter:r})}function dI(r){return eI[r]}function mI(r){return tI[r]}function pI(r){return nI[r]}function Uo(r){return{fieldPath:r.canonicalString()}}function Lo(r){return en.fromServerFormat(r.fieldPath)}function DT(r){return r instanceof Mt?function(n){if(n.op==="=="){if(B0(n.value))return{unaryFilter:{field:Uo(n.field),op:"IS_NAN"}};if(z0(n.value))return{unaryFilter:{field:Uo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(B0(n.value))return{unaryFilter:{field:Uo(n.field),op:"IS_NOT_NAN"}};if(z0(n.value))return{unaryFilter:{field:Uo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uo(n.field),op:mI(n.op),value:n.value}}}(r):r instanceof yr?function(n){const s=n.getFilters().map(o=>DT(o));return s.length===1?s[0]:{compositeFilter:{op:pI(n.op),filters:s}}}(r):we(54877,{filter:r})}function gI(r){const e=[];return r.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function NT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,n,s,o,u=Ce.min(),h=Ce.min(),m=tn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new _s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.yt=e}}function vI(r){const e=hI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?hp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(){this.Cn=new EI}addToCollectionParentIndex(e,n){return this.Cn.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve(Rs.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve(Rs.min())}updateCollectionGroup(e,n,s){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class EI{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new zt(ot.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new zt(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},OT=41943040;class An{static withCacheSize(e){return new An(e,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */An.DEFAULT_COLLECTION_PERCENTILE=10,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,An.DEFAULT=new An(OT,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),An.DISABLED=new An(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Wo(0)}static cr(){return new Wo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="LruGarbageCollector",bI=1048576;function rE([r,e],[n,s]){const o=Le(r,n);return o===0?Le(e,s):o}class TI{constructor(e){this.Ir=e,this.buffer=new zt(rE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();rE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class SI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(nE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){nl(n)?fe(nE,"Ignoring IndexedDB error during garbage collection: ",n):await tl(n)}await this.Vr(3e5)})}}class AI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return re.resolve(cf.ce);const s=new TI(n);return this.mr.forEachTarget(e,o=>s.Ar(o.sequenceNumber)).next(()=>this.mr.pr(e,o=>s.Ar(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(tE)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tE):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,h,m,p,g;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,h=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(s=S,m=Date.now(),this.removeTargets(e,s,n))).next(S=>(u=S,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(S=>(g=Date.now(),Vo()<=Ue.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-b}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${S} documents in `+(g-p)+`ms
Total Duration: ${g-b}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S})))}}function wI(r,e){return new AI(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(){this.changes=new Ba(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?re.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&Tu(s.mutation,o,zn.empty(),ct.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,je()).next(()=>s))}getLocalViewOfDocuments(e,n,s=je()){const o=Ra();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(u=>{let h=pu();return u.forEach((m,p)=>{h=h.insert(m,p.overlayedDocument)}),h}))}getOverlayedDocuments(e,n){const s=Ra();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,je()))}populateOverlays(e,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((h,m)=>{n.set(h,m)})})}computeViews(e,n,s,o){let u=bi();const h=bu(),m=function(){return bu()}();return n.forEach((p,g)=>{const b=s.get(g.key);o.has(g.key)&&(b===void 0||b.mutation instanceof Us)?u=u.insert(g.key,g):b!==void 0?(h.set(g.key,b.mutation.getFieldMask()),Tu(b.mutation,g,b.mutation.getFieldMask(),ct.now())):h.set(g.key,zn.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((g,b)=>h.set(g,b)),n.forEach((g,b)=>m.set(g,new RI(b,h.get(g)??null))),m))}recalculateAndSaveOverlays(e,n){const s=bu();let o=new gt((h,m)=>h-m),u=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(h=>{for(const m of h)m.keys().forEach(p=>{const g=n.get(p);if(g===null)return;let b=s.get(p)||zn.empty();b=m.applyToLocalView(g,b),s.set(p,b);const S=(o.get(m.batchId)||je()).add(p);o=o.insert(m.batchId,S)})}).next(()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,b=p.value,S=mT();b.forEach(w=>{if(!u.has(w)){const L=ET(n.get(w),s.get(w));L!==null&&S.set(w,L),u=u.add(w)}}),h.push(this.documentOverlayCache.saveOverlays(e,g,S))}return re.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(h){return _e.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):uT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):re.resolve(Ra());let m=Du,p=u;return h.next(g=>re.forEach(g,(b,S)=>(m<S.largestBatchId&&(m=S.largestBatchId),u.get(b)?re.resolve():this.remoteDocumentCache.getEntry(e,b).next(w=>{p=p.insert(b,w)}))).next(()=>this.populateOverlays(e,g,u)).next(()=>this.computeViews(e,p,g,je())).next(b=>({batchId:m,changes:dT(b)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new _e(n)).next(s=>{let o=pu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let h=pu();return this.indexManager.getCollectionParents(e,u).next(m=>re.forEach(m,p=>{const g=function(S,w){return new rl(w,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)}(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next(b=>{b.forEach((S,w)=>{h=h.insert(S,w)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o))).next(h=>{u.forEach((p,g)=>{const b=g.getKey();h.get(b)===null&&(h=h.insert(b,un.newInvalidDocument(b)))});let m=pu();return h.forEach((p,g)=>{const b=u.get(p);b!==void 0&&Tu(b.mutation,g,zn.empty(),ct.now()),pf(n,g)&&(m=m.insert(p,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return re.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:zr(o.createTime)}}(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(o){return{name:o.name,query:vI(o.bundledQuery),readTime:zr(o.readTime)}}(n)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.overlays=new gt(_e.comparator),this.qr=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ra();return re.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,u)=>{this.St(e,n,u)}),re.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.qr.delete(s)),re.resolve()}getOverlaysForCollection(e,n,s){const o=Ra(),u=n.length+1,h=new _e(n.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return re.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new gt((g,b)=>g-b);const h=this.overlays.getIterator();for(;h.hasNext();){const g=h.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let b=u.get(g.largestBatchId);b===null&&(b=Ra(),u=u.insert(g.largestBatchId,b)),b.set(g.getKey(),g)}}const m=Ra(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,b)=>m.set(g,b)),!(m.size()>=o)););return re.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new YC(n,s));let u=this.qr.get(n);u===void 0&&(u=je(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(){this.Qr=new zt(Kt.$r),this.Ur=new zt(Kt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Kt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new Kt(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new _e(new ot([])),s=new Kt(n,e),o=new Kt(n,e+1),u=[];return this.Ur.forEachInRange([s,o],h=>{this.Gr(h),u.push(h.key)}),u}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new _e(new ot([])),s=new Kt(n,e),o=new Kt(n,e+1);let u=je();return this.Ur.forEachInRange([s,o],h=>{u=u.add(h.key)}),u}containsKey(e){const n=new Kt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Kt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return _e.comparator(e.key,n.key)||Le(e.Yr,n.Yr)}static Kr(e,n){return Le(e.Yr,n.Yr)||_e.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new zt(Kt.$r)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new QC(u,n,s,o);this.mutationQueue.push(h);for(const m of o)this.Zr=this.Zr.add(new Kt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return re.resolve(h)}lookupMutationBatch(e,n){return re.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return re.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?zp:this.tr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Kt(n,0),o=new Kt(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],h=>{const m=this.Xr(h.Yr);u.push(m)}),re.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new zt(Le);return n.forEach(o=>{const u=new Kt(o,0),h=new Kt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,h],m=>{s=s.add(m.Yr)})}),re.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;_e.isDocumentKey(u)||(u=u.child(""));const h=new Kt(new _e(u),0);let m=new zt(Le);return this.Zr.forEachWhile(p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Yr)),!0)},h),re.resolve(this.ti(m))}ti(e){const n=[];return e.forEach(s=>{const o=this.Xr(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){Ye(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return re.forEach(n.mutations,o=>{const u=new Kt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new Kt(n,0),o=this.Zr.firstAfterOrEqual(s);return re.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e){this.ri=e,this.docs=function(){return new gt(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,h=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return re.resolve(s?s.document.mutableCopy():un.newInvalidDocument(n))}getEntries(e,n){let s=bi();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():un.newInvalidDocument(o))}),re.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=bi();const h=n.path,m=new _e(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:b}}=p.getNext();if(!h.isPrefixOf(g.path))break;g.path.length>h.length+1||oC(aC(b),s)<=0||(o.has(b.key)||pf(n,b))&&(u=u.insert(b.key,b.mutableCopy()))}return re.resolve(u)}getAllFromCollectionGroup(e,n,s,o){we(9500)}ii(e,n){return re.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new MI(this)}getSize(e){return re.resolve(this.size)}}class MI extends xI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)}),re.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.persistence=e,this.si=new Ba(n=>qp(n),Hp),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new Xp,this.targetCount=0,this.ai=Wo.ur()}forEachTarget(e,n){return this.si.forEach((s,o)=>n(o)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),re.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Wo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.Pr(n),re.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach((h,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),re.waitFor(u).next(()=>o)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return re.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),re.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(h=>{u.push(o.markPotentiallyOrphaned(e,h))}),re.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),re.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return re.resolve(s)}containsKey(e,n){return re.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,n){this.ui={},this.overlays={},this.ci=new cf(0),this.li=!1,this.li=!0,this.hi=new NI,this.referenceDelegate=e(this),this.Pi=new VI(this),this.indexManager=new _I,this.remoteDocumentCache=function(o){return new kI(o)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new yI(n),this.Ii=new II(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new DI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new OI(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){fe("MemoryPersistence","Starting transaction:",e);const o=new PI(this.ci.next());return this.referenceDelegate.Ei(),s(o).next(u=>this.referenceDelegate.di(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ai(e,n){return re.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class PI extends uC{constructor(e){super(),this.currentSequenceNumber=e}}class $p{constructor(e){this.persistence=e,this.Ri=new Xp,this.Vi=null}static mi(e){return new $p(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),re.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),re.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(o=>this.fi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.fi.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.fi,s=>{const o=_e.fromPath(s);return this.gi(e,o).next(u=>{u||n.removeEntry(o,Ce.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return re.or([()=>re.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Kh{constructor(e,n){this.persistence=e,this.pi=new Ba(s=>fC(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=wI(this,n)}static mi(e,n){return new Kh(e,n)}Ei(){}di(e){return re.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return re.forEach(this.pi,(s,o)=>this.br(e,s,o).next(u=>u?re.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,h=>this.br(e,h,n).next(m=>{m||(s++,u.removeEntry(h,Ce.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Rh(e.data.value)),n}br(e,n,s){return re.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return re.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=je(),o=je();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Zp(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Dx()?8:cC(cn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next(h=>{u.result=h}).next(()=>{if(!u.result)return this.ws(e,n,o,s).next(h=>{u.result=h})}).next(()=>{if(u.result)return;const h=new UI;return this.Ss(e,n,h).next(m=>{if(u.result=m,this.Vs)return this.bs(e,n,h,m.size)})}).next(()=>u.result)}bs(e,n,s,o){return s.documentReadCount<this.fs?(Vo()<=Ue.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",Po(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),re.resolve()):(Vo()<=Ue.DEBUG&&fe("QueryEngine","Query:",Po(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Vo()<=Ue.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",Po(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jr(n))):re.resolve())}ys(e,n){if(G0(n))return re.resolve(null);let s=jr(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=hp(n,null,"F"),s=jr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const h=je(...u);return this.ps.getDocuments(e,h).next(m=>this.indexManager.getMinOffset(e,s).next(p=>{const g=this.Ds(n,m);return this.Cs(n,g,h,p.readTime)?this.ys(e,hp(n,null,"F")):this.vs(e,g,n,p)}))})))}ws(e,n,s,o){return G0(n)||o.isEqual(Ce.min())?re.resolve(null):this.ps.getDocuments(e,s).next(u=>{const h=this.Ds(n,u);return this.Cs(n,h,s,o)?re.resolve(null):(Vo()<=Ue.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Po(n)),this.vs(e,h,n,sC(o,Du)).next(m=>m))})}Ds(e,n){let s=new zt(hT(e));return n.forEach((o,u)=>{pf(e,u)&&(s=s.add(u))}),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return Vo()<=Ue.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",Po(n)),this.ps.getDocumentsMatchingQuery(e,n,Rs.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next(u=>(n.forEach(h=>{u=u.insert(h.key,h)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp="LocalStore",jI=3e8;class zI{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new gt(Le),this.xs=new Ba(u=>qp(u),Hp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function BI(r,e,n,s){return new zI(r,e,n,s)}async function MT(r,e){const n=De(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const h=[],m=[];let p=je();for(const g of o){h.push(g.batchId);for(const b of g.mutations)p=p.add(b.key)}for(const g of u){m.push(g.batchId);for(const b of g.mutations)p=p.add(b.key)}return n.localDocuments.getDocuments(s,p).next(g=>({Ls:g,removedBatchIds:h,addedBatchIds:m}))})})}function FI(r,e){const n=De(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return function(m,p,g,b){const S=g.batch,w=S.keys();let L=re.resolve();return w.forEach(B=>{L=L.next(()=>b.getEntry(p,B)).next(X=>{const j=g.docVersions.get(B);Ye(j!==null,48541),X.version.compareTo(j)<0&&(S.applyToRemoteDocument(X,g),X.isValidDocument()&&(X.setReadTime(g.commitVersion),b.addEntry(X)))})}),L.next(()=>m.mutationQueue.removeMutationBatch(p,S))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let p=je();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function VT(r){const e=De(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function qI(r,e){const n=De(r),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach((b,S)=>{const w=o.get(S);if(!w)return;m.push(n.Pi.removeMatchingKeys(u,b.removedDocuments,S).next(()=>n.Pi.addMatchingKeys(u,b.addedDocuments,S)));let L=w.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(S)!==null?L=L.withResumeToken(tn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):b.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(b.resumeToken,s)),o=o.insert(S,L),function(X,j,se){return X.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=jI?!0:se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0}(w,L,b)&&m.push(n.Pi.updateTargetData(u,L))});let p=bi(),g=je();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,b))}),m.push(HI(u,h,e.documentUpdates).next(b=>{p=b.ks,g=b.qs})),!s.isEqual(Ce.min())){const b=n.Pi.getLastRemoteSnapshotVersion(u).next(S=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(b)}return re.waitFor(m).next(()=>h.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,p,g)).next(()=>p)}).then(u=>(n.Ms=o,u))}function HI(r,e,n){let s=je(),o=je();return n.forEach(u=>s=s.add(u)),e.getEntries(r,s).next(u=>{let h=bi();return n.forEach((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Ce.min())?(e.removeEntry(m,p.readTime),h=h.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),h=h.insert(m,p)):fe(Jp,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)}),{ks:h,qs:o}})}function GI(r,e){const n=De(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=zp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function KI(r,e){const n=De(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Pi.getTargetData(s,e).next(u=>u?(o=u,re.resolve(o)):n.Pi.allocateTargetId(s).next(h=>(o=new _s(e,h,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function gp(r,e,n){const s=De(r),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,h=>s.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!nl(h))throw h;fe(Jp,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function iE(r,e,n){const s=De(r);let o=Ce.min(),u=je();return s.persistence.runTransaction("Execute query","readwrite",h=>function(p,g,b){const S=De(p),w=S.xs.get(b);return w!==void 0?re.resolve(S.Ms.get(w)):S.Pi.getTargetData(g,b)}(s,h,jr(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,m.targetId).next(p=>{u=p})}).next(()=>s.Fs.getDocumentsMatchingQuery(h,e,n?o:Ce.min(),n?u:je())).next(m=>(QI(s,NC(e),m),{documents:m,Qs:u})))}function QI(r,e,n){let s=r.Os.get(e)||Ce.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),r.Os.set(e,s)}class sE{constructor(){this.activeTargetIds=UC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YI{constructor(){this.Mo=new sE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new sE,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="ConnectivityMonitor";class oE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe(aE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe(aE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _h=null;function yp(){return _h===null?_h=function(){return 268435456+Math.round(2147483648*Math.random())}():_h++,"0x"+_h.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="RestConnection",XI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $I{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Bh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const h=yp(),m=this.zo(e,n.toUriEncodedString());fe(zm,`Sending RPC '${e}' ${h}:`,m,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:g}=new URL(m),b=Vs(g);return this.Jo(e,m,p,s,b).then(S=>(fe(zm,`Received RPC '${e}' ${h}: `,S),S),S=>{throw Go(zm,`RPC '${e}' ${h} failed with error: `,S,"url: ",m,"request:",s),S})}Ho(e,n,s,o,u,h){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+el}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}zo(e,n){const s=XI[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="WebChannelConnection";class JI extends $I{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const h=yp();return new Promise((m,p)=>{const g=new Lb;g.setWithCredentials(!0),g.listenOnce(jb.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case xh.NO_ERROR:const S=g.getResponseJson();fe(on,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(S)),m(S);break;case xh.TIMEOUT:fe(on,`RPC '${e}' ${h} timed out`),p(new he(Z.DEADLINE_EXCEEDED,"Request time out"));break;case xh.HTTP_ERROR:const w=g.getStatus();if(fe(on,`RPC '${e}' ${h} failed with status:`,w,"response text:",g.getResponseText()),w>0){let L=g.getResponseJson();Array.isArray(L)&&(L=L[0]);const B=L?.error;if(B&&B.status&&B.message){const X=function(se){const W=se.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(W)>=0?W:Z.UNKNOWN}(B.status);p(new he(X,B.message))}else p(new he(Z.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new he(Z.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:h,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{fe(on,`RPC '${e}' ${h} completed.`)}});const b=JSON.stringify(o);fe(on,`RPC '${e}' ${h} sending request:`,o),g.send(n,"POST",b,s,15)})}T_(e,n,s){const o=yp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Fb(),m=Bb(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const b=u.join("");fe(on,`Creating RPC '${e}' stream ${o}: ${b}`,p);const S=h.createWebChannel(b,p);this.I_(S);let w=!1,L=!1;const B=new ZI({Yo:j=>{L?fe(on,`Not sending because RPC '${e}' stream ${o} is closed:`,j):(w||(fe(on,`Opening RPC '${e}' stream ${o} transport.`),S.open(),w=!0),fe(on,`RPC '${e}' stream ${o} sending:`,j),S.send(j))},Zo:()=>S.close()}),X=(j,se,W)=>{j.listen(se,te=>{try{W(te)}catch(ue){setTimeout(()=>{throw ue},0)}})};return X(S,mu.EventType.OPEN,()=>{L||(fe(on,`RPC '${e}' stream ${o} transport opened.`),B.o_())}),X(S,mu.EventType.CLOSE,()=>{L||(L=!0,fe(on,`RPC '${e}' stream ${o} transport closed`),B.a_(),this.E_(S))}),X(S,mu.EventType.ERROR,j=>{L||(L=!0,Go(on,`RPC '${e}' stream ${o} transport errored. Name:`,j.name,"Message:",j.message),B.a_(new he(Z.UNAVAILABLE,"The operation could not be completed")))}),X(S,mu.EventType.MESSAGE,j=>{if(!L){const se=j.data[0];Ye(!!se,16349);const W=se,te=W?.error||W[0]?.error;if(te){fe(on,`RPC '${e}' stream ${o} received error:`,te);const ue=te.status;let ae=function(R){const x=kt[R];if(x!==void 0)return TT(x)}(ue),pe=te.message;ae===void 0&&(ae=Z.INTERNAL,pe="Unknown error status: "+ue+" with message "+te.message),L=!0,B.a_(new he(ae,pe)),S.close()}else fe(on,`RPC '${e}' stream ${o} received:`,se),B.u_(se)}}),X(m,zb.STAT_EVENT,j=>{j.stat===ip.PROXY?fe(on,`RPC '${e}' stream ${o} detected buffering proxy`):j.stat===ip.NOPROXY&&fe(on,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{B.__()},0),B}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Bm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(r){return new rI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="PersistentStream";class UT{constructor(e,n,s,o,u,h,m,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new PT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(Ei(n.toString()),Ei("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.D_===n&&this.G_(s,o)},s=>{e(()=>{const o=new he(Z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(o=>{s(()=>this.z_(o))}),this.stream.onMessage(o=>{s(()=>++this.F_==1?this.J_(o):this.onNext(o))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return fe(lE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(fe(lE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class e2 extends UT{constructor(e,n,s,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=aI(this.serializer,e),s=function(u){if(!("targetChange"in u))return Ce.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Ce.min():h.readTime?zr(h.readTime):Ce.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=pp(this.serializer),n.addTarget=function(u,h){let m;const p=h.target;if(m=up(p)?{documents:uI(u,p)}:{query:cI(u,p).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=wT(u,h.resumeToken);const g=fp(u,h.expectedCount);g!==null&&(m.expectedCount=g)}else if(h.snapshotVersion.compareTo(Ce.min())>0){m.readTime=Gh(u,h.snapshotVersion.toTimestamp());const g=fp(u,h.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,e);const s=fI(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=pp(this.serializer),n.removeTarget=e,this.q_(n)}}class t2 extends UT{constructor(e,n,s,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=lI(e.writeResults,e.commitTime),s=zr(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=pp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>oI(this.serializer,s))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{}class r2 extends n2{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Go(e,dp(n,s),o,u,h)).catch(u=>{throw u.name==="FirebaseError"?(u.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(Z.UNKNOWN,u.toString())})}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.connection.Ho(e,dp(n,s),o,h,m,u)).catch(h=>{throw h.name==="FirebaseError"?(h.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new he(Z.UNKNOWN,h.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class i2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ei(n),this.aa=!1):fe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma="RemoteStore";class s2{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo(h=>{s.enqueueAndForget(async()=>{Fa(this)&&(fe(Ma,"Restarting streams for network reachability change."),await async function(p){const g=De(p);g.Ea.add(4),await Hu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Ef(g)}(this))})}),this.Ra=new i2(s,o)}}async function Ef(r){if(Fa(r))for(const e of r.da)await e(!0)}async function Hu(r){for(const e of r.da)await e(!1)}function LT(r,e){const n=De(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),rg(n)?ng(n):il(n).O_()&&tg(n,e))}function eg(r,e){const n=De(r),s=il(n);n.Ia.delete(e),s.O_()&&jT(n,e),n.Ia.size===0&&(s.O_()?s.L_():Fa(n)&&n.Ra.set("Unknown"))}function tg(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}il(r).Y_(e)}function jT(r,e){r.Va.Ue(e),il(r).Z_(e)}function ng(r){r.Va=new JC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),il(r).start(),r.Ra.ua()}function rg(r){return Fa(r)&&!il(r).x_()&&r.Ia.size>0}function Fa(r){return De(r).Ea.size===0}function zT(r){r.Va=void 0}async function a2(r){r.Ra.set("Online")}async function o2(r){r.Ia.forEach((e,n)=>{tg(r,e)})}async function l2(r,e){zT(r),rg(r)?(r.Ra.ha(e),ng(r)):r.Ra.set("Unknown")}async function u2(r,e,n){if(r.Ra.set("Online"),e instanceof AT&&e.state===2&&e.cause)try{await async function(o,u){const h=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.Va.removeTarget(m))}(r,e)}catch(s){fe(Ma,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Qh(r,s)}else if(e instanceof Dh?r.Va.Ze(e):e instanceof ST?r.Va.st(e):r.Va.tt(e),!n.isEqual(Ce.min()))try{const s=await VT(r.localStore);n.compareTo(s)>=0&&await function(u,h){const m=u.Va.Tt(h);return m.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const b=u.Ia.get(g);b&&u.Ia.set(g,b.withResumeToken(p.resumeToken,h))}}),m.targetMismatches.forEach((p,g)=>{const b=u.Ia.get(p);if(!b)return;u.Ia.set(p,b.withResumeToken(tn.EMPTY_BYTE_STRING,b.snapshotVersion)),jT(u,p);const S=new _s(b.target,p,g,b.sequenceNumber);tg(u,S)}),u.remoteSyncer.applyRemoteEvent(m)}(r,n)}catch(s){fe(Ma,"Failed to raise snapshot:",s),await Qh(r,s)}}async function Qh(r,e,n){if(!nl(e))throw e;r.Ea.add(1),await Hu(r),r.Ra.set("Offline"),n||(n=()=>VT(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{fe(Ma,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Ef(r)})}function BT(r,e){return e().catch(n=>Qh(r,n,e))}async function bf(r){const e=De(r),n=Ns(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:zp;for(;c2(e);)try{const o=await GI(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,h2(e,o)}catch(o){await Qh(e,o)}FT(e)&&qT(e)}function c2(r){return Fa(r)&&r.Ta.length<10}function h2(r,e){r.Ta.push(e);const n=Ns(r);n.O_()&&n.X_&&n.ea(e.mutations)}function FT(r){return Fa(r)&&!Ns(r).x_()&&r.Ta.length>0}function qT(r){Ns(r).start()}async function f2(r){Ns(r).ra()}async function d2(r){const e=Ns(r);for(const n of r.Ta)e.ea(n.mutations)}async function m2(r,e,n){const s=r.Ta.shift(),o=Qp.from(s,e,n);await BT(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await bf(r)}async function p2(r,e){e&&Ns(r).X_&&await async function(s,o){if(function(h){return XC(h)&&h!==Z.ABORTED}(o.code)){const u=s.Ta.shift();Ns(s).B_(),await BT(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await bf(s)}}(r,e),FT(r)&&qT(r)}async function uE(r,e){const n=De(r);n.asyncQueue.verifyOperationInProgress(),fe(Ma,"RemoteStore received new credentials");const s=Fa(n);n.Ea.add(3),await Hu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ef(n)}async function g2(r,e){const n=De(r);e?(n.Ea.delete(2),await Ef(n)):e||(n.Ea.add(2),await Hu(n),n.Ra.set("Unknown"))}function il(r){return r.ma||(r.ma=function(n,s,o){const u=De(n);return u.sa(),new e2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{Xo:a2.bind(null,r),t_:o2.bind(null,r),r_:l2.bind(null,r),H_:u2.bind(null,r)}),r.da.push(async e=>{e?(r.ma.B_(),rg(r)?ng(r):r.Ra.set("Unknown")):(await r.ma.stop(),zT(r))})),r.ma}function Ns(r){return r.fa||(r.fa=function(n,s,o){const u=De(n);return u.sa(),new t2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:f2.bind(null,r),r_:p2.bind(null,r),ta:d2.bind(null,r),na:m2.bind(null,r)}),r.da.push(async e=>{e?(r.fa.B_(),await bf(r)):(await r.fa.stop(),r.Ta.length>0&&(fe(Ma,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))})),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const h=Date.now()+s,m=new ig(e,n,h,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sg(r,e){if(Ei("AsyncQueue",`${e}: ${r}`),nl(r))return new he(Z.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{static emptySet(e){return new zo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||_e.comparator(n.key,s.key):(n,s)=>_e.comparator(n.key,s.key),this.keyedMap=pu(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new zo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(){this.ga=new gt(_e.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class Xo{constructor(e,n,s,o,u,h,m,p,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,u){const h=[];return n.forEach(m=>{h.push({type:0,doc:m})}),new Xo(e,n,zo.emptySet(n),h,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class v2{constructor(){this.queries=hE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=De(n),u=o.queries;o.queries=hE(),u.forEach((h,m)=>{for(const p of m.Sa)p.onError(s)})})(this,new he(Z.ABORTED,"Firestore shutting down"))}}function hE(){return new Ba(r=>cT(r),mf)}async function ag(r,e){const n=De(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new y2,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const m=sg(h,`Initialization of query '${Po(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&lg(n)}async function og(r,e){const n=De(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const h=u.Sa.indexOf(e);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function _2(r,e){const n=De(r);let s=!1;for(const o of e){const u=o.query,h=n.queries.get(u);if(h){for(const m of h.Sa)m.Fa(o)&&(s=!0);h.wa=o}}s&&lg(n)}function E2(r,e,n){const s=De(r),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function lg(r){r.Ca.forEach(e=>{e.next()})}var vp,fE;(fE=vp||(vp={})).Ma="default",fE.Cache="cache";class ug{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Xo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.key=e}}class GT{constructor(e){this.key=e}}class b2{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=je(),this.mutatedKeys=je(),this.eu=hT(e),this.tu=new zo(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new cE,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((b,S)=>{const w=o.get(b),L=pf(this.query,S)?S:null,B=!!w&&this.mutatedKeys.has(w.key),X=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let j=!1;w&&L?w.data.isEqual(L.data)?B!==X&&(s.track({type:3,doc:L}),j=!0):this.su(w,L)||(s.track({type:2,doc:L}),j=!0,(p&&this.eu(L,p)>0||g&&this.eu(L,g)<0)&&(m=!0)):!w&&L?(s.track({type:0,doc:L}),j=!0):w&&!L&&(s.track({type:1,doc:w}),j=!0,(p||g)&&(m=!0)),j&&(L?(h=h.add(L),u=X?u.add(b):u.delete(b)):(h=h.delete(b),u=u.delete(b)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const b=this.query.limitType==="F"?h.last():h.first();h=h.delete(b.key),u=u.delete(b.key),s.track({type:1,doc:b})}return{tu:h,iu:s,Cs:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort((b,S)=>function(L,B){const X=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:j})}};return X(L)-X(B)}(b.type,S.type)||this.eu(b.doc,S.doc)),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,g=p!==this.Za;return this.Za=p,h.length!==0||g?{snapshot:new Xo(this.query,e.tu,u,h,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new cE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=je(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new GT(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new HT(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=je();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Xo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const cg="SyncEngine";class T2{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class S2{constructor(e){this.key=e,this.hu=!1}}class A2{constructor(e,n,s,o,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Ba(m=>cT(m),mf),this.Iu=new Map,this.Eu=new Set,this.du=new gt(_e.comparator),this.Au=new Map,this.Ru=new Xp,this.Vu={},this.mu=new Map,this.fu=Wo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function w2(r,e,n=!0){const s=$T(r);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await KT(s,e,n,!0),o}async function x2(r,e){const n=$T(r);await KT(n,e,!0,!1)}async function KT(r,e,n,s){const o=await KI(r.localStore,jr(e)),u=o.targetId,h=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await R2(r,e,u,h==="current",o.resumeToken)),r.isPrimaryClient&&n&&LT(r.remoteStore,o),m}async function R2(r,e,n,s,o){r.pu=(S,w,L)=>async function(X,j,se,W){let te=j.view.ru(se);te.Cs&&(te=await iE(X.localStore,j.query,!1).then(({documents:O})=>j.view.ru(O,te)));const ue=W&&W.targetChanges.get(j.targetId),ae=W&&W.targetMismatches.get(j.targetId)!=null,pe=j.view.applyChanges(te,X.isPrimaryClient,ue,ae);return mE(X,j.targetId,pe.au),pe.snapshot}(r,S,w,L);const u=await iE(r.localStore,e,!0),h=new b2(e,u.Qs),m=h.ru(u.documents),p=qu.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),g=h.applyChanges(m,r.isPrimaryClient,p);mE(r,n,g.au);const b=new T2(e,n,h);return r.Tu.set(e,b),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),g.snapshot}async function C2(r,e,n){const s=De(r),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter(h=>!mf(h,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await gp(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&eg(s.remoteStore,o.targetId),_p(s,o.targetId)}).catch(tl)):(_p(s,o.targetId),await gp(s.localStore,o.targetId,!0))}async function I2(r,e){const n=De(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),eg(n.remoteStore,s.targetId))}async function D2(r,e,n){const s=U2(r);try{const o=await function(h,m){const p=De(h),g=ct.now(),b=m.reduce((L,B)=>L.add(B.key),je());let S,w;return p.persistence.runTransaction("Locally write mutations","readwrite",L=>{let B=bi(),X=je();return p.Ns.getEntries(L,b).next(j=>{B=j,B.forEach((se,W)=>{W.isValidDocument()||(X=X.add(se))})}).next(()=>p.localDocuments.getOverlayedDocuments(L,B)).next(j=>{S=j;const se=[];for(const W of m){const te=GC(W,S.get(W.key).overlayedDocument);te!=null&&se.push(new Us(W.key,te,nT(te.value.mapValue),Rn.exists(!0)))}return p.mutationQueue.addMutationBatch(L,g,se,m)}).next(j=>{w=j;const se=j.applyToLocalDocumentSet(S,X);return p.documentOverlayCache.saveOverlays(L,j.batchId,se)})}).then(()=>({batchId:w.batchId,changes:dT(S)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(h,m,p){let g=h.Vu[h.currentUser.toKey()];g||(g=new gt(Le)),g=g.insert(m,p),h.Vu[h.currentUser.toKey()]=g}(s,o.batchId,n),await Gu(s,o.changes),await bf(s.remoteStore)}catch(o){const u=sg(o,"Failed to persist write");n.reject(u)}}async function QT(r,e){const n=De(r);try{const s=await qI(n.localStore,e);e.targetChanges.forEach((o,u)=>{const h=n.Au.get(u);h&&(Ye(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Ye(h.hu,14607):o.removedDocuments.size>0&&(Ye(h.hu,42227),h.hu=!1))}),await Gu(n,s,e)}catch(s){await tl(s)}}function dE(r,e,n){const s=De(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach((u,h)=>{const m=h.view.va(e);m.snapshot&&o.push(m.snapshot)}),function(h,m){const p=De(h);p.onlineState=m;let g=!1;p.queries.forEach((b,S)=>{for(const w of S.Sa)w.va(m)&&(g=!0)}),g&&lg(p)}(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function N2(r,e,n){const s=De(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let h=new gt(_e.comparator);h=h.insert(u,un.newNoDocument(u,Ce.min()));const m=je().add(u),p=new vf(Ce.min(),new Map,new gt(Le),h,m);await QT(s,p),s.du=s.du.remove(u),s.Au.delete(e),hg(s)}else await gp(s.localStore,e,!1).then(()=>_p(s,e,n)).catch(tl)}async function O2(r,e){const n=De(r),s=e.batch.batchId;try{const o=await FI(n.localStore,e);WT(n,s,null),YT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Gu(n,o)}catch(o){await tl(o)}}async function k2(r,e,n){const s=De(r);try{const o=await function(h,m){const p=De(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let b;return p.mutationQueue.lookupMutationBatch(g,m).next(S=>(Ye(S!==null,37113),b=S.keys(),p.mutationQueue.removeMutationBatch(g,S))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,b,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,b)).next(()=>p.localDocuments.getDocuments(g,b))})}(s.localStore,e);WT(s,e,n),YT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Gu(s,o)}catch(o){await tl(o)}}function YT(r,e){(r.mu.get(e)||[]).forEach(n=>{n.resolve()}),r.mu.delete(e)}function WT(r,e,n){const s=De(r);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function _p(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach(s=>{r.Ru.containsKey(s)||XT(r,s)})}function XT(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(eg(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),hg(r))}function mE(r,e,n){for(const s of n)s instanceof HT?(r.Ru.addReference(s.key,e),M2(r,s)):s instanceof GT?(fe(cg,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||XT(r,s.key)):we(19791,{wu:s})}function M2(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(fe(cg,"New document in limbo: "+n),r.Eu.add(s),hg(r))}function hg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new _e(ot.fromString(e)),s=r.fu.next();r.Au.set(s,new S2(n)),r.du=r.du.insert(n,s),LT(r.remoteStore,new _s(jr(df(n.path)),s,"TargetPurposeLimboResolution",cf.ce))}}async function Gu(r,e,n){const s=De(r),o=[],u=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach((m,p)=>{h.push(s.pu(p,e,n).then(g=>{if((g||n)&&s.isPrimaryClient){const b=g?!g.fromCache:n?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,b?"current":"not-current")}if(g){o.push(g);const b=Zp.As(p.targetId,g);u.push(b)}}))}),await Promise.all(h),s.Pu.H_(o),await async function(p,g){const b=De(p);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>re.forEach(g,w=>re.forEach(w.Es,L=>b.persistence.referenceDelegate.addReference(S,w.targetId,L)).next(()=>re.forEach(w.ds,L=>b.persistence.referenceDelegate.removeReference(S,w.targetId,L)))))}catch(S){if(!nl(S))throw S;fe(Jp,"Failed to update sequence numbers: "+S)}for(const S of g){const w=S.targetId;if(!S.fromCache){const L=b.Ms.get(w),B=L.snapshotVersion,X=L.withLastLimboFreeSnapshotVersion(B);b.Ms=b.Ms.insert(w,X)}}}(s.localStore,u))}async function V2(r,e){const n=De(r);if(!n.currentUser.isEqual(e)){fe(cg,"User change. New user:",e.toKey());const s=await MT(n.localStore,e);n.currentUser=e,function(u,h){u.mu.forEach(m=>{m.forEach(p=>{p.reject(new he(Z.CANCELLED,h))})}),u.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Gu(n,s.Ls)}}function P2(r,e){const n=De(r),s=n.Au.get(e);if(s&&s.hu)return je().add(s.key);{let o=je();const u=n.Iu.get(e);if(!u)return o;for(const h of u){const m=n.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function $T(r){const e=De(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=QT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=P2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=N2.bind(null,e),e.Pu.H_=_2.bind(null,e.eventManager),e.Pu.yu=E2.bind(null,e.eventManager),e}function U2(r){const e=De(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=O2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=k2.bind(null,e),e}class Yh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_f(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return BI(this.persistence,new LI,e.initialUser,this.serializer)}Cu(e){return new kT($p.mi,this.serializer)}Du(e){return new YI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yh.provider={build:()=>new Yh};class L2 extends Yh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ye(this.persistence.referenceDelegate instanceof Kh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new SI(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?An.withCacheSize(this.cacheSizeBytes):An.DEFAULT;return new kT(s=>Kh.mi(s,n),this.serializer)}}class Ep{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>dE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=V2.bind(null,this.syncEngine),await g2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new v2}()}createDatastore(e){const n=_f(e.databaseInfo.databaseId),s=function(u){return new JI(u)}(e.databaseInfo);return function(u,h,m,p){return new r2(u,h,m,p)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,u,h,m){return new s2(s,o,u,h,m)}(this.localStore,this.datastore,e.asyncQueue,n=>dE(this.syncEngine,n,0),function(){return oE.v()?new oE:new WI}())}createSyncEngine(e,n){return function(o,u,h,m,p,g,b){const S=new A2(o,u,h,m,p,g);return b&&(S.gu=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const s=De(n);fe(Ma,"RemoteStore shutting down."),s.Ea.add(5),await Hu(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ep.provider={build:()=>new Ep};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ei("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os="FirestoreClient";class j2{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=ln.UNAUTHENTICATED,this.clientId=jp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async h=>{fe(Os,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(fe(Os,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=sg(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Fm(r,e){r.asyncQueue.verifyOperationInProgress(),fe(Os,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await MT(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function pE(r,e){r.asyncQueue.verifyOperationInProgress();const n=await z2(r);fe(Os,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener(s=>uE(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>uE(e.remoteStore,o)),r._onlineComponents=e}async function z2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){fe(Os,"Using user provided OfflineComponentProvider");try{await Fm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;Go("Error using user provided cache. Falling back to memory cache: "+n),await Fm(r,new Yh)}}else fe(Os,"Using default OfflineComponentProvider"),await Fm(r,new L2(void 0));return r._offlineComponents}async function ZT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(fe(Os,"Using user provided OnlineComponentProvider"),await pE(r,r._uninitializedComponentsProvider._online)):(fe(Os,"Using default OnlineComponentProvider"),await pE(r,new Ep))),r._onlineComponents}function B2(r){return ZT(r).then(e=>e.syncEngine)}async function Wh(r){const e=await ZT(r),n=e.eventManager;return n.onListen=w2.bind(null,e.syncEngine),n.onUnlisten=C2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=x2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=I2.bind(null,e.syncEngine),n}function F2(r,e,n={}){const s=new yi;return r.asyncQueue.enqueueAndForget(async()=>function(u,h,m,p,g){const b=new fg({next:w=>{b.Nu(),h.enqueueAndForget(()=>og(u,S));const L=w.docs.has(m);!L&&w.fromCache?g.reject(new he(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&w.fromCache&&p&&p.source==="server"?g.reject(new he(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(w)},error:w=>g.reject(w)}),S=new ug(df(m.path),b,{includeMetadataChanges:!0,qa:!0});return ag(u,S)}(await Wh(r),r.asyncQueue,e,n,s)),s.promise}function q2(r,e,n={}){const s=new yi;return r.asyncQueue.enqueueAndForget(async()=>function(u,h,m,p,g){const b=new fg({next:w=>{b.Nu(),h.enqueueAndForget(()=>og(u,S)),w.fromCache&&p.source==="server"?g.reject(new he(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(w)},error:w=>g.reject(w)}),S=new ug(m,b,{includeMetadataChanges:!0,qa:!0});return ag(u,S)}(await Wh(r),r.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="firestore.googleapis.com",yE=!0;class vE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=eS,this.ssl=yE}else this.host=e.host,this.ssl=e.ssl??yE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=OT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bI)throw new he(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JT(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tf{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new YR;switch(s.type){case"firstParty":return new ZR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new he(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=gE.get(n);s&&(fe("ComponentProvider","Removing Datastore"),gE.delete(n),s.terminate())}(this),Promise.resolve()}}function H2(r,e,n,s={}){r=xn(r,Tf);const o=Vs(e),u=r._getSettings(),h={...u,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${n}`;o&&(kp(`https://${m}`),Mp("Firestore",!0)),u.host!==eS&&u.host!==m&&Go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:m,ssl:o,emulatorOptions:s};if(!Na(p,h)&&(r._setSettings(p),s.mockUserToken)){let g,b;if(typeof s.mockUserToken=="string")g=s.mockUserToken,b=ln.MOCK_USER;else{g=Nb(s.mockUserToken,r._app?.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new he(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new ln(S)}r._authCredentials=new WR(new Hb(g,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ls(this.firestore,e,this._query)}}class Et{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new As(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Et(this.firestore,e,this._key)}toJSON(){return{type:Et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Bu(n,Et._jsonSchema))return new Et(e,s||null,new _e(ot.fromString(n.referencePath)))}}Et._jsonSchemaVersion="firestore/documentReference/1.0",Et._jsonSchema={type:Vt("string",Et._jsonSchemaVersion),referencePath:Vt("string")};class As extends Ls{constructor(e,n,s){super(e,n,df(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new _e(e))}withConverter(e){return new As(this.firestore,e,this._path)}}function qn(r,e,...n){if(r=lt(r),Gb("collection","path",e),r instanceof Tf){const s=ot.fromString(e,...n);return N0(s),new As(r,null,s)}{if(!(r instanceof Et||r instanceof As))throw new he(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ot.fromString(e,...n));return N0(s),new As(r.firestore,null,s)}}function hn(r,e,...n){if(r=lt(r),arguments.length===1&&(e=jp.newId()),Gb("doc","path",e),r instanceof Tf){const s=ot.fromString(e,...n);return D0(s),new Et(r,null,new _e(s))}{if(!(r instanceof Et||r instanceof As))throw new he(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ot.fromString(e,...n));return D0(s),new Et(r.firestore,r instanceof As?r.converter:null,new _e(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="AsyncQueue";class EE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new PT(this,"async_queue_retry"),this._c=()=>{const s=Bm();s&&fe(_E,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Bm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Bm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new yi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!nl(e))throw e;fe(_E,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,Ei("INTERNAL UNHANDLED ERROR: ",bE(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=ig.createAndSchedule(this,e,n,s,u=>this.hc(u));return this.tc.push(o),o}uc(){this.nc&&we(47125,{Pc:bE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function bE(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(r){return function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1}(r,["next","error","complete"])}class Ti extends Tf{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new EE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new EE(e),this._firestoreClient=void 0,await e}}}function G2(r,e){const n=typeof r=="object"?r:Up(),s=typeof r=="string"?r:Bh,o=lf(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=Cb("firestore");u&&H2(o,...u)}return o}function Ku(r){if(r._terminated)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||K2(r),r._firestoreClient}function K2(r){const e=r._freezeSettings(),n=function(o,u,h,m){return new pC(o,u,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,JT(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new j2(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nr(tn.fromBase64String(e))}catch(n){throw new he(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new nr(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:nr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Bu(e,nr._jsonSchema))return nr.fromBase64String(e.bytes)}}nr._jsonSchemaVersion="firestore/bytes/1.0",nr._jsonSchema={type:Vt("string",nr._jsonSchemaVersion),bytes:Vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Br._jsonSchemaVersion}}static fromJSON(e){if(Bu(e,Br._jsonSchema))return new Br(e.latitude,e.longitude)}}Br._jsonSchemaVersion="firestore/geoPoint/1.0",Br._jsonSchema={type:Vt("string",Br._jsonSchemaVersion),latitude:Vt("number"),longitude:Vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Fr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Bu(e,Fr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Fr(e.vectorValues);throw new he(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fr._jsonSchemaVersion="firestore/vectorValue/1.0",Fr._jsonSchema={type:Vt("string",Fr._jsonSchemaVersion),vectorValues:Vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2=/^__.*__$/;class Y2{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Us(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fu(e,this.data,n,this.fieldTransforms)}}class tS{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Us(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function nS(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:r})}}class dg{constructor(e,n,s,o,u,h){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new dg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Xh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(nS(this.Ac)&&Q2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class W2{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||_f(e)}Cc(e,n,s,o=!1){return new dg({Ac:e,methodName:n,Dc:s,path:en.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yu(r){const e=r._freezeSettings(),n=_f(r._databaseId);return new W2(r._databaseId,!!e.ignoreUndefinedProperties,n)}function mg(r,e,n,s,o,u={}){const h=r.Cc(u.merge||u.mergeFields?2:0,e,n,o);gg("Data must be an object, but it was:",h,s);const m=sS(s,h);let p,g;if(u.merge)p=new zn(h.fieldMask),g=h.fieldTransforms;else if(u.mergeFields){const b=[];for(const S of u.mergeFields){const w=bp(e,S,n);if(!h.contains(w))throw new he(Z.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);oS(b,w)||b.push(w)}p=new zn(b),g=h.fieldTransforms.filter(S=>p.covers(S.field))}else p=null,g=h.fieldTransforms;return new Y2(new wn(m),p,g)}class Af extends Sf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Af}}class pg extends Sf{_toFieldTransform(e){return new BC(e.path,new Vu)}isEqual(e){return e instanceof pg}}function rS(r,e,n,s){const o=r.Cc(1,e,n);gg("Data must be an object, but it was:",o,s);const u=[],h=wn.empty();Ps(s,(p,g)=>{const b=yg(e,p,n);g=lt(g);const S=o.yc(b);if(g instanceof Af)u.push(b);else{const w=Wu(g,S);w!=null&&(u.push(b),h.set(b,w))}});const m=new zn(u);return new tS(h,m,o.fieldTransforms)}function iS(r,e,n,s,o,u){const h=r.Cc(1,e,n),m=[bp(e,s,n)],p=[o];if(u.length%2!=0)throw new he(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<u.length;w+=2)m.push(bp(e,u[w])),p.push(u[w+1]);const g=[],b=wn.empty();for(let w=m.length-1;w>=0;--w)if(!oS(g,m[w])){const L=m[w];let B=p[w];B=lt(B);const X=h.yc(L);if(B instanceof Af)g.push(L);else{const j=Wu(B,X);j!=null&&(g.push(L),b.set(L,j))}}const S=new zn(g);return new tS(b,S,h.fieldTransforms)}function X2(r,e,n,s=!1){return Wu(n,r.Cc(s?4:3,e))}function Wu(r,e){if(aS(r=lt(r)))return gg("Unsupported field value:",e,r),sS(r,e);if(r instanceof Sf)return function(s,o){if(!nS(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,o){const u=[];let h=0;for(const m of s){let p=Wu(m,o.wc(h));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),h++}return{arrayValue:{values:u}}}(r,e)}return function(s,o){if((s=lt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return LC(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=ct.fromDate(s);return{timestampValue:Gh(o.serializer,u)}}if(s instanceof ct){const u=new ct(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Gh(o.serializer,u)}}if(s instanceof Br)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof nr)return{bytesValue:wT(o.serializer,s._byteString)};if(s instanceof Et){const u=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Wp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Fr)return function(h,m){return{mapValue:{fields:{[eT]:{stringValue:tT},[Fh]:{arrayValue:{values:h.toArray().map(g=>{if(typeof g!="number")throw m.Sc("VectorValues must only contain numeric values.");return Gp(m.serializer,g)})}}}}}}(s,o);throw o.Sc(`Unsupported field value: ${uf(s)}`)}(r,e)}function sS(r,e){const n={};return Yb(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ps(r,(s,o)=>{const u=Wu(o,e.mc(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function aS(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ct||r instanceof Br||r instanceof nr||r instanceof Et||r instanceof Sf||r instanceof Fr)}function gg(r,e,n){if(!aS(n)||!Kb(n)){const s=uf(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function bp(r,e,n){if((e=lt(e))instanceof Qu)return e._internalPath;if(typeof e=="string")return yg(r,e);throw Xh("Field path arguments must be of type string or ",r,!1,void 0,n)}const $2=new RegExp("[~\\*/\\[\\]]");function yg(r,e,n){if(e.search($2)>=0)throw Xh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Qu(...e.split("."))._internalPath}catch{throw Xh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Xh(r,e,n,s,o){const u=s&&!s.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||h)&&(p+=" (found",u&&(p+=` in field ${s}`),h&&(p+=` in document ${o}`),p+=")"),new he(Z.INVALID_ARGUMENT,m+r+p)}function oS(r,e){return r.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Z2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(wf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Z2 extends lS{data(){return super.data()}}function wf(r,e){return typeof e=="string"?yg(r,e):e instanceof Qu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new he(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vg{}class cS extends vg{}function ks(r,e,...n){let s=[];e instanceof vg&&s.push(e),s=s.concat(n),function(u){const h=u.filter(p=>p instanceof _g).length,m=u.filter(p=>p instanceof xf).length;if(h>1||h>0&&m>0)throw new he(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class xf extends cS{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new xf(e,n,s)}_apply(e){const n=this._parse(e);return hS(e._query,n),new Ls(e.firestore,e.converter,cp(e._query,n))}_parse(e){const n=Yu(e.firestore);return function(u,h,m,p,g,b,S){let w;if(g.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new he(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){wE(S,b);const B=[];for(const X of S)B.push(AE(p,u,X));w={arrayValue:{values:B}}}else w=AE(p,u,S)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||wE(S,b),w=X2(m,h,S,b==="in"||b==="not-in");return Mt.create(g,b,w)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Bn(r,e,n){const s=e,o=wf("where",r);return xf._create(o,s,n)}class _g extends vg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new _g(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:yr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let h=o;const m=u.getFlattenedFilters();for(const p of m)hS(h,p),h=cp(h,p)}(e._query,n),new Ls(e.firestore,e.converter,cp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Eg extends cS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Eg(e,n)}_apply(e){const n=function(o,u,h){if(o.startAt!==null)throw new he(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mu(u,h)}(e._query,this._field,this._direction);return new Ls(e.firestore,e.converter,function(o,u){const h=o.explicitOrderBy.concat([u]);return new rl(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,n))}}function SE(r,e="asc"){const n=e,s=wf("orderBy",r);return Eg._create(s,n)}function AE(r,e,n){if(typeof(n=lt(n))=="string"){if(n==="")throw new he(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uT(e)&&n.indexOf("/")!==-1)throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(ot.fromString(n));if(!_e.isDocumentKey(s))throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return j0(r,new _e(s))}if(n instanceof Et)return j0(r,n._key);throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uf(n)}.`)}function wE(r,e){if(!Array.isArray(r)||r.length===0)throw new he(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hS(r,e){const n=function(o,u){for(const h of o)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new he(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class J2{convertValue(e,n="none"){switch(Ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Is(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ps(e,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(e){const n=e.fields?.[Fh].arrayValue?.values?.map(s=>It(s.doubleValue));return new Fr(n)}convertGeoPoint(e){return new Br(It(e.latitude),It(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=ff(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Nu(e));default:return null}}convertTimestamp(e){const n=Cs(e);return new ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ot.fromString(e);Ye(NT(s),9688,{name:e});const o=new Ou(s.get(1),s.get(3)),u=new _e(s.popFirst(5));return o.isEqual(n)||Ei(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}class yu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ca extends lS{constructor(e,n,s,o,u,h){super(e,n,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Nh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(wf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ca._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ca._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ca._jsonSchema={type:Vt("string",Ca._jsonSchemaVersion),bundleSource:Vt("string","DocumentSnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class Nh extends Ca{data(e={}){return super.data(e)}}class Ia{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new yu(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Nh(this._firestore,this._userDataWriter,s.key,s,new yu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(m=>{const p=new Nh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new yu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const p=new Nh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new yu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,b=-1;return m.type!==0&&(g=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),b=h.indexOf(m.doc.key)),{type:eD(m.type),doc:p,oldIndex:g,newIndex:b}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ia._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach(u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function eD(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(r){r=xn(r,Et);const e=xn(r.firestore,Ti);return F2(Ku(e),r._key).then(n=>mS(e,r,n))}Ia._jsonSchemaVersion="firestore/querySnapshot/1.0",Ia._jsonSchema={type:Vt("string",Ia._jsonSchemaVersion),bundleSource:Vt("string","QuerySnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class Tg extends J2{constructor(e){super(),this.firestore=e}convertBytes(e){return new nr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,n)}}function Ms(r){r=xn(r,Ls);const e=xn(r.firestore,Ti),n=Ku(e),s=new Tg(e);return uS(r._query),q2(n,r._query).then(o=>new Ia(e,s,r,o))}function tD(r,e,n){r=xn(r,Et);const s=xn(r.firestore,Ti),o=bg(r.converter,e,n);return Rf(s,[mg(Yu(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,Rn.none())])}function Si(r,e,n,...s){r=xn(r,Et);const o=xn(r.firestore,Ti),u=Yu(o);let h;return h=typeof(e=lt(e))=="string"||e instanceof Qu?iS(u,"updateDoc",r._key,e,n,s):rS(u,"updateDoc",r._key,e),Rf(o,[h.toMutation(r._key,Rn.exists(!0))])}function Tp(r,e){const n=xn(r.firestore,Ti),s=hn(r),o=bg(r.converter,e);return Rf(n,[mg(Yu(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,Rn.exists(!1))]).then(()=>s)}function dS(r,...e){r=lt(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||TE(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(TE(e[s])){const p=e[s];e[s]=p.next?.bind(p),e[s+1]=p.error?.bind(p),e[s+2]=p.complete?.bind(p)}let u,h,m;if(r instanceof Et)h=xn(r.firestore,Ti),m=df(r._key.path),u={next:p=>{e[s]&&e[s](mS(h,r,p))},error:e[s+1],complete:e[s+2]};else{const p=xn(r,Ls);h=xn(p.firestore,Ti),m=p._query;const g=new Tg(h);u={next:b=>{e[s]&&e[s](new Ia(h,g,p,b))},error:e[s+1],complete:e[s+2]},uS(r._query)}return function(g,b,S,w){const L=new fg(w),B=new ug(b,L,S);return g.asyncQueue.enqueueAndForget(async()=>ag(await Wh(g),B)),()=>{L.Nu(),g.asyncQueue.enqueueAndForget(async()=>og(await Wh(g),B))}}(Ku(h),m,o,u)}function Rf(r,e){return function(s,o){const u=new yi;return s.asyncQueue.enqueueAndForget(async()=>D2(await B2(s),o,u)),u.promise}(Ku(r),e)}function mS(r,e,n){const s=n.docs.get(e._key),o=new Tg(r);return new Ca(r,o,e._key,s,new yu(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Yu(e)}set(e,n,s){this._verifyNotCommitted();const o=qm(e,this._firestore),u=bg(o.converter,n,s),h=mg(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,s);return this._mutations.push(h.toMutation(o._key,Rn.none())),this}update(e,n,s,...o){this._verifyNotCommitted();const u=qm(e,this._firestore);let h;return h=typeof(n=lt(n))=="string"||n instanceof Qu?iS(this._dataReader,"WriteBatch.update",u._key,n,s,o):rS(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(h.toMutation(u._key,Rn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=qm(e,this._firestore);return this._mutations=this._mutations.concat(new Kp(n._key,Rn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new he(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qm(r,e){if((r=lt(r)).firestore!==e)throw new he(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function ws(){return new pg("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(r){return Ku(r=xn(r,Ti)),new nD(r,e=>Rf(r,e))}(function(e,n=!0){(function(o){el=o})(za),Oa(new xs("firestore",(s,{instanceIdentifier:o,options:u})=>{const h=s.getProvider("app").getImmediate(),m=new Ti(new XR(s.getProvider("auth-internal")),new JR(h,s.getProvider("app-check-internal")),function(g,b){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new he(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ou(g.options.projectId,b)}(h,o),h);return u={useFetchStreams:n,...u},m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),Lr(x0,R0,e),Lr(x0,R0,"esm2020")})();var rD="firebase",iD="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lr(rD,iD,"app");function pS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sD=pS,gS=new ju("auth","Firebase",pS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h=new Vp("@firebase/auth");function aD(r,...e){$h.logLevel<=Ue.WARN&&$h.warn(`Auth (${za}): ${r}`,...e)}function Oh(r,...e){$h.logLevel<=Ue.ERROR&&$h.error(`Auth (${za}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(r,...e){throw Ag(r,...e)}function qr(r,...e){return Ag(r,...e)}function yS(r,e,n){const s={...sD(),[e]:n};return new ju("auth","Firebase",s).create(e,{appName:r.name})}function vi(r){return yS(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ag(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return gS.create(r,...e)}function Ae(r,e,...n){if(!r)throw Ag(e,...n)}function pi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Oh(e),new Error(e)}function Ai(r,e){r||pi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(){return typeof self<"u"&&self.location?.href||""}function oD(){return xE()==="http:"||xE()==="https:"}function xE(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oD()||Rx()||"connection"in navigator)?navigator.onLine:!0}function uD(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ai(n>e,"Short delay should be less than long delay!"),this.isMobile=Ax()||Cx()}get(){return lD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(r,e){Ai(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fD=new Xu(3e4,6e4);function js(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Ri(r,e,n,s,o={}){return _S(r,o,async()=>{let u={},h={};s&&(e==="GET"?h=s:u={body:JSON.stringify(s)});const m=zu({key:r.config.apiKey,...h}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g={method:e,headers:p,...u};return xx()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&Vs(r.emulatorConfig.host)&&(g.credentials="include"),vS.fetch()(await ES(r,r.config.apiHost,n,m),g)})}async function _S(r,e,n){r._canInitEmulator=!1;const s={...cD,...e};try{const o=new mD(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw Eh(r,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const m=u.ok?h.errorMessage:h.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eh(r,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw Eh(r,"email-already-in-use",h);if(p==="USER_DISABLED")throw Eh(r,"user-disabled",h);const b=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw yS(r,b,g);vr(r,b)}}catch(o){if(o instanceof Kr)throw o;vr(r,"network-request-failed",{message:String(o)})}}async function $u(r,e,n,s,o={}){const u=await Ri(r,e,n,s,o);return"mfaPendingCredential"in u&&vr(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function ES(r,e,n,s){const o=`${e}${n}?${s}`,u=r,h=u.config.emulator?wg(r.config,o):`${r.config.apiScheme}://${o}`;return hD.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function dD(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(qr(this.auth,"network-request-failed")),fD.get())})}}function Eh(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=qr(r,e,s);return o.customData._tokenResponse=n,o}function RE(r){return r!==void 0&&r.enterprise!==void 0}class pD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return dD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function gD(r,e){return Ri(r,"GET","/v2/recaptchaConfig",js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yD(r,e){return Ri(r,"POST","/v1/accounts:delete",e)}async function Zh(r,e){return Ri(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vD(r,e=!1){const n=lt(r),s=await n.getIdToken(e),o=xg(s);Ae(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u?.sign_in_provider;return{claims:o,token:s,authTime:Su(Hm(o.auth_time)),issuedAtTime:Su(Hm(o.iat)),expirationTime:Su(Hm(o.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Hm(r){return Number(r)*1e3}function xg(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Oh("JWT malformed, contained fewer than 3 sections"),null;try{const o=xb(n);return o?JSON.parse(o):(Oh("Failed to decode base64 JWT payload"),null)}catch(o){return Oh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function CE(r){const e=xg(r);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $o(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Kr&&_D(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function _D({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Su(this.lastLoginAt),this.creationTime=Su(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jh(r){const e=r.auth,n=await r.getIdToken(),s=await $o(r,Zh(e,{idToken:n}));Ae(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const u=o.providerUserInfo?.length?bS(o.providerUserInfo):[],h=TD(r.providerData,u),m=r.isAnonymous,p=!(r.email&&o.passwordHash)&&!h?.length,g=m?p:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Ap(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(r,b)}async function bD(r){const e=lt(r);await Jh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function TD(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function bS(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SD(r,e){const n=await _S(r,{},async()=>{const s=zu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,h=await ES(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return r.emulatorConfig&&Vs(r.emulatorConfig.host)&&(p.credentials="include"),vS.fetch()(h,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function AD(r,e){return Ri(r,"POST","/v2/accounts:revokeToken",js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):CE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const n=CE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await SD(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,h=new Bo;return s&&(Ae(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Ae(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(Ae(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bo,this.toJSON())}_performRefresh(){return pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(r,e){Ae(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class gr{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new ED(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ap(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await $o(this,this.stsTokenManager.getToken(this.auth,e));return Ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return vD(this,e)}reload(){return bD(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new gr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Jh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(vi(this.auth));const e=await this.getIdToken();return await $o(this,yD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,h=n.photoURL??void 0,m=n.tenantId??void 0,p=n._redirectEventId??void 0,g=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:S,emailVerified:w,isAnonymous:L,providerData:B,stsTokenManager:X}=n;Ae(S&&X,e,"internal-error");const j=Bo.fromJSON(this.name,X);Ae(typeof S=="string",e,"internal-error"),us(s,e.name),us(o,e.name),Ae(typeof w=="boolean",e,"internal-error"),Ae(typeof L=="boolean",e,"internal-error"),us(u,e.name),us(h,e.name),us(m,e.name),us(p,e.name),us(g,e.name),us(b,e.name);const se=new gr({uid:S,auth:e,email:o,emailVerified:w,displayName:s,isAnonymous:L,photoURL:h,phoneNumber:u,tenantId:m,stsTokenManager:j,createdAt:g,lastLoginAt:b});return B&&Array.isArray(B)&&(se.providerData=B.map(W=>({...W}))),p&&(se._redirectEventId=p),se}static async _fromIdTokenResponse(e,n,s=!1){const o=new Bo;o.updateFromServerResponse(n);const u=new gr({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Jh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Ae(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?bS(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!u?.length,m=new Bo;m.updateFromIdToken(s);const p=new gr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Ap(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE=new Map;function gi(r){Ai(r instanceof Function,"Expected a class definition");let e=IE.get(r);return e?(Ai(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,IE.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}TS.type="NONE";const DE=TS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(r,e,n){return`firebase:${r}:${e}:${n}`}class Fo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=kh(this.userKey,o.apiKey,u),this.fullPersistenceKey=kh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Zh(this.auth,{idToken:e}).catch(()=>{});return n?gr._fromGetAccountInfoResponse(this.auth,n,e):null}return gr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Fo(gi(DE),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||gi(DE);const h=kh(s,e.config.apiKey,e.name);let m=null;for(const g of n)try{const b=await g._get(h);if(b){let S;if(typeof b=="string"){const w=await Zh(e,{idToken:b}).catch(()=>{});if(!w)break;S=await gr._fromGetAccountInfoResponse(e,w,b)}else S=gr._fromJSON(e,b);g!==u&&(m=S),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Fo(u,e,s):(u=p[0],m&&await u._set(h,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(h)}catch{}})),new Fo(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(xS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(SS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CS(e))return"Blackberry";if(IS(e))return"Webos";if(AS(e))return"Safari";if((e.includes("chrome/")||wS(e))&&!e.includes("edge/"))return"Chrome";if(RS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function SS(r=cn()){return/firefox\//i.test(r)}function AS(r=cn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wS(r=cn()){return/crios\//i.test(r)}function xS(r=cn()){return/iemobile/i.test(r)}function RS(r=cn()){return/android/i.test(r)}function CS(r=cn()){return/blackberry/i.test(r)}function IS(r=cn()){return/webos/i.test(r)}function Rg(r=cn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function wD(r=cn()){return Rg(r)&&!!window.navigator?.standalone}function xD(){return Ix()&&document.documentMode===10}function DS(r=cn()){return Rg(r)||RS(r)||IS(r)||CS(r)||/windows phone/i.test(r)||xS(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(r,e=[]){let n;switch(r){case"Browser":n=NE(cn());break;case"Worker":n=`${NE(cn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${za}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((h,m)=>{try{const p=e(u);h(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CD(r,e={}){return Ri(r,"GET","/v2/passwordPolicy",js(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=6;class DD{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??ID,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new OE(this),this.idTokenSubscription=new OE(this),this.beforeStateQueue=new RD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Fo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Zh(this,{idToken:e}),s=await gr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(jn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===h)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Jh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jn(this.app))return Promise.reject(vi(this));const n=e?lt(e):null;return n&&Ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(vi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jn(this.app)?Promise.reject(vi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CD(this),n=new DD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ju("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await AD(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gi(e)||this._popupRedirectResolver;Ae(n,this,"argument-error"),this.redirectPersistenceManager=await Fo.create(this,[gi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(m,this,"internal-error"),m.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{h=!0,p()}}else{const p=e.addObserver(n);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=NS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&aD(`Error while retrieving App Check token: ${e.error}`),e?.token}}function qa(r){return lt(r)}class OE{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ux(n=>this.observer=n)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OD(r){Cf=r}function OS(r){return Cf.loadJS(r)}function kD(){return Cf.recaptchaEnterpriseScript}function MD(){return Cf.gapiScript}function VD(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class PD{constructor(){this.enterprise=new UD}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class UD{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const LD="recaptcha-enterprise",kS="NO_RECAPTCHA";class jD{constructor(e){this.type=LD,this.auth=qa(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,m)=>{gD(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new pD(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,h(g.siteKey)}}).catch(p=>{m(p)})})}function o(u,h,m){const p=window.grecaptcha;RE(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(g=>{h(g)}).catch(()=>{h(kS)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new PD().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{s(this.auth).then(m=>{if(!n&&RE(window.grecaptcha))o(m,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=kD();p.length!==0&&(p+=m),OS(p).then(()=>{o(m,u,h)}).catch(g=>{h(g)})}}).catch(m=>{h(m)})})}}async function kE(r,e,n,s=!1,o=!1){const u=new jD(r);let h;if(o)h=kS;else try{h=await u.verify(n)}catch{h=await u.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:h}):Object.assign(m,{captchaResponse:h}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function wp(r,e,n,s,o){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await kE(r,e,n,n==="getOobCode");return s(r,u)}else return s(r,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await kE(r,e,n,n==="getOobCode");return s(r,h)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(r,e){const n=lf(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Na(u,e??{}))return o;vr(o,"already-initialized")}return n.initialize({options:e})}function BD(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(gi);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function FD(r,e,n){const s=qa(r);Ae(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=MS(e),{host:h,port:m}=qD(e),p=m===null?"":`:${m}`,g={url:`${u}//${h}${p}/`},b=Object.freeze({host:h,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ae(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ae(Na(g,s.config.emulator)&&Na(b,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=b,s.settings.appVerificationDisabledForTesting=!0,Vs(h)?(kp(`${u}//${h}${p}`),Mp("Auth",!0)):HD()}function MS(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function qD(r){const e=MS(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:ME(s.substr(u.length+1))}}else{const[u,h]=s.split(":");return{host:u,port:ME(h)}}}function ME(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function HD(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pi("not implemented")}_getIdTokenResponse(e){return pi("not implemented")}_linkToIdToken(e,n){return pi("not implemented")}_getReauthenticationResolver(e){return pi("not implemented")}}async function GD(r,e){return Ri(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KD(r,e){return $u(r,"POST","/v1/accounts:signInWithPassword",js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QD(r,e){return $u(r,"POST","/v1/accounts:signInWithEmailLink",js(r,e))}async function YD(r,e){return $u(r,"POST","/v1/accounts:signInWithEmailLink",js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu extends Cg{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Lu(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Lu(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wp(e,n,"signInWithPassword",KD);case"emailLink":return QD(e,{email:this._email,oobCode:this._password});default:vr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wp(e,s,"signUpPassword",GD);case"emailLink":return YD(e,{idToken:n,email:this._email,oobCode:this._password});default:vr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(r,e){return $u(r,"POST","/v1/accounts:signInWithIdp",js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD="http://localhost";class Va extends Cg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Va(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):vr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const h=new Va(s,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return qo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,qo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qo(e,n)}buildRequest(){const e={requestUri:WD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=zu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $D(r){const e=fu(du(r)).link,n=e?fu(du(e)).deep_link_id:null,s=fu(du(r)).deep_link_id;return(s?fu(du(s)).link:null)||s||n||e||r}class Ig{constructor(e){const n=fu(du(e)),s=n.apiKey??null,o=n.oobCode??null,u=XD(n.mode??null);Ae(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=$D(e);try{return new Ig(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(){this.providerId=sl.PROVIDER_ID}static credential(e,n){return Lu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Ig.parseLink(n);return Ae(s,"argument-error"),Lu._fromEmailAndCode(e,s.code,s.tenantId)}}sl.PROVIDER_ID="password";sl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";sl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu extends VS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends Zu{constructor(){super("facebook.com")}static credential(e){return Va._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.FACEBOOK_SIGN_IN_METHOD="facebook.com";ds.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends Zu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Va._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return ms.credential(n,s)}catch{return null}}}ms.GOOGLE_SIGN_IN_METHOD="google.com";ms.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends Zu{constructor(){super("github.com")}static credential(e){return Va._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ps.credential(e.oauthAccessToken)}catch{return null}}}ps.GITHUB_SIGN_IN_METHOD="github.com";ps.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends Zu{constructor(){super("twitter.com")}static credential(e,n){return Va._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return gs.credential(n,s)}catch{return null}}}gs.TWITTER_SIGN_IN_METHOD="twitter.com";gs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZD(r,e){return $u(r,"POST","/v1/accounts:signUp",js(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await gr._fromIdTokenResponse(e,s,o),h=VE(s);return new Pa({user:u,providerId:h,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=VE(s);return new Pa({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function VE(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef extends Kr{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,ef.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new ef(e,n,s,o)}}function PS(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?ef._fromErrorAndOperation(r,u,e,s):u})}async function JD(r,e,n=!1){const s=await $o(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Pa._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eN(r,e,n=!1){const{auth:s}=r;if(jn(s.app))return Promise.reject(vi(s));const o="reauthenticate";try{const u=await $o(r,PS(s,o,e,r),n);Ae(u.idToken,s,"internal-error");const h=xg(u.idToken);Ae(h,s,"internal-error");const{sub:m}=h;return Ae(r.uid===m,s,"user-mismatch"),Pa._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&vr(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function US(r,e,n=!1){if(jn(r.app))return Promise.reject(vi(r));const s="signIn",o=await PS(r,s,e),u=await Pa._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}async function tN(r,e){return US(qa(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LS(r){const e=qa(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function nN(r,e,n){if(jn(r.app))return Promise.reject(vi(r));const s=qa(r),h=await wp(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ZD).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&LS(r),p}),m=await Pa._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(m.user),m}function rN(r,e,n){return jn(r.app)?Promise.reject(vi(r)):tN(lt(r),sl.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&LS(r),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iN(r,e){return Ri(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sN(r,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=lt(r),u={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},h=await $o(s,iN(s.auth,u));s.displayName=h.displayName||null,s.photoURL=h.photoUrl||null;const m=s.providerData.find(({providerId:p})=>p==="password");m&&(m.displayName=s.displayName,m.photoURL=s.photoURL),await s._updateTokensIfNecessary(h)}function aN(r,e,n,s){return lt(r).onIdTokenChanged(e,n,s)}function oN(r,e,n){return lt(r).beforeAuthStateChanged(e,n)}function lN(r,e,n,s){return lt(r).onAuthStateChanged(e,n,s)}function PE(r){return lt(r).signOut()}const tf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(tf,"1"),this.storage.removeItem(tf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=1e3,cN=10;class zS extends jS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=DS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,m,p)=>{this.notifyListeners(h,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!n&&this.localCache[s]===h||this.notifyListeners(s,h)},u=this.storage.getItem(s);xD()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,cN):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},uN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}zS.type="LOCAL";const hN=zS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS extends jS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BS.type="SESSION";const FS=BS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new If(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,h=this.handlersMap[o];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(h).map(async g=>g(n.origin,u)),p=await fN(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}If.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((m,p)=>{const g=Dg("",20);o.port1.start();const b=setTimeout(()=>{p(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(S){const w=S;if(w.data.eventId===g)switch(w.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(w.data.response);break;default:clearTimeout(b),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(){return window}function mN(r){Hr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(){return typeof Hr().WorkerGlobalScope<"u"&&typeof Hr().importScripts=="function"}async function pN(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gN(){return navigator?.serviceWorker?.controller||null}function yN(){return qS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="firebaseLocalStorageDb",vN=1,nf="firebaseLocalStorage",GS="fbase_key";class Ju{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Df(r,e){return r.transaction([nf],e?"readwrite":"readonly").objectStore(nf)}function _N(){const r=indexedDB.deleteDatabase(HS);return new Ju(r).toPromise()}function xp(){const r=indexedDB.open(HS,vN);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(nf,{keyPath:GS})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(nf)?e(s):(s.close(),await _N(),e(await xp()))})})}async function UE(r,e,n){const s=Df(r,!0).put({[GS]:e,value:n});return new Ju(s).toPromise()}async function EN(r,e){const n=Df(r,!1).get(e),s=await new Ju(n).toPromise();return s===void 0?null:s.value}function LE(r,e){const n=Df(r,!0).delete(e);return new Ju(n).toPromise()}const bN=800,TN=3;class KS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>TN)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=If._getInstance(yN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await pN(),!this.activeServiceWorker)return;this.sender=new dN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xp();return await UE(e,tf,"1"),await LE(e,tf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>UE(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>EN(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>LE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Df(o,!1).getAll();return new Ju(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KS.type="LOCAL";const SN=KS;new Xu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(r,e){return e?gi(e):(Ae(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng extends Cg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function wN(r){return US(r.auth,new Ng(r),r.bypassAuthState)}function xN(r){const{auth:e,user:n}=r;return Ae(n,e,"internal-error"),eN(n,new Ng(r),r.bypassAuthState)}async function RN(r){const{auth:e,user:n}=r;return Ae(n,e,"internal-error"),JD(n,new Ng(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:h,type:m}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wN;case"linkViaPopup":case"linkViaRedirect":return RN;case"reauthViaPopup":case"reauthViaRedirect":return xN;default:vr(this.auth,"internal-error")}}resolve(e){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=new Xu(2e3,1e4);class jo extends QS{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,jo.currentPopupAction&&jo.currentPopupAction.cancel(),jo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){Ai(this.filter.length===1,"Popup operations only handle one event");const e=Dg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(qr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(qr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,jo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CN.get())};e()}}jo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN="pendingRedirect",Mh=new Map;class DN extends QS{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Mh.get(this.auth._key());if(!e){try{const s=await NN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Mh.set(this.auth._key(),e)}return this.bypassAuthState||Mh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function NN(r,e){const n=MN(e),s=kN(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function ON(r,e){Mh.set(r._key(),e)}function kN(r){return gi(r._redirectPersistence)}function MN(r){return kh(IN,r.config.apiKey,r.name)}async function VN(r,e,n=!1){if(jn(r.app))return Promise.reject(vi(r));const s=qa(r),o=AN(s,e),h=await new DN(s,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=10*60*1e3;class UN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!YS(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(qr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PN&&this.cachedEventUids.clear(),this.cachedEventUids.has(jE(e))}saveEventToCache(e){this.cachedEventUids.add(jE(e)),this.lastProcessedEventTime=Date.now()}}function jE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function YS({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function LN(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YS(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jN(r,e={}){return Ri(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BN=/^https?/;async function FN(r){if(r.config.emulator)return;const{authorizedDomains:e}=await jN(r);for(const n of e)try{if(qN(n))return}catch{}vr(r,"unauthorized-domain")}function qN(r){const e=Sp(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===s}if(!BN.test(n))return!1;if(zN.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=new Xu(3e4,6e4);function zE(){const r=Hr().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function GN(r){return new Promise((e,n)=>{function s(){zE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zE(),n(qr(r,"network-request-failed"))},timeout:HN.get()})}if(Hr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Hr().gapi?.load)s();else{const o=VD("iframefcb");return Hr()[o]=()=>{gapi.load?s():n(qr(r,"network-request-failed"))},OS(`${MD()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw Vh=null,e})}let Vh=null;function KN(r){return Vh=Vh||GN(r),Vh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=new Xu(5e3,15e3),YN="__/auth/iframe",WN="emulator/auth/iframe",XN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$N=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZN(r){const e=r.config;Ae(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?wg(e,WN):`https://${r.config.authDomain}/${YN}`,s={apiKey:e.apiKey,appName:r.name,v:za},o=$N.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${zu(s).slice(1)}`}async function JN(r){const e=await KN(r),n=Hr().gapi;return Ae(n,r,"internal-error"),e.open({where:document.body,url:ZN(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XN,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const h=qr(r,"network-request-failed"),m=Hr().setTimeout(()=>{u(h)},QN.get());function p(){Hr().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tO=500,nO=600,rO="_blank",iO="http://localhost";class BE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sO(r,e,n,s=tO,o=nO){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p={...eO,width:s.toString(),height:o.toString(),top:u,left:h},g=cn().toLowerCase();n&&(m=wS(g)?rO:n),SS(g)&&(e=e||iO,p.scrollbars="yes");const b=Object.entries(p).reduce((w,[L,B])=>`${w}${L}=${B},`,"");if(wD(g)&&m!=="_self")return aO(e||"",m),new BE(null);const S=window.open(e||"",m,b);Ae(S,r,"popup-blocked");try{S.focus()}catch{}return new BE(S)}function aO(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO="__/auth/handler",lO="emulator/auth/handler",uO=encodeURIComponent("fac");async function FE(r,e,n,s,o,u){Ae(r.config.authDomain,r,"auth-domain-config-required"),Ae(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:za,eventId:o};if(e instanceof VS){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",Px(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,S]of Object.entries({}))h[b]=S}if(e instanceof Zu){const b=e.getScopes().filter(S=>S!=="");b.length>0&&(h.scopes=b.join(","))}r.tenantId&&(h.tid=r.tenantId);const m=h;for(const b of Object.keys(m))m[b]===void 0&&delete m[b];const p=await r._getAppCheckToken(),g=p?`#${uO}=${encodeURIComponent(p)}`:"";return`${cO(r)}?${zu(m).slice(1)}${g}`}function cO({config:r}){return r.emulator?wg(r,lO):`https://${r.authDomain}/${oO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="webStorageSupport";class hO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=FS,this._completeRedirectFn=VN,this._overrideRedirectResult=ON}async _openPopup(e,n,s,o){Ai(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await FE(e,n,s,Sp(),o);return sO(e,u,Dg())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await FE(e,n,s,Sp(),o);return mN(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Ai(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await JN(e),s=new UN(e);return n.register("authEvent",o=>(Ae(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gm,{type:Gm},o=>{const u=o?.[0]?.[Gm];u!==void 0&&n(!!u),vr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=FN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return DS()||AS()||Rg()}}const fO=hO;var qE="@firebase/auth",HE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pO(r){Oa(new xs("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=s.options;Ae(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:h,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NS(r)},g=new ND(s,o,u,p);return BD(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Oa(new xs("auth-internal",e=>{const n=qa(e.getProvider("auth").getImmediate());return(s=>new dO(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Lr(qE,HE,mO(r)),Lr(qE,HE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO=5*60,yO=Db("authIdTokenMaxAge")||gO;let GE=null;const vO=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>yO)return;const o=n?.token;GE!==o&&(GE=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function _O(r=Up()){const e=lf(r,"auth");if(e.isInitialized())return e.getImmediate();const n=zD(r,{popupRedirectResolver:fO,persistence:[SN,hN,FS]}),s=Db("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const h=vO(u.toString());oN(n,h,()=>h(n.currentUser)),aN(n,m=>h(m))}}const o=Rb("auth");return o&&FD(n,`http://${o}`),n}function EO(){return document.getElementsByTagName("head")?.[0]??document}OD({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=qr("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",EO().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pO("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="firebasestorage.googleapis.com",XS="storageBucket",bO=2*60*1e3,TO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt extends Kr{constructor(e,n,s=0){super(Km(e),`Firebase Storage: ${n} (${Km(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Tt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Km(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var bt;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(bt||(bt={}));function Km(r){return"storage/"+r}function Og(){const r="An unknown error occurred, please check the error payload for server response.";return new Tt(bt.UNKNOWN,r)}function SO(r){return new Tt(bt.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function AO(r){return new Tt(bt.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function wO(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Tt(bt.UNAUTHENTICATED,r)}function xO(){return new Tt(bt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function RO(r){return new Tt(bt.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function CO(){return new Tt(bt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function IO(){return new Tt(bt.CANCELED,"User canceled the upload/download.")}function DO(r){return new Tt(bt.INVALID_URL,"Invalid URL '"+r+"'.")}function NO(r){return new Tt(bt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function OO(){return new Tt(bt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+XS+"' property when initializing the app?")}function kO(){return new Tt(bt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function MO(){return new Tt(bt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function VO(r){return new Tt(bt.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Rp(r){return new Tt(bt.INVALID_ARGUMENT,r)}function $S(){return new Tt(bt.APP_DELETED,"The Firebase app was deleted.")}function PO(r){return new Tt(bt.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Au(r,e){return new Tt(bt.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function cu(r){throw new Tt(bt.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Fn.makeFromUrl(e,n)}catch{return new Fn(e,"")}if(s.path==="")return s;throw NO(e)}static makeFromUrl(e,n){let s=null;const o="([A-Za-z0-9.\\-_]+)";function u(ue){ue.path.charAt(ue.path.length-1)==="/"&&(ue.path_=ue.path_.slice(0,-1))}const h="(/(.*))?$",m=new RegExp("^gs://"+o+h,"i"),p={bucket:1,path:3};function g(ue){ue.path_=decodeURIComponent(ue.path)}const b="v[A-Za-z0-9_]+",S=n.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",L=new RegExp(`^https?://${S}/${b}/b/${o}/o${w}`,"i"),B={bucket:1,path:3},X=n===WS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,j="([^?#]*)",se=new RegExp(`^https?://${X}/${o}/${j}`,"i"),te=[{regex:m,indices:p,postModify:u},{regex:L,indices:B,postModify:g},{regex:se,indices:{bucket:1,path:2},postModify:g}];for(let ue=0;ue<te.length;ue++){const ae=te[ue],pe=ae.regex.exec(e);if(pe){const O=pe[ae.indices.bucket];let R=pe[ae.indices.path];R||(R=""),s=new Fn(O,R),ae.postModify(s);break}}if(s==null)throw DO(e);return s}}class UO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(r,e,n){let s=1,o=null,u=null,h=!1,m=0;function p(){return m===2}let g=!1;function b(...j){g||(g=!0,e.apply(null,j))}function S(j){o=setTimeout(()=>{o=null,r(L,p())},j)}function w(){u&&clearTimeout(u)}function L(j,...se){if(g){w();return}if(j){w(),b.call(null,j,...se);return}if(p()||h){w(),b.call(null,j,...se);return}s<64&&(s*=2);let te;m===1?(m=2,te=0):te=(s+Math.random())*1e3,S(te)}let B=!1;function X(j){B||(B=!0,w(),!g&&(o!==null?(j||(m=2),clearTimeout(o),S(0)):j||(m=1)))}return S(0),u=setTimeout(()=>{h=!0,X(!0)},n),X}function jO(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(r){return r!==void 0}function BO(r){return typeof r=="object"&&!Array.isArray(r)}function kg(r){return typeof r=="string"||r instanceof String}function KE(r){return Mg()&&r instanceof Blob}function Mg(){return typeof Blob<"u"}function QE(r,e,n,s){if(s<e)throw Rp(`Invalid value for '${r}'. Expected ${e} or greater.`);if(s>n)throw Rp(`Invalid value for '${r}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(r,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${r}`}function ZS(r){const e=encodeURIComponent;let n="?";for(const s in r)if(r.hasOwnProperty(s)){const o=e(s)+"="+e(r[s]);n=n+o+"&"}return n=n.slice(0,-1),n}var Da;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Da||(Da={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(r,e){const n=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,u=e.indexOf(r)!==-1;return n||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e,n,s,o,u,h,m,p,g,b,S,w=!0,L=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=h,this.callback_=m,this.errorCallback_=p,this.timeout_=g,this.progressCallback_=b,this.connectionFactory_=S,this.retry=w,this.isUsingEmulator=L,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((B,X)=>{this.resolve_=B,this.reject_=X,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new bh(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const h=m=>{const p=m.loaded,g=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,g)};this.progressCallback_!==null&&u.addUploadProgressListener(h),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(h),this.pendingConnection_=null;const m=u.getErrorCode()===Da.NO_ERROR,p=u.getStatus();if(!m||FO(p,this.additionalRetryCodes_)&&this.retry){const b=u.getErrorCode()===Da.ABORT;s(!1,new bh(!1,null,b));return}const g=this.successCodes_.indexOf(p)!==-1;s(!0,new bh(g,u))})},n=(s,o)=>{const u=this.resolve_,h=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(m,m.getResponse());zO(p)?u(p):u()}catch(p){h(p)}else if(m!==null){const p=Og();p.serverResponse=m.getErrorText(),this.errorCallback_?h(this.errorCallback_(m,p)):h(p)}else if(o.canceled){const p=this.appDelete_?$S():IO();h(p)}else{const p=CO();h(p)}};this.canceled_?n(!1,new bh(!1,null,!0)):this.backoffId_=LO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&jO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class bh{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function HO(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function GO(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function KO(r,e){e&&(r["X-Firebase-GMPID"]=e)}function QO(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function YO(r,e,n,s,o,u,h=!0,m=!1){const p=ZS(r.urlParams),g=r.url+p,b=Object.assign({},r.headers);return KO(b,e),HO(b,n),GO(b,u),QO(b,s),new qO(g,r.method,b,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,h,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function XO(...r){const e=WO();if(e!==void 0){const n=new e;for(let s=0;s<r.length;s++)n.append(r[s]);return n.getBlob()}else{if(Mg())return new Blob(r);throw new Tt(bt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function $O(r,e,n){return r.webkitSlice?r.webkitSlice(e,n):r.mozSlice?r.mozSlice(e,n):r.slice?r.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(r){if(typeof atob>"u")throw VO("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Qm{constructor(e,n){this.data=e,this.contentType=n||null}}function JO(r,e){switch(r){case Ur.RAW:return new Qm(JS(e));case Ur.BASE64:case Ur.BASE64URL:return new Qm(e1(r,e));case Ur.DATA_URL:return new Qm(tk(e),nk(e))}throw Og()}function JS(r){const e=[];for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<r.length-1&&(r.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const u=s,h=r.charCodeAt(++n);s=65536|(u&1023)<<10|h&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function ek(r){let e;try{e=decodeURIComponent(r)}catch{throw Au(Ur.DATA_URL,"Malformed data URL.")}return JS(e)}function e1(r,e){switch(r){case Ur.BASE64:{const o=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(o||u)throw Au(r,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Ur.BASE64URL:{const o=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(o||u)throw Au(r,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=ZO(e)}catch(o){throw o.message.includes("polyfill")?o:Au(r,"Invalid character found")}const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}class t1{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Au(Ur.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=rk(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function tk(r){const e=new t1(r);return e.base64?e1(Ur.BASE64,e.rest):ek(e.rest)}function nk(r){return new t1(r).contentType}function rk(r,e){return r.length>=e.length?r.substring(r.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,n){let s=0,o="";KE(e)?(this.data_=e,s=e.size,o=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,n){if(KE(this.data_)){const s=this.data_,o=$O(s,e,n);return o===null?null:new ys(o)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new ys(s,!0)}}static getBlob(...e){if(Mg()){const n=e.map(s=>s instanceof ys?s.data_:s);return new ys(XO.apply(null,n))}else{const n=e.map(h=>kg(h)?JO(Ur.RAW,h).data:h.data_);let s=0;n.forEach(h=>{s+=h.byteLength});const o=new Uint8Array(s);let u=0;return n.forEach(h=>{for(let m=0;m<h.length;m++)o[u++]=h[m]}),new ys(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(r){let e;try{e=JSON.parse(r)}catch{return null}return BO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function sk(r,e){const n=e.split("/").filter(s=>s.length>0).join("/");return r.length===0?n:r+"/"+n}function r1(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(r,e){return e}class yn{constructor(e,n,s,o){this.server=e,this.local=n||e,this.writable=!!s,this.xform=o||ak}}let Th=null;function ok(r){return!kg(r)||r.length<2?r:r1(r)}function i1(){if(Th)return Th;const r=[];r.push(new yn("bucket")),r.push(new yn("generation")),r.push(new yn("metageneration")),r.push(new yn("name","fullPath",!0));function e(u,h){return ok(h)}const n=new yn("name");n.xform=e,r.push(n);function s(u,h){return h!==void 0?Number(h):h}const o=new yn("size");return o.xform=s,r.push(o),r.push(new yn("timeCreated")),r.push(new yn("updated")),r.push(new yn("md5Hash",null,!0)),r.push(new yn("cacheControl",null,!0)),r.push(new yn("contentDisposition",null,!0)),r.push(new yn("contentEncoding",null,!0)),r.push(new yn("contentLanguage",null,!0)),r.push(new yn("contentType",null,!0)),r.push(new yn("metadata","customMetadata",!0)),Th=r,Th}function lk(r,e){function n(){const s=r.bucket,o=r.fullPath,u=new Fn(s,o);return e._makeStorageReference(u)}Object.defineProperty(r,"ref",{get:n})}function uk(r,e,n){const s={};s.type="file";const o=n.length;for(let u=0;u<o;u++){const h=n[u];s[h.local]=h.xform(s,e[h.server])}return lk(s,r),s}function s1(r,e,n){const s=n1(e);return s===null?null:uk(r,s,n)}function ck(r,e,n,s){const o=n1(e);if(o===null||!kg(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const h=encodeURIComponent;return u.split(",").map(g=>{const b=r.bucket,S=r.fullPath,w="/b/"+h(b)+"/o/"+h(S),L=Vg(w,n,s),B=ZS({alt:"media",token:g});return L+B})[0]}function hk(r,e){const n={},s=e.length;for(let o=0;o<s;o++){const u=e[o];u.writable&&(n[u.server]=r[u.local])}return JSON.stringify(n)}class a1{constructor(e,n,s,o){this.url=e,this.method=n,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(r){if(!r)throw Og()}function fk(r,e){function n(s,o){const u=s1(r,o,e);return o1(u!==null),u}return n}function dk(r,e){function n(s,o){const u=s1(r,o,e);return o1(u!==null),ck(u,o,r.host,r._protocol)}return n}function l1(r){function e(n,s){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=xO():o=wO():n.getStatus()===402?o=AO(r.bucket):n.getStatus()===403?o=RO(r.path):o=s,o.status=n.getStatus(),o.serverResponse=s.serverResponse,o}return e}function mk(r){const e=l1(r);function n(s,o){let u=e(s,o);return s.getStatus()===404&&(u=SO(r.path)),u.serverResponse=o.serverResponse,u}return n}function pk(r,e,n){const s=e.fullServerUrl(),o=Vg(s,r.host,r._protocol),u="GET",h=r.maxOperationRetryTime,m=new a1(o,u,dk(r,n),h);return m.errorHandler=mk(e),m}function gk(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}function yk(r,e,n){const s=Object.assign({},n);return s.fullPath=r.path,s.size=e.size(),s.contentType||(s.contentType=gk(null,e)),s}function vk(r,e,n,s,o){const u=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function m(){let te="";for(let ue=0;ue<2;ue++)te=te+Math.random().toString().slice(2);return te}const p=m();h["Content-Type"]="multipart/related; boundary="+p;const g=yk(e,s,o),b=hk(g,n),S="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+b+`\r
--`+p+`\r
Content-Type: `+g.contentType+`\r
\r
`,w=`\r
--`+p+"--",L=ys.getBlob(S,s,w);if(L===null)throw kO();const B={name:g.fullPath},X=Vg(u,r.host,r._protocol),j="POST",se=r.maxUploadRetryTime,W=new a1(X,j,fk(r,n),se);return W.urlParams=B,W.headers=h,W.body=L.uploadData(),W.errorHandler=l1(e),W}class _k{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Da.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Da.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Da.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,o,u){if(this.sent_)throw cu("cannot .send() more than once");if(Vs(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),u!==void 0)for(const h in u)u.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,u[h].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw cu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw cu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw cu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw cu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Ek extends _k{initXhr(){this.xhr_.responseType="text"}}function u1(){return new Ek}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,n){this._service=e,n instanceof Fn?this._location=n:this._location=Fn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ua(e,n)}get root(){const e=new Fn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return r1(this._location.path)}get storage(){return this._service}get parent(){const e=ik(this._location.path);if(e===null)return null;const n=new Fn(this._location.bucket,e);return new Ua(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw PO(e)}}function bk(r,e,n){r._throwIfRoot("uploadBytes");const s=vk(r.storage,r._location,i1(),new ys(e,!0),n);return r.storage.makeRequestWithTokens(s,u1).then(o=>({metadata:o,ref:r}))}function Tk(r){r._throwIfRoot("getDownloadURL");const e=pk(r.storage,r._location,i1());return r.storage.makeRequestWithTokens(e,u1).then(n=>{if(n===null)throw MO();return n})}function Sk(r,e){const n=sk(r._location.path,e),s=new Fn(r._location.bucket,n);return new Ua(r.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(r){return/^[A-Za-z]+:\/\//.test(r)}function wk(r,e){return new Ua(r,e)}function c1(r,e){if(r instanceof Pg){const n=r;if(n._bucket==null)throw OO();const s=new Ua(n,n._bucket);return e!=null?c1(s,e):s}else return e!==void 0?Sk(r,e):r}function xk(r,e){if(e&&Ak(e)){if(r instanceof Pg)return wk(r,e);throw Rp("To use ref(service, url), the first argument must be a Storage instance.")}else return c1(r,e)}function YE(r,e){const n=e?.[XS];return n==null?null:Fn.makeFromBucketSpec(n,r)}function Rk(r,e,n,s={}){r.host=`${e}:${n}`;const o=Vs(e);o&&(kp(`https://${r.host}/b`),Mp("Storage",!0)),r._isUsingEmulator=!0,r._protocol=o?"https":"http";const{mockUserToken:u}=s;u&&(r._overrideAuthToken=typeof u=="string"?u:Nb(u,r.app.options.projectId))}class Pg{constructor(e,n,s,o,u,h=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=h,this._bucket=null,this._host=WS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=bO,this._maxUploadRetryTime=TO,this._requests=new Set,o!=null?this._bucket=Fn.makeFromBucketSpec(o,this._host):this._bucket=YE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Fn.makeFromBucketSpec(this._url,e):this._bucket=YE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){QE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){QE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ua(this,e)}_makeRequest(e,n,s,o,u=!0){if(this._deleted)return new UO($S());{const h=YO(e,this._appId,s,o,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,n){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,o).getPromise()}}const WE="@firebase/storage",XE="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1="storage";function f1(r,e,n){return r=lt(r),bk(r,e,n)}function d1(r){return r=lt(r),Tk(r)}function m1(r,e){return r=lt(r),xk(r,e)}function Ck(r=Up(),e){r=lt(r);const s=lf(r,h1).getImmediate({identifier:e}),o=Cb("storage");return o&&Ik(s,...o),s}function Ik(r,e,n,s={}){Rk(r,e,n,s)}function Dk(r,{instanceIdentifier:e}){const n=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new Pg(n,s,o,e,za)}function Nk(){Oa(new xs(h1,Dk,"PUBLIC").setMultipleInstances(!0)),Lr(WE,XE,""),Lr(WE,XE,"esm2020")}Nk();const Ok={apiKey:"AIzaSyD-7jepN9PAOze4SNQJ4pgYThvfwNylMpE",authDomain:"velas-santamarta.firebaseapp.com",projectId:"velas-santamarta",storageBucket:"velas-santamarta.firebasestorage.app",messagingSenderId:"643690285491",appId:"1:643690285491:web:3bc9600444cf0972ace3c6",measurementId:"G-VW13682S10"},Ug=Mb(Ok),wu=_O(Ug),Qe=G2(Ug),p1=Ck(Ug);function rr(r,...e){const[n,s]=z.useState([]),[o,u]=z.useState(!0);return z.useEffect(()=>{const h=e.length?ks(qn(Qe,r),...e):qn(Qe,r),m=dS(h,p=>{s(p.docs.map(g=>({id:g.id,...g.data()}))),u(!1)});return()=>m()},[r]),{data:n,loading:o}}const g1=({product:r})=>{const[e,n]=z.useState(!1),s=r.images?.length?r.images:r.imageUrl?[r.imageUrl]:[],o=s.length>=2;return v.jsxs("div",{style:{backgroundColor:"var(--vsm-white)",borderRadius:"6px",overflow:"hidden",boxShadow:"0 2px 10px rgba(0,0,0,0.07)"},children:[v.jsxs("div",{style:{position:"relative",aspectRatio:"1",backgroundColor:"#F0EBE3",overflow:"hidden",cursor:o?"pointer":"default"},onMouseEnter:()=>o&&n(!0),onMouseLeave:()=>n(!1),children:[r.stock===0&&v.jsx("span",{style:{position:"absolute",top:"8px",left:"8px",zIndex:2,backgroundColor:"#DC2626",color:"#fff",fontSize:"10px",fontWeight:700,padding:"3px 8px",textTransform:"uppercase",letterSpacing:"0.08em",borderRadius:"2px"},children:"Agotado"}),s.length>0?v.jsxs(v.Fragment,{children:[v.jsx("img",{src:s[0],alt:r.name,style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover",opacity:e?0:1,transition:"opacity 0.4s ease"}}),s[1]&&v.jsx("img",{src:s[1],alt:r.name,style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover",opacity:e?1:0,transition:"opacity 0.4s ease"}})]}):v.jsx("div",{className:"w-full h-full flex items-center justify-center text-6xl",children:""})]}),v.jsxs("div",{style:{padding:"1rem"},children:[v.jsx("h3",{style:{fontSize:"13px",fontWeight:600,marginBottom:"4px",color:"var(--vsm-black)"},children:r.name}),v.jsx("p",{style:{fontSize:"10px",color:"var(--vsm-gray-mid)",marginBottom:"8px",lineHeight:1.5,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:r.description}),v.jsx("p",{style:{fontSize:"16px",fontWeight:800,color:"var(--vsm-black)",marginBottom:"12px"},children:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}).format(r.price)}),v.jsx(_r,{to:`/producto/${r.id}`,style:{display:"block",textAlign:"center",backgroundColor:r.stock===0?"var(--vsm-gray-mid)":"var(--vsm-brand)",color:"#fff",fontSize:"11px",fontWeight:700,padding:"10px",textTransform:"uppercase",letterSpacing:"0.07em",borderRadius:"4px",textDecoration:"none",pointerEvents:r.stock===0?"none":"auto"},className:"hover:opacity-90 transition-opacity",children:r.stock===0?"Agotado":"Ver producto"})]})]})},kk=()=>v.jsxs("div",{style:{backgroundColor:"var(--vsm-white)",borderRadius:"6px",overflow:"hidden",boxShadow:"0 2px 10px rgba(0,0,0,0.07)"},children:[v.jsx("div",{style:{aspectRatio:"1",backgroundColor:"var(--vsm-gray)",animation:"pulse 1.5s ease-in-out infinite"}}),v.jsxs("div",{style:{padding:"1rem",display:"flex",flexDirection:"column",gap:"8px"},children:[v.jsx("div",{style:{height:"13px",backgroundColor:"var(--vsm-gray)",borderRadius:"3px",width:"70%",animation:"pulse 1.5s ease-in-out infinite"}}),v.jsx("div",{style:{height:"10px",backgroundColor:"var(--vsm-gray)",borderRadius:"3px",width:"90%",animation:"pulse 1.5s ease-in-out infinite"}}),v.jsx("div",{style:{height:"20px",backgroundColor:"var(--vsm-gray)",borderRadius:"3px",width:"45%",animation:"pulse 1.5s ease-in-out infinite"}})]})]}),Mk=()=>{const{data:r,loading:e}=rr("products"),n=r.filter(s=>s.active!==!1);return v.jsx("section",{style:{backgroundColor:"var(--vsm-bg)"},className:"py-20 px-8",children:v.jsxs("div",{className:"max-w-7xl mx-auto",children:[v.jsx("h2",{style:{fontWeight:800,fontSize:"1.6rem",color:"var(--vsm-black)",marginBottom:"1.75rem"},children:"Nuestros Productos"}),e?v.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-5",children:Array.from({length:6}).map((s,o)=>v.jsx(kk,{},o))}):n.length===0?v.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"14px"},children:"No hay productos disponibles an."}):v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-5",children:n.map(s=>v.jsx(g1,{product:s},s.id))}),v.jsx("div",{style:{textAlign:"center",marginTop:"2.5rem"},children:v.jsx(_r,{to:"/juguetes",style:{color:"var(--vsm-brand)",fontWeight:700,fontSize:"13px",textDecoration:"underline",textUnderlineOffset:"4px"},children:"Ver todos los productos "})})]})]})})},Vk=[{icon:"",name:"Velas de Soya"},{icon:"",name:"Velas de Cera de Abeja"},{icon:"",name:"Velas Decorativas"},{icon:"",name:"Velas Aromticas"}],Pk=()=>v.jsx("section",{style:{backgroundColor:"var(--vsm-white)"},className:"py-20 px-8",children:v.jsxs("div",{className:"max-w-7xl mx-auto",children:[v.jsx("h2",{style:{fontWeight:800,fontSize:"1.6rem",textAlign:"center",color:"var(--vsm-black)",marginBottom:"1rem"},children:"Tipos de Velas Artesanales"}),v.jsx("p",{style:{color:"var(--vsm-gray-mid)",textAlign:"center",maxWidth:"650px",margin:"0 auto 2.5rem",lineHeight:1.8,fontSize:"14px"},children:"Ofrecemos ms de 6 tipos de velas artesanales con variedad de diseos y ms de 10 aromas exclusivos para crear la experiencia perfecta en tu hogar o como regalo especial."}),v.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-5",children:Vk.map(r=>v.jsxs(_r,{to:"/juguetes",style:{backgroundColor:"var(--vsm-white)",borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 12px rgba(0,0,0,0.08)",textDecoration:"none"},className:"hover:shadow-md transition-shadow",children:[v.jsx("div",{style:{backgroundColor:"#FBF6F0",aspectRatio:"1",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"3rem"},children:r.icon}),v.jsx("p",{style:{fontWeight:700,fontSize:"13px",padding:"0.75rem",textAlign:"center",color:"var(--vsm-black)"},children:r.name})]},r.name))})]})}),Uk=[{stars:5,text:'"Las velas ms hermosas que he tenido. El aroma a coco me transporta directamente al Caribe. Las recomiendo 100%!"',author:"Mara Martnez, Bogot"},{stars:5,text:'"Compr el pack de lavanda y sndalo para regalar y quedaron fascinados. La presentacin es preciosa y el aroma dura muchsimo."',author:"Andrs Gmez, Medelln"},{stars:5,text:'"Calidad artesanal increble. Se nota que estn hechas con amor y buenos materiales. Ya ped mi tercer pedido."',author:"Luca Herrera, Cali"}],Lk=()=>v.jsx("section",{id:"nosotros",style:{backgroundColor:"var(--vsm-bg)"},className:"py-20 px-8",children:v.jsxs("div",{className:"max-w-7xl mx-auto",children:[v.jsx("h2",{style:{fontWeight:800,fontSize:"1.6rem",textAlign:"center",color:"var(--vsm-black)",marginBottom:"2.5rem"},children:"Lo que dicen nuestros clientes"}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Uk.map((r,e)=>v.jsxs("div",{style:{backgroundColor:"var(--vsm-white)",borderRadius:"8px",padding:"1.5rem",boxShadow:"0 2px 10px rgba(0,0,0,0.06)"},children:[v.jsx("div",{style:{fontSize:"14px",color:"#F5A623",marginBottom:"0.75rem"},children:"".repeat(r.stars)}),v.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"14px",lineHeight:1.75,marginBottom:"1rem",fontStyle:"italic"},children:r.text}),v.jsxs("p",{style:{fontWeight:700,fontSize:"12px",color:"var(--vsm-black)"},children:[" ",r.author]})]},e))})]})}),jk=()=>v.jsxs("section",{style:{backgroundColor:"var(--vsm-brand)",color:"#fff"},className:"py-16 px-8 text-center",children:[v.jsx("h2",{style:{fontWeight:800,fontSize:"1.75rem",marginBottom:"0.5rem"},children:"Regstrate y obtn 10% OFF"}),v.jsx("p",{style:{fontSize:"15px",opacity:.85,marginBottom:"2rem"},children:"en tu primera compra"}),v.jsxs("form",{className:"flex flex-col sm:flex-row gap-3 max-w-md mx-auto",onSubmit:r=>r.preventDefault(),children:[v.jsx("input",{type:"email",placeholder:"tu@correo.com",style:{flex:1,padding:"12px 16px",borderRadius:"5px",border:"none",fontSize:"14px",outline:"none",color:"var(--vsm-black)"}}),v.jsx("button",{type:"submit",style:{backgroundColor:"#111",color:"#fff",padding:"12px 24px",borderRadius:"5px",border:"none",fontSize:"12px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.07em",cursor:"pointer",whiteSpace:"nowrap"},className:"hover:opacity-90 transition-opacity",children:"Obtener mi 10% OFF"})]})]}),zk=()=>v.jsxs("div",{className:"w-full",children:[v.jsx(cx,{}),v.jsx(fx,{}),v.jsx(Mk,{}),v.jsx(Pk,{}),v.jsx(Lk,{}),v.jsx(jk,{})]}),$E={width:"100%",padding:"10px 14px",border:"1px solid var(--vsm-gray)",borderRadius:"5px",fontSize:"14px",fontFamily:"inherit",outline:"none",color:"var(--vsm-black)",backgroundColor:"var(--vsm-white)",transition:"border-color 0.2s"},ZE={fontSize:"13px",fontWeight:700,color:"var(--vsm-black)",display:"block",marginBottom:"6px"},Bk=()=>{const[r,e]=pr.useState(""),[n,s]=pr.useState(""),[o,u]=pr.useState(null),[h,m]=pr.useState(!1),p=Jo(),g=async b=>{b.preventDefault(),m(!0);try{await rN(wu,r,n),u(null),p("/Admin")}catch{u("Correo o contrasea incorrectos. Por favor verifica tus datos."),s("")}finally{m(!1)}};return v.jsx("div",{style:{minHeight:"calc(100vh - 96px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},className:"w-full",children:v.jsxs("div",{style:{backgroundColor:"var(--vsm-white)",borderRadius:"8px",boxShadow:"0 4px 24px rgba(0,0,0,0.09)",padding:"2.5rem",width:"100%",maxWidth:"420px"},children:[v.jsx("h2",{style:{fontWeight:800,fontSize:"1.6rem",color:"var(--vsm-black)",marginBottom:"0.4rem"},children:"Acceder"}),v.jsxs("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"13px",marginBottom:"2rem"},children:["No tienes cuenta?"," ",v.jsx(_r,{to:"/Register",style:{color:"var(--vsm-brand)",fontWeight:700,textDecoration:"underline",textUnderlineOffset:"3px"},children:"Regstrate aqu"})]}),v.jsxs("form",{onSubmit:g,noValidate:!0,children:[v.jsxs("div",{style:{marginBottom:"1.25rem"},children:[v.jsxs("label",{htmlFor:"email",style:ZE,children:["Nombre de usuario o correo electrnico"," ",v.jsx("span",{style:{color:"#DC2626"},children:"*"})]}),v.jsx("input",{type:"email",id:"email",value:r,onChange:b=>e(b.target.value),onFocus:b=>b.currentTarget.style.borderColor="var(--vsm-brand)",onBlur:b=>b.currentTarget.style.borderColor="var(--vsm-gray)",required:!0,style:$E})]}),v.jsxs("div",{style:{marginBottom:"1.25rem"},children:[v.jsxs("label",{htmlFor:"password",style:ZE,children:["Contrasea ",v.jsx("span",{style:{color:"#DC2626"},children:"*"})]}),v.jsx("input",{type:"password",id:"password",value:n,onChange:b=>s(b.target.value),onFocus:b=>b.currentTarget.style.borderColor="var(--vsm-brand)",onBlur:b=>b.currentTarget.style.borderColor="var(--vsm-gray)",required:!0,style:$E})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"1.5rem"},children:[v.jsx("input",{type:"checkbox",id:"remember",style:{width:"15px",height:"15px",accentColor:"var(--vsm-brand)",cursor:"pointer"}}),v.jsx("label",{htmlFor:"remember",style:{fontSize:"13px",color:"var(--vsm-gray-mid)",cursor:"pointer"},children:"Recurdame"})]}),o&&v.jsx("div",{style:{backgroundColor:"#FEF2F2",border:"1px solid #FECACA",borderRadius:"5px",padding:"10px 14px",marginBottom:"1rem"},children:v.jsx("p",{style:{color:"#DC2626",fontSize:"13px",fontWeight:600},children:o})}),v.jsx("button",{type:"submit",disabled:h,style:{width:"100%",backgroundColor:"var(--vsm-brand)",color:"#fff",padding:"12px",borderRadius:"5px",border:"none",fontSize:"13px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.07em",cursor:h?"not-allowed":"pointer",opacity:h?.75:1,transition:"opacity 0.2s",fontFamily:"inherit"},children:h?"Verificando...":"Acceso"}),v.jsx("p",{style:{textAlign:"center",marginTop:"1rem"},children:v.jsx("a",{href:"#",style:{color:"var(--vsm-gray-mid)",fontSize:"12px",textDecoration:"underline",textUnderlineOffset:"3px"},onClick:b=>b.preventDefault(),children:"Olvidaste la contrasea?"})})]})]})})},Sh={width:"100%",padding:"10px 14px",border:"1px solid var(--vsm-gray)",borderRadius:"5px",fontSize:"14px",fontFamily:"inherit",outline:"none",color:"var(--vsm-black)",backgroundColor:"var(--vsm-white)",transition:"border-color 0.2s"},Ah={fontSize:"13px",fontWeight:700,color:"var(--vsm-black)",display:"block",marginBottom:"6px"},Fk=()=>{const[r,e]=pr.useState(""),[n,s]=pr.useState(""),[o,u]=pr.useState(""),[h,m]=pr.useState(""),[p,g]=pr.useState(null),[b,S]=pr.useState(!1),w=Jo(),L=async B=>{if(B.preventDefault(),r.trim().length===0){g("Ingresa tu nombre completo.");return}if(o!==h){g("Las contraseas no coinciden.");return}if(o.length<6){g("La contrasea debe tener al menos 6 caracteres.");return}S(!0);try{const X=await nN(wu,n,o);await sN(X.user,{displayName:r.trim()}),g(null),w("/Login")}catch(X){X.code==="auth/email-already-in-use"?g("Este correo ya est registrado. Intenta iniciar sesin."):g("Error al crear la cuenta. Por favor intenta de nuevo."),u(""),m("")}finally{S(!1)}};return v.jsx("div",{style:{minHeight:"calc(100vh - 96px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},className:"w-full",children:v.jsxs("div",{style:{backgroundColor:"var(--vsm-white)",borderRadius:"8px",boxShadow:"0 4px 24px rgba(0,0,0,0.09)",padding:"2.5rem",width:"100%",maxWidth:"420px"},children:[v.jsx("h2",{style:{fontWeight:800,fontSize:"1.6rem",color:"var(--vsm-black)",marginBottom:"0.4rem"},children:"Crear cuenta"}),v.jsxs("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"13px",marginBottom:"2rem"},children:["Ya tienes cuenta?"," ",v.jsx(_r,{to:"/Login",style:{color:"var(--vsm-brand)",fontWeight:700,textDecoration:"underline",textUnderlineOffset:"3px"},children:"Inicia sesin aqu"})]}),v.jsxs("form",{onSubmit:L,noValidate:!0,children:[v.jsxs("div",{style:{marginBottom:"1.25rem"},children:[v.jsxs("label",{htmlFor:"name",style:Ah,children:["Nombre completo ",v.jsx("span",{style:{color:"#DC2626"},children:"*"})]}),v.jsx("input",{type:"text",id:"name",value:r,onChange:B=>e(B.target.value),onFocus:B=>B.currentTarget.style.borderColor="var(--vsm-brand)",onBlur:B=>B.currentTarget.style.borderColor="var(--vsm-gray)",required:!0,style:Sh})]}),v.jsxs("div",{style:{marginBottom:"1.25rem"},children:[v.jsxs("label",{htmlFor:"email",style:Ah,children:["Correo electrnico ",v.jsx("span",{style:{color:"#DC2626"},children:"*"})]}),v.jsx("input",{type:"email",id:"email",value:n,onChange:B=>s(B.target.value),onFocus:B=>B.currentTarget.style.borderColor="var(--vsm-brand)",onBlur:B=>B.currentTarget.style.borderColor="var(--vsm-gray)",required:!0,style:Sh})]}),v.jsxs("div",{style:{marginBottom:"1.25rem"},children:[v.jsxs("label",{htmlFor:"password",style:Ah,children:["Contrasea ",v.jsx("span",{style:{color:"#DC2626"},children:"*"})]}),v.jsx("input",{type:"password",id:"password",value:o,onChange:B=>u(B.target.value),onFocus:B=>B.currentTarget.style.borderColor="var(--vsm-brand)",onBlur:B=>B.currentTarget.style.borderColor="var(--vsm-gray)",required:!0,style:Sh}),v.jsx("p",{style:{fontSize:"11px",color:"var(--vsm-gray-mid)",marginTop:"5px"},children:"Mnimo 6 caracteres."})]}),v.jsxs("div",{style:{marginBottom:"1.5rem"},children:[v.jsxs("label",{htmlFor:"confirmPassword",style:Ah,children:["Confirmar contrasea ",v.jsx("span",{style:{color:"#DC2626"},children:"*"})]}),v.jsx("input",{type:"password",id:"confirmPassword",value:h,onChange:B=>m(B.target.value),onFocus:B=>B.currentTarget.style.borderColor="var(--vsm-brand)",onBlur:B=>B.currentTarget.style.borderColor="var(--vsm-gray)",required:!0,style:Sh})]}),v.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px",marginBottom:"1.5rem"},children:[v.jsx("input",{type:"checkbox",id:"privacy",required:!0,style:{width:"15px",height:"15px",marginTop:"2px",accentColor:"var(--vsm-brand)",cursor:"pointer",flexShrink:0}}),v.jsxs("label",{htmlFor:"privacy",style:{fontSize:"12px",color:"var(--vsm-gray-mid)",cursor:"pointer",lineHeight:1.6},children:["He ledo y acepto la"," ",v.jsx("a",{href:"#",style:{color:"var(--vsm-brand)",textDecoration:"underline",textUnderlineOffset:"3px"},children:"Poltica de privacidad"})]})]}),p&&v.jsx("div",{style:{backgroundColor:"#FEF2F2",border:"1px solid #FECACA",borderRadius:"5px",padding:"10px 14px",marginBottom:"1rem"},children:v.jsx("p",{style:{color:"#DC2626",fontSize:"13px",fontWeight:600},children:p})}),v.jsx("button",{type:"submit",disabled:b,style:{width:"100%",backgroundColor:"var(--vsm-brand)",color:"#fff",padding:"12px",borderRadius:"5px",border:"none",fontSize:"13px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.07em",cursor:b?"not-allowed":"pointer",opacity:b?.75:1,transition:"opacity 0.2s",fontFamily:"inherit"},children:b?"Creando cuenta...":"Registrarme"})]})]})})},qk=5*60*1e3,JE=["mousemove","mousedown","keydown","scroll","touchstart","click"],y1=z.createContext({user:null,loading:!0,logout:async()=>{}}),Hk=({children:r})=>{const[e,n]=z.useState(null),[s,o]=z.useState(!0),u=z.useRef(null),h=async()=>{u.current&&clearTimeout(u.current),await PE(wu)};return z.useEffect(()=>{const m=lN(wu,p=>{n(p),o(!1)});return()=>m()},[]),z.useEffect(()=>{if(!e){u.current&&clearTimeout(u.current);return}const m=()=>{u.current&&clearTimeout(u.current),u.current=setTimeout(()=>PE(wu),qk)};return JE.forEach(p=>window.addEventListener(p,m,{passive:!0})),m(),()=>{JE.forEach(p=>window.removeEventListener(p,m)),u.current&&clearTimeout(u.current)}},[e]),v.jsx(y1.Provider,{value:{user:e,loading:s,logout:h},children:r})},Lg=()=>z.useContext(y1);function Gk(){const[r,e]=z.useState(null),[n,s]=z.useState(!0);return z.useEffect(()=>{const o=dS(hn(Qe,"settings","general"),u=>{u.exists()?e(u.data()):e(null),s(!1)},()=>{e(null),s(!1)});return()=>o()},[]),{settings:r,loading:n}}const v1="/tiendaVirtual/assets/Logo-CuQzCToE.jpeg",Kk=[{to:"/",text:"Inicio"},{to:"/juguetes",text:"+ Productos"},{to:"/#nosotros",text:"Nosotros"},{to:"/contacto",text:"Contacto"}],Qk=()=>{const{user:r,logout:e}=Lg(),n=Jo(),{settings:s,loading:o}=Gk(),u=s?.logoUrl||v1,h=async()=>{await e(),n("/Login")};return v.jsx("header",{style:{position:"fixed",top:0,width:"100%",zIndex:40},children:v.jsxs("nav",{style:{backgroundColor:"var(--vsm-white)",borderBottom:"1px solid var(--vsm-gray)"},className:"flex justify-between items-center py-3 px-8",children:[v.jsxs(uu,{to:"/",className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[v.jsx("img",{src:u,alt:"Velas Santa Marta",style:{height:"38px",width:"auto",objectFit:"contain"}}),!o&&v.jsx("div",{children:s?.storeName?v.jsx("span",{style:{fontWeight:800,fontSize:"1rem",color:"#111",display:"block",lineHeight:1.2},children:s.storeName}):v.jsx(v.Fragment,{})})]}),v.jsx("ul",{className:"hidden md:flex items-center gap-8",children:Kk.map(m=>v.jsx("li",{children:v.jsx(uu,{to:m.to,end:m.to==="/",style:({isActive:p})=>({color:"#111",fontWeight:p?700:600,fontSize:"13px",textDecoration:p?"underline":"none",textUnderlineOffset:"5px",textTransform:"uppercase",letterSpacing:"0.05em"}),className:"hover:opacity-60 transition-opacity",children:m.text})},m.to))}),v.jsx("div",{className:"flex items-center gap-4",children:r?v.jsxs(v.Fragment,{children:[v.jsx(uu,{to:"/Admin",style:{color:"#111",fontSize:"12px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em"},className:"hover:opacity-60 transition-opacity",children:"Admin"}),v.jsx("button",{onClick:h,style:{backgroundColor:"var(--vsm-black)",color:"#fff",fontSize:"11px",fontWeight:700,padding:"8px 16px",textTransform:"uppercase",letterSpacing:"0.05em",borderRadius:"4px",border:"none",cursor:"pointer",fontFamily:"inherit"},className:"hover:opacity-80 transition-opacity",children:"Cerrar sesin"})]}):v.jsxs(v.Fragment,{children:[v.jsx(uu,{to:"/Login",style:{color:"#111",fontSize:"12px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em"},className:"hover:opacity-60 transition-opacity",children:"Ingresar"}),v.jsx(uu,{to:"/Register",style:{backgroundColor:"var(--vsm-brand)",color:"#fff",fontSize:"11px",fontWeight:700,padding:"8px 16px",textTransform:"uppercase",letterSpacing:"0.05em",borderRadius:"4px"},className:"hover:opacity-90 transition-opacity",children:"Registro"})]})})]})})},Yk=[{title:"Nuestras Polticas",links:[{label:"Privacidad",path:"/privacidad"},{label:"Trminos de uso",path:"/terminos"},{label:"Devoluciones",path:"/devoluciones"},{label:"Poltica de envo",path:"/envios"}]},{title:"Ms Informacin",links:[{label:"Contacto",path:"/contacto"},{label:"Nuestros aromas",path:"/aromas"},{label:"Cmo cuidar tu vela",path:"/cuidados"},{label:"Preguntas frecuentes",path:"/faq"}]}],Wk=()=>v.jsxs("footer",{style:{backgroundColor:"var(--vsm-white)",borderTop:"1px solid var(--vsm-gray)"},className:"py-14",children:[v.jsxs("div",{className:"max-w-7xl mx-auto px-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-10",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[v.jsx("img",{src:v1,alt:"Velas Santa Marta",style:{height:"36px",width:"auto",objectFit:"contain"}}),v.jsxs("div",{children:[v.jsx("span",{style:{fontWeight:800,fontSize:"1rem",display:"block",lineHeight:1.1,color:"var(--vsm-black)"},children:"Velas"}),v.jsx("span",{style:{fontWeight:600,fontSize:"0.6rem",color:"var(--vsm-brand)",letterSpacing:"0.12em",textTransform:"uppercase"},children:"Santa Marta"})]})]}),v.jsx("div",{className:"flex gap-3 mt-4",children:[{label:"IG",href:"#"},{label:"TK",href:"#"},{label:"FB",href:"#"},{label:"YT",href:"#"}].map(r=>v.jsx("a",{href:r.href,style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"var(--vsm-brand)",color:"#fff",fontSize:"9px",fontWeight:800,display:"flex",alignItems:"center",justifyContent:"center",textDecoration:"none"},className:"hover:opacity-80 transition-opacity",children:r.label},r.label))})]}),v.jsxs("div",{children:[v.jsx("h3",{style:{fontWeight:800,fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.08em",marginBottom:"1rem",color:"var(--vsm-black)"},children:"Sobre Nosotros"}),v.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"13px",lineHeight:1.8},children:"Somos una pequea empresa artesanal nacida en Santa Marta, Colombia. Elaboramos velas a mano con cera natural e ingredientes del Caribe colombiano para crear experiencias nicas en tu hogar."})]}),Yk.map(r=>v.jsxs("div",{children:[v.jsx("h3",{style:{fontWeight:800,fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.08em",marginBottom:"1rem",color:"var(--vsm-black)"},children:r.title}),v.jsx("ul",{style:{display:"flex",flexDirection:"column",gap:"0.6rem"},children:r.links.map(e=>v.jsx("li",{children:v.jsx(_r,{to:e.path,style:{color:"var(--vsm-gray-mid)",fontSize:"13px",textDecoration:"none"},className:"hover:text-black transition-colors",children:e.label})},e.label))})]},r.title))]}),v.jsxs("div",{style:{borderTop:"1px solid var(--vsm-gray)",marginTop:"3rem",paddingTop:"1.5rem"},className:"max-w-7xl mx-auto px-8 flex flex-col md:flex-row justify-between items-center gap-2",children:[v.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"12px"},children:"Copyright  2025 Velas Santa Marta"}),v.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"12px"},children:"Santa Marta, Magdalena, Colombia"})]})]}),Xk="96px",$k=({children:r,alignRight:e})=>{const s=ja().pathname==="/";return v.jsx("div",{style:{marginTop:Xk},className:`flex flex-col ${s?"":e?"items-end px-4":"items-center px-4"} w-full`,children:r})},Zk=r=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}).format(r),Jk=()=>v.jsxs("div",{className:"w-full",style:{maxWidth:"1200px",margin:"0 auto",padding:"2rem 1rem"},children:[v.jsx("div",{style:{width:"140px",height:"14px",backgroundColor:"var(--vsm-gray)",borderRadius:"4px",marginBottom:"2rem",animation:"pulse 1.5s ease-in-out infinite"}}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[3fr_2fr] gap-8 md:gap-12",children:[v.jsxs("div",{children:[v.jsx("div",{style:{aspectRatio:"1",backgroundColor:"var(--vsm-gray)",borderRadius:"12px",animation:"pulse 1.5s ease-in-out infinite"}}),v.jsx("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1rem"},children:[0,1,2].map(r=>v.jsx("div",{style:{width:"72px",height:"72px",backgroundColor:"var(--vsm-gray)",borderRadius:"8px",animation:"pulse 1.5s ease-in-out infinite"}},r))})]}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[[{w:"80px",h:"24px",r:"20px"},{w:"75%",h:"36px",r:"6px"},{w:"45%",h:"32px",r:"6px"},{w:"100%",h:"80px",r:"6px"}].map((r,e)=>v.jsx("div",{style:{width:r.w,height:r.h,backgroundColor:"var(--vsm-gray)",borderRadius:r.r,animation:"pulse 1.5s ease-in-out infinite"}},e)),v.jsx("div",{style:{width:"100%",height:"50px",backgroundColor:"var(--vsm-gray)",borderRadius:"8px",marginTop:"0.5rem",animation:"pulse 1.5s ease-in-out infinite"}})]})]})]}),eM=()=>v.jsxs("div",{style:{maxWidth:"560px",margin:"5rem auto",padding:"2rem",textAlign:"center"},children:[v.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:800,color:"var(--vsm-black)",marginBottom:"0.75rem"},children:"Producto no encontrado"}),v.jsx("p",{style:{color:"var(--vsm-gray-mid)",marginBottom:"2rem",lineHeight:1.6},children:"El producto que buscas no existe o fue eliminado."}),v.jsx(_r,{to:"/juguetes",style:{color:"var(--vsm-brand)",fontWeight:600,textDecoration:"underline",textUnderlineOffset:"3px"},children:"Volver al catalogo"})]}),tM=()=>{const{id:r}=kw(),[e,n]=z.useState(null),[s,o]=z.useState([]),[u,h]=z.useState(!0),[m,p]=z.useState(!1),[g,b]=z.useState(0),[S,w]=z.useState(!1),[L,B]=z.useState(!1),[X,j]=z.useState(1);if(z.useEffect(()=>{r&&(h(!0),p(!1),b(0),j(1),Promise.all([fS(hn(Qe,"products",r)),Ms(qn(Qe,"categories"))]).then(([ae,pe])=>{if(!ae.exists()){p(!0);return}n({id:ae.id,...ae.data()}),o(pe.docs.map(O=>({id:O.id,...O.data()})))}).catch(()=>p(!0)).finally(()=>h(!1)))},[r]),u)return v.jsx(Jk,{});if(m||!e)return v.jsx(eM,{});const se=e.images?.length?e.images:e.imageUrl?[e.imageUrl]:[],W=s.find(ae=>ae.id===e.categoryId)?.name??"",te=e.stock===0,ue=ae=>{ae!==g&&(w(!0),setTimeout(()=>{b(ae),w(!1)},150))};return v.jsxs("div",{className:"w-full",style:{maxWidth:"1200px",margin:"0 auto",padding:"2rem 1rem"},children:[v.jsx(_r,{to:"/juguetes",style:{display:"inline-flex",alignItems:"center",gap:"0.35rem",color:"var(--vsm-gray-mid)",textDecoration:"none",fontSize:"13px",fontWeight:500,marginBottom:"2rem"},children:" Volver al catalogo"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[3fr_2fr] gap-8 md:gap-12",children:[v.jsxs("div",{children:[v.jsx("div",{style:{borderRadius:"12px",overflow:"hidden",border:"1px solid var(--vsm-gray)",aspectRatio:"1",backgroundColor:"#F0EBE3",cursor:se.length>0?"zoom-in":"default"},children:se.length>0?v.jsx("img",{src:se[g],alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover",display:"block",opacity:S?0:1,transform:L?"scale(1.08)":"scale(1)",transition:"opacity 0.15s ease, transform 0.35s ease"},onMouseEnter:()=>B(!0),onMouseLeave:()=>B(!1)}):v.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--vsm-gray-mid)",fontSize:"14px"},children:"Sin imagen"})}),se.length>1&&v.jsx("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1rem",overflowX:"auto",paddingBottom:"4px"},children:se.map((ae,pe)=>v.jsx("button",{onClick:()=>ue(pe),style:{flexShrink:0,width:"72px",height:"72px",borderRadius:"8px",overflow:"hidden",border:`2px solid ${pe===g?"var(--vsm-brand)":"var(--vsm-gray)"}`,padding:0,cursor:"pointer",backgroundColor:"#F0EBE3",transition:"border-color 0.2s",outline:"none"},children:v.jsx("img",{src:ae,alt:`Vista ${pe+1}`,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}})},pe))})]}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:[W&&v.jsx("span",{style:{display:"inline-block",alignSelf:"flex-start",backgroundColor:"var(--vsm-gray)",color:"var(--vsm-gray-mid)",padding:"0.3rem 0.9rem",borderRadius:"20px",fontSize:"11px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.06em"},children:W}),v.jsx("h1",{style:{fontSize:"1.75rem",fontWeight:800,color:"var(--vsm-black)",lineHeight:1.2,margin:0},children:e.name}),v.jsx("p",{style:{fontSize:"2rem",fontWeight:800,color:"var(--vsm-brand)",margin:0},children:Zk(e.price)}),v.jsx("p",{style:{fontSize:"14px",color:"var(--vsm-gray-mid)",lineHeight:1.8,margin:0},children:e.description}),e.aroma&&v.jsxs("div",{style:{padding:"0.875rem 1rem",backgroundColor:"#FFF7F0",borderLeft:"3px solid var(--vsm-brand)",borderRadius:"0 8px 8px 0"},children:[v.jsx("strong",{style:{display:"block",color:"var(--vsm-brand)",fontSize:"11px",textTransform:"uppercase",letterSpacing:"0.06em",marginBottom:"0.3rem"},children:"Aroma"}),v.jsx("span",{style:{color:"var(--vsm-black)",fontSize:"14px"},children:e.aroma})]}),v.jsx("p",{style:{fontSize:"13px",fontWeight:600,margin:0,color:te?"#DC2626":"#16A34A"},children:te?"Sin stock":`${e.stock} disponibles`}),!te&&v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[v.jsx("span",{style:{color:"var(--vsm-gray-mid)",fontSize:"13px",fontWeight:500},children:"Cantidad:"}),v.jsxs("div",{style:{display:"inline-flex",alignItems:"center",border:"1px solid var(--vsm-gray)",borderRadius:"8px",overflow:"hidden"},children:[v.jsx("button",{onClick:()=>j(ae=>Math.max(1,ae-1)),style:{width:"40px",height:"40px",border:"none",backgroundColor:"transparent",cursor:"pointer",fontSize:"1.1rem",fontWeight:600,color:"var(--vsm-black)"},children:""}),v.jsx("span",{style:{width:"40px",textAlign:"center",fontSize:"14px",fontWeight:700},children:X}),v.jsx("button",{onClick:()=>j(ae=>Math.min(e.stock,ae+1)),style:{width:"40px",height:"40px",border:"none",backgroundColor:"transparent",cursor:"pointer",fontSize:"1.1rem",fontWeight:600,color:"var(--vsm-black)"},children:"+"})]})]}),v.jsx("button",{disabled:te,style:{padding:"14px 24px",backgroundColor:te?"var(--vsm-gray)":"var(--vsm-brand)",color:te?"var(--vsm-gray-mid)":"#fff",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.07em",cursor:te?"not-allowed":"pointer",transition:"background 0.2s ease",fontFamily:"inherit"},children:te?"Agotado":"Agregar al carrito"}),v.jsx("p",{style:{textAlign:"center",color:"var(--vsm-gray-mid)",fontSize:"12px",margin:0},children:"Envio disponible a todo el pais"})]})]})]})},Nf={padding:"6px 16px",borderRadius:"20px",border:"1px solid transparent",fontSize:"13px",fontWeight:600,cursor:"pointer",fontFamily:"inherit",transition:"background-color 0.15s, color 0.15s",whiteSpace:"nowrap"},eb={...Nf,backgroundColor:"var(--vsm-brand)",color:"#fff",borderColor:"var(--vsm-brand)"},tb={...Nf,backgroundColor:"var(--vsm-white)",color:"var(--vsm-gray-mid)",borderColor:"var(--vsm-gray)"},nb={...Nf,padding:"4px 13px",fontSize:"12px",backgroundColor:"var(--vsm-brand)",color:"#fff",borderColor:"var(--vsm-brand)"},rb={...Nf,padding:"4px 13px",fontSize:"12px",backgroundColor:"rgba(201,107,43,0.08)",color:"var(--vsm-brand)",borderColor:"rgba(201,107,43,0.3)"},nM=()=>v.jsxs("div",{style:{backgroundColor:"var(--vsm-white)",borderRadius:"6px",overflow:"hidden",boxShadow:"0 2px 10px rgba(0,0,0,0.07)"},children:[v.jsx("div",{style:{aspectRatio:"1",backgroundColor:"var(--vsm-gray)",animation:"pulse 1.5s ease-in-out infinite"}}),v.jsxs("div",{style:{padding:"1rem",display:"flex",flexDirection:"column",gap:"8px"},children:[v.jsx("div",{style:{height:"13px",backgroundColor:"var(--vsm-gray)",borderRadius:"3px",width:"70%",animation:"pulse 1.5s ease-in-out infinite"}}),v.jsx("div",{style:{height:"10px",backgroundColor:"var(--vsm-gray)",borderRadius:"3px",width:"90%",animation:"pulse 1.5s ease-in-out infinite"}}),v.jsx("div",{style:{height:"20px",backgroundColor:"var(--vsm-gray)",borderRadius:"3px",width:"45%",animation:"pulse 1.5s ease-in-out infinite"}})]})]}),rM=()=>{const{data:r,loading:e}=rr("categories",Bn("active","==",!0)),{data:n,loading:s}=rr("subcategories",Bn("active","==",!0)),{data:o,loading:u}=rr("products",Bn("active","==",!0)),h=z.useMemo(()=>[...r].sort((W,te)=>(W.createdAt?.seconds??0)-(te.createdAt?.seconds??0)),[r]),m=z.useMemo(()=>[...n].sort((W,te)=>(W.createdAt?.seconds??0)-(te.createdAt?.seconds??0)),[n]),p=e||s||u,[g,b]=z.useState(null),[S,w]=z.useState(null),L=z.useMemo(()=>g?m.filter(W=>W.categoryId===g):[],[m,g]),B=z.useMemo(()=>new Set(h.map(W=>W.id)),[h]),X=z.useMemo(()=>new Set(m.map(W=>W.id)),[m]),j=z.useMemo(()=>o.filter(W=>W.categoryId&&!B.has(W.categoryId)||W.subcategoryId&&!X.has(W.subcategoryId)?!1:S?W.subcategoryId===S:g?W.categoryId===g:!0),[o,g,S,B,X]),se=W=>{b(W),w(null)};return v.jsxs("div",{style:{maxWidth:"1280px",margin:"0 auto",padding:"2rem 1rem"},children:[v.jsx("h1",{style:{fontWeight:800,fontSize:"1.75rem",color:"var(--vsm-black)",marginBottom:"1.75rem"},children:"Catlogo de Velas"}),!p&&h.length>0&&v.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginBottom:"0.75rem"},children:[v.jsx("button",{style:g===null?eb:tb,onClick:()=>se(null),children:"Todos"}),h.map(W=>v.jsx("button",{style:g===W.id?eb:tb,onClick:()=>se(W.id),children:W.name},W.id))]}),!p&&L.length>0&&v.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem",marginBottom:"1.5rem",paddingLeft:"0.25rem"},children:[v.jsx("button",{style:S===null?nb:rb,onClick:()=>w(null),children:"Todo"}),L.map(W=>v.jsx("button",{style:S===W.id?nb:rb,onClick:()=>w(W.id),children:W.name},W.id))]}),p?v.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5",children:Array.from({length:8}).map((W,te)=>v.jsx(nM,{},te))}):j.length===0?v.jsxs("div",{style:{textAlign:"center",padding:"4rem 0",color:"var(--vsm-gray-mid)"},children:[v.jsx("p",{style:{fontSize:"1rem",fontWeight:600},children:"No hay productos disponibles en esta categora."}),g&&v.jsx("button",{onClick:()=>se(null),style:{marginTop:"1rem",color:"var(--vsm-brand)",background:"none",border:"none",cursor:"pointer",fontSize:"13px",fontWeight:700,textDecoration:"underline",fontFamily:"inherit"},children:"Ver todos los productos"})]}):v.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5",children:j.map(W=>v.jsx(g1,{product:W},W.id))})]})},iM=()=>{const{data:r,loading:e}=rr("products"),{data:n,loading:s}=rr("categories"),o=e||s,u=r.filter(p=>p.stock===0).length,h=v.jsx("div",{style:{backgroundColor:"var(--vsm-gray)",borderRadius:"8px",height:"110px",animation:"pulse 1.5s ease-in-out infinite"}});if(o)return v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[h,h,h]});const m=[{label:"Total Productos",value:r.length,color:"var(--vsm-brand)"},{label:"Total Categoras",value:n.length,color:"var(--vsm-brand)"},{label:"Sin Stock",value:u,color:"#DC2626"}];return v.jsxs("div",{children:[v.jsx("h2",{style:{fontWeight:800,fontSize:"1.1rem",color:"var(--vsm-black)",marginBottom:"1.25rem"},children:"Dashboard"}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:m.map(p=>v.jsxs("div",{style:{backgroundColor:"var(--vsm-white)",borderRadius:"8px",padding:"1.25rem 1.5rem",borderTop:`3px solid ${p.color}`,boxShadow:"0 2px 8px rgba(0,0,0,0.06)"},children:[v.jsx("p",{style:{fontSize:"13px",color:"var(--vsm-gray-mid)",fontWeight:600,marginBottom:"0.5rem"},children:p.label}),v.jsx("p",{style:{fontSize:"2rem",fontWeight:800,color:p.color,lineHeight:1},children:p.value})]},p.label))})]})},xu=({isOpen:r,onClose:e,children:n,maxWidth:s="560px"})=>(z.useEffect(()=>{if(!r)return;document.body.style.overflow="hidden";const o=u=>{u.key==="Escape"&&e()};return window.addEventListener("keydown",o),()=>{document.body.style.overflow="",window.removeEventListener("keydown",o)}},[r,e]),r?v.jsx("div",{onClick:e,style:{position:"fixed",inset:0,zIndex:50,backgroundColor:"rgba(0,0,0,0.45)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},children:v.jsxs("div",{onClick:o=>o.stopPropagation(),style:{backgroundColor:"var(--vsm-white)",borderRadius:"8px",padding:"2rem",width:"100%",maxWidth:s,position:"relative",maxHeight:"90vh",overflowY:"auto"},children:[v.jsx("button",{onClick:e,"aria-label":"Cerrar",style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",cursor:"pointer",fontSize:"1.25rem",color:"var(--vsm-gray-mid)",lineHeight:1,padding:"4px"},children:""}),n]})}):null),_1=()=>()=>{document.dispatchEvent(new MouseEvent("click",{bubbles:!0}))},wh=5,ib={name:"",description:"",price:"",stock:"",categoryId:"",subcategoryId:"",imageUrl:"",active:!0},wa={width:"100%",padding:"9px 12px",border:"1px solid var(--vsm-gray)",borderRadius:"5px",fontSize:"13px",fontFamily:"inherit",outline:"none",color:"var(--vsm-black)",backgroundColor:"var(--vsm-white)"},cs={fontSize:"12px",fontWeight:700,color:"var(--vsm-black)",display:"block",marginBottom:"5px"},sb={position:"absolute",top:-6,right:-6,width:20,height:20,borderRadius:"50%",backgroundColor:"#DC2626",color:"#fff",border:"none",cursor:"pointer",fontSize:"10px",fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"inherit",lineHeight:1,padding:0},sM=({isOpen:r,onClose:e,product:n,categories:s,subcategories:o})=>{const u=_1(),[h,m]=z.useState(ib),[p,g]=z.useState([]),[b,S]=z.useState([]),[w,L]=z.useState(""),[B,X]=z.useState(0),[j,se]=z.useState(null),[W,te]=z.useState(!1);z.useEffect(()=>{if(r){m(n?{name:n.name,description:n.description,price:n.price,stock:n.stock,categoryId:n.categoryId,subcategoryId:n.subcategoryId??"",imageUrl:n.imageUrl,active:n.active!==!1}:ib);const P=n?.images?.length?n.images:n?.imageUrl?[n.imageUrl]:[];g(P),S([]),L(""),X(ie=>ie+1),se(null)}},[r,n]);const ue=(P,ie)=>m(de=>({...de,[P]:ie})),ae=z.useMemo(()=>o.filter(P=>P.categoryId===h.categoryId&&P.active),[o,h.categoryId]),pe=p.length+b.length,O=pe<wh,R=()=>{const P=w.trim();!P||!O||(g(ie=>[...ie,P]),L(""))},x=P=>g(ie=>ie.filter((de,Re)=>Re!==P)),M=P=>S(ie=>ie.filter((de,Re)=>Re!==P)),k=P=>{u();const ie=Array.from(P.target.files??[]);if(!ie.length)return;const de=wh-pe;S(Re=>[...Re,...ie.slice(0,de)]),X(Re=>Re+1)},N=async(P,ie,de)=>{const Re=P.name.split(".").pop(),D=m1(p1,`products/${ie}/image-${Date.now()}-${de}.${Re}`);return await f1(D,P),d1(D)},C=async P=>{if(P.preventDefault(),!h.name.trim()){se("El nombre es obligatorio.");return}te(!0),se(null);try{const ie=s.find(D=>D.id===h.categoryId),de=ae.find(D=>D.id===h.subcategoryId),Re={name:h.name.trim(),description:h.description.trim(),price:Number(h.price)||0,stock:Number(h.stock)||0,categoryId:h.categoryId,categoryName:ie?.name??"",subcategoryId:h.subcategoryId||null,subcategoryName:de?.name??null,active:h.active};if(n){const D=[];for(let oe=0;oe<b.length;oe++)try{D.push(await N(b[oe],n.id,oe))}catch{console.warn("Upload failed for file",oe)}const J=[...p,...D];if(await Si(hn(Qe,"products",n.id),{...Re,imageUrl:J[0]??"",images:J,updatedAt:ws()}),D.length<b.length){se("Producto guardado, pero algunas imgenes no pudieron subirse."),te(!1);return}}else{const D=await Tp(qn(Qe,"products"),{...Re,imageUrl:p[0]??"",images:p,createdAt:ws(),updatedAt:ws()});if(b.length>0){const J=[];for(let oe=0;oe<b.length;oe++)try{J.push(await N(b[oe],D.id,oe))}catch{console.warn("Upload failed for file",oe)}if(J.length>0){const oe=[...p,...J];await Si(hn(Qe,"products",D.id),{imageUrl:oe[0]??"",images:oe})}if(J.length<b.length){se("Producto creado, pero algunas imgenes no pudieron subirse."),te(!1);return}}}e()}catch(ie){console.error(ie),se("Error al guardar. Intenta de nuevo.")}finally{te(!1)}},qe=P=>P.currentTarget.style.borderColor="var(--vsm-brand)",ze=P=>P.currentTarget.style.borderColor="var(--vsm-gray)";return v.jsxs(xu,{isOpen:r,onClose:e,maxWidth:"560px",children:[v.jsx("h3",{style:{fontWeight:800,fontSize:"1.1rem",color:"var(--vsm-black)",marginBottom:"1.25rem"},children:n?"Editar producto":"Nuevo producto"}),v.jsx("form",{onSubmit:C,noValidate:!0,children:v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[v.jsxs("div",{children:[v.jsxs("label",{style:cs,children:["Nombre ",v.jsx("span",{style:{color:"#DC2626"},children:"*"})]}),v.jsx("input",{value:h.name,onChange:P=>ue("name",P.target.value),style:wa,onFocus:qe,onBlur:ze})]}),v.jsxs("div",{children:[v.jsx("label",{style:cs,children:"Descripcin"}),v.jsx("textarea",{value:h.description,onChange:P=>ue("description",P.target.value),rows:3,style:{...wa,resize:"vertical"},onFocus:qe,onBlur:ze})]}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[v.jsxs("div",{children:[v.jsx("label",{style:cs,children:"Precio (COP)"}),v.jsx("input",{type:"number",min:"0",value:h.price,placeholder:"0",onChange:P=>ue("price",P.target.value===""?"":Number(P.target.value)),style:wa,onFocus:qe,onBlur:ze})]}),v.jsxs("div",{children:[v.jsx("label",{style:cs,children:"Stock"}),v.jsx("input",{type:"number",min:"0",value:h.stock,placeholder:"0",onChange:P=>ue("stock",P.target.value===""?"":Number(P.target.value)),style:wa,onFocus:qe,onBlur:ze})]})]}),v.jsxs("div",{children:[v.jsx("label",{style:cs,children:"Categora"}),v.jsxs("select",{value:h.categoryId,onChange:P=>{ue("categoryId",P.target.value),m(ie=>({...ie,categoryId:P.target.value,subcategoryId:""}))},style:{...wa,cursor:"pointer"},onFocus:qe,onBlur:ze,children:[v.jsx("option",{value:"",children:"Sin categora"}),s.filter(P=>P.active).map(P=>v.jsx("option",{value:P.id,children:P.name},P.id))]})]}),ae.length>0&&v.jsxs("div",{children:[v.jsx("label",{style:cs,children:"Subcategora"}),v.jsxs("select",{value:h.subcategoryId,onChange:P=>ue("subcategoryId",P.target.value),style:{...wa,cursor:"pointer"},onFocus:qe,onBlur:ze,children:[v.jsx("option",{value:"",children:"Sin subcategora"}),ae.map(P=>v.jsx("option",{value:P.id,children:P.name},P.id))]})]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.6rem"},children:[v.jsx("input",{id:"product-active",type:"checkbox",checked:h.active,onChange:P=>m(ie=>({...ie,active:P.target.checked})),style:{width:16,height:16,cursor:"pointer",accentColor:"var(--vsm-brand)"}}),v.jsx("label",{htmlFor:"product-active",style:{...cs,margin:0,cursor:"pointer",fontWeight:600},children:"Producto activo (visible en el catlogo)"})]}),v.jsxs("div",{children:[v.jsxs("label",{style:cs,children:["Imgenes"," ",v.jsxs("span",{style:{color:"var(--vsm-gray-mid)",fontWeight:400},children:["(",pe,"/",wh,")  la primera es la principal"]})]}),pe>0&&v.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px",marginBottom:"0.75rem"},children:[p.map((P,ie)=>v.jsxs("div",{style:{position:"relative",width:72,height:72,flexShrink:0},children:[v.jsx("img",{src:P,alt:`Imagen ${ie+1}`,style:{width:72,height:72,objectFit:"cover",borderRadius:"5px",border:ie===0?"2px solid var(--vsm-brand)":"1px solid var(--vsm-gray)"}}),ie===0&&v.jsx("span",{style:{position:"absolute",bottom:3,left:3,backgroundColor:"var(--vsm-brand)",color:"#fff",fontSize:"9px",fontWeight:700,padding:"1px 5px",borderRadius:"2px"},children:"Principal"}),v.jsx("button",{type:"button",onClick:()=>x(ie),style:sb,children:""})]},ie)),b.map((P,ie)=>v.jsxs("div",{style:{position:"relative",width:72,height:72,flexShrink:0},children:[v.jsx("img",{src:URL.createObjectURL(P),alt:P.name,style:{width:72,height:72,objectFit:"cover",borderRadius:"5px",border:"2px dashed var(--vsm-brand)"}}),v.jsx("span",{style:{position:"absolute",bottom:3,left:3,backgroundColor:"#F5A623",color:"#fff",fontSize:"9px",fontWeight:700,padding:"1px 5px",borderRadius:"2px"},children:"Por subir"}),v.jsx("button",{type:"button",onClick:()=>M(ie),style:sb,children:""})]},`p-${ie}`))]}),O&&v.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:[v.jsx("input",{value:w,onChange:P=>L(P.target.value),onKeyDown:P=>{P.key==="Enter"&&(P.preventDefault(),R())},placeholder:"https://... pegar URL de imagen",style:{...wa,flex:1},onFocus:qe,onBlur:ze}),v.jsx("button",{type:"button",onClick:R,disabled:!w.trim(),style:{padding:"9px 14px",borderRadius:"5px",border:"none",backgroundColor:w.trim()?"var(--vsm-brand)":"var(--vsm-gray)",color:"#fff",fontSize:"12px",fontWeight:700,cursor:w.trim()?"pointer":"not-allowed",fontFamily:"inherit",whiteSpace:"nowrap"},children:"+ URL"})]}),O&&v.jsxs("div",{children:[v.jsx("p",{style:{fontSize:"11px",color:"var(--vsm-gray-mid)",marginBottom:"4px"},children:"O subir archivo(s):"}),v.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:k,style:{fontSize:"13px",color:"var(--vsm-gray-mid)"}},B)]}),!O&&v.jsxs("p",{style:{fontSize:"12px",color:"var(--vsm-gray-mid)",marginTop:"4px"},children:["Mximo de ",wh," imgenes alcanzado."]})]}),j&&v.jsx("div",{style:{backgroundColor:"#FEF2F2",border:"1px solid #FECACA",borderRadius:"5px",padding:"10px 14px"},children:v.jsx("p",{style:{color:"#DC2626",fontSize:"13px",fontWeight:600},children:j})}),v.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end",paddingTop:"0.5rem"},children:[v.jsx("button",{type:"button",onClick:e,disabled:W,style:{padding:"9px 20px",borderRadius:"5px",border:"1px solid var(--vsm-gray)",backgroundColor:"var(--vsm-white)",color:"var(--vsm-gray-mid)",fontSize:"13px",fontWeight:600,cursor:"pointer",fontFamily:"inherit"},children:"Cancelar"}),v.jsx("button",{type:"submit",disabled:W,style:{padding:"9px 20px",borderRadius:"5px",border:"none",backgroundColor:"var(--vsm-brand)",color:"#fff",fontSize:"13px",fontWeight:700,cursor:W?"not-allowed":"pointer",opacity:W?.75:1,fontFamily:"inherit"},children:W?"Guardando...":"Guardar"})]})]})})]})};async function ab(r){const[e,n]=await Promise.all([Ms(ks(qn(Qe,"subcategories"),Bn("categoryId","==",r),Bn("active","==",!0))),Ms(ks(qn(Qe,"products"),Bn("categoryId","==",r),Bn("active","==",!0)))]);return{activeSubcategories:e.docs.map(s=>({id:s.id,...s.data()})),activeProducts:n.docs.map(s=>({id:s.id,...s.data()}))}}async function aM(r){await Si(hn(Qe,"categories",r),{active:!1})}async function ob(r,e){const n=Sg(Qe);n.update(hn(Qe,"categories",r),{active:!e}),e&&(await Ms(ks(qn(Qe,"subcategories"),Bn("categoryId","==",r)))).docs.forEach(o=>n.update(o.ref,{active:!1})),await n.commit()}async function oM(r,e){const n=Sg(Qe);n.update(hn(Qe,"categories",r),{name:e,updatedAt:ws()});const[s,o]=await Promise.all([Ms(ks(qn(Qe,"subcategories"),Bn("categoryId","==",r))),Ms(ks(qn(Qe,"products"),Bn("categoryId","==",r)))]);s.docs.forEach(u=>n.update(u.ref,{categoryName:e})),o.docs.forEach(u=>n.update(u.ref,{categoryName:e})),await n.commit()}async function lM(r){return{activeProducts:(await Ms(ks(qn(Qe,"products"),Bn("subcategoryId","==",r),Bn("active","==",!0)))).docs.map(n=>({id:n.id,...n.data()}))}}async function uM(r){await Si(hn(Qe,"subcategories",r),{active:!1})}async function cM(r,e){await Si(hn(Qe,"subcategories",r),{active:!e})}async function hM(r,e){const n=Sg(Qe);n.update(hn(Qe,"subcategories",r),{name:e,updatedAt:ws()}),(await Ms(ks(qn(Qe,"products"),Bn("subcategoryId","==",r)))).docs.forEach(o=>n.update(o.ref,{subcategoryName:e})),await n.commit()}const Cp=({isOpen:r,onClose:e,onConfirm:n,title:s,message:o,loading:u})=>v.jsxs(xu,{isOpen:r,onClose:e,maxWidth:"420px",children:[v.jsx("h3",{style:{fontWeight:800,fontSize:"1.1rem",color:"var(--vsm-black)",marginBottom:"0.75rem"},children:s}),v.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"14px",marginBottom:"1.5rem",lineHeight:1.6},children:o}),v.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[v.jsx("button",{onClick:e,disabled:u,style:{padding:"9px 20px",borderRadius:"5px",border:"1px solid var(--vsm-gray)",backgroundColor:"var(--vsm-white)",color:"var(--vsm-gray-mid)",fontSize:"13px",fontWeight:600,cursor:u?"not-allowed":"pointer",fontFamily:"inherit"},children:"Cancelar"}),v.jsx("button",{onClick:n,disabled:u,style:{padding:"9px 20px",borderRadius:"5px",border:"none",backgroundColor:"#DC2626",color:"#fff",fontSize:"13px",fontWeight:700,cursor:u?"not-allowed":"pointer",opacity:u?.75:1,fontFamily:"inherit"},children:u?"Eliminando...":"Eliminar"})]})]}),lb=({active:r,onChange:e,disabled:n})=>v.jsx("button",{type:"button",onClick:e,disabled:n,"aria-label":r?"Desactivar":"Activar",style:{width:36,height:20,borderRadius:10,border:"none",backgroundColor:r?"var(--vsm-brand)":"var(--vsm-gray)",position:"relative",cursor:n?"not-allowed":"pointer",flexShrink:0,transition:"background-color 0.2s",opacity:n?.6:1,padding:0},children:v.jsx("span",{style:{position:"absolute",top:2,left:r?18:2,width:16,height:16,borderRadius:"50%",backgroundColor:"#fff",transition:"left 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.25)"}})}),hs={padding:"7px 10px",border:"1px solid var(--vsm-gray)",borderRadius:"5px",fontSize:"13px",fontFamily:"inherit",outline:"none",flex:1,color:"var(--vsm-black)",backgroundColor:"var(--vsm-white)"},Sn={padding:"5px 12px",borderRadius:"4px",border:"none",fontSize:"12px",fontWeight:600,cursor:"pointer",fontFamily:"inherit",whiteSpace:"nowrap"},fM=()=>{const{data:r}=rr("categories",SE("createdAt","asc")),{data:e}=rr("subcategories",SE("createdAt","asc")),{data:n}=rr("products"),s=z.useMemo(()=>{const Y=new Map;for(const ye of e)Y.has(ye.categoryId)||Y.set(ye.categoryId,[]),Y.get(ye.categoryId).push(ye);return Y},[e]),o=z.useMemo(()=>{const Y=new Map;for(const ye of e)ye.active&&Y.set(ye.categoryId,(Y.get(ye.categoryId)??0)+1);return Y},[e]),u=z.useMemo(()=>{const Y=new Map;for(const ye of n)ye.active!==!1&&Y.set(ye.categoryId,(Y.get(ye.categoryId)??0)+1);return Y},[n]),h=z.useMemo(()=>{const Y=new Map;for(const ye of n)ye.active!==!1&&ye.subcategoryId&&Y.set(ye.subcategoryId,(Y.get(ye.subcategoryId)??0)+1);return Y},[n]),[m,p]=z.useState(""),[g,b]=z.useState(""),[S,w]=z.useState(null),[L,B]=z.useState(!1),X=async()=>{const Y=m.trim();if(!Y){w("El nombre no puede estar vaco.");return}if(r.some(ye=>ye.name.toLowerCase()===Y.toLowerCase())){w("Ya existe una categora con ese nombre.");return}B(!0),w(null);try{await Tp(qn(Qe,"categories"),{name:Y,description:g.trim(),active:!0,createdAt:ws()}),p(""),b("")}catch{w("Error al agregar. Intenta de nuevo.")}finally{B(!1)}},[j,se]=z.useState(null),[W,te]=z.useState(""),[ue,ae]=z.useState(""),[pe,O]=z.useState(null),[R,x]=z.useState(!1),M=Y=>{se(Y.id),te(Y.name),ae(Y.description??""),O(null)},k=async Y=>{const ye=W.trim();if(!ye){O("El nombre no puede estar vaco.");return}if(r.some(Je=>Je.id!==Y.id&&Je.name.toLowerCase()===ye.toLowerCase())){O("Ya existe una categora con ese nombre.");return}x(!0),O(null);try{ye!==Y.name&&await oM(Y.id,ye),ue.trim()!==(Y.description??"")&&await Si(hn(Qe,"categories",Y.id),{description:ue.trim()}),se(null)}catch{O("Error al guardar.")}finally{x(!1)}},[N,C]=z.useState(null),[qe,ze]=z.useState(!1),[P,ie]=z.useState(null),de=async Y=>{const ye=await ab(Y.id);ye.activeSubcategories.length>0||ye.activeProducts.length>0?ie({cat:Y,subCount:ye.activeSubcategories.length,prodCount:ye.activeProducts.length}):C(Y)},Re=async()=>{if(N){ze(!0);try{await aM(N.id),C(null)}catch{}finally{ze(!1)}}},[D,J]=z.useState(null),[oe,ce]=z.useState(null),ge=async Y=>{if(Y.active){const ye=await ab(Y.id);if(ye.activeSubcategories.length>0||ye.activeProducts.length>0){J({cat:Y,subCount:ye.activeSubcategories.length,prodCount:ye.activeProducts.length});return}}ce(Y.id);try{await ob(Y.id,Y.active)}catch{}finally{ce(null)}},ke=async()=>{if(!D)return;const{cat:Y}=D;J(null),ce(Y.id);try{await ob(Y.id,Y.active)}catch{}finally{ce(null)}},[be,Pt]=z.useState(null),[Ge,vn]=z.useState({}),[Ci,Qr]=z.useState({}),[Yr,Cn]=z.useState({}),[ir,Ha]=z.useState({}),Ii=async Y=>{const ye=(Ge[Y.id]??"").trim();if(!ye){Cn(We=>({...We,[Y.id]:"El nombre no puede estar vaco."}));return}if((s.get(Y.id)??[]).some(We=>We.name.toLowerCase()===ye.toLowerCase())){Cn(We=>({...We,[Y.id]:"Ya existe una subcategora con ese nombre."}));return}Ha(We=>({...We,[Y.id]:!0})),Cn(We=>({...We,[Y.id]:""}));try{await Tp(qn(Qe,"subcategories"),{name:ye,description:(Ci[Y.id]??"").trim(),categoryId:Y.id,categoryName:Y.name,active:!0,createdAt:ws()}),vn(We=>({...We,[Y.id]:""})),Qr(We=>({...We,[Y.id]:""}))}catch{Cn(We=>({...We,[Y.id]:"Error al agregar."}))}finally{Ha(We=>({...We,[Y.id]:!1}))}},[nn,Di]=z.useState(null),[yt,St]=z.useState(""),[In,Ga]=z.useState(""),[Ni,Er]=z.useState(null),[Hn,sr]=z.useState(!1),Bt=Y=>{Di(Y.id),St(Y.name),Ga(Y.description??""),Er(null)},fn=async Y=>{const ye=yt.trim();if(!ye){Er("El nombre no puede estar vaco.");return}if((s.get(Y.categoryId)??[]).some(We=>We.id!==Y.id&&We.name.toLowerCase()===ye.toLowerCase())){Er("Ya existe una subcategora con ese nombre.");return}sr(!0),Er(null);try{ye!==Y.name&&await hM(Y.id,ye),In.trim()!==(Y.description??"")&&await Si(hn(Qe,"subcategories",Y.id),{description:In.trim()}),Di(null)}catch{Er("Error al guardar.")}finally{sr(!1)}},[Dt,zs]=z.useState(null),[Ka,Bs]=z.useState(!1),[Qt,Gn]=z.useState(null),Dn=async Y=>{const ye=await lM(Y.id);ye.activeProducts.length>0?Gn({sub:Y,prodCount:ye.activeProducts.length}):zs(Y)},_n=async()=>{if(Dt){Bs(!0);try{await uM(Dt.id),zs(null)}catch{}finally{Bs(!1)}}},[br,Wr]=z.useState(null),Fs=async Y=>{Wr(Y.id);try{await cM(Y.id,Y.active)}catch{}finally{Wr(null)}};return v.jsxs("div",{children:[v.jsx("h3",{style:{fontWeight:700,fontSize:"1rem",color:"var(--vsm-black)",marginBottom:"1.25rem"},children:"Categoras"}),v.jsxs("div",{style:{backgroundColor:"var(--vsm-bg)",borderRadius:"6px",padding:"1rem",marginBottom:"1.5rem",border:"1px solid var(--vsm-gray)"},children:[v.jsx("p",{style:{fontSize:"12px",fontWeight:700,color:"var(--vsm-gray-mid)",marginBottom:"0.6rem"},children:"Nueva categora"}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[v.jsx("input",{value:m,onChange:Y=>{p(Y.target.value),w(null)},onKeyDown:Y=>{Y.key==="Enter"&&X()},placeholder:"Nombre *",style:{...hs,minWidth:160},onFocus:Y=>Y.currentTarget.style.borderColor="var(--vsm-brand)",onBlur:Y=>Y.currentTarget.style.borderColor="var(--vsm-gray)"}),v.jsx("input",{value:g,onChange:Y=>b(Y.target.value),placeholder:"Descripcin (opcional)",style:{...hs,minWidth:200},onFocus:Y=>Y.currentTarget.style.borderColor="var(--vsm-brand)",onBlur:Y=>Y.currentTarget.style.borderColor="var(--vsm-gray)"}),v.jsx("button",{onClick:X,disabled:L,style:{...Sn,backgroundColor:"var(--vsm-brand)",color:"#fff",padding:"7px 16px",opacity:L?.75:1,cursor:L?"not-allowed":"pointer"},children:L?"Agregando...":"Agregar"})]}),S&&v.jsx("p",{style:{color:"#DC2626",fontSize:"12px",marginTop:"0.4rem"},children:S})]}),r.length===0?v.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"13px"},children:"No hay categoras an."}):v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:r.map(Y=>{const ye=be===Y.id,Je=j===Y.id,We=s.get(Y.id)??[],Tr=We.length,Sr=o.get(Y.id)??0,qs=u.get(Y.id)??0;return v.jsxs("div",{style:{border:"1px solid var(--vsm-gray)",borderRadius:"6px",overflow:"hidden",opacity:Y.active?1:.65},children:[v.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.6rem",padding:"10px 12px",backgroundColor:"var(--vsm-white)"},children:Je?v.jsxs(v.Fragment,{children:[v.jsx("input",{value:W,onChange:Te=>{te(Te.target.value),O(null)},onKeyDown:Te=>{Te.key==="Enter"&&k(Y)},style:{...hs,maxWidth:200},onFocus:Te=>Te.currentTarget.style.borderColor="var(--vsm-brand)",onBlur:Te=>Te.currentTarget.style.borderColor="var(--vsm-gray)",autoFocus:!0}),v.jsx("input",{value:ue,onChange:Te=>ae(Te.target.value),placeholder:"Descripcin",style:{...hs,maxWidth:220},onFocus:Te=>Te.currentTarget.style.borderColor="var(--vsm-brand)",onBlur:Te=>Te.currentTarget.style.borderColor="var(--vsm-gray)"}),pe&&v.jsx("span",{style:{color:"#DC2626",fontSize:"11px"},children:pe}),v.jsx("button",{onClick:()=>k(Y),disabled:R,style:{...Sn,backgroundColor:"var(--vsm-brand)",color:"#fff",opacity:R?.75:1,cursor:R?"not-allowed":"pointer"},children:R?"...":"Guardar"}),v.jsx("button",{onClick:()=>se(null),style:{...Sn,border:"1px solid var(--vsm-gray)",color:"var(--vsm-gray-mid)",backgroundColor:"transparent",cursor:"pointer"},children:"Cancelar"})]}):v.jsxs(v.Fragment,{children:[v.jsx("button",{type:"button",onClick:()=>Pt(ye?null:Y.id),style:{background:"none",border:"none",cursor:"pointer",padding:"2px 4px",fontSize:"12px",color:"var(--vsm-gray-mid)"},title:ye?"Colapsar":"Expandir subcategoras",children:ye?"":""}),v.jsxs("div",{style:{flex:1,minWidth:0},children:[v.jsx("span",{style:{fontSize:"14px",fontWeight:600,color:"var(--vsm-black)"},children:Y.name}),Y.description&&v.jsx("span",{style:{fontSize:"11px",color:"var(--vsm-gray-mid)",marginLeft:"8px"},children:Y.description})]}),v.jsxs("span",{style:{fontSize:"11px",color:"var(--vsm-gray-mid)",whiteSpace:"nowrap"},children:[Sr,"/",Tr," subs  ",qs," prods"]}),v.jsx(lb,{active:Y.active,onChange:()=>ge(Y),disabled:oe===Y.id}),v.jsx("button",{onClick:()=>M(Y),style:{...Sn,border:"1px solid var(--vsm-gray)",color:"var(--vsm-gray-mid)",backgroundColor:"transparent",cursor:"pointer"},children:"Editar"}),v.jsx("button",{onClick:()=>de(Y),style:{...Sn,backgroundColor:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA",cursor:"pointer"},children:"Eliminar"})]})}),ye&&v.jsxs("div",{style:{borderTop:"1px solid var(--vsm-gray)",backgroundColor:"var(--vsm-bg)",padding:"0.75rem 1rem"},children:[We.length===0?v.jsx("p",{style:{fontSize:"12px",color:"var(--vsm-gray-mid)",marginBottom:"0.75rem"},children:"Sin subcategoras."}):v.jsx("div",{style:{overflowX:"auto",marginBottom:"0.75rem"},children:v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[v.jsx("thead",{children:v.jsx("tr",{style:{borderBottom:"1px solid var(--vsm-gray)"},children:["Nombre","Descripcin","Prods activos","Activo","Acciones"].map(Te=>v.jsx("th",{style:{textAlign:"left",padding:"5px 8px",fontWeight:700,color:"var(--vsm-gray-mid)",whiteSpace:"nowrap"},children:Te},Te))})}),v.jsx("tbody",{children:We.map(Te=>{const Yt=nn===Te.id,al=h.get(Te.id)??0;return v.jsx("tr",{style:{borderBottom:"1px solid var(--vsm-gray)",opacity:Te.active?1:.6},children:Yt?v.jsx("td",{colSpan:5,style:{padding:"6px 8px"},children:v.jsxs("div",{style:{display:"flex",gap:"0.4rem",flexWrap:"wrap",alignItems:"center"},children:[v.jsx("input",{value:yt,onChange:ht=>{St(ht.target.value),Er(null)},onKeyDown:ht=>{ht.key==="Enter"&&fn(Te)},placeholder:"Nombre",style:{...hs,maxWidth:180},onFocus:ht=>ht.currentTarget.style.borderColor="var(--vsm-brand)",onBlur:ht=>ht.currentTarget.style.borderColor="var(--vsm-gray)",autoFocus:!0}),v.jsx("input",{value:In,onChange:ht=>Ga(ht.target.value),placeholder:"Descripcin",style:{...hs,maxWidth:200},onFocus:ht=>ht.currentTarget.style.borderColor="var(--vsm-brand)",onBlur:ht=>ht.currentTarget.style.borderColor="var(--vsm-gray)"}),Ni&&v.jsx("span",{style:{color:"#DC2626",fontSize:"11px"},children:Ni}),v.jsx("button",{onClick:()=>fn(Te),disabled:Hn,style:{...Sn,backgroundColor:"var(--vsm-brand)",color:"#fff",opacity:Hn?.75:1,cursor:Hn?"not-allowed":"pointer"},children:Hn?"...":"Guardar"}),v.jsx("button",{onClick:()=>Di(null),style:{...Sn,border:"1px solid var(--vsm-gray)",color:"var(--vsm-gray-mid)",backgroundColor:"transparent",cursor:"pointer"},children:"Cancelar"})]})}):v.jsxs(v.Fragment,{children:[v.jsx("td",{style:{padding:"6px 8px",fontWeight:600,color:"var(--vsm-black)"},children:Te.name}),v.jsx("td",{style:{padding:"6px 8px",color:"var(--vsm-gray-mid)"},children:Te.description??""}),v.jsx("td",{style:{padding:"6px 8px",color:"var(--vsm-gray-mid)"},children:al}),v.jsx("td",{style:{padding:"6px 8px"},children:v.jsx(lb,{active:Te.active,onChange:()=>Fs(Te),disabled:br===Te.id})}),v.jsx("td",{style:{padding:"6px 8px"},children:v.jsxs("div",{style:{display:"flex",gap:"0.3rem"},children:[v.jsx("button",{onClick:()=>Bt(Te),style:{...Sn,border:"1px solid var(--vsm-gray)",color:"var(--vsm-gray-mid)",backgroundColor:"transparent",cursor:"pointer",padding:"3px 8px"},children:"Editar"}),v.jsx("button",{onClick:()=>Dn(Te),style:{...Sn,backgroundColor:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA",cursor:"pointer",padding:"3px 8px"},children:"Eliminar"})]})})]})},Te.id)})})]})}),v.jsxs("div",{style:{borderTop:"1px dashed var(--vsm-gray)",paddingTop:"0.6rem"},children:[v.jsx("p",{style:{fontSize:"11px",fontWeight:700,color:"var(--vsm-gray-mid)",marginBottom:"0.4rem"},children:"Nueva subcategora"}),v.jsxs("div",{style:{display:"flex",gap:"0.4rem",flexWrap:"wrap"},children:[v.jsx("input",{value:Ge[Y.id]??"",onChange:Te=>{vn(Yt=>({...Yt,[Y.id]:Te.target.value})),Cn(Yt=>({...Yt,[Y.id]:""}))},onKeyDown:Te=>{Te.key==="Enter"&&Ii(Y)},placeholder:"Nombre *",style:{...hs,maxWidth:180,fontSize:"12px",padding:"5px 8px"},onFocus:Te=>Te.currentTarget.style.borderColor="var(--vsm-brand)",onBlur:Te=>Te.currentTarget.style.borderColor="var(--vsm-gray)"}),v.jsx("input",{value:Ci[Y.id]??"",onChange:Te=>Qr(Yt=>({...Yt,[Y.id]:Te.target.value})),placeholder:"Descripcin (opcional)",style:{...hs,maxWidth:220,fontSize:"12px",padding:"5px 8px"},onFocus:Te=>Te.currentTarget.style.borderColor="var(--vsm-brand)",onBlur:Te=>Te.currentTarget.style.borderColor="var(--vsm-gray)"}),v.jsx("button",{onClick:()=>Ii(Y),disabled:ir[Y.id],style:{...Sn,backgroundColor:"var(--vsm-brand)",color:"#fff",padding:"5px 14px",fontSize:"12px",opacity:ir[Y.id]?.75:1,cursor:ir[Y.id]?"not-allowed":"pointer"},children:ir[Y.id]?"...":"Agregar"})]}),Yr[Y.id]&&v.jsx("p",{style:{color:"#DC2626",fontSize:"11px",marginTop:"0.3rem"},children:Yr[Y.id]})]})]})]},Y.id)})}),v.jsx(xu,{isOpen:!!P,onClose:()=>ie(null),maxWidth:"420px",children:P&&v.jsxs("div",{children:[v.jsxs("h4",{style:{fontWeight:700,fontSize:"1rem",marginBottom:"0.75rem",color:"var(--vsm-black)"},children:['No se puede eliminar "',P.cat.name,'"']}),v.jsx("p",{style:{fontSize:"13px",color:"var(--vsm-gray-mid)",marginBottom:"0.5rem"},children:"Esta categora tiene dependencias activas:"}),v.jsxs("ul",{style:{fontSize:"13px",color:"var(--vsm-black)",paddingLeft:"1.25rem",marginBottom:"1rem"},children:[P.subCount>0&&v.jsxs("li",{children:[P.subCount," subcategora",P.subCount>1?"s":""," activa",P.subCount>1?"s":""]}),P.prodCount>0&&v.jsxs("li",{children:[P.prodCount," producto",P.prodCount>1?"s":""," activo",P.prodCount>1?"s":""]})]}),v.jsx("p",{style:{fontSize:"12px",color:"var(--vsm-gray-mid)"},children:"Desactiva o reasigna los productos y subcategoras antes de eliminar la categora."}),v.jsx("div",{style:{textAlign:"right",marginTop:"1.25rem"},children:v.jsx("button",{onClick:()=>ie(null),style:{...Sn,border:"1px solid var(--vsm-gray)",color:"var(--vsm-gray-mid)",backgroundColor:"transparent",cursor:"pointer",padding:"7px 18px"},children:"Entendido"})})]})}),v.jsx(Cp,{isOpen:!!N,onClose:()=>C(null),onConfirm:Re,title:"Eliminar categora",message:`Marcar "${N?.name}" como eliminada? Esta accin ocultar la categora del catlogo.`,loading:qe}),v.jsx(xu,{isOpen:!!D,onClose:()=>J(null),maxWidth:"420px",children:D&&v.jsxs("div",{children:[v.jsxs("h4",{style:{fontWeight:700,fontSize:"1rem",marginBottom:"0.75rem",color:"var(--vsm-black)"},children:['Desactivar "',D.cat.name,'"']}),v.jsx("p",{style:{fontSize:"13px",color:"var(--vsm-gray-mid)",marginBottom:"0.5rem"},children:"Al desactivar esta categora tambin se desactivarn:"}),v.jsxs("ul",{style:{fontSize:"13px",color:"var(--vsm-black)",paddingLeft:"1.25rem",marginBottom:"1rem"},children:[D.subCount>0&&v.jsxs("li",{children:[D.subCount," subcategora",D.subCount>1?"s":""," activa",D.subCount>1?"s":""]}),D.prodCount>0&&v.jsxs("li",{children:[D.prodCount," producto",D.prodCount>1?"s":""," activo",D.prodCount>1?"s":""," (no se desactivan automticamente)"]})]}),v.jsx("p",{style:{fontSize:"12px",color:"var(--vsm-gray-mid)",marginBottom:"1rem"},children:"Continuar?"}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[v.jsx("button",{onClick:()=>J(null),style:{...Sn,border:"1px solid var(--vsm-gray)",color:"var(--vsm-gray-mid)",backgroundColor:"transparent",cursor:"pointer",padding:"7px 18px"},children:"Cancelar"}),v.jsx("button",{onClick:ke,style:{...Sn,backgroundColor:"var(--vsm-brand)",color:"#fff",cursor:"pointer",padding:"7px 18px"},children:"Desactivar"})]})]})}),v.jsx(xu,{isOpen:!!Qt,onClose:()=>Gn(null),maxWidth:"400px",children:Qt&&v.jsxs("div",{children:[v.jsxs("h4",{style:{fontWeight:700,fontSize:"1rem",marginBottom:"0.75rem",color:"var(--vsm-black)"},children:['No se puede eliminar "',Qt.sub.name,'"']}),v.jsxs("p",{style:{fontSize:"13px",color:"var(--vsm-gray-mid)",marginBottom:"0.5rem"},children:["Esta subcategora tiene ",Qt.prodCount," producto",Qt.prodCount>1?"s":""," activo",Qt.prodCount>1?"s":"","."]}),v.jsx("p",{style:{fontSize:"12px",color:"var(--vsm-gray-mid)"},children:"Desactiva o reasigna los productos antes de eliminar la subcategora."}),v.jsx("div",{style:{textAlign:"right",marginTop:"1.25rem"},children:v.jsx("button",{onClick:()=>Gn(null),style:{...Sn,border:"1px solid var(--vsm-gray)",color:"var(--vsm-gray-mid)",backgroundColor:"transparent",cursor:"pointer",padding:"7px 18px"},children:"Entendido"})})]})}),v.jsx(Cp,{isOpen:!!Dt,onClose:()=>zs(null),onConfirm:_n,title:"Eliminar subcategora",message:`Marcar "${Dt?.name}" como eliminada? Esta accin ocultar la subcategora del catlogo.`,loading:Ka})]})},Ym=10,dM=()=>{const{data:r}=rr("products"),{data:e}=rr("categories"),{data:n}=rr("subcategories"),[s,o]=z.useState("productos"),[u,h]=z.useState(1);z.useEffect(()=>{h(1)},[r]);const[m,p]=z.useState(!1),[g,b]=z.useState(),[S,w]=z.useState(null),[L,B]=z.useState(!1),[X,j]=z.useState(null),se=z.useMemo(()=>new Map(e.map(N=>[N.id,N.name])),[e]),W=z.useMemo(()=>new Map(n.map(N=>[N.id,N.name])),[n]),te=N=>se.get(N)??"",ue=N=>N?W.get(N)??"":"",ae=Math.max(1,Math.ceil(r.length/Ym)),pe=r.slice((u-1)*Ym,u*Ym),O=async()=>{if(S){B(!0);try{await Si(hn(Qe,"products",S.id),{active:!1}),w(null)}catch{}finally{B(!1)}}},R=async N=>{j(N.id);try{await Si(hn(Qe,"products",N.id),{active:N.active===!1})}catch{}finally{j(null)}},x=()=>{b(void 0),p(!0)},M=N=>{b(N),p(!0)},k=N=>({padding:"7px 18px",border:"none",borderBottom:N?"2px solid var(--vsm-brand)":"2px solid transparent",backgroundColor:"transparent",color:N?"var(--vsm-brand)":"var(--vsm-gray-mid)",fontWeight:N?700:600,fontSize:"13px",cursor:"pointer",fontFamily:"inherit"});return v.jsxs("div",{children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[v.jsx("h2",{style:{fontWeight:800,fontSize:"1.1rem",color:"var(--vsm-black)"},children:"Productos"}),s==="productos"&&v.jsx("button",{onClick:x,style:{backgroundColor:"var(--vsm-brand)",color:"#fff",border:"none",borderRadius:"5px",padding:"8px 18px",fontSize:"13px",fontWeight:700,cursor:"pointer",fontFamily:"inherit"},children:"+ Nuevo Producto"})]}),v.jsxs("div",{style:{borderBottom:"1px solid var(--vsm-gray)",marginBottom:"1.25rem",display:"flex"},children:[v.jsx("button",{style:k(s==="productos"),onClick:()=>o("productos"),children:"Productos"}),v.jsx("button",{style:k(s==="categorias"),onClick:()=>o("categorias"),children:"Categoras"})]}),s==="categorias"?v.jsx(fM,{}):v.jsxs(v.Fragment,{children:[r.length===0?v.jsx("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"13px"},children:"No hay productos an. Crea el primero."}):v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{overflowX:"auto"},children:v.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[v.jsx("thead",{children:v.jsx("tr",{style:{borderBottom:"2px solid var(--vsm-gray)"},children:["Imagen","Nombre","Categora","Subcategora","Precio","Stock","Activo","Acciones"].map(N=>v.jsx("th",{style:{textAlign:"left",padding:"8px 10px",fontWeight:700,color:"var(--vsm-gray-mid)",whiteSpace:"nowrap"},children:N},N))})}),v.jsx("tbody",{children:pe.map(N=>{const C=N.active!==!1;return v.jsxs("tr",{style:{borderBottom:"1px solid var(--vsm-gray)",opacity:C?1:.55},children:[v.jsx("td",{style:{padding:"8px 10px"},children:N.imageUrl?v.jsx("img",{src:N.imageUrl,alt:N.name,style:{width:48,height:48,objectFit:"cover",borderRadius:"4px",border:"1px solid var(--vsm-gray)"}}):v.jsx("span",{style:{fontSize:"1.5rem"},children:""})}),v.jsx("td",{style:{padding:"8px 10px",fontWeight:600,color:"var(--vsm-black)"},children:N.name}),v.jsx("td",{style:{padding:"8px 10px",color:"var(--vsm-gray-mid)"},children:te(N.categoryId)}),v.jsx("td",{style:{padding:"8px 10px",color:"var(--vsm-gray-mid)"},children:ue(N.subcategoryId)}),v.jsx("td",{style:{padding:"8px 10px",color:"var(--vsm-black)"},children:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}).format(N.price)}),v.jsx("td",{style:{padding:"8px 10px",fontWeight:N.stock===0?700:400,color:N.stock===0?"#DC2626":"var(--vsm-black)"},children:N.stock}),v.jsx("td",{style:{padding:"8px 10px"},children:v.jsx("button",{onClick:()=>R(N),disabled:X===N.id,style:{padding:"3px 10px",borderRadius:"12px",border:"none",fontSize:"11px",fontWeight:700,cursor:X===N.id?"not-allowed":"pointer",fontFamily:"inherit",backgroundColor:C?"#DCFCE7":"#F5F5F5",color:C?"#16A34A":"var(--vsm-gray-mid)",opacity:X===N.id?.6:1,whiteSpace:"nowrap"},children:C?"Activo":"Inactivo"})}),v.jsx("td",{style:{padding:"8px 10px"},children:v.jsxs("div",{style:{display:"flex",gap:"0.4rem"},children:[v.jsx("button",{onClick:()=>M(N),style:ub("#E8E8E8","#111"),children:"Editar"}),v.jsx("button",{onClick:()=>w(N),style:ub("#FEF2F2","#DC2626"),children:"Desactivar"})]})})]},N.id)})})]})}),ae>1&&v.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"1rem",alignItems:"center"},children:[v.jsx("button",{onClick:()=>h(N=>Math.max(1,N-1)),disabled:u===1,style:cb(u===1),children:" Ant"}),v.jsxs("span",{style:{fontSize:"12px",color:"var(--vsm-gray-mid)"},children:["Pg ",u," / ",ae]}),v.jsx("button",{onClick:()=>h(N=>Math.min(ae,N+1)),disabled:u===ae,style:cb(u===ae),children:"Sig "})]})]}),v.jsx(sM,{isOpen:m,onClose:()=>p(!1),product:g,categories:e,subcategories:n}),v.jsx(Cp,{isOpen:!!S,onClose:()=>w(null),onConfirm:O,title:"Desactivar producto",message:`"${S?.name}" dejar de aparecer en el catlogo. Puedes reactivarlo desde la columna Activo.`,loading:L})]})]})},ub=(r,e)=>({padding:"4px 10px",borderRadius:"4px",border:"none",backgroundColor:r,color:e,fontSize:"12px",fontWeight:600,cursor:"pointer",fontFamily:"inherit"}),cb=r=>({padding:"5px 12px",borderRadius:"4px",border:"1px solid var(--vsm-gray)",backgroundColor:r?"var(--vsm-gray)":"var(--vsm-white)",color:r?"var(--vsm-gray-mid)":"var(--vsm-black)",fontSize:"12px",fontWeight:600,cursor:r?"not-allowed":"pointer",fontFamily:"inherit"}),E1=hn(Qe,"settings","general");async function mM(){const r=await fS(E1);return r.exists()?r.data():null}async function pM(r){const e=r.name.split(".").pop(),n=m1(p1,`logos/store-logo.${e}`);return await f1(n,r),d1(n)}async function gM(r,e){await tD(E1,{...r,logoUrl:e,updatedAt:ws()},{merge:!0})}const hb={storeName:"",description:"",email:"",phone:"",social:{instagram:"",facebook:"",whatsapp:"",tiktok:""}},hu={width:"100%",padding:"9px 12px",border:"1px solid var(--vsm-gray)",borderRadius:"5px",fontSize:"13px",fontFamily:"inherit",outline:"none",color:"var(--vsm-black)",backgroundColor:"var(--vsm-white)"},Mo={fontSize:"12px",fontWeight:700,color:"var(--vsm-black)",display:"block",marginBottom:"5px"},yM=()=>{const r=_1(),[e,n]=z.useState(hb),[s,o]=z.useState(""),[u,h]=z.useState(null),[m,p]=z.useState(null),[g,b]=z.useState(0),[S,w]=z.useState(!1),[L,B]=z.useState(!0),[X,j]=z.useState(!1),[se,W]=z.useState(null);z.useEffect(()=>{mM().then(x=>{x&&(n({storeName:x.storeName??"",description:x.description??"",email:x.email??"",phone:x.phone??"",social:x.social??hb.social}),o(x.logoUrl??"")),B(!1)}).catch(()=>B(!1))},[]);const te=(x,M)=>n(k=>({...k,[x]:M})),ue=(x,M)=>n(k=>({...k,social:{...k.social,[x]:M}})),ae=x=>{r();const M=x.target.files?.[0];M&&(h(M),p(URL.createObjectURL(M)))},pe=async x=>{x.preventDefault(),w(!0),W(null),j(!1);try{let M=s;u&&(M=await pM(u),o(M),h(null),p(null),b(k=>k+1)),await gM(e,M),j(!0),setTimeout(()=>j(!1),3e3)}catch{W("Error al guardar. Intenta de nuevo.")}finally{w(!1)}},O=x=>x.currentTarget.style.borderColor="var(--vsm-brand)",R=x=>x.currentTarget.style.borderColor="var(--vsm-gray)";return L?v.jsx("div",{style:{color:"var(--vsm-gray-mid)",fontSize:"13px"},children:"Cargando configuracin..."}):v.jsxs("div",{children:[v.jsx("h2",{style:{fontWeight:800,fontSize:"1.1rem",color:"var(--vsm-black)",marginBottom:"1.25rem"},children:"Configuracin de la tienda"}),v.jsx("form",{onSubmit:pe,noValidate:!0,children:v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem",maxWidth:"540px"},children:[v.jsxs("div",{children:[v.jsx("label",{style:Mo,children:"Logo de la tienda"}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[(m||s)&&v.jsx("div",{style:{position:"relative",width:72,height:72},children:v.jsx("img",{src:m??s,alt:"Logo",style:{width:72,height:72,objectFit:"contain",borderRadius:"6px",border:"1px solid var(--vsm-gray)"}})}),v.jsx("input",{type:"file",accept:"image/*",onChange:ae,style:{fontSize:"13px",color:"var(--vsm-gray-mid)"}},g)]}),u&&v.jsxs("p",{style:{fontSize:"12px",color:"var(--vsm-gray-mid)"},children:["Nuevo logo: ",u.name]})]}),v.jsxs("div",{children:[v.jsx("label",{style:Mo,children:"Nombre de la tienda"}),v.jsx("input",{value:e.storeName,onChange:x=>te("storeName",x.target.value),style:hu,onFocus:O,onBlur:R})]}),v.jsxs("div",{children:[v.jsx("label",{style:Mo,children:"Descripcin"}),v.jsx("textarea",{value:e.description,onChange:x=>n(M=>({...M,description:x.target.value})),rows:3,style:{...hu,resize:"vertical"},onFocus:O,onBlur:R})]}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[v.jsxs("div",{children:[v.jsx("label",{style:Mo,children:"Correo de contacto"}),v.jsx("input",{value:e.email,onChange:x=>te("email",x.target.value),type:"email",style:hu,onFocus:O,onBlur:R})]}),v.jsxs("div",{children:[v.jsx("label",{style:Mo,children:"Telfono / WhatsApp"}),v.jsx("input",{value:e.phone,onChange:x=>te("phone",x.target.value),style:hu,onFocus:O,onBlur:R})]})]}),v.jsxs("div",{children:[v.jsx("label",{style:{...Mo,marginBottom:"0.75rem"},children:"Redes sociales"}),v.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.6rem"},children:["instagram","facebook","whatsapp","tiktok"].map(x=>v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx("span",{style:{fontSize:"12px",width:80,color:"var(--vsm-gray-mid)",fontWeight:600,textTransform:"capitalize"},children:x}),v.jsx("input",{value:e.social[x],onChange:M=>ue(x,M.target.value),placeholder:`URL de ${x}`,style:{...hu,flex:1},onFocus:O,onBlur:R})]},x))})]}),se&&v.jsx("div",{style:{backgroundColor:"#FEF2F2",border:"1px solid #FECACA",borderRadius:"5px",padding:"10px 14px"},children:v.jsx("p",{style:{color:"#DC2626",fontSize:"13px",fontWeight:600},children:se})}),X&&v.jsx("div",{style:{backgroundColor:"#F0FDF4",border:"1px solid #86EFAC",borderRadius:"5px",padding:"10px 14px"},children:v.jsx("p",{style:{color:"#16A34A",fontSize:"13px",fontWeight:600},children:"Configuracin guardada correctamente."})}),v.jsx("button",{type:"submit",disabled:S,style:{alignSelf:"flex-start",backgroundColor:"var(--vsm-brand)",color:"#fff",border:"none",borderRadius:"5px",padding:"10px 24px",fontSize:"13px",fontWeight:700,cursor:S?"not-allowed":"pointer",opacity:S?.75:1,fontFamily:"inherit"},children:S?"Guardando...":"Guardar cambios"})]})})]})},fb=[{id:"dashboard",label:"Dashboard"},{id:"productos",label:"Productos"},{id:"configuracion",label:"Configuracin"}],vM=()=>{const{user:r,logout:e}=Lg(),n=Jo(),[s,o]=z.useState("dashboard"),u=async()=>{await e(),n("/Login")},h=r?.displayName??r?.email??"Admin",m=p=>({display:"block",width:"100%",textAlign:"left",padding:"10px 14px",borderRadius:"6px",border:"none",backgroundColor:s===p.id?"var(--vsm-brand)":"transparent",color:s===p.id?"#fff":"var(--vsm-gray-mid)",fontWeight:s===p.id?700:600,fontSize:"13px",cursor:"pointer",fontFamily:"inherit",transition:"background-color 0.15s, color 0.15s"});return v.jsxs("div",{style:{minHeight:"calc(100vh - 96px)",padding:"2rem 1rem"},className:"max-w-6xl w-full mx-auto",children:[v.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",paddingBottom:"1.25rem",borderBottom:"1px solid var(--vsm-gray)",flexWrap:"wrap",gap:"1rem"},children:[v.jsxs("div",{children:[v.jsx("h1",{style:{fontWeight:800,fontSize:"1.4rem",color:"var(--vsm-black)"},children:"Panel de Administracin"}),v.jsxs("p",{style:{color:"var(--vsm-gray-mid)",fontSize:"13px",marginTop:"4px"},children:["Hola, ",v.jsx("strong",{style:{color:"var(--vsm-black)"},children:h})]})]}),v.jsx("button",{onClick:u,style:{backgroundColor:"var(--vsm-black)",color:"#fff",padding:"10px 20px",borderRadius:"5px",border:"none",fontSize:"12px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.07em",cursor:"pointer",fontFamily:"inherit",whiteSpace:"nowrap"},className:"hover:opacity-80 transition-opacity",children:"Cerrar sesin"})]}),v.jsxs("div",{style:{display:"flex",gap:"1.5rem",marginTop:"1.5rem",flexWrap:"wrap"},children:[v.jsx("nav",{className:"hidden md:flex",style:{flexDirection:"column",width:200,flexShrink:0,gap:"0.25rem"},children:fb.map(p=>v.jsx("button",{onClick:()=>o(p.id),style:m(p),children:p.label},p.id))}),v.jsx("nav",{className:"flex md:hidden",style:{width:"100%",borderBottom:"1px solid var(--vsm-gray)",paddingBottom:"0.5rem",gap:"0.25rem"},children:fb.map(p=>v.jsx("button",{onClick:()=>o(p.id),style:{flex:1,padding:"8px 4px",borderRadius:"5px",border:"none",backgroundColor:s===p.id?"var(--vsm-brand)":"transparent",color:s===p.id?"#fff":"var(--vsm-gray-mid)",fontWeight:s===p.id?700:600,fontSize:"12px",cursor:"pointer",fontFamily:"inherit"},children:p.label},p.id))}),v.jsxs("main",{style:{flex:1,minWidth:0},children:[s==="dashboard"&&v.jsx(iM,{}),s==="productos"&&v.jsx(dM,{}),s==="configuracion"&&v.jsx(yM,{})]})]})]})},_M=({children:r})=>{const{user:e,loading:n}=Lg();return n?v.jsx("p",{children:"cargando..."}):e?v.jsx(v.Fragment,{children:r}):v.jsx(Yw,{to:"/Login"})};function EM(){return v.jsxs(ix,{children:[v.jsx(Qk,{}),v.jsx($k,{children:v.jsxs(Xw,{children:[v.jsx(fs,{path:"/",element:v.jsx(zk,{})}),v.jsx(fs,{path:"/juguetes",element:v.jsx(rM,{})}),v.jsx(fs,{path:"/producto/:id",element:v.jsx(tM,{})}),v.jsx(fs,{path:"/Login",element:v.jsx(Bk,{})}),v.jsx(fs,{path:"/Register",element:v.jsx(Fk,{})}),v.jsx(fs,{path:"/Admin",element:v.jsx(_M,{children:v.jsx(vM,{})})}),v.jsx(fs,{path:"*",element:v.jsx("p",{children:"Not Found"})})]})}),v.jsx(Wk,{})]})}sw.createRoot(document.getElementById("root")).render(v.jsx(z.StrictMode,{children:v.jsx(Hk,{children:v.jsx(EM,{})})}));
